<!-- http://www.w3.org/TR/telephony/ -->
<!DOCTYPE html>

<html lang="en" dir="ltr">
<head>
  <meta name="generator" content=
  "HTML Tidy for HTML5 (experimental) for Linux https://github.com/w3c/tidy-html5/tree/8025154">
  <meta charset="UTF-8">

  <title>Web Telephony API</title>
  <script>
function hideWIP(elem){
      elem.parentNode.parentNode.id = '';
      elem.parentNode.id = '';
      elem.style.display = 'none';
    }
  </script>
  <style>
/*HTML5 Tidy screws up if this line is missing.*/
    figure {
        display: block;
        width: auto;
        margin: 2em auto;
        text-align: center;
    }
    figcaption {
        display: block;
        margin-top: 1em;
    }
    #wipcontainer {
        position: fixed;
        bottom: 0px;
        margin: 0 0 0 -37.5%;
        width: 75%;
        left: 50%;
        z-index: 1000;
    }
    #wip {
        display: block;
        color: white;
        width: auto;
        border: thin solid rgb(41, 117, 171);
        border-bottom: none;
        border-radius: 0.5em 0.5em 0 0;
        box-shadow: 0 0 1em rgba(127, 127, 127, .5);
        padding: 1em 8em 1.5em 8em;
        margin: auto;
        background: rgb(26, 110, 171);
        background: linear-gradient(to bottom, rgba(26, 110, 171, .8) 0%, rgba(2, 92, 155, 1) 52%, rgba(11, 99, 161, 1) 67%, rgba(40, 122, 181, .8) 100%);
        text-align: center;
        font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;
        font-size: 0.9em;
        font-weight: 300;
    }
    @media (max-width: 50em) {
        #wipcontainer {
            margin: 0 0 0 0;
            left:0;
            width: auto;
        }
        #wip {
            padding: 1em 4em 1.5em 4em;
            width: auto;
        }
    }
    #wip strong {
        font-weight: normal;
        display: block;
        text-transform: uppercase;
        text-shadow: 0 2px 2px rgba(0, 0, 0, 0.6);
        margin: 0.25em auto 0.5em auto;
    }
    #wip a {
        color: #fff;
    }
    #wip a:hover {
        background: transparent;
    }
    #wip strong:before, #wip strong:after {
        position: relative;
        content:'\26A0';
        padding: 0 0.5em 0 0.5em;
        text-shadow: none;
        font-size: 1.25em;
    }
    #wip > input {
        position: absolute;
        right: 5px;
        top: 5px;
        background: none;
        border: none;
        color: rgb(243, 245, 246);
        font-weight: bold;
        font-size: 1.2em;
        cursor: pointer;
        border: thin solid rgba(127, 127, 127, .0);
        border-radius: .3em;
    }
    #wip > input:hover {
        border: thin outset rgba(127, 127, 127, .5);
    }
    #wip > input:active {
        border: thin inset rgba(127, 127, 127, .5);
    }
  </style>
  <style>
/*****************************************************************
    * ReSpec 3 CSS
    * Robin Berjon - http://berjon.com/
    *****************************************************************/

    /* --- INLINES --- */
    em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
    }

    h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
    h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
    }

    dfn {
    font-weight:    bold;
    }

    a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
    }

    a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
    }

    a.bibref {
    text-decoration:    none;
    }

    cite .bibref {
    font-style: normal;
    }

    code {
    color:  #ff4500;
    }

    /* --- TOC --- */
    .toc a, .tof a {
    text-decoration:    none;
    }

    a .secno, a .figno {
    color:  #000;
    }

    ul.tof, ol.tof {
    list-style: none outside none;
    }

    .caption {
    margin-top: 0.5em;
    font-style:   italic;
    }

    /* --- TABLE --- */
    table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
    }

    .simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    }

    .simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
    }

    .simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    }

    .simple tr:nth-child(even) {
    background: #f0f6ff;
    }

    /* --- DL --- */
    .section dd > p:first-child {
    margin-top: 0;
    }

    .section dd > p:last-child {
    margin-bottom: 0;
    }

    .section dd {
    margin-bottom:  1em;
    }

    .section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
    }
  </style>
  <style>
/* --- EXAMPLES --- */
    div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
    }
    div.example-title span {
    text-transform: uppercase;   
    }
    aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
    }
    div.illegal-example { color: red }
    div.illegal-example p { color: black }
    aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;    
    }

    aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
    }
    aside.example div.example div.example-title {
    color: #999;
    }
  </style>
  <style>
/* --- ISSUES/NOTES --- */
    div.issue-title, div.note-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
    }
    div.issue-title { color: #e05252; }
    div.note-title { color: #2b2; }
    div.issue-title span, div.note-title span {
    text-transform: uppercase;
    }
    div.note, div.issue {
    margin-top: 1em;
    margin-bottom: 1em;
    }
    .note > p:first-child, .issue > p:first-child { margin-top: 0 }
    .issue, .note {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    }
    div.issue, div.note {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
    }
    span.note, span.issue { padding: .1em .5em .15em; }

    .issue {
    border-color: #e05252;
    background: #fbe9e9;
    }
    .note {
    border-color: #52e052;
    background: #e9fbe9;
    }


  </style>
  <style>
/* HIGHLIGHTS */
    code.prettyprint {
    color:  inherit;
    }

    /* this from google-code-prettify */
    .pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
  </style>
  <style>
/* --- WEB IDL --- */
    pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
    }

    pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
    }

    .idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
    }

    /*.idlModule*/
    /*.idlModuleID*/
    /*.idlInterface*/
    .idlInterfaceID, .idlDictionaryID, .idlCallbackID, .idlEnumID {
    font-weight:    bold;
    color:  #005a9c;
    }
    a.idlEnumItem {
    color:  #000;
    border-bottom:  1px dotted #ccc;
    text-decoration: none;
    }

    .idlSuperclass {
    font-style: italic;
    color:  #005a9c;
    }

    /*.idlAttribute*/
    .idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
    }
    .idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
    }
    .idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
    }

    /*.idlMethod*/
    .idlMethType, .idlCallbackType {
    color:  #005a9c;
    }
    .idlMethName {
    color:  #ff4500;
    }
    .idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
    }

    /*.idlCtor*/
    .idlCtorName {
    color:  #ff4500;
    }
    .idlCtorName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
    }

    /*.idlParam*/
    .idlParamType {
    color:  #005a9c;
    }
    .idlParamName, .idlDefaultValue {
    font-style: italic;
    }

    .extAttr {
    color:  #666;
    }

    /*.idlSectionComment*/
    .idlSectionComment {
    color: gray;
    }

    /*.idlConst*/
    .idlConstType {
    color:  #005a9c;
    }
    .idlConstName {
    color:  #ff4500;
    }
    .idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
    }

    /*.idlException*/
    .idlExceptionID {
    font-weight:    bold;
    color:  #c00;
    }

    .idlTypedefID, .idlTypedefType {
    color:  #005a9c;
    }

    .idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
    }

    .excName a {
    font-family:    monospace;
    }

    .idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
    }

    .excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
    }
    .excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
    .excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

    .idlImplements a {
    font-weight:    bold;
    }

    dl.attributes, dl.methods, dl.constants, dl.constructors, dl.fields, dl.dictionary-members {
    margin-left:    2em;
    }

    .attributes dt, .methods dt, .constants dt, .constructors dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
    }

    .attributes dt code, .methods dt code, .constants dt code, .constructors dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
    }

    .attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
    }

    .attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
    }

    .methods dt code {
    background:  #d9e6f8;
    }

    .constants dt code {
    background:  #ddffd2;
    }

    .constructors dt code {
    background:  #cfc;
    }

    .attributes dd, .methods dd, .constants dd, .constructors dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
    }

    table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
    }
    table.parameters { border-bottom:  1px solid #90b8de; }
    table.exceptions { border-bottom:  1px solid #deb890; }

    .parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
    }
    .parameters th { background: #90b8de; }
    .exceptions th { background: #deb890; }

    .parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
    }

    .parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
    }

    .parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
    }

    .parameters td.prmType {
    width:  120px;
    }

    table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
    }
  </style>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel=
  "stylesheet">
  <!--[if lt IE 9]><script src='http://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]-->
</head>

<body class="h-entry">
  <div class="head">
    <p><a href="http://www.w3.org/"><img alt="W3C" width="72"
    height="48" src="http://www.w3.org/Icons/w3c_home"></a></p>

    <h1 class="title p-name" id="title">Web Telephony API</h1>

    <h2 id="date"><abbr title=
    "World Wide Web Consortium">W3C</abbr> First Public Working Draft 20 June
    2013</h2>

    <dl>
      <dt>This version:</dt>

      <dd>
        <a class="u-url" href=
        "http://www.w3.org/TR/2013/WD-telephony-20130620/">http://www.w3.org/TR/2013/WD-telephony-20130620/</a>
      </dd>

      <dt>Latest published version:</dt>

      <dd>
        <a href=
        "http://www.w3.org/TR/telephony/">http://www.w3.org/TR/telephony/</a>
      </dd>

      <dt>Latest editor's draft:</dt>

      <dd>
        <a href=
        "http://www.w3.org/2012/sysapps/telephony/">http://www.w3.org/2012/sysapps/telephony/</a>
      </dd>

      <dt>Editors:</dt>

      <dd class="p-author h-card vcard">
        <span class="p-name fn">Marcos Cáceres</span>, <a class=
        "p-org org h-org h-card" href=
        "http://www.tid.es/">Mozilla</a>
      </dd>

      <dd class="p-author h-card vcard">
        <span class="p-name fn">José M. Cantera</span>, <a class=
        "p-org org h-org h-card" href=
        "http://www.tid.es/">Telefónica</a>
      </dd>

      <dd class="p-author h-card vcard">
        <span class="p-name fn">Eduardo Fullea</span>, <a class=
        "p-org org h-org h-card" href=
        "http://www.tid.es/">Telefónica</a>
      </dd>

      <dd class="p-author h-card vcard">
        <span class="p-name fn">Zoltan Kis</span>, <a class=
        "p-org org h-org h-card" href=
        "http://www.intel.com/">Intel</a>
      </dd>

      <dt>Repository:</dt>

      <dd>
        <a href="https://github.com/sysapps/telephony">We are on
        Github.</a>
      </dd>

      <dd>
        <a href="https://github.com/sysapps/telephony/issues">File
        a bug.</a>
      </dd>

      <dd>
        <a href=
        "https://github.com/sysapps/telephony/commits/gh-pages">Commit
        history.</a>
      </dd>
    </dl>

    <p class="copyright"><a href=
    "http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    © 2013 <a href="http://www.w3.org/"><abbr title=
    "World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
    (<a href="http://www.csail.mit.edu/"><abbr title=
    "Massachusetts Institute of Technology">MIT</abbr></a>,
    <a href="http://www.ercim.eu/"><abbr title=
    "European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>, <a href=
    "http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved.
    <abbr title="World Wide Web Consortium">W3C</abbr> <a href=
    "http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">
    liability</a>, <a href=
    "http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a href=
    "http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
    <hr>
  </div>
  <!-- - - - - - - - - - - - - - - Abstract - - - - - - - - - - - - - - - - - -->

  <section class="introductory" id="abstract">
    <h2>Abstract</h2>

    <p>This specification defines an API to manage telephone calls.
    A typical use case of the <cite>Web Telephony API</cite> is the
    implementation of a 'Dialer' application supporting multiparty
    calls and multiple telephony services. A minimal structure for
    call history items is also defined.</p>
  </section>

  <section id="sotd" class="introductory">
    <h2>Status of This Document</h2>

    <p><em>This section describes the status of this document at
    the time of its publication. Other documents may supersede this
    document. A list of current <abbr title=
    "World Wide Web Consortium">W3C</abbr> publications and the
    latest revision of this technical report can be found in the
    <a href="http://www.w3.org/TR/"><abbr title=
    "World Wide Web Consortium">W3C</abbr> technical reports
    index</a> at http://www.w3.org/TR/.</em></p>

    <p>This document defines a System Level API for access to
    telephony services, such as support for dialing phone numbers,
    including emergency services, multiparty (conference) calls,
    the means to send DTMF tone sequences, and to handle a variety
    of events signalling changes in the call state.</p>

    <p>This document was published by the <a href=
    "http://www.w3.org/2012/sysapps/">System Applications Working
    Group</a> as a First Public Working Draft. This document is
    intended to become a <abbr title=
    "World Wide Web Consortium">W3C</abbr> Recommendation. If you
    wish to make comments regarding this document, please send them
    to <a href=
    "mailto:public-sysapps@w3.org">public-sysapps@w3.org</a>
    (<a href=
    "mailto:public-sysapps-request@w3.org?subject=subscribe">subscribe</a>,
    <a href=
    "http://lists.w3.org/Archives/Public/public-sysapps/">archives</a>).
    All feedback is welcome.</p>

    <p>Publication as a First Public Working Draft does not imply
    endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr>
    Membership. This is a draft document and may be updated,
    replaced or obsoleted by other documents at any time. It is
    inappropriate to cite this document as other than work in
    progress.</p>

    <p>Implementors should be aware that this specification is not
    stable. <strong>Implementors who are not taking part in the
    discussions are likely to find the specification changing out
    from under them in incompatible ways.</strong> Vendors
    interested in implementing this specification before it
    eventually reaches the Candidate Recommendation stage should
    join the aforementioned mailing lists and take part in the
    discussions.</p>

    <div id="wipcontainer">
      <p class="stability" id="wip"><strong>This is a work in
      progress!</strong> This specification is for review purposes
      only and not for implementation! For the latest updates,
      possibly including important bug fixes, please look at the
      <a href="http://www.w3.org/2012/sysapps/telephony/">editor's
      draft</a> instead. If you find any bugs, typos, or issues
      please <a href=
      "https://github.com/sysapps/telephony/issues">file a bug</a>!
      <input onclick="hideWIP(this)" value="×" type="button"></p>
    </div>

    <p>This document was produced by a group operating under the
    <a href=
    "http://www.w3.org/Consortium/Patent-Policy-20040205/">5
    February 2004 <abbr title=
    "World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
    <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
    <a href="http://www.w3.org/2004/01/pp-impl/58119/status" rel=
    "disclosure">public list of any patent disclosures</a> made in
    connection with the deliverables of the group; that page also
    includes instructions for disclosing a patent. An individual
    who has actual knowledge of a patent which the individual
    believes contains <a href=
    "http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">
    Essential Claim(s)</a> must disclose the information in
    accordance with <a href=
    "http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">
    section 6 of the <abbr title=
    "World Wide Web Consortium">W3C</abbr> Patent Policy</a>.</p>
  </section>

    <section id="toc">
      <h2 class="introductory">
        Table of Contents
      </h2>
      <ul class="toc">
        <li class="tocline">
          <a class="tocxref" href="#introduction"><span class="secno">1.</span>
          Introduction</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#conformance"><span class="secno">2.</span>
          Conformance</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#terminology"><span class="secno">3.</span>
          Terminology</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href=
          "#security-and-privacy-considerations"><span class="secno">4.</span>
          Security and privacy considerations</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href=
          "#extensions-to-navigator-object"><span class="secno">5.</span>
          Extensions to <code>Navigator</code> object</a>
          <ul class="toc">
            <li class="tocline">
              <a class="tocxref" href="#attributes"><span class=
              "secno">5.1</span> Attributes</a>
            </li>
          </ul>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#telephonymanager-interface"><span class=
          "secno">6.</span> <span class=
          "formerLink"><code>TelephonyManager</code></span> Interface</a>
          <ul class="toc">
            <li class="tocline">
              <a class="tocxref" href="#attributes-1"><span class=
              "secno">6.1</span> Attributes</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#methods"><span class="secno">6.2</span>
              Methods</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#event-handlers"><span class=
              "secno">6.3</span> Event handlers</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#telephonymanager-steps"><span class=
              "secno">6.4</span> Steps</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#dialparams-dictionary"><span class=
              "secno">6.5</span> <span class=
              "formerLink"><code>DialParams</code></span> Dictionary</a>
              <ul class="toc">
                <li class="tocline">
                  <a class="tocxref" href=
                  "#dictionary-dialparams-members"><span class=
                  "secno">6.5.1</span> Dictionary <span class=
                  "formerLink"><code>DialParams</code></span> Members</a>
                </li>
              </ul>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#toneparams-dictionary"><span class=
              "secno">6.6</span> <span class=
              "formerLink"><code>ToneParams</code></span> Dictionary</a>
              <ul class="toc">
                <li class="tocline">
                  <a class="tocxref" href=
                  "#dictionary-toneparams-members"><span class=
                  "secno">6.6.1</span> Dictionary <span class=
                  "formerLink"><code>ToneParams</code></span> Members</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#telephonyerrorevent-interface"><span class=
          "secno">7.</span> <span class=
          "formerLink"><code>TelephonyErrorEvent</code></span> Interface</a>
          <ul class="toc">
            <li class="tocline">
              <a class="tocxref" href="#attributes-2"><span class=
              "secno">7.1</span> Attributes</a>
            </li>
          </ul>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#telephonyevent-interface"><span class=
          "secno">8.</span> <span class=
          "formerLink"><code>TelephonyEvent</code></span> Interface</a>
          <ul class="toc">
            <li class="tocline">
              <a class="tocxref" href="#attributes-3"><span class=
              "secno">8.1</span> Attributes</a>
            </li>
          </ul>
        </li>
        <li class="tocline">
          <a class="tocxref" href=
          "#telephonyserviceevent-interface"><span class="secno">9.</span>
          <span class="formerLink"><code>TelephonyServiceEvent</code></span>
          Interface</a>
          <ul class="toc">
            <li class="tocline">
              <a class="tocxref" href="#attributes-4"><span class=
              "secno">9.1</span> Attributes</a>
            </li>
          </ul>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#callhandler-interface"><span class=
          "secno">10.</span> <span class=
          "formerLink"><code>CallHandler</code></span> interface</a>
          <ul class="toc">
            <li class="tocline">
              <a class="tocxref" href="#attributes-5"><span class=
              "secno">10.1</span> Attributes</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#methods-1"><span class=
              "secno">10.2</span> Methods</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#callhandler-eventhandlers"><span class=
              "secno">10.3</span> Event handlers</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#telephonycall-interface"><span class=
              "secno">10.4</span> <span class=
              "formerLink"><code>TelephonyCall</code></span> Interface</a>
              <ul class="toc">
                <li class="tocline">
                  <a class="tocxref" href="#attributes-6"><span class=
                  "secno">10.4.1</span> Attributes</a>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#methods-2"><span class=
                  "secno">10.4.2</span> Methods</a>
                </li>
                <li class="tocline">
                  <a class="tocxref" href=
                  "#telephony-eventhandlers"><span class="secno">10.4.3</span>
                  Event handlers</a>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#telephony-steps"><span class=
                  "secno">10.4.4</span> Steps</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#conferencecall-interface"><span class=
          "secno">11.</span> <span class=
          "formerLink"><code>ConferenceCall</code></span> Interface</a>
          <ul class="toc">
            <li class="tocline">
              <a class="tocxref" href="#attributes-7"><span class=
              "secno">11.1</span> Attributes</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#methods-3"><span class=
              "secno">11.2</span> Methods</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#multiparty-steps"><span class=
              "secno">11.3</span> Steps</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#conference-eventhandlers"><span class=
              "secno">11.4</span> Event handlers</a>
            </li>
          </ul>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#callstate-enum"><span class=
          "secno">12.</span> <span class=
          "formerLink"><code>CallState</code></span> enum</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#callhistoryentry-interface"><span class=
          "secno">13.</span> <span class=
          "formerLink"><code>CallHistoryEntry</code></span> Interface</a>
          <ul class="toc">
            <li class="tocline">
              <a class="tocxref" href="#attributes-8"><span class=
              "secno">13.1</span> Attributes</a>
            </li>
          </ul>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#disconnectreason-enum"><span class=
          "secno">14.</span> <span class=
          "formerLink"><code>DisconnectReason</code></span> enum</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#calldirection-enum"><span class=
          "secno">15.</span> <span class=
          "formerLink"><code>CallDirection</code></span> enum</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#call-typedef"><span class=
          "secno">16.</span> <code>Call</code> typedef</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#error-steps"><span class="secno">17.</span>
          Error Steps</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#acknowledgements"><span class=
          "secno">18.</span> Acknowledgements</a>
        </li>
        <li class="tocline">
          <a class="tocxref" href="#references"><span class="secno">A.</span>
          References</a>
          <ul class="toc">
            <li class="tocline">
              <a class="tocxref" href="#normative-references"><span class=
              "secno">A.1</span> Normative references</a>
            </li>
            <li class="tocline">
              <a class="tocxref" href="#informative-references"><span class=
              "secno">A.2</span> Informative references</a>
            </li>
          </ul>
        </li>
      </ul>
    </section>
    <!-- - - - - - - - - - -  Status of this document - - - - - - - - - - - - - -->
    <!-- - - - - - - - - - - - - -  Introduction - - - - - - - - - - - - - - -  -->
    <section id="introduction" class="informative">
      <!--OddPage-->
      <h2>
        <span class="secno">1.</span> Introduction
      </h2>
      <p>
        <em>This section is non-normative.</em>
      </p>
      <p>
        The <cite>Web Telephony API</cite> allows applications to manage
        interaction with telephony call signaling, but does not handle audio
        channels management.
      </p>
      <p>
        An example of making a telephony call is provided below:
      </p>
      <div class="example">
        <div class="example-title">
          <span>Example 1</span>
        </div>
        <pre class="example highlight prettyprint">
<span class="kwd">var</span><span class="pln"> telCall </span><span class=
"pun">=</span><span class="pln"> navigator</span><span class=
"pun">.</span><span class="pln">telephony</span><span class=
"pun">.</span><span class="pln">dial</span><span class=
"pun">(</span><span class="str">'+1234567890'</span><span class=
"pun">);</span><span class="pln">

telCall</span><span class="pun">.</span><span class=
"pln">onactive </span><span class="pun">=</span><span class=
"pln"> </span><span class="kwd">function</span><span class=
"pun">(</span><span class="pln">e</span><span class="pun">)</span><span class=
"pln"> </span><span class="pun">{</span><span class="pln">
    window</span><span class="pun">.</span><span class=
"pln">console</span><span class="pun">.</span><span class=
"pln">log</span><span class="pun">(</span><span class=
"str">'Connected!'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

telCall</span><span class="pun">.</span><span class=
"pln">ondisconnected </span><span class="pun">=</span><span class=
"pln"> </span><span class="kwd">function</span><span class=
"pun">(</span><span class="pln">e</span><span class="pun">)</span><span class=
"pln"> </span><span class="pun">{</span><span class="pln">
    window</span><span class="pun">.</span><span class=
"pln">console</span><span class="pun">.</span><span class=
"pln">log</span><span class="pun">(</span><span class=
"str">'Disconnected!'</span><span class="pun">);</span><span class="pln">
    </span><span class="com">// update call history</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

telCall</span><span class="pun">.</span><span class=
"pln">onerror </span><span class="pun">=</span><span class=
"pln"> </span><span class="kwd">function</span><span class=
"pun">(</span><span class="pln">e</span><span class="pun">)</span><span class=
"pln"> </span><span class="pun">{</span><span class="pln">
    window</span><span class="pun">.</span><span class=
"pln">console</span><span class="pun">.</span><span class=
"pln">error</span><span class="pun">(</span><span class=
"pln">e</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span>
</pre>
      </div>
      <p>
        The use cases for this specification are collected in the <a href=
        "http://www.w3.org/wiki/System_Applications_WG:_Telephony_API">wiki
        page</a> of this API.
      </p>
      <p>
        The following specifications have been used for designing the <cite>Web
        Telephony API</cite>: for <abbr title=
        "Global System for Mobile Communications">GSM</abbr> the
        [<cite><a href="#bib-GSM-CALL" class="bibref">GSM-CALL</a></cite>]
        suite, for IMS/SIP the [<cite><a href="#bib-IMS" class=
        "bibref">IMS</a></cite>] suite, for XMPP the [<cite><a href=
        "#bib-JINGLE" class="bibref">JINGLE</a></cite>] specification. The same
        API would work also for SIP and XMPP calls, except multiparty call
        handling, which is modeled after the cellular multiparty calls.
      </p>
      <p>
        Future versions of this specification may add SIP and XMPP conference
        support.
      </p>
    </section>
    <!-- - - - - - - - - - - - - - Conformance - - - - - - - - - - - - - - - -  -->
    <section id="conformance">
      <!--OddPage-->
      <h2>
        <span class="secno">2.</span> Conformance
      </h2>
      <p>
        As well as sections marked as non-normative, all authoring guidelines,
        diagrams, examples, and notes in this specification are non-normative.
        Everything else in this specification is normative.
      </p>
      <p>
        The key words <em title="MUST" class="rfc2119">MUST</em>, <em title=
        "MUST NOT" class="rfc2119">MUST NOT</em>, <em title="REQUIRED" class=
        "rfc2119">REQUIRED</em>, <em title="SHOULD" class=
        "rfc2119">SHOULD</em>, <em title="SHOULD NOT" class="rfc2119">SHOULD
        NOT</em>, <em title="RECOMMENDED" class="rfc2119">RECOMMENDED</em>,
        <em title="MAY" class="rfc2119">MAY</em>, and <em title="OPTIONAL"
        class="rfc2119">OPTIONAL</em> in this specification are to be
        interpreted as described in [<cite><a href="#bib-RFC2119" class=
        "bibref">RFC2119</a></cite>].
      </p>
      <p>
        This specification defines conformance criteria that apply to a single
        product: the <dfn id="ua">user agent</dfn> that implements the
        interfaces that it contains.
      </p>
      <p>
        Implementations that use ECMAScript to implement the APIs defined in
        this specification <em title="MUST" class="rfc2119">MUST</em> implement
        them in a manner consistent with the ECMAScript Bindings defined in the
        Web IDL specification [<cite><a href="#bib-WEBIDL" class=
        "bibref">WEBIDL</a></cite>], as this specification uses that
        specification and terminology.
      </p>
    </section>
    <!-- - - - - - - - - - - - - -  Terminology - - - - - - - - - - - - - - - - -->
    <section id="terminology">
      <!--OddPage-->
      <h2>
        <span class="secno">3.</span> Terminology
      </h2>
      <p>
        The <dfn id="dfn-eventhandler"><code><a href=
        "http://dev.w3.org/html5/spec/webappapis.html#eventhandler">EventHandler</a></code></dfn>
        interface represents a callback used for <a href=
        "http://www.w3.org/html/wg/drafts/html/master/webappapis.html#event-handlers">
        event handlers</a> as defined in [<cite><a href="#bib-HTML5" class=
        "bibref">HTML5</a></cite>].
      </p>
      <p>
        The concepts <dfn id="dfn-queue-a-task"><a href=
        "http://dev.w3.org/html5/spec/webappapis.html#queue-a-task">queue a
        task</a></dfn> and <dfn id="dfn-fire-a-simple-event"><a href=
        "http://dev.w3.org/html5/spec/webappapis.html#fire-a-simple-event">fire
        a simple event</a></dfn> are defined in [<cite><a href="#bib-HTML5"
        class="bibref">HTML5</a></cite>]. The <a href=
        "http://www.whatwg.org/specs/web-apps/current-work/#task-source">task
        source</a> for all <a href=
        "http://www.whatwg.org/specs/web-apps/current-work/#queue-a-task">tasks
        queued</a> in this specification is the <dfn id=
        "dfn-telephony-task-source">Telephony task source</dfn>.
      </p>
      <p>
        The terms <dfn id="dfn-event-handler"><a href=
        "http://dev.w3.org/html5/spec/webappapis.html#event-handlers">event
        handler</a></dfn> and <dfn id="dfn-event-handler-event-types"><a href=
        "http://dev.w3.org/html5/spec/webappapis.html#event-handler-event-type">
        event handler event types</a></dfn> are defined in [<cite><a href=
        "#bib-HTML5" class="bibref">HTML5</a></cite>].
      </p>
      <p>
        The <dfn id="dfn-promise"><a href=
        "http://dom.spec.whatwg.org/#promise"><code>Promise</code></a></dfn>
        interface is defined in [<cite><a href="#bib-DOM4" class=
        "bibref">DOM4</a></cite>].
      </p>
      <p>
        An <dfn id="dfn-active-call">active call</dfn> is a <a class="idlType"
        href="#idl-def-TelephonyCall"><code>TelephonyCall</code></a> in the
        <a class="internalDFN" href="#call-state-active">active</a> state
        representing a connected call which is bound to the media input and
        output devices (e.g. microphone, speaker, tone generator). Note that a
        call on <a>hold</a> is also active from a call signaling point of view,
        but not bound to media input and output devices.
      </p>
      <p>
        A <dfn id="dfn-telephony-service" title="telephony service">telephony
        service</dfn> exposes telephony functionality associated to a
        subscriber identity registered with a telephony service provider. For
        example, in cellular telephony a telephony service is associated to a
        SIM card (Subscriber Identity Module). When making a call, the identity
        (e.g. SIM card, associated to an Integrated Circuit Card Identifier,
        ICC-ID) is always provided, either explicitly in the function call, or
        by using a default telephony service in the implementation. The device
        can receive phone calls from any active telephony service, even
        simultaneously, in which case the user agent arbitrates the calls
        either by a policy, or by the user by choosing which call to accept. A
        telephony service can use different protocols for telephony signaling
        and media (e.g. <abbr title=
        "Global System for Mobile Communications">GSM</abbr>, CDMA, VoLTE,
        etc.) with the same identity. Since call states can differ depending on
        the protocol, the telephony call objects contain information which
        identifies the service and the protocol used for making the call.
      </p>
      <p>
        A <dfn id="dfn-default-telephony-service" title=
        "default telephony service">default telephony service</dfn> is the
        <a class="internalDFN" href="#dfn-telephony-service">telephony
        service</a> that is set as default for telephony operations by the
        implementation.
      </p>
      <p>
        A <dfn id="dfn-telephony-service-id" title=
        "telephony service id">telephony service id</dfn> uniquely identifies a
        <a class="internalDFN" href="#dfn-telephony-service">telephony
        service</a> together with a user identity in the system. For SIM cards,
        this can include the ICC-ID as service identifier. However, the MSISDN
        <em title="MUST NOT" class="rfc2119">MUST NOT</em> be used as telephony
        service id.
      </p>
      <p>
        A <dfn id="dfn-multiparty-call" title="multiparty call">multiparty
        call</dfn> (also referred to as <i>conference call</i>) is a telephony
        call with multiple remote party participants, which is controlled as a
        single call, i.e. can be put on hold, activated, disconnected with all
        participants. Other calls can be joined with a multiparty call. This
        version supports <abbr title=
        "Global System for Mobile Communications">GSM</abbr> multiparty calls
        and CDMA 3-way calls.
      </p>
      <p>
        A <dfn id="dfn-conference-id" title="conference id">conference id</dfn>
        uniquely identifies a <a class="internalDFN" href=
        "#dfn-multiparty-call">multiparty call</a> in the system and in call
        history.
      </p>
      <p>
        A <dfn id="dfn-remote-party-id" title="remote party id">remote party
        id</dfn> uniquely identifies a participant (a.k.a. remote party) in a
        telephony call in the given <a class="internalDFN" href=
        "#dfn-telephony-service">telephony service</a>, such as a phone number.
      </p>
    </section>
    <!-- - - - - - - - - - - - Security and privacy - - - - - - - - - - - - - - -->
    <section id="security-and-privacy-considerations">
      <!--OddPage-->
      <h2>
        <span class="secno">4.</span> Security and privacy considerations
      </h2>
      <p>
        This API must be only exposed to trusted content.
      </p>
      <div class="issue">
        <div aria-level="3" class="issue-title" role="heading">
          <span>Issue 1</span>
        </div>
        <div class="">
          <p>
            To be written. See <a href=
            "https://github.com/sysapps/telephony/issues/26">bug 26</a>.
          </p>
        </div>
      </div>
    </section>
    <!-- - - - - - - - - - - Extended interface Navigator - - - - - - - - - - - -->
    <section id="extensions-to-navigator-object">
      <!--OddPage-->
      <h2>
        <span class="secno">5.</span> Extensions to <code>Navigator</code>
        object
      </h2>
      <p>
        The <a class="idlType" href=
        "#idl-def-TelephonyManager"><code>TelephonyManager</code></a> interface
        is exposed on [<cite><a href="#bib-HTML" class=
        "bibref">HTML</a></cite>]'s <code>Navigator</code> object.
      </p>
      <pre class="idl">
<span class="idlInterface" id=
"idl-def-Navigator">partial interface <span class="idlInterfaceID">Navigator</span> {
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a class="idlType" href=
"#idl-def-TelephonyManager"><code>TelephonyManager</code></a></span> <span class="idlAttrName"><a href="#widl-Navigator-telephony">telephony</a></span>;</span>
};</span>
</pre>
      <section id="attributes">
        <h3>
          <span class="secno">5.1</span> Attributes
        </h3>
        <dl class="attributes">
          <dt id="widl-Navigator-telephony">
            <code>telephony</code> of type <span class="idlAttrType"><a class=
            "idlType" href=
            "#idl-def-TelephonyManager"><code>TelephonyManager</code></a></span>,
            readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="idlType" href=
            "#idl-def-TelephonyManager"><code>TelephonyManager</code></a>
            object, which provides the ability to interface with the <a class=
            "internalDFN" href="#dfn-telephony-service">telephony service</a>
            of the device.
          </dd>
        </dl>
      </section>
    </section>
    <!-- - - - - - - - - - - - Interface TelephonyManager - - - - - - - - - - - -->
    <section id="telephonymanager-interface">
      <!--OddPage-->
      <h2>
        <span class="secno">6.</span> <a class="idlType" href=
        "#idl-def-TelephonyManager"><code>TelephonyManager</code></a> Interface
      </h2>
      <p>
        The <a class="idlType" href=
        "#idl-def-TelephonyManager"><code>TelephonyManager</code></a> interface
        provides access to telephony functionality, and manages the lifecycle
        of the <a class="idlType" href="#idl-def-Call"><code>Call</code></a>
        objects.
      </p>
      <pre class="idl">
<span class="idlInterface" id="idl-def-TelephonyManager">interface <span class=
"idlInterfaceID">TelephonyManager</span> : <span class=
"idlSuperclass"><a>EventTarget</a></span> {
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a class="idlType" href=
"#idl-def-Call"><code>Call</code></a>?</span>        <span class=
"idlAttrName"><a href=
"#widl-TelephonyManager-activeCall">activeCall</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a class="idlType" href=
"#idl-def-Call"><code>Call</code></a>[]</span>       <span class=
"idlAttrName"><a href="#widl-TelephonyManager-calls">calls</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a>[]</span>  <span class="idlAttrName"><a href=
"#widl-TelephonyManager-emergencyNumbers">emergencyNumbers</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a>[]</span>  <span class="idlAttrName"><a href=
"#widl-TelephonyManager-serviceIds">serviceIds</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a></span>    <span class="idlAttrName"><a href=
"#widl-TelephonyManager-defaultServiceId">defaultServiceId</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="internalDFN"
href="#dfn-promise">Promise</a></span>       <span class="idlMethName"><a href=
"#widl-TelephonyManager-changeDefaultService-Promise-DOMString-serviceID">changeDefaultService</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">serviceID</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href=
"#idl-def-TelephonyCall"><code>TelephonyCall</code></a></span> <span class=
"idlMethName"><a href=
"#widl-TelephonyManager-dial-TelephonyCall-DOMString-remoteParty-DialParams-params">dial</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">remoteParty</span></span>, <span class="idlParam">optional <span class="idlParamType"><a class="idlType"
href="#idl-def-DialParams"><code>DialParams</code></a></span> <span class=
"idlParamName">params</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="internalDFN"
href="#dfn-promise">Promise</a></span>       <span class="idlMethName"><a href=
"#widl-TelephonyManager-sendTones-Promise-DOMString-tones-ToneParams-params">sendTones</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">tones</span></span>, <span class="idlParam">optional <span class="idlParamType"><a class="idlType"
href="#idl-def-ToneParams"><code>ToneParams</code></a></span> <span class=
"idlParamName">params</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="internalDFN"
href="#dfn-promise">Promise</a></span>       <span class="idlMethName"><a href=
"#widl-TelephonyManager-startTone-Promise-DOMString-tone-ToneParams-params">startTone</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">tone</span></span>, <span class="idlParam">optional <span class="idlParamType"><a class="idlType"
href="#idl-def-ToneParams"><code>ToneParams</code></a></span> <span class=
"idlParamName">params</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="internalDFN"
href="#dfn-promise">Promise</a></span>       <span class="idlMethName"><a href=
"#widl-TelephonyManager-stopTone-Promise-DOMString-serviceId">stopTone</a></span> (<span class="idlParam">optional <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">serviceId</span></span>);</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyManager-onincoming">onincoming</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyManager-oncallschanged">oncallschanged</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyManager-onserviceadded">onserviceadded</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyManager-onserviceremoved">onserviceremoved</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyManager-onservicechanged">onservicechanged</a></span>;</span>
};</span>
</pre>
      <section id="attributes-1">
        <h3>
          <span class="secno">6.1</span> Attributes
        </h3>
        <dl class="attributes">
          <dt id="widl-TelephonyManager-activeCall">
            <code>activeCall</code> of type <span class="idlAttrType"><a class=
            "idlType" href="#idl-def-Call"><code>Call</code></a></span>,
            readonly , nullable
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return a <a class="idlType" href=
            "#idl-def-Call"><code>Call</code></a> object representing the
            <a class="internalDFN" href="#dfn-active-call">active call</a>. If
            there is no active <a class="idlType" href=
            "#idl-def-Call"><code>Call</code></a> return <code>null</code>.
          </dd>
          <dt id="widl-TelephonyManager-calls">
            <code>calls</code> of type array of <span class=
            "idlAttrType"><a class="idlType" href=
            "#idl-def-Call"><code>Call</code></a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return an array, which can be empty, of
            <a class="idlType" href="#idl-def-Call"><code>Call</code></a>
            objects managed by this objects. Note that
            <code>TelephonyCall</code> objects belonging to a multiparty call
            are managed by the corresponding <a class="idlType" href=
            "#idl-def-ConferenceCall"><code>ConferenceCall</code></a> object
            and <em title="MUST NOT" class="rfc2119">MUST NOT</em> be also
            present in this array.
          </dd>
          <dt id="widl-TelephonyManager-defaultServiceId">
            <code>defaultServiceId</code> of type <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a>DOMString</a> that represents the
            id of the <a class="internalDFN" href=
            "#dfn-default-telephony-service">default telephony service</a>.
          </dd>
          <dt id="widl-TelephonyManager-emergencyNumbers">
            <code>emergencyNumbers</code> of type array of <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return an array, which can be empty, of
            telephone numbers for the emergency services in the current
            geographical area.
          </dd>
          <dt id="widl-TelephonyManager-oncallschanged">
            <code>oncallschanged</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Whenever a call is added to or removed from the <code>calls</code>
            array, the <a class="internalDFN" href="#ua">user agent</a>
            <em title="MUST" class="rfc2119">MUST</em> <a class="internalDFN"
            href="#dfn-queue-a-task">queue a task</a> to <a class="internalDFN"
            href="#dfn-fire-a-simple-event">fire a simple event</a> named
            <code>callschanged</code>.
          </dd>
          <dt id="widl-TelephonyManager-onincoming">
            <code>onincoming</code> of type <span class="idlAttrType"><a class=
            "internalDFN" href="#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Whenever there is a new call in <code>incoming</code> or
            <code>waiting</code> state, the <a class="internalDFN" href=
            "#ua">user agent</a> <em title="MUST" class="rfc2119">MUST</em>
            <a class="internalDFN" href="#dfn-queue-a-task">queue a task</a> to
            fire an event named <code>incoming</code> of type <a class=
            "idlType" href=
            "#idl-def-TelephonyEvent"><code>TelephonyEvent</code></a>. The
            <code>call</code> property of the event <em title="MUST" class=
            "rfc2119">MUST</em> be set to the <a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> object
            controlling the incoming call.
          </dd>
          <dt id="widl-TelephonyManager-onserviceadded">
            <code>onserviceadded</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            The <code>serviceadded</code> event of type <a class="idlType"
            href="#idl-def-TelephonyServiceEvent"><code>TelephonyServiceEvent</code></a>
            <em title="MUST" class="rfc2119">MUST</em> be fired whenever a new
            <a class="internalDFN" href="#dfn-telephony-service">telephony
            service</a> is enabled in the system. The <code>serviceId</code>
            property of the event <em title="MUST" class="rfc2119">MUST</em>
            contain the <a class="internalDFN" href=
            "#dfn-telephony-service-id">telephony service id</a> of the new
            service. Note that compliant implementations may not be reporting
            such events when they occur (e.g. OTA SIM update or hot-swappable
            SIM cards).
          </dd>
          <dt id="widl-TelephonyManager-onservicechanged">
            <code>onservicechanged</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Handles a change of <a class="internalDFN" href=
            "#dfn-default-telephony-service">default telephony service</a> from
            one to another.
          </dd>
          <dt id="widl-TelephonyManager-onserviceremoved">
            <code>onserviceremoved</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            The <code>serviceremoved</code> event of type <a class="idlType"
            href=
            "#idl-def-TelephonyServiceEvent"><code>TelephonyServiceEvent</code></a>
            <em title="MUST" class="rfc2119">MUST</em> be fired when an
            existing <a class="internalDFN" href=
            "#dfn-telephony-service">telephony service</a> is disabled in the
            system. The <code>serviceId</code> property of the event <em title=
            "MUST" class="rfc2119">MUST</em> contain the <a class="internalDFN"
            href="#dfn-telephony-service-id">telephony service id</a> of the
            disabled service.
          </dd>
          <dt id="widl-TelephonyManager-serviceIds">
            <code>serviceIds</code> of type array of <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return an array, which can be empty, of
            <a class="internalDFN" href="#dfn-telephony-service-id">telephony
            service id</a>'s.
          </dd>
        </dl>
      </section>
      <section id="methods">
        <h3>
          <span class="secno">6.2</span> Methods
        </h3>
        <dl class="methods">
          <dt id=
          "widl-TelephonyManager-changeDefaultService-Promise-DOMString-serviceID">
          <code>changeDefaultService</code>
          </dt>
          <dd>
            Provides a means to change the <a class="internalDFN" href=
            "#dfn-default-telephony-service">default telephony service</a> used
            by the user agent. When invoked, the user agent runs the <a class=
            "internalDFN" href="#dfn-steps-to-update-the-default-service">steps
            to update the default service</a>.
            <table class="parameters">
              <tr>
                <th>
                  Parameter
                </th>
                <th>
                  Type
                </th>
                <th>
                  Nullable
                </th>
                <th>
                  Optional
                </th>
                <th>
                  Description
                </th>
              </tr>
              <tr>
                <td class="prmName">
                  serviceID
                </td>
                <td class="prmType">
                  <code><a>DOMString</a></code>
                </td>
                <td class="prmNullFalse">
                  ✘
                </td>
                <td class="prmOptFalse">
                  ✘
                </td>
                <td class="prmDesc">
                  A <a>service id</a> for a <a class="internalDFN" href=
                  "#dfn-telephony-service">telephony service</a> known to the
                  user agent.
                </td>
              </tr>
            </table>
            <div>
              <em>Return type:</em> <code><a class="internalDFN" href=
              "#dfn-promise">Promise</a></code>
            </div>
          </dd>
          <dt id=
          "widl-TelephonyManager-dial-TelephonyCall-DOMString-remoteParty-DialParams-params">
          <code>dial</code>
          </dt>
          <dd>
            Initiates a new telephony call. Returns a <a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> object,
            which will manage the asynchronous call signaling events.
            <table class="parameters">
              <tr>
                <th>
                  Parameter
                </th>
                <th>
                  Type
                </th>
                <th>
                  Nullable
                </th>
                <th>
                  Optional
                </th>
                <th>
                  Description
                </th>
              </tr>
              <tr>
                <td class="prmName">
                  remoteParty
                </td>
                <td class="prmType">
                  <code><a>DOMString</a></code>
                </td>
                <td class="prmNullFalse">
                  ✘
                </td>
                <td class="prmOptFalse">
                  ✘
                </td>
                <td class="prmDesc">
                  Represents the destination number of the call.
                </td>
              </tr>
              <tr>
                <td class="prmName">
                  params
                </td>
                <td class="prmType">
                  <code><a class="idlType" href=
                  "#idl-def-DialParams"><code>DialParams</code></a></code>
                </td>
                <td class="prmNullFalse">
                  ✘
                </td>
                <td class="prmOptTrue">
                  ✔
                </td>
                <td class="prmDesc">
                  If set, represents the optional parameters of the call,
                  including the telephony service to be used, and whether
                  caller ID is hidden
                </td>
              </tr>
            </table>
            <div>
              <em>Return type:</em> <code><a class="idlType" href=
              "#idl-def-TelephonyCall"><code>TelephonyCall</code></a></code>
            </div>
          </dd>
          <dt id=
          "widl-TelephonyManager-sendTones-Promise-DOMString-tones-ToneParams-params">
          <code>sendTones</code>
          </dt>
          <dd>
            This method asynchronously emits a [<cite><a href="#bib-DTMF"
            class="bibref">DTMF</a></cite>] tone sequence with the platform
            default or specified duration and delay, in the platform default or
            the specified telephony service. A <code>Promise</code> object will
            be returned in order to notify the result of the request.
            <table class="parameters">
              <tr>
                <th>
                  Parameter
                </th>
                <th>
                  Type
                </th>
                <th>
                  Nullable
                </th>
                <th>
                  Optional
                </th>
                <th>
                  Description
                </th>
              </tr>
              <tr>
                <td class="prmName">
                  tones
                </td>
                <td class="prmType">
                  <code><a>DOMString</a></code>
                </td>
                <td class="prmNullFalse">
                  ✘
                </td>
                <td class="prmOptFalse">
                  ✘
                </td>
                <td class="prmDesc">
                  Represents the sequence of [<cite><a href="#bib-DTMF" class=
                  "bibref">DTMF</a></cite>] tones to be emitted. Its value can
                  be any sequence of the following characters (0-9; A-D; *; #).
                </td>
              </tr>
              <tr>
                <td class="prmName">
                  params
                </td>
                <td class="prmType">
                  <code><a class="idlType" href=
                  "#idl-def-ToneParams"><code>ToneParams</code></a></code>
                </td>
                <td class="prmNullFalse">
                  ✘
                </td>
                <td class="prmOptTrue">
                  ✔
                </td>
                <td class="prmDesc">
                  If set, represents the <a class="internalDFN" href=
                  "#dfn-telephony-service-id">telephony service id</a> to be
                  used, the tone duration and the delay (gap) before a tone. If
                  not set, implementations <em title="MUST" class=
                  "rfc2119">MUST</em> use default values for these.
                </td>
              </tr>
            </table>
            <div>
              <em>Return type:</em> <code><a class="internalDFN" href=
              "#dfn-promise">Promise</a></code>
            </div>
          </dd>
          <dt id=
          "widl-TelephonyManager-startTone-Promise-DOMString-tone-ToneParams-params">
          <code>startTone</code>
          </dt>
          <dd>
            This method starts emitting a [<cite><a href="#bib-DTMF" class=
            "bibref">DTMF</a></cite>] tone with the platform default or
            specified delay, in the platform default or the specified telephony
            service. A <code>Promise</code> object will be returned in order to
            notify the result of the request.
            <table class="parameters">
              <tr>
                <th>
                  Parameter
                </th>
                <th>
                  Type
                </th>
                <th>
                  Nullable
                </th>
                <th>
                  Optional
                </th>
                <th>
                  Description
                </th>
              </tr>
              <tr>
                <td class="prmName">
                  tone
                </td>
                <td class="prmType">
                  <code><a>DOMString</a></code>
                </td>
                <td class="prmNullFalse">
                  ✘
                </td>
                <td class="prmOptFalse">
                  ✘
                </td>
                <td class="prmDesc">
                  Represents the [<cite><a href="#bib-DTMF" class=
                  "bibref">DTMF</a></cite>] tone. Its value can be any of the
                  following characters: 0-9; A-D; *; #.
                </td>
              </tr>
              <tr>
                <td class="prmName">
                  params
                </td>
                <td class="prmType">
                  <code><a class="idlType" href=
                  "#idl-def-ToneParams"><code>ToneParams</code></a></code>
                </td>
                <td class="prmNullFalse">
                  ✘
                </td>
                <td class="prmOptTrue">
                  ✔
                </td>
                <td class="prmDesc">
                  If set, represents the <a class="internalDFN" href=
                  "#dfn-telephony-service-id">telephony service id</a> to be
                  used, and the delay before a tone. The <code>duration</code>
                  parameter is ignored. If not set, implementations <em title=
                  "MUST" class="rfc2119">MUST</em> use default values for
                  telephony service and delay.
                </td>
              </tr>
            </table>
            <div>
              <em>Return type:</em> <code><a class="internalDFN" href=
              "#dfn-promise">Promise</a></code>
            </div>
          </dd>
          <dt id="widl-TelephonyManager-stopTone-Promise-DOMString-serviceId">
            <code>stopTone</code>
          </dt>
          <dd>
            This method stops emitting a [<cite><a href="#bib-DTMF" class=
            "bibref">DTMF</a></cite>] tone in the default or the specified
            telephony service. A <code>Promise</code> object will be returned
            in order to notify the result of the request.
            <table class="parameters">
              <tr>
                <th>
                  Parameter
                </th>
                <th>
                  Type
                </th>
                <th>
                  Nullable
                </th>
                <th>
                  Optional
                </th>
                <th>
                  Description
                </th>
              </tr>
              <tr>
                <td class="prmName">
                  serviceId
                </td>
                <td class="prmType">
                  <code><a>DOMString</a></code>
                </td>
                <td class="prmNullFalse">
                  ✘
                </td>
                <td class="prmOptTrue">
                  ✔
                </td>
                <td class="prmDesc"></td>
              </tr>
            </table>
            <div>
              <em>Return type:</em> <code><a class="internalDFN" href=
              "#dfn-promise">Promise</a></code>
            </div>
          </dd>
        </dl>
      </section>
      <section id="event-handlers">
        <h3>
          <span class="secno">6.3</span> Event handlers
        </h3>
        <p>
          The following are the <a class="internalDFN" href=
          "#dfn-eventhandler">event handlers</a> (and their corresponding
          <a>event types</a>) that <em title="MUST" class="rfc2119">MUST</em>
          be supported as attributes by the <a class="idlType" href=
          "#idl-def-TelephonyManager"><code>TelephonyManager</code></a> object.
        </p>
        <table class="simple">
          <thead>
            <tr>
              <th>
                event handler
              </th>
              <th>
                event name
              </th>
              <th>
                event type
              </th>
              <th>
                short description
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <dfn id="dfn-onincoming"><code>onincoming</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-incoming">incoming</dfn></code>
              </td>
              <td>
                <a class="idlType" href=
                "#idl-def-TelephonyEvent"><code>TelephonyEvent</code></a>
              </td>
              <td>
                handles incoming and waiting calls
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="dfn-oncallschanged"><code>oncallschanged</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-callschanged">callschanged</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles change in the <code>calls</code> array
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="dfn-onserviceadded"><code>onserviceadded</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-serviceadded">serviceadded</dfn></code>
              </td>
              <td>
                <a class="idlType" href=
                "#idl-def-TelephonyServiceEvent"><code>TelephonyServiceEvent</code></a>
              </td>
              <td>
                handles a new enabled telephony service
              </td>
            </tr>
            <tr>
              <td>
                <dfn id=
                "dfn-onserviceremoved"><code>onserviceremoved</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-serviceremoved">serviceremoved</dfn></code>
              </td>
              <td>
                <a class="idlType" href=
                "#idl-def-TelephonyServiceEvent"><code>TelephonyServiceEvent</code></a>
              </td>
              <td>
                handles a disabled telephony service
              </td>
            </tr>
            <tr>
              <td>
                <dfn id=
                "dfn-onservicechanged"><code>onservicechanged</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-servicechanged">servicechanged</dfn></code>
              </td>
              <td>
                <a class="idlType" href=
                "#idl-def-TelephonyServiceEvent"><code>TelephonyServiceEvent</code></a>
              </td>
              <td>
                handles the change of default telephony service
              </td>
            </tr>
          </tbody>
        </table>
      </section>
      <section id="telephonymanager-steps">
        <h3>
          <span class="secno">6.4</span> Steps
        </h3>
        <p>
          The <a class="idlType" href=
          "#idl-def-TelephonyManager"><code>TelephonyManager</code></a> object
          <em title="MUST" class="rfc2119">MUST</em> <a class="internalDFN"
          href="#dfn-queue-a-task">queue a task</a> <dfn id="dfn-tcallcontrol"
          title="TCallControl"><i>TCallControl</i></dfn> for each <a class=
          "idlType" href=
          "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> or <a class=
          "idlType" href=
          "#idl-def-ConferenceCall"><code>ConferenceCall</code></a> object it
          manages, which <em title="MUST" class="rfc2119">MUST</em> listen to
          any event that results in changing the call, and upon such events,
          follow the steps described in this specification.
        </p>
        <p>
          The <dfn id="dfn-steps-to-update-the-default-service">steps to update
          the default service</dfn> are as follows:
        </p>
        <ol>
          <li>Let <var>potential service</var> be the first argument passed to
          this operation.
          </li>
          <li>Let <var>promise</var> be a new <code>Promise</code> object and
          <var>resolver</var> its associated resolver.
          </li>
          <li>Return <var>promise</var> and continue the following steps
          asynchronously.
          </li>
          <li>If <var>potential service</var> does not exactly match the
          identifier of any <a class="internalDFN" href=
          "#dfn-telephony-service">telephony service</a> known to the user
          agent, run the following sub-steps and terminate this algorithm:
            <ol>
              <li>Let <em>error</em> be a new <a href=
              "http://dom.spec.whatwg.org/#domerror">DOMError</a> object whose
              name is "<a href=
              "http://dom.spec.whatwg.org/#notfounderror">NotFoundError</a>".
              </li>
              <li>Invoke <em>resolver</em>'s reject(value) method with
              <em>error</em> as the value argument.
              </li>
            </ol>
          </li>
          <li>If <var>potential service</var> exactly matches the service id of
          the current default telephony service, run the following sub-steps
          and terminate this algorithm:
            <ol>
              <li>Invoke <em>resolver</em>'s accept(value) method with
              <var>potential service</var> as the value argument.
              </li>
            </ol>
          </li>
          <li>Otherwise, run the <a class="internalDFN" href=
          "#dfn-steps-to-change-the-default-service">steps to change the
          default service</a>, with <var>potential service</var> as the
          <a class="internalDFN" href="#dfn-telephony-service-id">telephony
          service id</a>, and <var>promise</var> as the <code>Promise</code>.
          </li>
        </ol>
        <p>
          The <dfn id="dfn-steps-to-change-the-default-service">steps to change
          the default service</dfn> are given by the following algorithm. This
          abstract operation takes as an argument a <a class="internalDFN"
          href="#dfn-telephony-service-id">telephony service id</a> and an
          optional <code>Promise</code>.
        </p>
        <ol>
          <li>Make a platform/system specific request to the underlying system
          to change from the current default telephony service to the one
          identified by <var>service id</var>.
          </li>
          <li>Possibly wait indefinately.
          </li>
          <li>If it's not possible (for whatever reason: timeout, security,
          etc.) to change the default telephony service, and if
          <var>promise</var> was passed, run the following sub steps and
          terminate this algorithm:
            <ol>
              <li>Let <em>error</em> be a new DOMError object whose name is
              "NoModificationAllowedError".
              </li>
              <li>Call <em>resolver</em>'s reject(value) method with
              <em>error</em> as the value argument.
              </li>
            </ol>
          </li>
          <li>Otherwise, queue a task to:
            <ol>
              <li>Change the <a>defaultServiceId</a> attribute to the
                <a class="internalDFN" href=
                "#dfn-telephony-service-id">telephony service id</a> of the new
                default telephony service.
              </li>
              <li>If <code>Promise</code> was passed, invoke
              <em>resolver</em>'s accept(value) method with the id of the new
              default service as value argument.
              </li>
              <li>Fire a simple event named <code>servicechange</code> at the
              <a>telephony</a> attribute of the navigator object.
              </li>
            </ol>
          </li>
        </ol>
        <p>
          The <code>dial</code> method when invoked <em title="MUST" class=
          "rfc2119">MUST</em> run the following steps:
        </p>
        <ol id="steps-dial">
          <li>Create a new <code>TelephonyCall</code> object, referred as <var>
            telCall</var> in these steps.
          </li>
          <li>Set the <code>remoteParty</code> property of <var>telCall</var>
          to the remote party identifier specified in the
          <code>remoteParty</code> parameter.
          </li>
          <li>If <code>calls</code> array already contains a <a class="idlType"
            href="#idl-def-TelephonyCall"><code>TelephonyCall</code></a> object
            with identical <code>remoteParty</code> property, then an
            <code>InvalidModificationError</code> <em title="MUST" class=
            "rfc2119">MUST</em> be thrown.
          </li>
          <li>Otherwise, make a request to the telephony system to dial in the
          remote party identifier passed in the <var>remoteParty</var>
          parameter. Note that the value can be also an emergency number.
          According to the value of the <code>hideCallerId</code> in the <code>
            params</code> parameter, the own number is requested to be either
            displayed, hidden or otherwise the default system configuration to
            this regard is requested to be followed. The call <em title="MUST"
            class="rfc2119">MUST</em> be made using the <a class="internalDFN"
            href="#dfn-telephony-service">telephony service</a> specified in
            the <code>service</code> property of the <code>params</code>
            parameter. If not specified, then the implementation <em title=
            "MUST" class="rfc2119">MUST</em> use the <a class="internalDFN"
            href="#dfn-default-telephony-service">default telephony
            service</a>. Even if there is no SIM card and no other telephony
            services are available, but emergency calls are known to be
            possible (e.g. because a cellular modem is present), it is
            considered as a default service with only emergency call
            capability, and the implementation <em title="MUST" class=
            "rfc2119">MUST</em> define a <a class="internalDFN" href=
            "#dfn-telephony-service-id">telephony service id</a> for it. When
            not even emergency calls are possible (e.g. it is a purely IP based
            implementation and there is no cellular modem), the implementation
            <em title="MAY" class="rfc2119">MAY</em> use empty string for
            default <a class="internalDFN" href=
            "#dfn-telephony-service-id">telephony service id</a>, but it is
            encouraged that a default service is created, with the methods
            throwing a <code>NotSupported</code> error.
          </li>
          <li>If the request is successful, then
            <ol>
              <li>Set the <code>state</code> of <var>telCall</var> to
              <code>"dialing"</code> value.
              </li>
              <li>Add <var>telCall</var> to the <code>calls</code> array.
              </li>
              <li>
                <a class="internalDFN" href="#dfn-queue-a-task">Queue a
                task</a> to <a class="internalDFN" href=
                "#dfn-fire-a-simple-event">fire a simple event</a> named
                <code>statechange</code> at the <var>telCall</var> object.
              </li>
              <li>
                <a class="internalDFN" href="#dfn-queue-a-task">Queue a
                task</a> to <a class="internalDFN" href=
                "#dfn-fire-a-simple-event">fire a simple event</a> named
                <code>dialing</code> at the <var>telCall</var> object.
              </li>
              <li>and finally return to the caller and <a class="internalDFN"
              href="#dfn-queue-a-task">queue a task</a> <a class="internalDFN"
                href="#dfn-tcallcontrol"><i>TCallControl</i></a> to monitor
                call flow progress.
              </li>
            </ol>
          </li>
          <li>If during further steps for call connection there is an error,
          execute the <a href="#error-steps">error steps</a> for
          <var>telCall</var>.
          </li>
        </ol>
        <p>
          The <code>sendTones</code> method when invoked <em title="MUST"
          class="rfc2119">MUST</em> run the following steps:
        </p>
        <ol id="steps-sendtones">
          <li>If the <a class="idlType" href=
          "#idl-def-ToneParams"><code>ToneParams</code></a> parameter specifies
          the <code>serviceId</code> to be used, then validate and use that
          value, otherwise use the default telephony service for sending the
          tones.
          </li>
          <li>If the <a class="idlType" href=
          "#idl-def-ToneParams"><code>ToneParams</code></a> parameter specifies
          the tone <code>duration</code>, then validate and use that value,
          otherwise use a default value.
          </li>
          <li>If the <a class="idlType" href=
          "#idl-def-ToneParams"><code>ToneParams</code></a> parameter specifies
          the tone <code>gap</code>, then validate and use that value,
          otherwise use a default value.
          </li>
          <li>Request from the telephony system to send the specified tones.
          </li>
          <li>Let <var>promise</var> be a new <code>Promise</code> object and
          <var>resolver</var> its associated <code>resolver</code>.
          </li>
          <li>Return <var>promise</var> to the caller and continue the
          following steps asynchronously.
          </li>
          <li>If the request to the telephony system is successful, or if the
          telephony system does not support feedback about the result of the
          request, invoke <em>resolver</em>'s <code>accept()</code> method with
          no arguments.
          </li>
          <li>If the request to the telephony system is unsuccessful, invoke
          <em>resolver</em>'s <code>reject()</code> method, with no arguments.
          </li>
        </ol>
        <p>
          The <code>startTone</code> method when invoked <em title="MUST"
          class="rfc2119">MUST</em> run the following steps:
        </p>
        <ol id="steps-starttone">
          <li>If the platform does not support long press [<cite><a href=
          "#bib-DTMF" class="bibref">DTMF</a></cite>] tones, throw a
          <code>NotSupported</code> error and finish these steps. In this case
          applications may then use the <code>sendTones</code> method for
          sending [<cite><a href="#bib-DTMF" class="bibref">DTMF</a></cite>].
          </li>
          <li>If the <a class="idlType" href=
          "#idl-def-ToneParams"><code>ToneParams</code></a> parameter specifies
          the <code>serviceId</code> to be used, then validate and use that
          value, otherwise use the default telephony service for sending the
          tones.
          </li>
          <li>If the <a class="idlType" href=
          "#idl-def-ToneParams"><code>ToneParams</code></a> parameter specifies
          the tone <code>duration</code>, then ignore that value.
          </li>
          <li>If the <a class="idlType" href=
          "#idl-def-ToneParams"><code>ToneParams</code></a> parameter specifies
          the tone <code>gap</code>, meaning the delay before sending the tone,
          then validate and use that value, otherwise use a default value.
          </li>
          <li>Request from the telephony system to start sending the specified
          tone. The tone <em title="SHOULD" class="rfc2119">SHOULD</em> play
          until the <code>stopTone</code> method is called.
          </li>
          <li>Let <var>promise</var> be a new <code>Promise</code> object and
          <var>resolver</var> its associated <code>resolver</code>.
          </li>
          <li>Return <var>promise</var> to the caller and continue the
          following steps asynchronously.
          </li>
          <li>If the request to the telephony system is successful, or if the
          telephony system does not support feedback about the result of the
          request, invoke <em>resolver</em>'s <code>accept()</code> method with
          no arguments.
          </li>
          <li>If the request to the telephony system is unsuccessful, invoke
          <em>resolver</em>'s <code>reject()</code> method, with no arguments.
          </li>
        </ol>
        <p>
          The <code>stopTone</code> method when invoked <em title="MUST" class=
          "rfc2119">MUST</em> run the following steps:
        </p>
        <ol id="steps-stoptone">
          <li>If the platform does not support long press [<cite><a href=
          "#bib-DTMF" class="bibref">DTMF</a></cite>] tones, throw a
          <code>NotSupported</code> error.
          </li>
          <li>If the provided parameters are invalid, or there is no tone
          playing on the specified telephony service, throw an
          <code>InvalidStateError</code> error.
          </li>
          <li>Otherwise, request from the telephony system to stop sending the
          specified tone.
          </li>
          <li>Let <var>promise</var> be a new <code>Promise</code> object and
          <var>resolver</var> its associated <code>resolver</code>.
          </li>
          <li>Return <var>promise</var> to the caller and continue the
          following steps asynchronously.
          </li>
          <li>If the request to the telephony system is successful, or if the
          telephony system does not support feedback about the result of the
          request, invoke <em>resolver</em>'s <code>accept()</code> method with
          no arguments.
          </li>
          <li>If the request to the telephony system is unsuccessful, invoke
          <em>resolver</em>'s <code>reject()</code> method, with no arguments.
          </li>
        </ol>
        <p>
          Upon a new incoming or waiting call, the <a class="internalDFN" href=
          "#ua">user agent</a> <em title="MUST" class="rfc2119">MUST</em>
          execute the following steps:
        </p>
        <ol id="steps-incoming">
          <li>Let <var>incomingCall</var> be a new instance of
          <code>TelephonyCall</code>.
          </li>
          <li>Set the <code>state</code> of <var>incomingCall</var> to
          <code>"incoming"</code> in case there is no other call in <a href=
          "#call-state-active"><code>active</code></a> state, or otherwise set
          it to <code>"waiting"</code>.
          </li>
          <li>Add <var>incomingCall</var> to the <code>calls</code> array.
          </li>
          <li>
            <a class="internalDFN" href="#dfn-queue-a-task">Queue a task</a> to
            <a class="internalDFN" href="#dfn-fire-a-simple-event">fire a
            simple event</a> named <code>statechange</code> at the
            <var>incomingCall</var> object.
          </li>
          <li>
            <a class="internalDFN" href="#dfn-queue-a-task">Queue a task</a> to
            <a class="internalDFN" href="#dfn-fire-a-simple-event">fire a
            simple event</a> named <code>incoming</code> at the <a class=
            "idlType" href=
            "#idl-def-TelephonyManager"><code>TelephonyManager</code></a>
            object managing the call.
          </li>
          <li>
            <a class="internalDFN" href="#dfn-queue-a-task">Queue a task</a> to
            <a class="internalDFN" href="#dfn-fire-a-simple-event">fire a
            simple event</a> named <code>callschanged</code> at the <a class=
            "idlType" href=
            "#idl-def-TelephonyManager"><code>TelephonyManager</code></a>
            object managing the call.
          </li>
          <li>
            <a class="internalDFN" href="#dfn-queue-a-task">Queue a task</a>
            <a class="internalDFN" href=
            "#dfn-tcallcontrol"><i>TCallControl</i></a> to monitor call flow
            progress.
          </li>
        </ol>
        <div class="issue">
          <div aria-level="4" class="issue-title" role="heading">
            <span>Issue 2</span>
          </div>
          <p class="">
            The <code>incoming</code>, <code>serviceadded</code> and
            <code>serviceremoved</code> events have to be defined according to
            DOM4.
          </p>
        </div>
        <p>
          The task <a class="internalDFN" href=
          "#dfn-tcallcontrol"><i>TCallControl</i></a> <em title="MUST" class=
          "rfc2119">MUST</em> listen to any event that results in a call
          disconnection, and upon such events, follow the steps described for
          <a href="#steps-disconnect-system">handling disconnected calls</a>.
        </p>
      </section><!-- telephonymanager-steps -->
      <!-- - - - - - - - - - - -  Dictionary DialParams - - - - - - - - - - - - - -->
      <section id="dialparams-dictionary">
        <h3>
          <span class="secno">6.5</span> <a class="idlType" href=
          "#idl-def-DialParams"><code>DialParams</code></a> Dictionary
        </h3>
        <pre class="idl">
<span class="idlDictionary" id="idl-def-DialParams">dictionary <span class=
"idlDictionaryID">DialParams</span> {
<span class="idlMember">    <span class=
"idlMemberType"><a>boolean</a></span>   <span class="idlMemberName"><a href=
"#widl-DialParams-hideCallerId">hideCallerId</a></span>;</span>
<span class="idlMember">    <span class=
"idlMemberType"><a>DOMString</a></span> <span class="idlMemberName"><a href=
"#widl-DialParams-serviceId">serviceId</a></span>;</span>
};</span>
</pre>
        <section id="dictionary-dialparams-members">
          <h4>
            <span class="secno">6.5.1</span> Dictionary <a href=
            "#idl-def-DialParams" class="idlType"><code>DialParams</code></a>
            Members
          </h4>
          <dl class="dictionary-members">
            <dt id="widl-DialParams-hideCallerId">
              <code>hideCallerId</code> of type <span class=
              "idlMemberType"><a>boolean</a></span>
            </dt>
            <dd>
              Represents whether the own number is to be hidden or displayed to
              the remote party being called. If missing, the user agent uses
              the default configuration for the <a class="internalDFN" href=
              "#dfn-telephony-service">telephony service</a> that initiated the
              call.
            </dd>
            <dt id="widl-DialParams-serviceId">
              <code>serviceId</code> of type <span class=
              "idlMemberType"><a>DOMString</a></span>
            </dt>
            <dd>
              Represents the <a class="internalDFN" href=
              "#dfn-telephony-service-id">telephony service id</a> of the
              <a class="internalDFN" href="#dfn-telephony-service">telephony
              service</a> to be used when dialing.
            </dd>
          </dl>
        </section>
      </section>
      <!-- - - - - - - - - - - -  Dictionary ToneParams - - - - - - - - - - - - - -->
      <section id="toneparams-dictionary">
        <h3>
          <span class="secno">6.6</span> <a class="idlType" href=
          "#idl-def-ToneParams"><code>ToneParams</code></a> Dictionary
        </h3>
        <pre class="idl">
<span class="idlDictionary" id="idl-def-ToneParams">dictionary <span class=
"idlDictionaryID">ToneParams</span> {
<span class="idlMember">    <span class=
"idlMemberType"><a>unsigned long</a></span> <span class=
"idlMemberName"><a href="#widl-ToneParams-duration">duration</a></span>;</span>
<span class="idlMember">    <span class=
"idlMemberType"><a>unsigned long</a></span> <span class=
"idlMemberName"><a href="#widl-ToneParams-gap">gap</a></span>;</span>
<span class="idlMember">    <span class=
"idlMemberType"><a>DOMString</a></span>     <span class=
"idlMemberName"><a href="#widl-ToneParams-serviceId">serviceId</a></span>;</span>
};</span>
</pre>
        <section id="dictionary-toneparams-members">
          <h4>
            <span class="secno">6.6.1</span> Dictionary <a href=
            "#idl-def-ToneParams" class="idlType"><code>ToneParams</code></a>
            Members
          </h4>
          <dl class="dictionary-members">
            <dt id="widl-ToneParams-duration">
              <code>duration</code> of type <span class=
              "idlMemberType"><a>unsigned long</a></span>
            </dt>
            <dd>
              Represents the duration (mark) in milliseconds of the
              [<cite><a href="#bib-DTMF" class="bibref">DTMF</a></cite>] tones
              to be sent.
            </dd>
            <dt id="widl-ToneParams-gap">
              <code>gap</code> of type <span class="idlMemberType"><a>unsigned
              long</a></span>
            </dt>
            <dd>
              Represents the duration in milliseconds of the time gap (space)
              before a [<cite><a href="#bib-DTMF" class=
              "bibref">DTMF</a></cite>] tone.
            </dd>
            <dt id="widl-ToneParams-serviceId">
              <code>serviceId</code> of type <span class=
              "idlMemberType"><a>DOMString</a></span>
            </dt>
            <dd>
              Represents the <a class="internalDFN" href=
              "#dfn-telephony-service-id">telephony service id</a> of the
              <a class="internalDFN" href="#dfn-telephony-service">telephony
              service</a> to be used when dialing.
            </dd>
          </dl>
        </section>
      </section>
    </section><!-- TelephonyManager -->
    <!-- - - - - - - - - - - - Interface TelephonyErrorEvent - - - - - - - - -  -->
    <section id="telephonyerrorevent-interface">
      <!--OddPage-->
      <h2>
        <span class="secno">7.</span> <a class="idlType" href=
        "#idl-def-TelephonyErrorEvent"><code>TelephonyErrorEvent</code></a>
        Interface
      </h2>
      <p>
        Represents an error that occured during the lifecycle of a telephony
        call.
      </p>
      <pre class="idl">
<span class="idlInterface" id=
"idl-def-TelephonyErrorEvent">interface <span class=
"idlInterfaceID">TelephonyErrorEvent</span> : <span class=
"idlSuperclass"><a>Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a class="idlType" href=
"#idl-def-Call"><code>Call</code></a></span>     <span class=
"idlAttrName"><a href="#widl-TelephonyErrorEvent-call">call</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMError</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyErrorEvent-error">error</a></span>;</span>
};</span>
</pre>
      <section id="attributes-2">
        <h3>
          <span class="secno">7.1</span> Attributes
        </h3>
        <dl class="attributes">
          <dt id="widl-TelephonyErrorEvent-call">
            <code>call</code> of type <span class="idlAttrType"><a class=
            "idlType" href="#idl-def-Call"><code>Call</code></a></span>,
            readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> object
            which caused the event to be fired.
          </dd>
          <dt id="widl-TelephonyErrorEvent-error">
            <code>error</code> of type <span class=
            "idlAttrType"><a>DOMError</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a>DOMError</a> object that
            describes the error that occured.
          </dd>
        </dl>
      </section>
    </section><!-- interface TelephonyEvent -->
    <!-- - - - - - - - - - - - Interface TelephonyEvent - - - - - - - - - - - - -->
    <section id="telephonyevent-interface">
      <!--OddPage-->
      <h2>
        <span class="secno">8.</span> <a class="idlType" href=
        "#idl-def-TelephonyEvent"><code>TelephonyEvent</code></a> Interface
      </h2>
      <p>
        Defines telephony events for <a class="idlType" href=
        "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> state changes,
        including handling incoming and waiting calls.
      </p>
      <pre class="idl">
<span class="idlInterface" id="idl-def-TelephonyEvent">interface <span class=
"idlInterfaceID">TelephonyEvent</span> : <span class=
"idlSuperclass"><a>Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a class="idlType" href=
"#idl-def-Call"><code>Call</code></a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyEvent-call">call</a></span>;</span>
};</span>
</pre>
      <section id="attributes-3">
        <h3>
          <span class="secno">8.1</span> Attributes
        </h3>
        <dl class="attributes">
          <dt id="widl-TelephonyEvent-call">
            <code>call</code> of type <span class="idlAttrType"><a class=
            "idlType" href="#idl-def-Call"><code>Call</code></a></span>,
            readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> that
            triggered the event.
          </dd>
        </dl>
      </section>
    </section><!-- interface TelephonyEvent -->
    <!-- - - - - - - - - - Interface TelephonyServiceEvent - - - - - - - - - -  -->
    <section id="telephonyserviceevent-interface">
      <!--OddPage-->
      <h2>
        <span class="secno">9.</span> <a class="idlType" href=
        "#idl-def-TelephonyServiceEvent"><code>TelephonyServiceEvent</code></a>
        Interface
      </h2>
      <p>
        Defines a telephony event for notifying a changed <a class=
        "internalDFN" href="#dfn-telephony-service">telephony service</a>.
      </p>
      <pre class="idl">
<span class="idlInterface" id=
"idl-def-TelephonyServiceEvent">interface <span class=
"idlInterfaceID">TelephonyServiceEvent</span> : <span class=
"idlSuperclass"><a>Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyServiceEvent-serviceId">serviceId</a></span>;</span>
};</span>
</pre>
      <section id="attributes-4">
        <h3>
          <span class="secno">9.1</span> Attributes
        </h3>
        <dl class="attributes">
          <dt id="widl-TelephonyServiceEvent-serviceId">
            <code>serviceId</code> of type <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="internalDFN" href=
            "#dfn-telephony-service-id">telephony service id</a> of the
            <a class="internalDFN" href="#dfn-telephony-service">telephony
            service</a> that triggered the event.
          </dd>
        </dl>
      </section>
    </section><!-- interface TelephonyServiceEvent -->
    <!-- - - - - - - - - - - -  Interface CallHandler - - - - - - - - - - - - -->
    <section id="callhandler-interface">
      <!--OddPage-->
      <h2>
        <span class="secno">10.</span> <a class="idlType" href=
        "#idl-def-CallHandler"><code>CallHandler</code></a> interface
      </h2>
      <p>
        The <code>CallHandler</code> interface provides common properties and
        event handling infrastructure that is <a href=
        "http://www.w3.org/TR/WebIDL/#idl-implements-statements">implemented</a>
        by other interfaces in this specification, e.g. <a class="idlType"
        href="#idl-def-TelephonyCall"><code>TelephonyCall</code></a> and
        <a class="idlType" href=
        "#idl-def-ConferenceCall"><code>ConferenceCall</code></a>. It serves as
        an editorial aid in this specification, and has no functional utility
        on its own.
      </p>
      <pre class="idl">
<span class="idlInterface" id="idl-def-CallHandler">[<span class=
"extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">CallHandler</span> {
<span class="idlMethod">    <span class=
"idlMethType"><a>void</a></span> <span class="idlMethName"><a href=
"#widl-CallHandler-resume-void">resume</a></span> ();</span>
<span class="idlMethod">    <span class=
"idlMethType"><a>void</a></span> <span class="idlMethName"><a href=
"#widl-CallHandler-hold-void">hold</a></span> ();</span>
<span class="idlMethod">    <span class=
"idlMethType"><a>void</a></span> <span class="idlMethName"><a href=
"#widl-CallHandler-disconnect-void">disconnect</a></span> ();</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a></span>    <span class="idlAttrName"><a href=
"#widl-CallHandler-callId">callId</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a></span>    <span class="idlAttrName"><a href=
"#widl-CallHandler-serviceId">serviceId</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a class="idlType" href=
"#idl-def-CallState"><code>CallState</code></a></span>    <span class=
"idlAttrName"><a href="#widl-CallHandler-state">state</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-CallHandler-onerror">onerror</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-CallHandler-onstatechange">onstatechange</a></span>;</span>
};</span>
</pre>
      <section id="attributes-5">
        <h3>
          <span class="secno">10.1</span> Attributes
        </h3>
        <dl class="attributes">
          <dt id="widl-CallHandler-callId">
            <code>callId</code> of type <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a>call id</a> of the <a class=
            "idlType" href="#idl-def-Call"><code>Call</code></a> object, unique
            in the system and call history.
          </dd>
          <dt id="widl-CallHandler-onerror">
            <code>onerror</code> of type <span class="idlAttrType"><a class=
            "internalDFN" href="#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler dispatched when there is an error during the life
            cycle of a call.
          </dd>
          <dt id="widl-CallHandler-onstatechange">
            <code>onstatechange</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler dispatched when the <a>state</a> changes.
          </dd>
          <dt id="widl-CallHandler-serviceId">
            <code>serviceId</code> of type <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="internalDFN" href=
            "#dfn-telephony-service-id">telephony service id</a> of the
            <a class="internalDFN" href="#dfn-telephony-service">telephony
            service</a> associated with this call.
          </dd>
          <dt id="widl-CallHandler-state">
            <code>state</code> of type <span class="idlAttrType"><a class=
            "idlType" href=
            "#idl-def-CallState"><code>CallState</code></a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="idlType" href=
            "#idl-def-CallState"><code>CallState</code></a> value that
            represents the state of for the <a class="idlType" href=
            "#idl-def-Call"><code>Call</code></a>.
          </dd>
        </dl>
      </section>
      <section id="methods-1">
        <h3>
          <span class="secno">10.2</span> Methods
        </h3>
        <dl class="methods">
          <dt id="widl-CallHandler-disconnect-void">
            <code>disconnect</code>
          </dt>
          <dd>
            If invoked on a <a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a>, it
            initiates releasing of the telephony call. If invoked on a
            <a class="idlType" href=
            "#idl-def-ConferenceCall"><code>ConferenceCall</code></a>,
            Initiates releasing the multiparty call, and each participating
            <a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> object.
            <div>
              <em>No parameters.</em>
            </div>
            <div>
              <em>Return type:</em> <code><a>void</a></code>
            </div>
          </dd>
          <dt id="widl-CallHandler-hold-void">
            <code>hold</code>
          </dt>
          <dd>
            Initiates putting the <a class="idlType" href=
            "#idl-def-Call"><code>Call</code></a> on hold.
            <div>
              <em>No parameters.</em>
            </div>
            <div>
              <em>Return type:</em> <code><a>void</a></code>
            </div>
          </dd>
          <dt id="widl-CallHandler-resume-void">
            <code>resume</code>
          </dt>
          <dd>
            Initiates resuming a held <a class="idlType" href=
            "#idl-def-Call"><code>Call</code></a>.
            <div>
              <em>No parameters.</em>
            </div>
            <div>
              <em>Return type:</em> <code><a>void</a></code>
            </div>
          </dd>
        </dl>
      </section>
      <section id="callhandler-eventhandlers">
        <h3>
          <span class="secno">10.3</span> Event handlers
        </h3>
        <p>
          The following are the <a>event handlers</a> that <em title="MUST"
          class="rfc2119">MUST</em> be supported as attributes:
        </p>
        <table class="simple">
          <thead>
            <tr>
              <th>
                event handler
              </th>
              <th>
                event name
              </th>
              <th>
                event type
              </th>
              <th>
                short description
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <dfn id="dfn-onstatechange"><code>onstatechange</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-statechange">statechange</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles any call state change
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="dfn-onerror"><code>onerror</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-error">error</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles error conditions
              </td>
            </tr>
          </tbody>
        </table>
      </section><!-- CallHandler Interface -->
      <!-- a short summary on call state management
      =========================================================================
      CDMA states for dialed calls       | Mapping to the API or [modem] state
      _________________________________________________________________________
          [ DIAL button pressed ]        | dialing
          -> channel request             |
          <- immediate assignment        |
          -> service request             |
          <- authentication request      |
          -> authentication response     |
          <- cyphering command           |
          -> cyphering complete          |
          -> setup                       |
          <- call confirmed              |
          <- assignment command          |
          -> assignment completed        |
          <- alerting                    | alerting
          <- connect                     |
          -> connect ack                 | active (connected)
          <-> dataspeech                 |
      _________________________________________________________________________
      CDMA states for received calls     | Mapping to the API or [modem] state
      _________________________________________________________________________
          <- paging request              |
          -> channel request             |
          <- immediate assignment        |
          -> paging response             |
          <- authentication request      |
          -> authentication response,    |
          <- cyphering command           |
          -> cyphering complete          |
          <- call setup                  |
          -> call confirmed              | incoming
          <- assignment command          |
          -> assignment complete         |
          -> call alerting               | [ringing]
          [ OK button pressed ]          | accepted
          -> connect                     |
          <- connect ack                 | active (connected)
          <-> dataspeech                 |
      =========================================================================
      GSM states for dialed calls        | Mapping to the API or [modem] state
      _________________________________________________________________________
          [ DIAL button pressed ]        | dialing
          -> channel request             |
          <- immediate assignment        |
          -> service request             |
          -> connection request          |
          <- cyphering command           |
          -> cyphering complete          |
          -> call setup                  |
          <- connecting                  | connecting
          [call mode: signaling -> voice]|
          [routing, voicemail, errors]   |
          <- call confirmed              |
          <- alerting                    | alerting
          <- connect                     |
          -> connect ack                 | active (connected)
          <-> dataspeech                 |
      _________________________________________________________________________
      GSM states for received calls      | Mapping to the API or [modem] state
      _________________________________________________________________________
          <- interrogation procedure     |
          <- paging request              |
          -> channel request             |
          <- immediate assignment        |
          -> paging response             |
          - cyphering                    |
          <- call setup                  | incoming
          -> call confirmed              |
          -> call alerting               | [ringing]
          [ OK button pressed ]          | accepted
          -> connect                     |
          <- connect ack                 | active (connected)
          <-> dataspeech                 |
      =========================================================================
      SIP/IMS states for dialed calls | Mapping to the API or [SIP stack] state
      _________________________________________________________________________
          [ DIAL button pressed ]        | dialing
          -> SIP Invite                  | [initializing]
          <- SIP 183 Session Progress    |
          [ SDP ]                        |
          -> PRACK                       | [initialized]
          [Caller PDP Context activation]|
          <- SIP 200 OK                  |
          -> UPDATE [ context ]          |
          <- SIP 200 OK                  |
          [ remote starts ringing ]      |
          <- SIP 180 RINGING             | alerting
          -> PRACK                       |
          [ remote accepts]              |
          <- SIP 200 OK                  |
          -> ACK                         | active (connected)
          <-> dataspeech                 |
      _________________________________________________________________________
      SIP states for received calls  | Mapping to the API or [SIP stack] state
      _________________________________________________________________________
          <- SIP Invite                  | incoming
          -> SIP 183 Session Progress    | [initializing]
          [ SDP ]                        |
          <- PRACK                       |
          -> SIP 200 OK                  | [initialized]
          [ PDP Context activation]      |
          <- UPDATE [ context ]          |
          -> SIP 200 OK                  |
          [ locally ringing ]            |
          -> SIP 180 RINGING             | [ringing]
          <- PRACK                       |
          [ accepts ]                    | accepted
          -> SIP 200 OK                  |
          <- ACK                         | active (connected)
          <-> dataspeech                 |
      =========================================================================
      XMPP states for dialed calls   | Mapping to the API or [XMPP stack] state
      [ XMPP XEP-0166 Jingle ]       | (may depend on XMPP implementation)
      _________________________________________________________________________
          DIAL button pressed            | dialing
          -> session-initiate            |
          <- ack                         |
          <- session-accept              | alerting
          -> ack                         | active (connected)
          <-> media session              |
          <- session-terminate           |
          -> ack                         | disconnected
      _________________________________________________________________________
      XMPP states for received calls | Mapping to the API or [XMPP stack] state
      [ XMPP XEP-0166 Jingle ]       | (may depend on XMPP implementation)
      _________________________________________________________________________
          <- session-initiate            | incoming
          -> ack                         |
          [ locally ringing ]            | [ringing]
          [ user accepts ]               | accepted
          -> session-accept              |
          <- ack                         | active (connected)
          <-> media session              |
          -> session-terminate           | disconnecting
          <- ack                         | disconnected
      _________________________________________________________________________

      Multiparty call sequences and states
      ====================================
          GSM TS 24.084.
          "There are four auxiliary states associated with the MPTY service:
          - Idle;
          - MPTY request; A request has been made to add this call to the MPTY.
          - Call in MPTY; This call is in the MPTY.
          - Split request; A request has been made to remove this call from the MPTY.
          These Auxiliary states apply in addition to the GSM 04.08 call control
          states and the GSM 04.83 call hold states. Thus for example, an active
          call in a held MPTY has the state (Active, Call held, Call in MPTY).
          Not all states are allowed, for example an MPTY cannot be split while
          it is held, so (Active, Call held, Split request) is forbidden."

          Instead of this, we offer a model when states describe valid multiparty
          states. Valid state transitions for a multiparty call are:
          * joining -> active
          * active -> holding -> held
          * held -> resuming -> active (connected)
          * any state -> [disconnecting]-> disconnected
      -->
      <!-- - - - - - - - - - - -  Interface TelephonyCall - - - - - - - - - - - - -->
      <section id="telephonycall-interface">
        <h3>
          <span class="secno">10.4</span> <a class="idlType" href=
          "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> Interface
        </h3>
        <p>
          Defines the object structure for controlling calls.
        </p>
        <pre class="idl">
<span class="idlImplements"><a class="idlType" href=
"#idl-def-TelephonyCall"><code>TelephonyCall</code></a> implements <a class=
"idlType" href="#idl-def-CallHandler"><code>CallHandler</code></a>;</span>
</pre>
        <div class="idlImplementsDesc">
          <p>
            All instances of the <code><a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a></code> type
            are defined to also implement the <a class="idlType" href=
            "#idl-def-CallHandler"><code>CallHandler</code></a> interface.
          </p>
        </div>
        <pre class="idl">
<span class="idlInterface" id="idl-def-TelephonyCall">interface <span class=
"idlInterfaceID">TelephonyCall</span> : <span class="idlSuperclass"><a class=
"internalDFN" href="#dfn-eventhandler">EventHandler</a></span> {
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a>?</span>   <span class="idlAttrName"><a href=
"#widl-TelephonyCall-remoteParty">remoteParty</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a>?</span>   <span class="idlAttrName"><a href=
"#widl-TelephonyCall-conferenceId">conferenceId</a></span>;</span>
<span class="idlMethod">    <span class=
"idlMethType"><a>void</a></span>           <span class="idlMethName"><a href=
"#widl-TelephonyCall-accept-void">accept</a></span> ();</span>
<span class="idlMethod">    <span class=
"idlMethType"><a>void</a></span>           <span class="idlMethName"><a href=
"#widl-TelephonyCall-redirect-void-DOMString-remoteParty">redirect</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">remoteParty</span></span>);</span>
<span class="idlMethod">    <span class=
"idlMethType"><a>void</a></span>           <span class="idlMethName"><a href=
"#widl-TelephonyCall-transfer-void-DOMString-thirdParty">transfer</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">thirdParty</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href=
"#idl-def-ConferenceCall"><code>ConferenceCall</code></a></span> <span class=
"idlMethName"><a href=
"#widl-TelephonyCall-createConference-ConferenceCall">createConference</a></span> ();</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-ondialing">ondialing</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onalerting">onalerting</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onaccepted">onaccepted</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onconnecting">onconnecting</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onactive">onactive</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-ondisconnecting">ondisconnecting</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-ondisconnected">ondisconnected</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onholding">onholding</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onheld">onheld</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onresuming">onresuming</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onredirecting">onredirecting</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-ontransferring">ontransferring</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onjoining">onjoining</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onmultiparty">onmultiparty</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span> <span class="idlAttrName"><a href=
"#widl-TelephonyCall-onsplitting">onsplitting</a></span>;</span>
};</span>
</pre>
        <section id="attributes-6">
          <h4>
            <span class="secno">10.4.1</span> Attributes
          </h4>
          <dl class="attributes">
            <dt id="widl-TelephonyCall-conferenceId">
              <code>conferenceId</code> of type <span class=
              "idlAttrType"><a>DOMString</a></span>, readonly , nullable
            </dt>
            <dd>
              When getting, if this call is managed as a part of a multiparty
              call then the user agent <em title="MUST" class=
              "rfc2119">MUST</em> return the value of the
              <code>conferenceId</code> property of the <a class="idlType"
              href="#idl-def-ConferenceCall"><code>ConferenceCall</code></a>
              multiparty call to which this call is part of. Otherwise, return
              null.
            </dd>
            <dt id="widl-TelephonyCall-onaccepted">
              <code>onaccepted</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"accepted"</code> and the <code>accepted</code> event is
              dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onactive">
              <code>onactive</code> of type <span class="idlAttrType"><a class=
              "internalDFN" href="#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"active"</code> and the <code>active</code> event is
              dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onalerting">
              <code>onalerting</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"alerting"</code> and the <code>alerting</code> event is
              dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onconnecting">
              <code>onconnecting</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"connecting"</code> and the <code>connecting</code> event
              is dispatched.
            </dd>
            <dt id="widl-TelephonyCall-ondialing">
              <code>ondialing</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"dialing"</code> and the <code>dialing</code> event is
              dispatched.
            </dd>
            <dt id="widl-TelephonyCall-ondisconnected">
              <code>ondisconnected</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"disconnected"</code> and the <code>disconnected</code>
              event is dispatched.
            </dd>
            <dt id="widl-TelephonyCall-ondisconnecting">
              <code>ondisconnecting</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"disconnecting"</code> and the <code>disconnecting</code>
              event is dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onheld">
              <code>onheld</code> of type <span class="idlAttrType"><a class=
              "internalDFN" href="#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"held"</code> and the <code>held</code> event is
              dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onholding">
              <code>onholding</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"holding"</code> and the <code>holding</code> event is
              dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onjoining">
              <code>onjoining</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"joining"</code> and the <code>joining</code> event is
              dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onmultiparty">
              <code>onmultiparty</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"multiparty"</code> and the <code>multiparty</code> event
              is dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onredirecting">
              <code>onredirecting</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"redirecting"</code> and the <code>redirecting</code> event
              is dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onresuming">
              <code>onresuming</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"resuming"</code> and the <code>resuming</code> event is
              dispatched.
            </dd>
            <dt id="widl-TelephonyCall-onsplitting">
              <code>onsplitting</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"splitting"</code> and the <code>splitting</code> event is
              dispatched.
            </dd>
            <dt id="widl-TelephonyCall-ontransferring">
              <code>ontransferring</code> of type <span class=
              "idlAttrType"><a class="internalDFN" href=
              "#dfn-eventhandler">EventHandler</a></span>,
            </dt>
            <dd>
              Event handler called when the call state changes to
              <code>"transferring"</code> and the <code>transferring</code>
              event is dispatched.
            </dd>
            <dt id="widl-TelephonyCall-remoteParty">
              <code>remoteParty</code> of type <span class=
              "idlAttrType"><a>DOMString</a></span>, readonly , nullable
            </dt>
            <dd>
              When getting, the user agent <em title="MUST" class=
              "rfc2119">MUST</em> return the remote party identifier (e.g.
              telephone number) of the call participant. If not available (e.g.
              callerId has been hidden), return <code>null</code>.
            </dd>
          </dl>
        </section>
        <section id="methods-2">
          <h4>
            <span class="secno">10.4.2</span> Methods
          </h4>
          <dl class="methods">
            <dt id="widl-TelephonyCall-accept-void">
              <code>accept</code>
            </dt>
            <dd>
              Accepts the incoming or waiting telephony call.
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code><a>void</a></code>
              </div>
            </dd>
            <dt id="widl-TelephonyCall-createConference-ConferenceCall">
              <code>createConference</code>
            </dt>
            <dd>
              Creates a multiparty call from the current call. On cellular
              telephony services, this happens by initiating merging the active
              and held calls into a multiparty call. Using this method
              <em title="MUST" class="rfc2119">MUST</em> be the only way to
              create a <code>ConferenceCall</code> object.
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code><a class="idlType" href=
                "#idl-def-ConferenceCall"><code>ConferenceCall</code></a></code>
              </div>
            </dd>
            <dt id="widl-TelephonyCall-redirect-void-DOMString-remoteParty">
              <code>redirect</code>
            </dt>
            <dd>
              Initiates deflecting an incoming or waiting telephone call to
              another remote party.
              <table class="parameters">
                <tr>
                  <th>
                    Parameter
                  </th>
                  <th>
                    Type
                  </th>
                  <th>
                    Nullable
                  </th>
                  <th>
                    Optional
                  </th>
                  <th>
                    Description
                  </th>
                </tr>
                <tr>
                  <td class="prmName">
                    remoteParty
                  </td>
                  <td class="prmType">
                    <code><a>DOMString</a></code>
                  </td>
                  <td class="prmNullFalse">
                    ✘
                  </td>
                  <td class="prmOptFalse">
                    ✘
                  </td>
                  <td class="prmDesc">
                    Represents the remote party to which the call is
                    redirected.
                  </td>
                </tr>
              </table>
              <div>
                <em>Return type:</em> <code><a>void</a></code>
              </div>
            </dd>
            <dt id="widl-TelephonyCall-transfer-void-DOMString-thirdParty">
              <code>transfer</code>
            </dt>
            <dd>
              Initiates transferring the call to a new call between the remote
              party of this call and another remote party, then disconnects the
              call.
              <table class="parameters">
                <tr>
                  <th>
                    Parameter
                  </th>
                  <th>
                    Type
                  </th>
                  <th>
                    Nullable
                  </th>
                  <th>
                    Optional
                  </th>
                  <th>
                    Description
                  </th>
                </tr>
                <tr>
                  <td class="prmName">
                    thirdParty
                  </td>
                  <td class="prmType">
                    <code><a>DOMString</a></code>
                  </td>
                  <td class="prmNullFalse">
                    ✘
                  </td>
                  <td class="prmOptFalse">
                    ✘
                  </td>
                  <td class="prmDesc">
                    Represents the remote party to which the call is
                    transferred.
                  </td>
                </tr>
              </table>
              <div>
                <em>Return type:</em> <code><a>void</a></code>
              </div>
            </dd>
          </dl>
        </section>
        <section id="telephony-eventhandlers">
          <h4>
            <span class="secno">10.4.3</span> Event handlers
          </h4>
          <p>
            The following are the <a>event handlers</a> <em title="MUST" class=
            "rfc2119">MUST</em> be supported as attributes by the <a class=
            "idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> object:
          </p>
          <table class="simple">
            <thead>
              <tr>
                <th>
                  event handler
                </th>
                <th>
                  event name
                </th>
                <th>
                  event type
                </th>
                <th>
                  short description
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <dfn id="dfn-ondialing"><code>ondialing</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-dialing">dialing</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"dialing"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onalerting"><code>onalerting</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-alerting">alerting</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"alerting"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onaccepted"><code>onaccepted</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-accepted">accepted</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"accepted"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onconnecting"><code>onconnecting</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-connecting">connecting</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"connecting"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onactive"><code>onactive</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-active">active</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"active"</code> state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id=
                  "dfn-ondisconnecting"><code>ondisconnecting</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-disconnecting">disconnecting</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles the call state changes to the
                  <code>"disconnecting"</code> state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id=
                  "dfn-ondisconnected"><code>ondisconnected</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-disconnected">disconnected</dfn></code>
                </td>
                <td>
                  <a class="idlType" href=
                  "#idl-def-TelephonyEvent"><code>TelephonyEvent</code></a>
                </td>
                <td>
                  handles call state changes to the <code>"disconnected"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onholding"><code>onholding</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-holding">holding</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"holding"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onheld"><code>onheld</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-held">held</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"held"</code> state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onresuming"><code>onresuming</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-resuming">resuming</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"resuming"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onredirecting"><code>onredirecting</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-redirecting">redirecting</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"redirecting"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id=
                  "dfn-ontransferring"><code>ontransferring</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-transferring">transferring</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"transferring"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onjoining"><code>onjoining</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-joining">joining</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"joining"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onsplitting"><code>onsplitting</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-splitting">splitting</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"splitting"</code>
                  state
                </td>
              </tr>
              <tr>
                <td>
                  <dfn id="dfn-onmultiparty"><code>onmultiparty</code></dfn>
                </td>
                <td>
                  <code><dfn id="dfn-multiparty">multiparty</dfn></code>
                </td>
                <td>
                  <a>simple event</a>
                </td>
                <td>
                  handles call state changes to the <code>"multiparty"</code>
                  state
                </td>
              </tr>
            </tbody>
          </table>
        </section><!-- telephony-eventhandlers -->
        <div class="issue">
          <div aria-level="4" class="issue-title" role="heading">
            <span>Issue 3</span>
          </div>
          <p class="">
            The call state events have to be defined according to DOM4.
          </p>
        </div>
        <section id="telephony-steps">
          <h4>
            <span class="secno">10.4.4</span> Steps
          </h4>
          <p>
            The implementation <em title="MUST" class="rfc2119">MUST</em>
            follow the call state changes in the supported telephony backend(s)
            and networks, and <em title="MUST" class="rfc2119">MUST</em> keep
            the <code>state</code> property updated. Since call state
            transitions depend on protocol, network equipment, modem, etc., the
            implementation <em title="MUST NOT" class="rfc2119">MUST NOT</em>
            fire error events on assumed erroneous state transitions.
            Applications <em title="MUST" class="rfc2119">MUST</em> always
            re-synchronize any eventual internal states to the current call
            state reported by the telephony system. The implementation
            <em title="MUST NOT" class="rfc2119">MUST NOT</em> set the call
            state to any other value than specified in the descriptions of the
            methods of this interface.
          </p>
          <p>
            Whenever there is a change in the <code>state</code> attribute the
            <a class="internalDFN" href="#ua">user agent</a> <em title="MUST"
            class="rfc2119">MUST</em>:
          </p>
          <ol>
            <li>Queue a task to fire a simple event named
            <code>statechange</code>.
            </li>
            <li>Queue a task to fire a simple event named with the new value of
            the state attribute.
            </li>
          </ol>
          <p>
            For call setup on received calls, the following call states
            <em title="MUST" class="rfc2119">MUST</em> be supported in this
            order:
          </p>
          <ol>
            <li>
              <code>"incoming"</code>/<code>"waiting"</code>.
            </li>
            <li>
              <code>"accepted"</code>.
            </li>
            <li>
              <code>"active"</code>.
            </li>
          </ol>
          <div class="note">
            <div aria-level="5" class="note-title" role="heading">
              <span>Note</span>
            </div>
            <p class="">
              On received calls, telephony protocols also use a
              <code>"ringing"</code> state, set by the mobile terminal when
              local call alerting starts, in order to notify the remote party
              about the ongoing alerting (ringing can actually be e.g. a beep,
              ring tone, or vibration pattern). This is considered to be
              responsibility of implementations: if the modem expects this
              state to be set, implementations <em title="MUST" class=
              "rfc2119">MUST</em> make sure to set it. Dialer applications are
              not expected to set this state in the current version of the
              specification.
            </p>
          </div>
          <div class="issue">
            <div aria-level="5" class="issue-title" role="heading">
              <span>Issue 4</span>
            </div>
            <p class="">
              CDMA cannot report all these states in the expected sequence. The
              ‘connected’ state (i.e. when the mobile station send the Service
              Connect Completion Message or Connect Order, depending on whether
              the call is mobile originated or terminated) is immediately
              followed by voice media transmission – there is transition to
              ‘active’ before the media arrives. Therefore it should be up to
              the implementation to determine which events to fire and in which
              order. Dialer applications <em title="SHOULD" class=
              "rfc2119">SHOULD</em> be prepared to handle such cases.
            </p>
          </div>
          <p>
            For call setup on dialed calls, the following call states
            <em title="MUST" class="rfc2119">MUST</em> be supported in this
            order:
          </p>
          <ol>
            <li>
              <code>"dialing"</code>.
            </li>
            <li>
              <code>"alerting"</code>.
            </li>
            <li>
              <code>"active"</code>.
            </li>
          </ol>
          <div class="note">
            <div aria-level="5" class="note-title" role="heading">
              <span>Note</span>
            </div>
            <p class="">
              On the telephony services which support the
              <code>"connecting"</code> call state (e.g. <abbr title=
              "Global System for Mobile Communications">GSM</abbr> and CDMA,
              for call routing, forwarding, voicemail handling etc),
              implementations <em title="SHOULD" class="rfc2119">SHOULD</em>
              support this state too, between the <code>"dialing"</code> and
              <code>"alerting"</code> states. Dialer applications can associate
              the protocol with the <a class="internalDFN" href=
              "#dfn-telephony-service">telephony service</a> used for the call.
            </p>
          </div>
          <div class="note">
            <div aria-level="5" class="note-title" role="heading">
              <span>Note</span>
            </div>
            <p class="">
              It is under discussion whether a system message should be
              propagated when a CDMA telephony call is active, since not all
              CDMA networks support concurrent services. Therefore, many
              applications will lose their data connection when the end user is
              in a voice call.
            </p>
          </div>
          <p>
            When a call monitoring task, previously referred to as <a class=
            "internalDFN" href="#dfn-tcallcontrol"><i>TCallControl</i></a> is
            notified that a dialed call is in the process of being connected,
            it <em title="MUST" class="rfc2119">MUST</em> set
            <code>state</code> to <code>"connecting"</code>.
          </p>
          <p>
            When <a class="internalDFN" href=
            "#dfn-tcallcontrol"><i>TCallControl</i></a> is informed that the
            connection has been established and the call is active, it
            <em title="MUST" class="rfc2119">MUST</em> set <code>state</code>
            to <code>"active"</code>.
          </p>
          <p>
            If there is any error during method calls, then the <a href=
            "#error-steps">error steps</a> <em title="MUST" class=
            "rfc2119">MUST</em> be executed.
          </p>
          <p>
            The <code>disconnect</code> method when invoked on the <a class=
            "idlType" href="#idl-def-Call"><code>Call</code></a> object
            <var>telCall</var>, it <em title="MUST" class="rfc2119">MUST</em>
            run the following steps:
          </p>
          <ol id="steps-disconnect-client">
            <li>Set the <code>state</code> of <var>telCall</var> to
            <code>"disconnecting"</code>.
            </li>
            <li>
              <a class="internalDFN" href="#dfn-queue-a-task">Queue a task</a>
              to <a class="internalDFN" href="#dfn-fire-a-simple-event">fire a
              simple event</a> named <code>statechange</code> at the
              <var>telCall</var> object.
            </li>
            <li>
              <a class="internalDFN" href="#dfn-queue-a-task">Queue a task</a>
              to <a class="internalDFN" href="#dfn-fire-a-simple-event">fire a
              simple event</a> named <code>disconnecting</code> at the
              <var>telCall</var> object.
            </li>
            <li>Request from the telephony system the disconnection of the
            call, then return and continue these steps asynchronously. If there
            is any error, the <a href="#error-steps">error steps</a>
              <em title="MUST" class="rfc2119">MUST</em> be executed.
            </li>
          </ol>
          <p>
            Depending on the protocol, there may be restrictions on methods.
            For instance, <abbr title=
            "Global System for Mobile Communications">GSM</abbr> does not
            permit disconnecting a held call. Also, disconnecting a participant
            in a held multiparty call is not supported. In such case, the
            <a href="#error-steps">error steps</a> <em title="MUST" class=
            "rfc2119">MUST</em> be executed. Also, if the controlling party
            disconnects in IS-41 3-way call in CDMA, then all parties are
            disconnected, and it is not possible for the controlling party to
            disconnect only one participant (that participant must choose to
            hang up). Therefore if the telephony service is CDMA, when invoking
            the <code>disconnect()</code> method of a <a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> object
            participating in a <a class="idlType" href=
            "#idl-def-ConferenceCall"><code>ConferenceCall</code></a> the
            <a href="#error-steps">error steps</a> <em title="MUST" class=
            "rfc2119">MUST</em> be executed.
          </p>
          <p>
            When <a class="internalDFN" href=
            "#dfn-tcallcontrol"><i>TCallControl</i></a> is notified of actual
            call disconnection of the <a class="idlType" href=
            "#idl-def-Call"><code>Call</code></a> object <var>telCall</var>, it
            <em title="MUST" class="rfc2119">MUST</em> follow the next steps:
          </p>
          <ol id="steps-disconnect-system">
            <li>Set the <code>state</code> of <var>telCall</var> to
            <code>"disconnected"</code>.
            </li>
            <li>
              <a class="internalDFN" href="#dfn-queue-a-task">Queue a task</a>
              to <a class="internalDFN" href="#dfn-fire-a-simple-event">fire a
              simple event</a> named <code>statechange</code> at the
              <var>telCall</var> object.
            </li>
            <li>
              <a class="internalDFN" href="#dfn-queue-a-task">Queue a task</a>
              to <a class="internalDFN" href="#dfn-fire-a-simple-event">fire a
              simple event</a> named <code>disconnected</code> at the
              <var>telCall</var> object.
            </li>
            <li>Remove the <var>telCall</var> object from the
            <code>calls</code> array.
            </li>
          </ol>
          <p>
            The <code>param</code> property of the <code>disconnected</code>
            event <em title="MUST" class="rfc2119">MUST</em> be set to the
            <a class="idlType" href=
            "#idl-def-DisconnectReason"><code>DisconnectReason</code></a>, if
            available, or otherwise it <em title="MUST" class=
            "rfc2119">MUST</em> be set to <code>null</code>. At least the
            following values <em title="MUST" class="rfc2119">MUST</em> be
            supported for the disconnect reason: <code>"local"</code>,
            <code>"remote"</code> and <code>"network"</code>. The rest of the
            <a class="idlType" href=
            "#idl-def-DisconnectReason"><code>DisconnectReason</code></a>
            values <em title="SHOULD" class="rfc2119">SHOULD</em> be supported.
          </p>
          <p>
            The <code>hold</code> method when invoked <em title="MUST" class=
            "rfc2119">MUST</em> run the following steps:
          </p>
          <ol>
            <li>If <code>state</code> is not equal to <code>active</code>, then
            an <code>InvalidStateError</code> <em title="MUST" class="rfc2119">
              MUST</em> be thrown.
            </li>
            <li>Otherwise make a request to the telephony system to hold the
            call.
            </li>
            <li>Return, and continue these steps asynchronously.
            </li>
            <li>If the request is acknowledged then set <code>state</code> to
            <code>"holding"</code>.
            </li>
          </ol>
          <p>
            When <a class="internalDFN" href=
            "#dfn-tcallcontrol"><i>TCallControl</i></a> is notified that the
            call has been put on hold it <em title="MUST" class=
            "rfc2119">MUST</em> set <code>state</code> to <code>"held"</code>.
          </p>
          <p>
            The <code>resume</code> method when invoked <em title="MUST" class=
            "rfc2119">MUST</em> run the following steps:
          </p>
          <ol>
            <li>If <code>state</code> is not equal to <code>"held"</code>, then
            an <code>InvalidStateError</code> <em title="MUST" class="rfc2119">
              MUST</em> be thrown.
            </li>
            <li>Otherwise make a request to the telephony system to resume the
            call. If the request is acknowledged, then set <code>state</code>
            to <code>"resuming"</code>.
            </li>
          </ol>
          <p>
            When <a class="internalDFN" href=
            "#dfn-tcallcontrol"><i>TCallControl</i></a> detects that the call
            has being actually resumed it <em title="MUST" class=
            "rfc2119">MUST</em> set <code>state</code> to
            <code>"active"</code>.
          </p>
          <p>
            The <code>accept</code> method when invoked <em title="MUST" class=
            "rfc2119">MUST</em> run the following steps:
          </p>
          <ol>
            <li>If <code>state</code> is not equal to <code>"incoming"</code>
            or <code>"waiting"</code>, then an <code>InvalidStateError</code>
            <em title="MUST" class="rfc2119">MUST</em> be thrown.
            </li>
            <li>Otherwise make a request to the telephony system to accept the
            call. If the request is acknowledged then set <code>state</code> to
            <code>"accepted"</code>.
            </li>
          </ol>
          <p>
            The <code>redirect</code> method when invoked <em title="MUST"
            class="rfc2119">MUST</em> run the following steps:
          </p>
          <ol>
            <li>If <code>state</code> is not equal to <code>"incoming"</code>
            or <code>"waiting"</code>, then an <code>InvalidStateError</code>
            <em title="MUST" class="rfc2119">MUST</em> be thrown.
            </li>
            <li>Otherwise make a request to the telephony system to redirect
            the call to the number indicated in the <var>remoteParty</var>
            parameter, return, and continue these steps asynchronously.
            </li>
            <li>If the request is acknowledged, then set <code>state</code> to
            <code>"redirecting"</code>.
            </li>
            <li>When <a class="internalDFN" href=
            "#dfn-tcallcontrol"><i>TCallControl</i></a> is notified that the
            call has been successfully redirected it <em title="MUST" class=
            "rfc2119">MUST</em> set <code>state</code> to
            <code>"disconnected"</code>.
            </li>
          </ol>
          <div class="note">
            <div aria-level="5" class="note-title" role="heading">
              <span>Note</span>
            </div>
            <p class="">
              The telephony service in use must have the call deflection
              feature enabled in order that this method could succeed. For
              instance, in <abbr title=
              "Global System for Mobile Communications">GSM</abbr>, the Call
              Deflection supplementary service must be active.
            </p>
          </div>
          <p>
            The <code>transfer</code> method when invoked <em title="MUST"
            class="rfc2119">MUST</em> run the following steps:
          </p>
          <ol>
            <li>If <code>state</code> is not equal to <code>"active"</code> or
            <code>"held"</code>, then an <code>InvalidStateError</code>
            <em title="MUST" class="rfc2119">MUST</em> be thrown.
            </li>
            <li>Otherwise make a request to the telephony system to transfer
            the call to the number indicated in the <var>thirdParty</var>
            parameter. Note that in <abbr title=
            "Global System for Mobile Communications">GSM</abbr> this requires
            putting the current call on hold, dialing a new call to the third
            party, then initiating the call transfer procedure. If there is an
            error, the original call <em title="MUST" class="rfc2119">MUST</em>
            be resumed and the <a href="#error-steps">error steps</a>
              <em title="MUST" class="rfc2119">MUST</em> be executed without
              modifying the call state. If the request is acknowledged, then
              set <code>state</code> to <code>"transferring"</code>.
            </li>
            <li>When <a class="internalDFN" href=
            "#dfn-tcallcontrol"><i>TCallControl</i></a> is notified that the
            call has been successfully transferred and the original call is
            disconnected, it <em title="MUST" class="rfc2119">MUST</em> set
            <code>state</code> to <code>"disconnected"</code>.
            </li>
          </ol>
          <div class="note">
            <div aria-level="5" class="note-title" role="heading">
              <span>Note</span>
            </div>
            <p class="">
              The telephony service in use must have the call transfer feature
              enabled in order that this method could succeed. For instance, in
              <abbr title="Global System for Mobile Communications">GSM</abbr>,
              the Call Transfer supplementary service must be active.
            </p>
          </div>
          <p>
            The <code>createConference</code> method <em title="MUST" class=
            "rfc2119">MUST</em> run the following steps when invoked on a
            <code>TelephonyCall</code> object, referred as <var>telCall</var>
            in these steps:
          </p>
          <ol id="steps-createConference">
            <li>Set the <code>state</code> of <var>telCall</var> to
            <code>"joining"</code>.
            </li>
            <li>Then, in cellular telephony services, make a request to the
            telephony system to join the active and held calls into a
            multiparty call.
            </li>
            <li>If one of the calls is already a
            <a><code>ConferenceCall</code></a> object, use it as
            <var>confCall</var> in these steps.
            </li>
            <li>Otherwise create a new <a class="idlType" href=
            "#idl-def-ConferenceCall"><code>ConferenceCall</code></a> object
            with a unique conference id, named <var>confCall</var>.
            </li>
            <li>Set the <code>state</code> of <var>confCall</var> to
            <code>"joining"</code>.
            </li>
            <li>Return the <var>confCall</var> object, and continue these steps
            asynchronously.
            </li>
            <li>If the request to the telephony system is successful,
              <ol>
                <li>set the <code>conferenceId</code> property of the
                participating calls to the unique identifier generated for the
                multiparty call <var>confCall</var>.
                </li>
                <li>Add the calls participating in the multiparty call to the
                <code>calls</code> property of the <var>confCall</var> object,
                remove them from the <code>calls</code> array of the
                  <a class="idlType" href=
                  "#idl-def-TelephonyManager"><code>TelephonyManager</code></a>
                  object, and set their <code>state</code> to
                  <code>'multiparty'</code>.
                </li>
                <li>Add the <var>confCall</var> object to the
                <code>calls</code> array of the <a class="idlType" href=
                "#idl-def-TelephonyManager"><code>TelephonyManager</code></a>
                object.
                </li>
                <li>Set the <code>state</code> of <var>confCall</var> to <code>
                  "active"</code>.
                </li>
                <li>
                  <a class="internalDFN" href="#dfn-queue-a-task">Queue a
                  task</a> to <a class="internalDFN" href=
                  "#dfn-fire-a-simple-event">fire a simple event</a> named
                  <code><a>participantadded</a></code> at <var>confCall</var>.
                  object
                </li>
                <li>Follow the state changes of <var>confCall</var> through the
                state change events.
                </li>
                <li>If there is any error during the method call, then the
                <a href="#error-steps">error steps</a> <em title="MUST"
                  class="rfc2119">MUST</em> be executed on the
                  <var>telCall</var> object.
                </li>
              </ol>
            </li>
          </ol>
          <figure id=
          "fig-the-figure-depicts-the-most-usual-state-transitions-for-received-calls.">
          <img src="inbound_call_state_diagram.gif" alt=
          "Inbound Call State Diagram" title="Inbound Call State Diagram">
            <figcaption>
              Fig. <span class="figno">1</span> <span class="fig-title">The
              figure depicts the most usual state transitions for received
              calls.</span>
            </figcaption>
          </figure>
          <figure id=
          "fig-the-figure-depicts-the-most-usual-state-transitions-for-dialed-calls.">
          <img src="outbound_call_state_diagram.gif" alt=
          "Inbound Call State Diagram" title="Inbound Call State Diagram">
            <figcaption>
              Fig. <span class="figno">2</span> <span class="fig-title">The
              figure depicts the most usual state transitions for dialed
              calls.</span>
            </figcaption>
          </figure>
        </section><!-- telephony-steps -->
      </section><!-- TelephonyCall -->
    </section>
    <!-- - - - - - - - - - - -  Interface ConferenceCall - - - - - - - - - - - - -->
    <section id="conferencecall-interface">
      <!--OddPage-->
      <h2>
        <span class="secno">11.</span> <a class="idlType" href=
        "#idl-def-ConferenceCall"><code>ConferenceCall</code></a> Interface
      </h2>
      <p>
        Describes the object controlling multiparty calls, and managing the
        <a class="idlType" href=
        "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> objects
        participating in the multiparty call.
      </p>
      <pre class="idl">
<span class="idlImplements"><a class="idlType" href=
"#idl-def-ConferenceCall"><code>ConferenceCall</code></a> implements <a class=
"idlType" href="#idl-def-CallHandler"><code>CallHandler</code></a>;</span>
</pre>
      <div class="idlImplementsDesc">
        <p>
          All instances of the <code><a class="idlType" href=
          "#idl-def-ConferenceCall"><code>ConferenceCall</code></a></code> type
          are defined to also implement the <a class="idlType" href=
          "#idl-def-CallHandler"><code>CallHandler</code></a> interface.
        </p>
      </div>
      <pre class="idl">
<span class="idlInterface" id="idl-def-ConferenceCall">interface <span class=
"idlInterfaceID">ConferenceCall</span> : <span class=
"idlSuperclass"><a>EventTarget</a></span> {
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a></span>       <span class="idlAttrName"><a href=
"#widl-ConferenceCall-conferenceId">conferenceId</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a class="idlType" href=
"#idl-def-TelephonyCall"><code>TelephonyCall</code></a>[]</span> <span class=
"idlAttrName"><a href="#widl-ConferenceCall-calls">calls</a></span>;</span>
<span class="idlMethod">    <span class=
"idlMethType"><a>void</a></span> <span class="idlMethName"><a href=
"#widl-ConferenceCall-split-void-TelephonyCall-participantCall">split</a></span> (<span class="idlParam"><span class="idlParamType"><a class="idlType"
href=
"#idl-def-TelephonyCall"><code>TelephonyCall</code></a></span> <span class="idlParamName">participantCall</span></span>);</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href=
"#widl-ConferenceCall-onparticipantadded">onparticipantadded</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href=
"#widl-ConferenceCall-onparticipantremoved">onparticipantremoved</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href=
"#widl-ConferenceCall-onjoining">onjoining</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href=
"#widl-ConferenceCall-onactive">onactive</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href=
"#widl-ConferenceCall-onsplitting">onsplitting</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href=
"#widl-ConferenceCall-onholding">onholding</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href="#widl-ConferenceCall-onheld">onheld</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href=
"#widl-ConferenceCall-onresuming">onresuming</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href=
"#widl-ConferenceCall-ondisconnecting">ondisconnecting</a></span>;</span>
<span class="idlAttribute">                attribute <span class=
"idlAttrType"><a class="internalDFN" href=
"#dfn-eventhandler">EventHandler</a></span>    <span class=
"idlAttrName"><a href=
"#widl-ConferenceCall-ondisconnected">ondisconnected</a></span>;</span>
};</span>
</pre>
      <section id="attributes-7">
        <h3>
          <span class="secno">11.1</span> Attributes
        </h3>
        <dl class="attributes">
          <dt id="widl-ConferenceCall-calls">
            <code>calls</code> of type array of <span class=
            "idlAttrType"><a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a></span>,
            readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the array of <a class="idlType" href=
            "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> objects
            managed by the multiparty call object.
          </dd>
          <dt id="widl-ConferenceCall-conferenceId">
            <code>conferenceId</code> of type <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the conference identifier unique in the
            system and in call history. It <em title="MUST NOT" class=
            "rfc2119">MUST NOT</em> be the empty string.
          </dd>
          <dt id="widl-ConferenceCall-onactive">
            <code>onactive</code> of type <span class="idlAttrType"><a class=
            "internalDFN" href="#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when the call state changes to
            <code>"active"</code> and the <code>active</code> event is
            dispatched.
          </dd>
          <dt id="widl-ConferenceCall-ondisconnected">
            <code>ondisconnected</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when the call state changes to
            <code>"disconnected"</code> and the <code>disconnected</code> event
            is dispatched.
          </dd>
          <dt id="widl-ConferenceCall-ondisconnecting">
            <code>ondisconnecting</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when the call state changes to
            <code>"disconnecting"</code> and the <code>disconnecting</code>
            event is dispatched.
          </dd>
          <dt id="widl-ConferenceCall-onheld">
            <code>onheld</code> of type <span class="idlAttrType"><a class=
            "internalDFN" href="#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when the call state changes to
            <code>"held"</code> and the <code>held</code> event is dispatched.
          </dd>
          <dt id="widl-ConferenceCall-onholding">
            <code>onholding</code> of type <span class="idlAttrType"><a class=
            "internalDFN" href="#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when the call state changes to
            <code>"holding"</code> and the <code>holding</code> event is
            dispatched.
          </dd>
          <dt id="widl-ConferenceCall-onjoining">
            <code>onjoining</code> of type <span class="idlAttrType"><a class=
            "internalDFN" href="#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when the call state changes to
            <code>"joining"</code> and the <code>joining</code> event is
            dispatched.
          </dd>
          <dt id="widl-ConferenceCall-onparticipantadded">
            <code>onparticipantadded</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when a new participant has been added to the
            conference call as a result of the <code>createConference</code>
            method, and the <code>participantadded</code> event is dispatched.
          </dd>
          <dt id="widl-ConferenceCall-onparticipantremoved">
            <code>onparticipantremoved</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when a participant has been removed from the
            conference call as the result of the <code>split</code> method, or
            because the participant call was disconnected, and the
            <code>participantadded</code> event is dispatched.
          </dd>
          <dt id="widl-ConferenceCall-onresuming">
            <code>onresuming</code> of type <span class="idlAttrType"><a class=
            "internalDFN" href="#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when the call state changes to
            <code>"resuming"</code> and the <code>resuming</code> event is
            dispatched.
          </dd>
          <dt id="widl-ConferenceCall-onsplitting">
            <code>onsplitting</code> of type <span class=
            "idlAttrType"><a class="internalDFN" href=
            "#dfn-eventhandler">EventHandler</a></span>,
          </dt>
          <dd>
            Event handler called when the call state changes to
            <code>"splitting"</code> and the <code>splitting</code> event is
            dispatched.
          </dd>
        </dl>
      </section>
      <section id="methods-3">
        <h3>
          <span class="secno">11.2</span> Methods
        </h3>
        <dl class="methods">
          <dt id=
          "widl-ConferenceCall-split-void-TelephonyCall-participantCall">
            <code>split</code>
          </dt>
          <dd>
            Initiates splitting the specified participant <a class="idlType"
            href="#idl-def-TelephonyCall"><code>TelephonyCall</code></a>
            object, activate it and put this multiparty call on hold.
            <table class="parameters">
              <tr>
                <th>
                  Parameter
                </th>
                <th>
                  Type
                </th>
                <th>
                  Nullable
                </th>
                <th>
                  Optional
                </th>
                <th>
                  Description
                </th>
              </tr>
              <tr>
                <td class="prmName">
                  participantCall
                </td>
                <td class="prmType">
                  <code><a class="idlType" href=
                  "#idl-def-TelephonyCall"><code>TelephonyCall</code></a></code>
                </td>
                <td class="prmNullFalse">
                  ✘
                </td>
                <td class="prmOptFalse">
                  ✘
                </td>
                <td class="prmDesc">
                  Represents the <a class="idlType" href=
                  "#idl-def-TelephonyCall"><code>TelephonyCall</code></a>
                  object of the call participant to be split from the
                  multiparty call.
                </td>
              </tr>
            </table>
            <div>
              <em>Return type:</em> <code><a>void</a></code>
            </div>
          </dd>
        </dl>
      </section>
      <section id="multiparty-steps">
        <h3>
          <span class="secno">11.3</span> Steps
        </h3>
        <p>
          The IDL attribute <dfn id="dfn-call-state" title=
          "call-state"><code>state</code></dfn> <em title="MUST" class=
          "rfc2119">MUST</em> return the current status of the multiparty call.
          It <em title="MUST" class="rfc2119">MUST</em> be one of the following
          values:
        </p>
        <table class="simple">
          <thead>
            <tr>
              <th>
                multiparty call state
              </th>
              <th>
                string value
              </th>
              <th>
                description
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <dfn id="call-state-joining"><code>joining</code></dfn>
              </td>
              <td>
                <code>'joining'</code>
              </td>
              <td>
                The multiparty call is being created, or joined with another
                call
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="call-state-active"><code>active</code></dfn>
              </td>
              <td>
                <code>"active"</code>
              </td>
              <td>
                The multiparty call is ongoing
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="call-state-splitting"><code>splitting</code></dfn>
              </td>
              <td>
                <code>'splitting'</code>
              </td>
              <td>
                A call is being split from a multiparty call.
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="call-state-holding"><code>holding</code></dfn>
              </td>
              <td>
                <code>'holding'</code>
              </td>
              <td>
                The call is being put on hold
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="call-state-held"><code>held</code></dfn>
              </td>
              <td>
                <code>'held'</code>
              </td>
              <td>
                The call has been put on hold
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="call-state-resuming"><code>resuming</code></dfn>
              </td>
              <td>
                <code>'resuming'</code>
              </td>
              <td>
                The call, which was on hold, is being resumed
              </td>
            </tr>
            <tr>
              <td>
                <dfn id=
                "call-state-disconnecting"><code>disconnecting</code></dfn>
              </td>
              <td>
                <code>'disconnecting'</code>
              </td>
              <td>
                A request to disconnect the call has been made and it is
                progressing
              </td>
            </tr>
            <tr>
              <td>
                <dfn id=
                "call-state-disconnected"><code>disconnected</code></dfn>
              </td>
              <td>
                <code>'disconnected'</code>
              </td>
              <td>
                The multiparty call has been disconnected and this object is
                invalid for call control. In this final state, the
                implementation <em title="MUST" class="rfc2119">MUST</em> throw
                an <code>ILLEGAL_STATE</code> exception when any method call is
                attempted.
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          For multiparty calls, the implementation <em title="MUST" class=
          "rfc2119">MUST</em> generate a unique identifier stored in the
          <code>callId</code> property. In <abbr title=
          "Global System for Mobile Communications">GSM</abbr>, the
          <code>callId</code> of any participating call could be used in a
          multiparty operation, and the telephony network will reply with using
          the same value. But for forward compatibility reasons, the
          implementation <em title="MUST" class="rfc2119">MUST</em> generate a
          separate <code>callId</code> value for the multiparty call, which
          <em title="MUST" class="rfc2119">MUST</em> be unique in the system
          and the local call history. For <abbr title=
          "Global System for Mobile Communications">GSM</abbr> multiparty
          functionality, The implementation <em title="MUST" class=
          "rfc2119">MUST</em> map this to an appropriate transaction identifier
          accepted by the telephony service. Also, the transaction identifiers
          received from the network <em title="MUST" class="rfc2119">MUST</em>
          be mapped back by the implementation to the unique conference call
          identifier of the multiparty call.
        </p>
        <p>
          The <code>split</code> method when invoked <em title="MUST" class=
          "rfc2119">MUST</em> run the following steps:
        </p>
        <ol>
          <li>If the provided <var>participantCall</var> does not identify a
          valid <a class="idlType" href=
          "#idl-def-TelephonyCall"><code>TelephonyCall</code></a> object which
          is part of this multiparty call, then an
          <code>InvalidModificationError</code> <em title="MUST" class=
          "rfc2119">MUST</em> be thrown.
          </li>
          <li>Otherwise, set the <code>state</code> of the
          <var>participantCall</var> and that of this
          <code>ConferenceCall</code> object to <code>"splitting"</code>.
          </li>
          <li>Make a request to the telephony system to split the call
          participant from the multiparty call.
          </li>
          <li>Return, and continue these steps asynchronously.
          </li>
          <li>If the request was successful, the telephony system will put the
          multiparty call on hold and activate the split call. The
          implementation <em title="MUST" class="rfc2119">MUST</em> follow the
          state transitions on the calls as described in this specification.
          </li>
          <li>Reset the <code>conferenceId</code> of the split call to
          <code>null</code>.
          </li>
        </ol>
        <div class="note">
          <div aria-level="4" class="note-title" role="heading">
            <span>Note</span>
          </div>
          <p class="">
            In CDMA, only 3-way calling is supported. This is an IS-41 CN
            limitation (see Network Interworking between <abbr title=
            "Global System for Mobile Communications">GSM</abbr>-MAP and
            TIA-41, <a href=
            "http://www.scribd.com/doc/7029977/Network-Inter-Working-Between-GSM-MAP-and-ANSI41-CDMA">
            3GPP2 document</a>, p. 1-50 provides a comparison of multiparty
            call and 3-way call.
          </p>
        </div>
      </section><!-- conference-steps -->
      <section id="conference-eventhandlers">
        <!-- conference-eventhandlers -->
        <h3>
          <span class="secno">11.4</span> Event handlers
        </h3>
        <p>
          The following are the <a>event handlers</a> <em title="MUST" class=
          "rfc2119">MUST</em> be supported as attributes by the <a class=
          "idlType" href=
          "#idl-def-ConferenceCall"><code>ConferenceCall</code></a> object:
        </p>
        <table class="simple">
          <thead>
            <tr>
              <th>
                event handler
              </th>
              <th>
                event name
              </th>
              <th>
                event type
              </th>
              <th>
                short description
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <dfn id="dfn-onactive-1"><code>onactive</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-active-1">active</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles call state changes to the <code>"active"</code> state
              </td>
            </tr>
            <tr>
              <td>
                <dfn id=
                "dfn-ondisconnecting-1"><code>ondisconnecting</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-disconnecting-1">disconnecting</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles the call state changes to the
                <code>"disconnecting"</code> state
              </td>
            </tr>
            <tr>
              <td>
                <dfn id=
                "dfn-ondisconnected-1"><code>ondisconnected</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-disconnected-1">disconnected</dfn></code>
              </td>
              <td>
                <a class="idlType" href=
                "#idl-def-TelephonyEvent"><code>TelephonyEvent</code></a>
              </td>
              <td>
                handles call state changes to the <code>"disconnected"</code>
                state
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="dfn-onholding-1"><code>onholding</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-holding-1">holding</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles call state changes to the <code>"holding"</code> state
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="dfn-onheld-1"><code>onheld</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-held-1">held</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles call state changes to the <code>"held"</code> state
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="dfn-onresuming-1"><code>onresuming</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-resuming-1">resuming</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles call state changes to the <code>"resuming"</code> state
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="dfn-onjoining-1"><code>onjoining</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-joining-1">joining</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles call state changes to the <code>"joining"</code> state
              </td>
            </tr>
            <tr>
              <td>
                <dfn id="dfn-onsplitting-1"><code>onsplitting</code></dfn>
              </td>
              <td>
                <code><dfn id="dfn-splitting-1">splitting</dfn></code>
              </td>
              <td>
                <a>simple event</a>
              </td>
              <td>
                handles call state changes to the <code>"splitting"</code>
                state
              </td>
            </tr>
          </tbody>
        </table>
      </section><!-- conference-eventhandlers -->
    </section><!-- ConferenceCall -->
    <!-- - - - - - - - - - -  CallState Enum - - - - - - - - - - -  -->
    <section id="callstate-enum">
      <!--OddPage-->
      <h2>
        <span class="secno">12.</span> <a class="idlType" href=
        "#idl-def-CallState"><code>CallState</code></a> enum
      </h2>
      <pre class="idl">
<span class="idlEnum" id="idl-def-CallState">enum <span class=
"idlEnumID">CallState</span> {
    "<a href="#idl-def-CallState.dialing" class="idlEnumItem">dialing</a>",
    "<a href="#idl-def-CallState.connecting" class=
"idlEnumItem">connecting</a>",
    "<a href="#idl-def-CallState.alerting" class="idlEnumItem">alerting</a>",
    "<a href="#idl-def-CallState.active" class="idlEnumItem">active</a>",
    "<a href="#idl-def-CallState.incoming" class="idlEnumItem">incoming</a>",
    "<a href="#idl-def-CallState.waiting" class="idlEnumItem">waiting</a>",
    "<a href="#idl-def-CallState.accepted" class="idlEnumItem">accepted</a>",
    "<a href="#idl-def-CallState.holding" class="idlEnumItem">holding</a>",
    "<a href="#idl-def-CallState.held" class="idlEnumItem">held</a>",
    "<a href="#idl-def-CallState.resuming" class="idlEnumItem">resuming</a>",
    "<a href="#idl-def-CallState.redirecting" class=
"idlEnumItem">redirecting</a>",
    "<a href="#idl-def-CallState.transferring" class=
"idlEnumItem">transferring</a>",
    "<a href="#idl-def-CallState.disconnecting" class=
"idlEnumItem">disconnecting</a>",
    "<a href="#idl-def-CallState.disconnected" class=
"idlEnumItem">disconnected</a>",
    "<a href="#idl-def-CallState.joining" class="idlEnumItem">joining</a>",
    "<a href="#idl-def-CallState.multiparty" class=
"idlEnumItem">multiparty</a>",
    "<a href="#idl-def-CallState.splitting" class="idlEnumItem">splitting</a>"
};</span>
</pre>
      <table class="simple">
        <tr>
          <th colspan="2">
            Enumeration description
          </th>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.dialing">dialing</code>
          </td>
          <td>
            An outbound call that has been dialed and is being connected.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.connecting">connecting</code>
          </td>
          <td>
            A request to establish the call has been made and it is
            progressing.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.alerting">alerting</code>
          </td>
          <td>
            The destination number has been reached and alerting is taking
            place.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.active">active</code>
          </td>
          <td>
            The call is ongoing.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.incoming">incoming</code>
          </td>
          <td>
            An incoming call is being received whilst no other call is
            progressing.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.waiting">waiting</code>
          </td>
          <td>
            An incoming call that has been received whilst there was another
            call progressing, and the call waiting service is active.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.accepted">accepted</code>
          </td>
          <td>
            An incoming call has been accepted and is being connected.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.holding">holding</code>
          </td>
          <td>
            The call is being put on hold.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.held">held</code>
          </td>
          <td>
            The call has been put on hold.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.resuming">resuming</code>
          </td>
          <td>
            The call, which was on hold, is being resumed.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.redirecting">redirecting</code>
          </td>
          <td>
            The call is being redirected to another remote party from the same
            <a class="internalDFN" href="#dfn-telephony-service">telephony
            service</a>.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.transferring">transferring</code>
          </td>
          <td>
            The call is being transferred to another remote party from the same
            <a class="internalDFN" href="#dfn-telephony-service">telephony
            service</a>.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.disconnecting">disconnecting</code>
          </td>
          <td>
            A request to disconnect the call has been made and it is
            progressing.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.disconnected">disconnected</code>
          </td>
          <td>
            The call has been disconnected and this object is invalid for call
            control. In this final state, the implementation <em title="MUST"
            class="rfc2119">MUST</em> throw an <code>ILLEGAL_STATE</code>
            exception when any method call is attempted.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.joining">joining</code>
          </td>
          <td>
            The call is being joined with another call to become a multiparty
            call.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.multiparty">multiparty</code>
          </td>
          <td>
            The call is locked in a <a class="idlType" href=
            "#idl-def-ConferenceCall"><code>ConferenceCall</code></a> object
            and <em title="MUST NOT" class="rfc2119">MUST NOT</em> be managed
            any more using this object. While in this state, the implementation
            <em title="MUST" class="rfc2119">MUST</em> throw an
            <code>ILLEGAL_STATE</code> exception when any method call is
            attempted.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallState.splitting">splitting</code>
          </td>
          <td>
            The call is being split from a multiparty call.
          </td>
        </tr>
      </table>
      <p>
        Some of these states are <dfn id="dfn-soft-states">soft states</dfn>,
        that is, transitory states in which the application is placed after
        making a request to the telephony system and until it is completed. For
        instance the application remains in <code>"holding"</code> state since
        it invokes the hold() method and until the telephony system actually
        holds the call. In some implementations these soft states can be
        skipped. The following are the soft states defined by this
        specification: <code>"accepted"</code>, <code>"disconnecting"</code>,
        <code>"holding"</code>, <code>"resuming"</code>.
      </p>
      <p>
        On the contrary, <dfn id="dfn-hard-states">hard states</dfn> <em title=
        "MUST" class="rfc2119">MUST</em> be supported by the implementation:
        <code>"dialing"</code>, <code>"alerting"</code>, <code>"active"</code>,
        <code>"disconnected"</code>, <code>"incoming"</code>,
        <code>"waiting"</code>, <code>"held"</code>. For calls participating in
        multiparty calls, the following additional call states <em title="MUST"
        class="rfc2119">MUST</em> be supported: <code>"joining"</code>,
        <code>"splitting"</code>, <code>"multiparty"</code>. For call transfer
        functionality, the additional <code>"transferring"</code> state
        <em title="MUST" class="rfc2119">MUST</em> be supported.
      </p>
    </section>
    <!-- - - - - - - - - - -  Interface CallHistoryEntry - - - - - - - - - - -  -->
    <section id="callhistoryentry-interface" class="informative">
      <!--OddPage-->
      <h2>
        <span class="secno">13.</span> <a class="idlType" href=
        "#idl-def-CallHistoryEntry"><code>CallHistoryEntry</code></a> Interface
      </h2>
      <p>
        <em>This section is non-normative.</em>
      </p>
      <p>
        This interface describes the minimum set of properties which <em title=
        "SHOULD" class="rfc2119">SHOULD</em> be supported for call history
        entries. For multiparty call there <em title="MUST" class=
        "rfc2119">MUST</em> be a separate <a class="idlType" href=
        "#idl-def-CallHistoryEntry"><code>CallHistoryEntry</code></a> object
        for each call participant, sharing the same value for the
        <code>conferenceId</code> property.
      </p>
      <div class="note">
        <div aria-level="3" class="note-title" role="heading">
          <span>Note</span>
        </div>
        <p class="">
          It is up the the implementations and applications how to store and
          access call history. This document only specifies the minimum content
          of the data to be saved.
        </p>
      </div>
      <pre class="idl">
<span class="idlInterface" id="idl-def-CallHistoryEntry">[<span class=
"extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">CallHistoryEntry</span> {
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a></span>          <span class=
"idlAttrName"><a href=
"#widl-CallHistoryEntry-remoteParty">remoteParty</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a></span>          <span class=
"idlAttrName"><a href=
"#widl-CallHistoryEntry-serviceId">serviceId</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>DOMString</a>?</span>         <span class=
"idlAttrName"><a href=
"#widl-CallHistoryEntry-conferenceId">conferenceId</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>Date</a></span>               <span class=
"idlAttrName"><a href=
"#widl-CallHistoryEntry-startTime">startTime</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>unsigned long long</a></span> <span class=
"idlAttrName"><a href=
"#widl-CallHistoryEntry-duration">duration</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a class="idlType" href=
"#idl-def-CallDirection"><code>CallDirection</code></a></span>      <span class="idlAttrName"><a href="#widl-CallHistoryEntry-direction">direction</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a class="idlType" href=
"#idl-def-DisconnectReason"><code>DisconnectReason</code></a>?</span>  <span class="idlAttrName"><a href="#widl-CallHistoryEntry-disconnectReason">disconnectReason</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class=
"idlAttrType"><a>boolean</a></span>            <span class=
"idlAttrName"><a href=
"#widl-CallHistoryEntry-emergency">emergency</a></span>;</span>
};</span>
</pre>
      <section id="attributes-8">
        <h3>
          <span class="secno">13.1</span> Attributes
        </h3>
        <p>
          <em>This section is non-normative.</em>
        </p>
        <dl class="attributes">
          <dt id="widl-CallHistoryEntry-conferenceId">
            <code>conferenceId</code> of type <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly , nullable
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="internalDFN" href=
            "#dfn-conference-id">conference id</a> of the call, if the call has
            participated in a multiparty call. Otherwise, return
            <code>null</code>. string.
          </dd>
          <dt id="widl-CallHistoryEntry-direction">
            <code>direction</code> of type <span class="idlAttrType"><a class=
            "idlType" href=
            "#idl-def-CallDirection"><code>CallDirection</code></a></span>,
            readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="idlType" href=
            "#idl-def-CallDirection"><code>CallDirection</code></a>.
          </dd>
          <dt id="widl-CallHistoryEntry-disconnectReason">
            <code>disconnectReason</code> of type <span class=
            "idlAttrType"><a class="idlType" href=
            "#idl-def-DisconnectReason"><code>DisconnectReason</code></a></span>,
            readonly , nullable
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="idlType" href=
            "#idl-def-DisconnectReason"><code>DisconnectReason</code></a> if
            available, or return <code>null</code> otherwise.
          </dd>
          <dt id="widl-CallHistoryEntry-duration">
            <code>duration</code> of type <span class="idlAttrType"><a>unsigned
            long long</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the duration of the call expressed in
            milliseconds.
          </dd>
          <dt id="widl-CallHistoryEntry-emergency">
            <code>emergency</code> of type <span class=
            "idlAttrType"><a>boolean</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return true if the call was an emergency call,
            or false otherwise.
          </dd>
          <dt id="widl-CallHistoryEntry-remoteParty">
            <code>remoteParty</code> of type <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the remote party identifier (e.g.
            telephone number) of the call participant.
          </dd>
          <dt id="widl-CallHistoryEntry-serviceId">
            <code>serviceId</code> of type <span class=
            "idlAttrType"><a>DOMString</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the <a class="internalDFN" href=
            "#dfn-telephony-service-id">telephony service id</a> of the
            <a class="internalDFN" href="#dfn-telephony-service">telephony
            service</a> used for the call.
          </dd>
          <dt id="widl-CallHistoryEntry-startTime">
            <code>startTime</code> of type <span class=
            "idlAttrType"><a>Date</a></span>, readonly
          </dt>
          <dd>
            When getting, the user agent <em title="MUST" class=
            "rfc2119">MUST</em> return the starting time of the call, measured
            from when the call is in <code>"active"</code> state.
          </dd>
        </dl>
      </section>
    </section><!-- CallHistoryEntry -->
    <!-- - - - - - - - - - -  DisconnectReason Enum - - - - - - - - - - -  -->
    <section id="disconnectreason-enum">
      <!--OddPage-->
      <h2>
        <span class="secno">14.</span> <a class="idlType" href=
        "#idl-def-DisconnectReason"><code>DisconnectReason</code></a> enum
      </h2>
      <pre class="idl">
<span class="idlEnum" id="idl-def-DisconnectReason">enum <span class=
"idlEnumID">DisconnectReason</span> {
    "<a href="#idl-def-DisconnectReason.local" class="idlEnumItem">local</a>",
    "<a href="#idl-def-DisconnectReason.remote" class=
"idlEnumItem">remote</a>",
    "<a href="#idl-def-DisconnectReason.network" class=
"idlEnumItem">network</a>",
    "<a href="#idl-def-DisconnectReason.busy" class="idlEnumItem">busy</a>",
    "<a href="#idl-def-DisconnectReason.rejected" class=
"idlEnumItem">rejected</a>",
    "<a href="#idl-def-DisconnectReason.redirected" class=
"idlEnumItem">redirected</a>",
    "<a href="#idl-def-DisconnectReason.unreachable" class=
"idlEnumItem">unreachable</a>",
    "<a href="#idl-def-DisconnectReason.no-answer" class=
"idlEnumItem">no-answer</a>",
    "<a href="#idl-def-DisconnectReason.network-unreachable" class=
"idlEnumItem">network-unreachable</a>",
    "<a href="#idl-def-DisconnectReason.barred" class=
"idlEnumItem">barred</a>",
    "<a href="#idl-def-DisconnectReason.no-service" class=
"idlEnumItem">no-service</a>",
    "<a href="#idl-def-DisconnectReason.invalid-number" class=
"idlEnumItem">invalid-number</a>"
};</span>
</pre>
      <table class="simple">
        <tr>
          <th colspan="2">
            Enumeration description
          </th>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.local">local</code>
          </td>
          <td>
            The call was disconnected by the user, or the device, and no more
            specific reason is known.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.remote">remote</code>
          </td>
          <td>
            The call was disconnected by the remote party, and no more specific
            reason is known.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.network">network</code>
          </td>
          <td>
            The call was disconnected by the network, and no more specific
            reason is known.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.busy">busy</code>
          </td>
          <td>
            The call was disconnected by the network, because the remote party
            was busy.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.rejected">rejected</code>
          </td>
          <td>
            The call was disconnected because the remote party rejected the
            call.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.redirected">redirected</code>
          </td>
          <td>
            The call has been redirected to another subscriber.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.unreachable">unreachable</code>
          </td>
          <td>
            The call was disconnected by the network, because the remote party
            was unreachable by the network.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.no-answer">no-answer</code>
          </td>
          <td>
            The call was disconnected by the network, because the remote party
            has not answered and the call has timed out.
          </td>
        </tr>
        <tr>
          <td>
            <code id=
            "idl-def-DisconnectReason.network-unreachable">network-unreachable</code>
          </td>
          <td>
            The call was disconnected because the network was unreachable.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.barred">barred</code>
          </td>
          <td>
            The call was disconnected because it was barred.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-DisconnectReason.no-service">no-service</code>
          </td>
          <td>
            The call was not made because there is no telephony service set up
            and enabled (e.g. no SIM card).
          </td>
        </tr>
        <tr>
          <td>
            <code id=
            "idl-def-DisconnectReason.invalid-number">invalid-number</code>
          </td>
          <td>
            The call was disconnected by the network, because the remote party
            identifier was invalid.
          </td>
        </tr>
      </table>
    </section>
    <!-- - - - - - - - - - -  CallDirection Enum - - - - - - - - - - -  -->
    <section id="calldirection-enum">
      <!--OddPage-->
      <h2>
        <span class="secno">15.</span> <a class="idlType" href=
        "#idl-def-CallDirection"><code>CallDirection</code></a> enum
      </h2>
      <pre class="idl">
<span class="idlEnum" id="idl-def-CallDirection">enum <span class=
"idlEnumID">CallDirection</span> {
    "<a href="#idl-def-CallDirection.dialed" class="idlEnumItem">dialed</a>",
    "<a href="#idl-def-CallDirection.received" class=
"idlEnumItem">received</a>",
    "<a href="#idl-def-CallDirection.missed" class="idlEnumItem">missed</a>",
    "<a href="#idl-def-CallDirection.missed-new" class=
"idlEnumItem">missed-new</a>"
};</span>
</pre>
      <table class="simple">
        <tr>
          <th colspan="2">
            Enumeration description
          </th>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallDirection.dialed">dialed</code>
          </td>
          <td>
            The call has been dialed.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallDirection.received">received</code>
          </td>
          <td>
            The call has been received.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallDirection.missed">missed</code>
          </td>
          <td>
            The call has been missed.
          </td>
        </tr>
        <tr>
          <td>
            <code id="idl-def-CallDirection.missed-new">missed-new</code>
          </td>
          <td>
            The call was a missed call not seen yet by the user.
          </td>
        </tr>
      </table>
    </section>
    <!-- - - - - - - - - - - - - - Call typedef - - - - - - - - - - - - - - -->
    <section id="call-typedef">
      <!--OddPage-->
      <h2>
        <span class="secno">16.</span> <code>Call</code> typedef
      </h2>
      <pre class="idl">
<span class="idlTypedef" id="idl-def-Call">typedef <span class=
"idlTypedefType">(<a class="idlType" href=
"#idl-def-TelephonyCall"><code>TelephonyCall</code></a> or <a class="idlType"
href=
"#idl-def-ConferenceCall"><code>ConferenceCall</code></a>)</span> <span class=
"idlTypedefID">Call</span>;</span>
</pre>
      <div class="idlTypedefDesc"></div>
    </section>
    <section id="error-steps">
      <!--OddPage-->
      <h2>
        <span class="secno">17.</span> Error Steps
      </h2>
      <p>
        If there is any error during the method calls which is not handled by
        exceptions, the following steps <em title="MUST" class=
        "rfc2119">MUST</em> be run:
      </p>
      <ol>
        <li>Set the <code>error</code> property of the <a class="idlType"
          href="#idl-def-CallHandler"><code>CallHandler</code></a> object
          appropriately
        </li>
        <li>queue a task to fire a simple event named <a class="internalDFN"
        href="#dfn-error"><code>error</code></a> at the <a class="idlType"
          href="#idl-def-CallHandler"><code>CallHandler</code></a> object.
        </li>
      </ol>
      <p>
        The error name, together with the call state determine the error
        condition. All <code>DOMError</code> error names are supported, out of
        which the following names <em title="MUST" class="rfc2119">MUST</em> be
        used with the semantics described here:
      </p>
      <table class="simple">
        <thead>
          <tr>
            <th>
              Name
            </th>
            <th>
              Description
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              InvalidStateError
            </td>
            <td>
              The call state is invalid, or the an attempted operation
              conflicts with the call state in the implementation of the
              telephony modem and middleware
            </td>
          </tr>
          <tr>
            <td>
              InvalidModificationError
            </td>
            <td>
              The attempted operation conflicts with the call state or other
              constraints in the implementation, for instance attempting to
              disconnect a held call in a <abbr title=
              "Global System for Mobile Communications">GSM</abbr> network.
            </td>
          </tr>
          <tr>
            <td>
              NetworkError
            </td>
            <td>
              There was a telephony network error during the operation
            </td>
          </tr>
          <tr>
            <td>
              TimeoutError
            </td>
            <td>
              The attempted operation timed out
            </td>
          </tr>
          <tr>
            <td>
              NotSupportedError
            </td>
            <td>
              The attempted operation is not supported by the implementation,
              or the telephony network. This includes cases when a needed
              network feature (such as a supplementary service like Call
              Transfer) is not enabled.
            </td>
          </tr>
          <tr>
            <td>
              SecurityError
            </td>
            <td>
              The attempted operation is not permitted.
            </td>
          </tr>
        </tbody>
      </table>
    </section>
    <!-- - - - - - - - - - - - - - Acknowledgements - - - - - - - - - - - - - - -->
    <section id="acknowledgements">
      <!--OddPage-->
      <h2>
        <span class="secno">18.</span> Acknowledgements
      </h2>
      <p>
        The editors would like to express their gratitude to the Mozilla B2G
        Team for their technical guidance, implementation work and support,
        especially to Ben Turner and Jonas Sicking, the authors of the
        <cite><a href="https://wiki.mozilla.org/WebAPI/WebTelephony">B2G
        WebTelephony API</a></cite>. Also, thanks to Denis Kenzior
        (<cite><a href="https://ofono.org/">ofono</a></cite> maintainer) and
        Oleg Zhurakivskyy of Intel Open Source Technology Center, and many
        others for their advice and support.
      </p>
    </section>
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
* An example how telephony services with different dynamic service capabilities
* could be represented. This is work in progress, and it is NOT part of the
* Telephony specification.
< !- - - - - - - - - - - - Interface TelephonyService - - - - - - - - - - - - -
<section>
  <h2><a>TelephonyService</a> Interface</h2>
  <p>The interface which manages various <a>telephony service</a>s present in
  the system. Different services may provide different set of interfaces for
  managing service specific settings. This interface lists the objects which
  MAY be supported by particular implementations and services.</p>

  <dl title="[NoInterfaceObject]
    interface TelephonyService"
    class="idl">
    <dt>readonly attribute DOMString id</dt>
    <dd>It MUST return the <a>telephony service id</a> of the
    <a>telephony service </a>.</dd>

    <dt>attribute DOMString displayName</dt>
    <dd>The string value as displayed to the user by the application. It MAY be
    a localization string identifier.</dd>

    <dt>readonly attribute DOMString provider</dt>
    <dd>The name of the service provider. MUST be unique in the telephony
    domain. A provider may have multiple services provisioned, therefore
    multiple <code>TelephonyService</code> objects may share a provider.</dd>

    <dt>attribute boolean enabled</dt>
    <dd>MUST return or set the enabled state of the service.</dd>

    <dt>readonly attribute SimInfo? siminfo</dt>
    <dd>Interface for handling SIM informations (e.g. IMSI, MCC, MNC, etc). If
    not available, or not supported the value MUST be <code>null</code>.</dd>

    <dt>readonly attribute SimSettings? simsettings</dt>
    <dd>Interface for SIM settings (PIN code, PUK code, etc.) If not available,
    or not supported the value MUST be <code>null</code>.</dd>

    <dt>readonly attribute TelephonyNetwork? network</dt>
    <dd>Interface for operator network settings (automatic or manual
    connection, etc. If not available, or not supported the value MUST be
    <code>null</code>.</dd>

    <dt>readonly attribute CallForwarding? forwarding</dt>
    <dd>Interface to manage call forwarding. If not available, or not supported,
    the value MUST be <code>null</code>.</dd>

    <dt>readonly attribute CallBarring? barring</dt>
    <dd>Interface to manage call barring. If not available, or not supported,
    the value MUST be <code>null</code>.</dd>

    <dt>readonly attribute CallMeters? meters</dt>
    <dd>Interface to read and reset call meters. If not available, or not
    supported, the value MUST be <code>null</code>.</dd>

    <dt>readonly attribute SupplementaryServices? supplementary</dt>
    <dd>Interface to manage supplementary services (including USSD). If
    not available, or not supported the value MUST be <code>null</code>.</dd>

    <dt>readonly attribute PushNotification? push</dt>
    <dd>Interface to handle push notifications. If not available, or not
    supported, the value MUST be <code>null</code>.</dd>

    <dt>readonly attribute TelephonyRadioSettings? radio</dt>
    <dd>Interface to manage telephony radio settings. The properties of the
    actual object may depend on the telephony service, protocol, modem and
    underlying platform. If not available, or not supported the value MUST be
     <code>null</code>.</dd>
  </dl>
 </section> <!== TelephonyService -->
    <!--
GSM TS 04.08 call control states
GSM TS 04.83 call hold states
GSM TS 04.80 error values
GSM TS 24.084 Phase-4 MPTY
GSM TS 23.018 Basic call handling; Technical realization
      http://www.3gpp.org/ftp/Specs/html-info/23018.htm
IMS TS 23.228 IP Multimedia Subsystem (IMS); Stage 2
      http://www.3gpp.org/ftp/Specs/html-info/23228.htm

- any call ID will serve as a transaction ID
- implementation to generate a MPTY_ID which refers to the list of all active
call ID's in the mpty call

-->
    <section class="appendix" id="references">
      <!--OddPage-->
      <h2>
        <span class="secno">A.</span> References
      </h2>
      <section id="normative-references">
        <h3>
          <span class="secno">A.1</span> Normative references
        </h3>
        <dl class="bibliography">
          <dt id="bib-DTMF">
            [DTMF]
          </dt>
          <dd>
            <a href="http://www.itu.int/rec/T-REC-Q.23/en"><cite>Q.23 :
            Technical features of push-button telephone sets</cite></a>. 1
            November 1988. In force. URL: <a href=
            "http://www.itu.int/rec/T-REC-Q.23/en">http://www.itu.int/rec/T-REC-Q.23/en</a>
          </dd>
          <dt id="bib-GSM-CALL">
            [GSM-CALL]
          </dt>
          <dd>
            Bruno Landais. <a href=
            "http://www.3gpp.org/ftp/Specs/html-info/23018.htm"><cite>GSM TS
            23.018 Basic call handling</cite></a>. 28 April 1999. Technical
            realization. URL: <a href=
            "http://www.3gpp.org/ftp/Specs/html-info/23018.htm">http://www.3gpp.org/ftp/Specs/html-info/23018.htm</a>
          </dd>
          <dt id="bib-HTML">
            [HTML]
          </dt>
          <dd>
            Ian Hickson. <a href=
            "http://www.whatwg.org/specs/web-apps/current-work/"><cite>HTML</cite></a>.
            Living Standard. URL: <a href=
            "http://www.whatwg.org/specs/web-apps/current-work/">http://www.whatwg.org/specs/web-apps/current-work/</a>
          </dd>
          <dt id="bib-HTML5">
            [HTML5]
          </dt>
          <dd>
            Robin Berjon et al. <a href=
            "http://www.w3.org/TR/html5/"><cite>HTML5</cite></a>. 17 December
            2012. W3C Candidate Recommendation. URL: <a href=
            "http://www.w3.org/TR/html5/">http://www.w3.org/TR/html5/</a>
          </dd>
          <dt id="bib-IMS">
            [IMS]
          </dt>
          <dd>
            Thomas Towle. <a href=
            "http://www.3gpp.org/ftp/Specs/html-info/23228.htm"><cite>IP
            Multimedia Subsystem (IMS)</cite></a>. 14 March 2002. Stage 2. URL:
            <a href=
            "http://www.3gpp.org/ftp/Specs/html-info/23228.htm">http://www.3gpp.org/ftp/Specs/html-info/23228.htm</a>
          </dd>
          <dt id="bib-JINGLE">
            [JINGLE]
          </dt>
          <dd>
            Scott Ludwig; Joe Beda; Peter Saint-Andre; Robert McQueen; Sean
            Egan; Joe Hildebrand et al. <a href=
            "http://xmpp.org/extensions/xep-0166.html"><cite>XEP-0166:
            Jingle</cite></a>. 23 December 2009. Draft Standard. URL: <a href=
            "http://xmpp.org/extensions/xep-0166.html">http://xmpp.org/extensions/xep-0166.html</a>
          </dd>
          <dt id="bib-RFC2119">
            [RFC2119]
          </dt>
          <dd>
            S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
            words for use in RFCs to Indicate Requirement Levels.</cite></a>
            March 1997. Internet RFC 2119. URL: <a href=
            "http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
          </dd>
          <dt id="bib-WEBIDL">
            [WEBIDL]
          </dt>
          <dd>
            Cameron McCormack. <a href="http://www.w3.org/TR/WebIDL/"><cite>Web
            IDL</cite></a>. 19 April 2012. W3C Candidate Recommendation. URL:
            <a href=
            "http://www.w3.org/TR/WebIDL/">http://www.w3.org/TR/WebIDL/</a>
          </dd>
        </dl>
      </section>
      <section id="informative-references">
        <h3>
          <span class="secno">A.2</span> Informative references
        </h3>
        <dl class="bibliography">
          <dt id="bib-DOM4">
            [DOM4]
          </dt>
          <dd>
            Anne van Kesteren; Aryeh Gregor; Lachlan Hunt; Ms2ger. <a href=
            "http://www.w3.org/TR/dom/"><cite>DOM4</cite></a>. 6 December 2012.
            W3C Working Draft. URL: <a href=
            "http://www.w3.org/TR/dom/">http://www.w3.org/TR/dom/</a>
          </dd>
        </dl>
      </section>
    </section>
  </body>
</html>
