<!-- http://www.w3.org/TR/image-capture/ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Mediastream Image Capture</title>
    
    
  <style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #ff4500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}
</style><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;   
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;    
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID, .idlCallbackID, .idlEnumID {
    font-weight:    bold;
    color:  #005a9c;
}
a.idlEnumItem {
    color:  #000;
    border-bottom:  1px dotted #ccc;
    text-decoration: none;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType, .idlCallbackType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlCtor*/
.idlCtorName {
    color:  #ff4500;
}
.idlCtorName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName, .idlDefaultValue {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlSectionComment*/
.idlSectionComment {
    color: gray;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.constructors, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .constructors dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .constructors dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.constructors dt code {
    background:  #cfc;
}

.attributes dd, .methods dd, .constants dd, .constructors dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}
</style><link href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet"><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--></head>
  <body class="h-entry"><div class="head">
  <p>
    
      <a href="http://www.w3.org/"><img src="http://www.w3.org/Icons/w3c_home" alt="W3C" height="48" width="72"></a>
    
  </p>
  <h1 class="title p-name" id="title">Mediastream Image Capture</h1>
  
  <h2 id="w3c-first-public-working-draft-09-july-2013"><abbr title="World Wide Web Consortium">W3C</abbr> First Public Working Draft <time class="dt-published" datetime="2013-07-09">09 July 2013</time></h2>
  <dl>
    
      <dt>This version:</dt>
      <dd><a class="u-url" href="http://www.w3.org/TR/2013/WD-image-capture-20130709/">http://www.w3.org/TR/2013/WD-image-capture-20130709/</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="http://www.w3.org/TR/image-capture/">http://www.w3.org/TR/image-capture/</a></dd>
    
    
      <dt>Latest editor's draft:</dt>
      <dd><a href="https://dvcs.w3.org/hg/dap/raw-file/default/media-stream-capture/ImageCapture.html">https://dvcs.w3.org/hg/dap/raw-file/default/media-stream-capture/ImageCapture.html</a></dd>
    
    
    
    
    
    
    <dt>Editor:</dt>
    <dd class="p-author h-card vcard"><span class="p-name fn">Giridhar Mandyam</span>, <a class="p-org org h-org h-card" href="http://www.qualcomm.com/about/businesses/quicinc">Qualcomm Innovation Center, Inc</a></dd>

    
    
  </dl>
  
  
  
  
    
      <p class="copyright">
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
        2012-2013
        
        <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved.
        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
        <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.
      </p>
    
  
  <hr>
</div><section class="introductory" id="abstract"><h2>Abstract</h2><p>This document specifies the <code>takePhoto()</code> and <code>getFrame()</code> methods, and corresponding camera settings for use with MediaStreams as defined in Media Capture and Streams [<cite><a href="#bib-GETUSERMEDIA" class="bibref">GETUSERMEDIA</a></cite>].
</p></section><section id="sotd" class="introductory"><h2>Status of This Document</h2>
  
    
      
        <p>
          <em>This section describes the status of this document at the time of its publication. Other
          documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision
          of this technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports
          index</a> at http://www.w3.org/TR/.</em>
        </p>
        <p>This is the first publication of this document as a Working Draft, and is still subject to potentially large changes; among other things, the Working Groups are discussing the opportunity to use DOM Promises instead of the current even-based approach.
</p>
        <p>
          This document was published by the <a href="http://www.w3.org/2011/04/webrtc/">Web Real-Time Communication Working Group</a> and <a href="http://www.w3.org/2009/dap">Device APIs Working Group</a> as a First Public Working Draft.
          
            This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.
          
          
          If you wish to make comments regarding this document, please send them to 
          <a href="mailto:public-media-capture@w3.org">public-media-capture@w3.org</a> 
          (<a href="mailto:public-media-capture-request@w3.org?subject=subscribe">subscribe</a>,
          <a href="http://lists.w3.org/Archives/Public/public-media-capture/">archives</a>).
          
          
          
          
            All comments are welcome.</p>
          
        
          <p>
            Publication as a First Public Working Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership.
            This is a draft document and may be updated, replaced or obsoleted by other documents at 
            any time. It is inappropriate to cite this document as other than work in progress.
          </p>
        
        
        <p>
          
            This document was produced by groups operating under the 
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
          
          
          
            
              <abbr title="World Wide Web Consortium">W3C</abbr> maintains a public list of any patent disclosures (<a href="http://www.w3.org/2004/01/pp-impl/47318/status" rel="disclosure">Web Real-Time Communication Working Group</a>, <a href="http://www.w3.org/2004/01/pp-impl/43696/status" rel="disclosure">Device APIs Working Group</a>)
            
            made in connection with the deliverables of the group; that page also includes instructions for 
            disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the
            information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
            6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
          
          
        </p>
        
      
    
  
</section><section id="toc"><h2 class="introductory">Table of Contents</h2><ul class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><span class="secno">1. </span> Introduction</a></li><li class="tocline"><a class="tocxref" href="#image-capture-api"><span class="secno">2. </span> Image Capture API</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes"><span class="secno">2.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#methods"><span class="secno">2.2 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#framegrabevent"><span class="secno">3. </span> <code>FrameGrabEvent</code></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-1"><span class="secno">3.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#framegrabeventinit-dictionary"><span class="secno">3.2 </span><code>FrameGrabEventInit</code> Dictionary</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-framegrabeventinit-members"><span class="secno">3.2.1 </span>Dictionary <span class="formerLink"><code>FrameGrabEventInit</code></span> Members</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#imagecaptureerrorevent"><span class="secno">4. </span> <code>ImageCaptureErrorEvent</code></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-2"><span class="secno">4.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#imagecaptureerroreventinit-dictionary"><span class="secno">4.2 </span><code>ImageCaptureErrorEventInit</code> Dictionary</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-imagecaptureerroreventinit-members"><span class="secno">4.2.1 </span>Dictionary <span class="formerLink"><code>ImageCaptureErrorEventInit</code></span> Members</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#blobevent"><span class="secno">5. </span> <code>BlobEvent</code></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-3"><span class="secno">5.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#blobeventinit-dictionary"><span class="secno">5.2 </span><code>BlobEventInit</code> Dictionary</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-blobeventinit-members"><span class="secno">5.2.1 </span>Dictionary <span class="formerLink"><code>BlobEventInit</code></span> Members</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#settingschangeevent"><span class="secno">6. </span> <code>SettingsChangeEvent</code></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-4"><span class="secno">6.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#settingschangeeventinit-dictionary"><span class="secno">6.2 </span><code>SettingsChangeEventInit</code> Dictionary</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-settingschangeeventinit-members"><span class="secno">6.2.1 </span>Dictionary <span class="formerLink"><code>SettingsChangeEventInit</code></span> Members</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#imagecaptureerror"><span class="secno">7. </span> <code>ImageCaptureError</code></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-5"><span class="secno">7.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#constants"><span class="secno">7.2 </span>Constants</a></li></ul></li><li class="tocline"><a class="tocxref" href="#mediasettingsrange"><span class="secno">8. </span><code>MediaSettingsRange</code></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-6"><span class="secno">8.1 </span>Attributes</a></li></ul></li><li class="tocline"><a class="tocxref" href="#mediasettingsitem"><span class="secno">9. </span><code>MediaSettingsItem</code></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-7"><span class="secno">9.1 </span>Attributes</a></li></ul></li><li class="tocline"><a class="tocxref" href="#photosettingsoptions"><span class="secno">10. </span><code>PhotoSettingsOptions</code></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-8"><span class="secno">10.1 </span>Attributes</a></li></ul></li><li class="tocline"><a class="tocxref" href="#exposuremode"><span class="secno">11. </span><code>ExposureMode</code></a></li><li class="tocline"><a class="tocxref" href="#photosettings"><span class="secno">12. </span><code>PhotoSettings</code></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-photosettings-members"><span class="secno">12.1 </span>Dictionary <span class="formerLink"><code>PhotoSettings</code></span> Members</a></li></ul></li><li class="tocline"><a class="tocxref" href="#examples"><span class="secno">13. </span> Examples</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#taking-a-picture-if-red-eye-reduction-is-activated"><span class="secno">13.1 </span>Taking a picture if Red Eye Reduction is activated</a></li><li class="tocline"><a class="tocxref" href="#grabbing-a-frame-for-post-processing"><span class="secno">13.2 </span>Grabbing a Frame for Post-Processing</a></li></ul></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">A. </span>References</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><span class="secno">A.1 </span>Normative references</a></li></ul></li></ul></section><section id="introduction"><!--OddPage--><h2><span class="secno">1. </span> Introduction</h2><p>The API defined in this document takes a valid MediaStream and returns an encoded image in the form of a <code>Blob</code> (as defined in [<cite><a href="#bib-FILE-API" class="bibref">FILE-API</a></cite>]).  The image is
 provided by the capture device that provides the MediaStream.  Moreover, 
 picture-specific settings can be optionally provided as arguments that can be applied to the image being captured.</p></section><section id="image-capture-api"><!--OddPage--><h2><span class="secno">2. </span> Image Capture API</h2><pre class="idl"><span class="idlInterface" id="idl-def-ImageCapture">[<span class="extAttr">Constructor(VideoStreamTrack track)</span>]
interface <span class="idlInterfaceID">ImageCapture</span> : <span class="idlSuperclass"><a>EventTarget</a></span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-PhotoSettingsOptions"><code>PhotoSettingsOptions</code></a></span> <span class="idlAttrName"><a href="#widl-ImageCapture-photoSettingsOptions">photoSettingsOptions</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>VideoStreamTrack</a></span>     <span class="idlAttrName"><a href="#widl-ImageCapture-videoStreamTrack">videoStreamTrack</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span>         <span class="idlAttrName"><a href="#widl-ImageCapture-onphoto">onphoto</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span>         <span class="idlAttrName"><a href="#widl-ImageCapture-onerror">onerror</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span>         <span class="idlAttrName"><a href="#widl-ImageCapture-onphotosettingschange">onphotosettingschange</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span>         <span class="idlAttrName"><a href="#widl-ImageCapture-onframegrab">onframegrab</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-ImageCapture-setOptions-void-PhotoSettings-photoSettings">setOptions</a></span> (<span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-PhotoSettings"><code>PhotoSettings</code></a>?</span> <span class="idlParamName">photoSettings</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-ImageCapture-takePhoto-void">takePhoto</a></span> ();</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-ImageCapture-getFrame-void">getFrame</a></span> ();</span>
};</span></pre><section id="attributes"><h3><span class="secno">2.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-ImageCapture-onerror"><code>onerror</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>Register/unregister for Image Capture error events of type <code>ImageCaptureErrorEvent</code>. The handler should expect to get a <code>ImageCaptureError</code> object as its first parameter.</dd><dt id="widl-ImageCapture-onframegrab"><code>onframegrab</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>Register/unregister for frame capture events of type <code>FrameGrabEvent</code>. The handler should expect to get a <code>FrameGrabEvent</code> object as its first parameter.</dd><dt id="widl-ImageCapture-onphoto"><code>onphoto</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>Register/unregister for photo events of type <code>BlobEvent</code>. The handler should expect to get a <code>BlobEvent</code> object as its first parameter.</dd><dt id="widl-ImageCapture-onphotosettingschange"><code>onphotosettingschange</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>Register/unregister for photo settings change events of type <code>SettingsChangeEvent</code>.</dd><dt id="widl-ImageCapture-photoSettingsOptions"><code>photoSettingsOptions</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-PhotoSettingsOptions"><code>PhotoSettingsOptions</code></a></span>, readonly   </dt><dd>Describes current photo settings</dd><dt id="widl-ImageCapture-videoStreamTrack"><code>videoStreamTrack</code> of type <span class="idlAttrType"><a>VideoStreamTrack</a></span>, readonly   </dt><dd>The MediaStream passed into the constructor</dd></dl></section><section id="methods"><h3><span class="secno">2.2 </span>Methods</h3><dl class="methods"><dt id="widl-ImageCapture-getFrame-void"><code>getFrame</code></dt><dd>When the <code>getFrame()</code> method of an <code>ImageCapture</code> object is invoked, then if the <code>readyState</code> of the <code>VideoStreamTrack</code> provided in the contructor is not "live", the UA <em title="must" class="rfc2119">must</em> fire a <code>ImageCaptureErrorEvent</code> event at the <code>ImageCapture</code> object with a 
       new <code>ImageCaptureError</code> object whose <code>code</code> is set to INVALID_TRACK. If the UA is unable to execute the <code>getFrame()</code> method for any
       other reason, then the UA <em title="must" class="rfc2119">must</em> fire a <code>ImageCaptureErrorEvent</code> event at the <code>ImageCapture</code> object with a 
       new <code>ImageCaptureError</code> object whose <code>code</code> is set to FRAME_GRAB_ERROR.    Otherwise it <em title="must" class="rfc2119">must</em>
       queue a task, using the DOM manipulation task source, that runs the following steps:
        <ol>
            <li>Gather data from the <code>VideoStreamTrack</code> into a <code>ImageData</code> object (as defined in [<cite><a href="#bib-CANVAS-2D" class="bibref">CANVAS-2D</a></cite>]) containing a single still frame in RGBA format. The <code>width</code> and <code>height</code> of the
            <code>ImageData</code> object are derived from the constraints of the <code>VideoStreamTrack</code>.  </li>
     <li>Raise a <code>FrameGrabEvent</code> event containing the <code>ImageData</code> to the <code>onframegrab</code> event handler (if specified). {Note: <code>getFrame()</code> returns data only once upon being invoked.}</li>
     </ol><div><em>No parameters.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-ImageCapture-setOptions-void-PhotoSettings-photoSettings"><code>setOptions</code></dt><dd>When the <code>setOptions()</code> method of an <code>ImageCapture</code> object is invoked, then
 then a valid <code>PhotoSettings</code> object <em title="must" class="rfc2119">must</em> be passed in the method to the
 <code>ImageCapture</code> object.  If the UA can successfully apply the settings, then the UA <em title="must" class="rfc2119">must</em> fire a <code>SettingsChangeEvent</code> event at the 
 <code>onphotosettingschange</code> event handler (if specified).  If the UA cannot successfully apply the settings, then the UA
 <em title="must" class="rfc2119">must</em> fire a <code>ImageCaptureErrorEvent</code> at the <code>ImageCapture</code> object whose <code>code</code> is set to SETTINGS_ERROR. <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">photoSettings</td><td class="prmType"><code><a class="idlType" href="#idl-def-PhotoSettings"><code>PhotoSettings</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-ImageCapture-takePhoto-void"><code>takePhoto</code></dt><dd>When the <code>takePhoto()</code> method of an <code>ImageCapture</code> object is invoked,
    then if the <code>readyState</code> of the <code>VideoStreamTrack</code> provided in the constructor is not "live", the UA <em title="must" class="rfc2119">must</em> fire a <code>ImageCaptureErrorEvent</code> event at the <code>ImageCapture</code> object with a 
       new <code>ImageCaptureError</code> object whose <code>code</code> is set to INVALID_TRACK.  If the UA is unable to execute the <code>takePhoto()</code> method for any
       other reason (for example, upon invocation of multiple takePhoto() method calls in rapid succession), then the UA <em title="must" class="rfc2119">must</em> fire a <code>ImageCaptureErrorEvent</code> event at the <code>ImageCapture</code> object with a 
       new <code>ImageCaptureError</code> object whose <code>code</code> is set to PHOTO_ERROR.
Otherwise it <em title="must" class="rfc2119">must</em>
       queue a task, using the DOM manipulation task source, that runs the following steps:
        <ol>
            <li>Gather data from the <code>VideoStreamTrack</code> into a <code>Blob</code> containing a single still image. The method of doing
                this will depend on the underlying device.  Devices 
                may temporarily stop streaming data, reconfigure themselves with the appropriate photo settings, take the photo,
                and then resume streaming.  In this case, the stopping and restarting of streaming <em title="should" class="rfc2119">should</em>
                cause <code>mute</code> and <code>unmute</code> events to fire on the Track in question.  </li>
     <li>Raise a <code>BlobEvent</code> event containing the <code>Blob</code> to the <code>onphoto</code> event handler (if specified).</li></ol><div><em>No parameters.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></section></section><section id="framegrabevent"><!--OddPage--><h2><span class="secno">3. </span> <code>FrameGrabEvent</code></h2><pre class="idl"><span class="idlInterface" id="idl-def-FrameGrabEvent">[<span class="extAttr">Constructor(DOMString type, optional FrameGrabEventInit frameGrabInitDict)</span>]
interface <span class="idlInterfaceID">FrameGrabEvent</span> : <span class="idlSuperclass"><a>Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>ImageData</a></span> <span class="idlAttrName"><a href="#widl-FrameGrabEvent-imageData">imageData</a></span>;</span>
};</span></pre><section id="attributes-1"><h3><span class="secno">3.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-FrameGrabEvent-imageData"><code>imageData</code> of type <span class="idlAttrType"><a>ImageData</a></span>, readonly   </dt><dd>Returns an <code>ImageData</code> object whose <code>length</code> and <code>height</code> attributes indicates the dimensions of the captured frame. </dd></dl></section><section id="framegrabeventinit-dictionary"><h3><span class="secno">3.2 </span><code>FrameGrabEventInit</code> Dictionary</h3><pre class="idl"><span class="idlDictionary" id="idl-def-FrameGrabEventInit">dictionary <span class="idlDictionaryID">FrameGrabEventInit</span> : <span class="idlSuperclass"><a>EventInit</a></span> {
<span class="idlMember">    <span class="idlMemberType"><a>ImageData</a></span> <span class="idlMemberName"><a href="#widl-FrameGrabEventInit-imageData">imageData</a></span>;</span>
};</span></pre><section id="dictionary-framegrabeventinit-members"><h4><span class="secno">3.2.1 </span>Dictionary <a href="#idl-def-FrameGrabEventInit" class="idlType"><code>FrameGrabEventInit</code></a> Members</h4><dl class="dictionary-members"><dt id="widl-FrameGrabEventInit-imageData"><code>imageData</code> of type <span class="idlMemberType"><a>ImageData</a></span></dt><dd>An <code>ImageData</code> object containing the data to deliver via this event.</dd></dl></section></section></section><section id="imagecaptureerrorevent"><!--OddPage--><h2><span class="secno">4. </span> <code>ImageCaptureErrorEvent</code></h2><pre class="idl"><span class="idlInterface" id="idl-def-ImageCaptureErrorEvent">[<span class="extAttr">Constructor(DOMString type, optional ImageCaptureErrorEventInit imageCaptureErrorInitDict)</span>]
interface <span class="idlInterfaceID">ImageCaptureErrorEvent</span> : <span class="idlSuperclass"><a>Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-ImageCaptureError"><code>ImageCaptureError</code></a></span> <span class="idlAttrName"><a href="#widl-ImageCaptureErrorEvent-imageCaptureError">imageCaptureError</a></span>;</span>
};</span></pre><section id="attributes-2"><h3><span class="secno">4.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-ImageCaptureErrorEvent-imageCaptureError"><code>imageCaptureError</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-ImageCaptureError"><code>ImageCaptureError</code></a></span>, readonly   </dt><dd>Returns a <code>ImageCaptureError</code> object whose <code>code</code> attribute indicates the type of error occurrence. </dd></dl></section><section id="imagecaptureerroreventinit-dictionary"><h3><span class="secno">4.2 </span><code>ImageCaptureErrorEventInit</code> Dictionary</h3><pre class="idl"><span class="idlDictionary" id="idl-def-ImageCaptureErrorEventInit">dictionary <span class="idlDictionaryID">ImageCaptureErrorEventInit</span> : <span class="idlSuperclass"><a>EventInit</a></span> {
<span class="idlMember">    <span class="idlMemberType"><a class="idlType" href="#idl-def-ImageCaptureError"><code>ImageCaptureError</code></a></span> <span class="idlMemberName"><a href="#widl-ImageCaptureErrorEventInit-imageCaptureError">imageCaptureError</a></span>;</span>
};</span></pre><section id="dictionary-imagecaptureerroreventinit-members"><h4><span class="secno">4.2.1 </span>Dictionary <a href="#idl-def-ImageCaptureErrorEventInit" class="idlType"><code>ImageCaptureErrorEventInit</code></a> Members</h4><dl class="dictionary-members"><dt id="widl-ImageCaptureErrorEventInit-imageCaptureError"><code>imageCaptureError</code> of type <span class="idlMemberType"><a class="idlType" href="#idl-def-ImageCaptureError"><code>ImageCaptureError</code></a></span></dt><dd>A <code>ImageCaptureError</code> object containing the data to deliver via this event.</dd></dl></section></section></section><section id="blobevent"><!--OddPage--><h2><span class="secno">5. </span> <code>BlobEvent</code></h2><pre class="idl"><span class="idlInterface" id="idl-def-BlobEvent">[<span class="extAttr">Constructor(DOMString type, optional BlobEventInit blobInitDict)</span>]
interface <span class="idlInterfaceID">BlobEvent</span> : <span class="idlSuperclass"><a>Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>Blob</a></span> <span class="idlAttrName"><a href="#widl-BlobEvent-data">data</a></span>;</span>
};</span></pre><section id="attributes-3"><h3><span class="secno">5.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-BlobEvent-data"><code>data</code> of type <span class="idlAttrType"><a>Blob</a></span>, readonly   </dt><dd>Returns a <code>Blob</code> object whose type attribute indicates the encoding of the blob data. An implementation must return a Blob in a format that is capable of being viewed in an HTML <code>&lt;img&gt;</code> tag. </dd></dl></section><section id="blobeventinit-dictionary"><h3><span class="secno">5.2 </span><code>BlobEventInit</code> Dictionary</h3><pre class="idl"><span class="idlDictionary" id="idl-def-BlobEventInit">dictionary <span class="idlDictionaryID">BlobEventInit</span> : <span class="idlSuperclass"><a>EventInit</a></span> {
<span class="idlMember">    <span class="idlMemberType"><a>Blob</a></span> <span class="idlMemberName"><a href="#widl-BlobEventInit-data">data</a></span>;</span>
};</span></pre><section id="dictionary-blobeventinit-members"><h4><span class="secno">5.2.1 </span>Dictionary <a href="#idl-def-BlobEventInit" class="idlType"><code>BlobEventInit</code></a> Members</h4><dl class="dictionary-members"><dt id="widl-BlobEventInit-data"><code>data</code> of type <span class="idlMemberType"><a>Blob</a></span></dt><dd>A <code>Blob</code> object containing the data to deliver via this event.</dd></dl></section></section></section><section id="settingschangeevent"><!--OddPage--><h2><span class="secno">6. </span> <code>SettingsChangeEvent</code></h2><pre class="idl"><span class="idlInterface" id="idl-def-PhotoSettingsEvent">[<span class="extAttr">Constructor(DOMString type, optional SettingsChangeEventInit photoSettingsInitDict)</span>]
interface <span class="idlInterfaceID">PhotoSettingsEvent</span> : <span class="idlSuperclass"><a>Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-PhotoSettings"><code>PhotoSettings</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsEvent-photoSettings">photoSettings</a></span>;</span>
};</span></pre><section id="attributes-4"><h3><span class="secno">6.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-PhotoSettingsEvent-photoSettings"><code>photoSettings</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-PhotoSettings"><code>PhotoSettings</code></a></span>, readonly   </dt><dd>Returns a <code>PhotoSettings</code> object whose type attribute indicates the current photo settings. </dd></dl></section><section id="settingschangeeventinit-dictionary"><h3><span class="secno">6.2 </span><code>SettingsChangeEventInit</code> Dictionary</h3><pre class="idl"><span class="idlDictionary" id="idl-def-SettingsChangeEventInit">dictionary <span class="idlDictionaryID">SettingsChangeEventInit</span> : <span class="idlSuperclass"><a>EventInit</a></span> {
<span class="idlMember">    <span class="idlMemberType"><a class="idlType" href="#idl-def-PhotoSettings"><code>PhotoSettings</code></a></span> <span class="idlMemberName"><a href="#widl-SettingsChangeEventInit-photoSettings">photoSettings</a></span>;</span>
};</span></pre><section id="dictionary-settingschangeeventinit-members"><h4><span class="secno">6.2.1 </span>Dictionary <a href="#idl-def-SettingsChangeEventInit" class="idlType"><code>SettingsChangeEventInit</code></a> Members</h4><dl class="dictionary-members"><dt id="widl-SettingsChangeEventInit-photoSettings"><code>photoSettings</code> of type <span class="idlMemberType"><a class="idlType" href="#idl-def-PhotoSettings"><code>PhotoSettings</code></a></span></dt><dd>A <code>PhotoSettings</code> object containing the data to deliver via this event.</dd></dl></section></section></section><section id="imagecaptureerror"><!--OddPage--><h2><span class="secno">7. </span> <code>ImageCaptureError</code></h2><p> </p><p>The <code>ImageCaptureError</code> object is passed to an <code>onerror</code> event handler of an
 <code>ImageCapture</code> object if an error occurred when the object was created or any of its methods were invoked.</p><br><pre class="idl"><span class="idlInterface" id="idl-def-ImageCaptureError">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">ImageCaptureError</span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-ImageCaptureError-FRAME_GRAB_ERROR">FRAME_GRAB_ERROR</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-ImageCaptureError-SETTINGS_ERROR">SETTINGS_ERROR</a></span> = <span class="idlConstValue">2</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-ImageCaptureError-PHOTO_ERROR">PHOTO_ERROR</a></span> = <span class="idlConstValue">3</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-ImageCaptureError-ERROR_UNKNOWN">ERROR_UNKNOWN</a></span> = <span class="idlConstValue">4</span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>unsigned short</a></span> <span class="idlAttrName"><a href="#widl-ImageCaptureError-code">code</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>DOMString</a></span>      <span class="idlAttrName"><a href="#widl-ImageCaptureError-message">message</a></span>;</span>
};</span></pre><section id="attributes-5"><h3><span class="secno">7.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-ImageCaptureError-code"><code>code</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly   </dt><dd>The <code>code</code> attribute returns the appropriate code for the error event, derived from the constants defined in the <code>ImageCaptureError</code> interface.</dd><dt id="widl-ImageCaptureError-message"><code>message</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly   </dt><dd>The <code>message</code> attribute must return an error message describing the details of the error encountered.</dd></dl></section><section id="constants"><h3><span class="secno">7.2 </span>Constants</h3><dl class="constants"><dt id="widl-ImageCaptureError-ERROR_UNKNOWN"><code>ERROR_UNKNOWN</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>An <code>ImageCaptureError</code> object must set its <code>code</code> value to this constant if an error occurred due to indeterminate cause upon invocation of any method of the <code>ImageCapture</code> interface.</dd><dt id="widl-ImageCaptureError-FRAME_GRAB_ERROR"><code>FRAME_GRAB_ERROR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>An <code>ImageCaptureError</code> object must set its <code>code</code> value to this constant if an error occurred upon invocation of the <code>getFrame()</code> method of the <code>ImageCapture</code> interface.</dd><dt id="widl-ImageCaptureError-PHOTO_ERROR"><code>PHOTO_ERROR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>An <code>ImageCaptureError</code> object must set its <code>code</code> value to this constant if an error occurred upon invocation of the <code>takePhoto()</code> method of the <code>ImageCapture</code> interface.</dd><dt id="widl-ImageCaptureError-SETTINGS_ERROR"><code>SETTINGS_ERROR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>An <code>ImageCaptureError</code> object must set its <code>code</code> value to this constant if an error occurred upon invocation of the <code>setOptions()</code> method of the <code>ImageCapture</code> interface.</dd></dl></section><p></p></section><section id="mediasettingsrange"><!--OddPage--><h2><span class="secno">8. </span><code>MediaSettingsRange</code></h2><p></p><p></p><pre class="idl"><span class="idlInterface" id="idl-def-MediaSettingsRange">interface <span class="idlInterfaceID">MediaSettingsRange</span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-MediaSettingsRange-max">max</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-MediaSettingsRange-min">min</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-MediaSettingsRange-initial">initial</a></span>;</span>
};</span></pre><section id="attributes-6"><h3><span class="secno">8.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-MediaSettingsRange-initial"><code>initial</code> of type <span class="idlAttrType"><a>unsigned long</a></span>, readonly   </dt><dd>The current value of this setting</dd><dt id="widl-MediaSettingsRange-max"><code>max</code> of type <span class="idlAttrType"><a>unsigned long</a></span>, readonly   </dt><dd>The maximum value of this setting</dd><dt id="widl-MediaSettingsRange-min"><code>min</code> of type <span class="idlAttrType"><a>unsigned long</a></span>, readonly   </dt><dd>The minimum value of this setting</dd></dl></section></section><section id="mediasettingsitem"><!--OddPage--><h2><span class="secno">9. </span><code>MediaSettingsItem</code></h2><p></p><p></p><p>The <code>MediaSettingsItem</code> interface is now defined, which allows for a single setting to be managed.</p><pre class="idl"><span class="idlInterface" id="idl-def-MediaSettingsItem">interface <span class="idlInterfaceID">MediaSettingsItem</span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>any</a></span> <span class="idlAttrName"><a href="#widl-MediaSettingsItem-value">value</a></span>;</span>
};</span></pre><section id="attributes-7"><h3><span class="secno">9.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-MediaSettingsItem-value"><code>value</code> of type <span class="idlAttrType"><a>any</a></span>, readonly   </dt><dd>Value of current setting.</dd></dl></section><p></p></section><section id="photosettingsoptions"><!--OddPage--><h2><span class="secno">10. </span><code>PhotoSettingsOptions</code></h2><p></p><p></p><p>The PhotoSettingsOptions attribute of the <code>ImageCapture</code> object provides
the photo-specific settings options and current settings values.  The following definitions are assumed
for individual settings and are provided for information purposes:</p><ol>
<li><i>White balance mode</i> is a setting that cameras use to adjust for different color temperatures.  Color temperature is
the temperature of background light (measured in Kelvin normally).  This setting can also be automatically
determined by the implementation.  If 'automatic' mode is selected, then the Kelvin setting for White Balance Mode
may be overridden.  Typical temprature ranges for different modes are provided below:
<table border="1">
<tbody><tr>
 <th>Mode</th>
 <th>Kelvin range</th>
</tr>
<tr>
 <td>incandescent</td>
 <td>2500-3500</td>
</tr>
<tr>
 <td>fluorescent</td>
 <td>4000-5000</td>
</tr>
<tr>
 <td>warm-fluorescent</td>
 <td>5000-5500</td>
</tr>
<tr>
 <td>daylight</td>
 <td>5500-6500</td>
</tr>
<tr>
 <td>cloudy-daylight</td>
 <td>6500-8000</td>
</tr>
<tr>
 <td>twilight</td>
 <td>8000-9000</td>
</tr>
<tr>
 <td>shade</td>
 <td>9000-10000</td>
</tr>
</tbody></table>
</li>
<li><i>Exposure</i> is the amount of light allowed to fall on the photographic medium.  Auto-exposure mode is a camera setting
where the exposure levels are automatically adjusted by the implementation based on the subject of the photo.</li>
<li><i>Exposure Compensation</i> is a numeric camera setting that adjusts the exposure level from the current value used by the implementation.  This value can
be used to bias the exposure level enabled by auto-exposure.</li>
<li>The <i>ISO</i> setting of a camera describes the sensistivity of the camera to light.  It is a numeric value, where the lower the value
the greater the sensitivity.  This setting in most implementations relates to shutter speed, and is sometimes known as the ASA setting.</li>
<li><i>Red Eye Reduction</i> is a feature in cameras that is designed to limit or prevent the appearance of 
red pupils ("Red Eye") in photography subjects due prolonged exposure to a camera's flash.</li>
<li><i>Brightness</i> refers to the numeric camera setting that adjusts the perceived amount of light emitting from the photo object.  A higher brightness setting increases the intensity of darker areas in a scene while compressing the intensity of brighter parts of the scene.</li>
<li><i>Contrast</i> is the numeric camera setting that controls the difference in brightness between light and dark areas in a scene.  A higher contrast setting reflects an expansion in the difference in brightness.</li>
<li><i>Saturation</i> is a numeric camera setting that controls the intensity of color in a scene (i.e. the amount of gray in the scene).  Very low saturation levels will result in photo's closer to black-and-white.</li>
<li><i>Sharpness</i> is a numeric camera setting that controls the intensity of edges in a scene.  Higher sharpness settings result in higher edge intensity, while lower settings result in less contrast and blurrier edges (i.e. soft focus).</li>
</ol><pre class="idl"><span class="idlInterface" id="idl-def-PhotoSettingsOptions">interface <span class="idlInterfaceID">PhotoSettingsOptions</span> {
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsItem"><code>MediaSettingsItem</code></a></span>  <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-autoWhiteBalanceMode">autoWhiteBalanceMode</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-whiteBalanceMode">whiteBalanceMode</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>ExposureMode</a></span>       <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-autoExposureMode">autoExposureMode</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-exposureCompensation">exposureCompensation</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-iso">iso</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsItem"><code>MediaSettingsItem</code></a></span>  <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-redEyeReduction">redEyeReduction</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-brightness">brightness</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-constrast">constrast</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-saturation">saturation</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-sharpness">sharpness</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-imageHeight">imageHeight</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span> <span class="idlAttrName"><a href="#widl-PhotoSettingsOptions-imageWidth">imageWidth</a></span>;</span>
};</span></pre><section id="attributes-8"><h3><span class="secno">10.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-PhotoSettingsOptions-autoExposureMode"><code>autoExposureMode</code> of type <span class="idlAttrType"><a>ExposureMode</a></span>,            </dt><dd>This reflects the current auto exposure mode setting.  Values are of type <code>ExposureMode</code>.</dd><dt id="widl-PhotoSettingsOptions-autoWhiteBalanceMode"><code>autoWhiteBalanceMode</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsItem"><code>MediaSettingsItem</code></a></span>,            </dt><dd>This reflects whether automated White Balance Mode selection is on or off, and is boolean - on is true</dd><dt id="widl-PhotoSettingsOptions-brightness"><code>brightness</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span>,            </dt><dd>This reflects the current brightness setting of the camera and permitted range. Values are numeric.</dd><dt id="widl-PhotoSettingsOptions-constrast"><code>constrast</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span>,            </dt><dd>This reflects the current contrast setting of the camera and permitted range. Values are numeric.</dd><dt id="widl-PhotoSettingsOptions-exposureCompensation"><code>exposureCompensation</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span>,            </dt><dd>This reflects the current exposure compensation setting and permitted range.  Values are numeric.</dd><dt id="widl-PhotoSettingsOptions-imageHeight"><code>imageHeight</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span>,            </dt><dd>This reflects the image height range supported by the UA and the current height setting.</dd><dt id="widl-PhotoSettingsOptions-imageWidth"><code>imageWidth</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span>,            </dt><dd>This reflects the image width range supported by the UA and the current width setting.</dd><dt id="widl-PhotoSettingsOptions-iso"><code>iso</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span>,            </dt><dd>This reflects the current camera ISO setting and permitted range.  Values are numeric.</dd><dt id="widl-PhotoSettingsOptions-redEyeReduction"><code>redEyeReduction</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsItem"><code>MediaSettingsItem</code></a></span>,            </dt><dd>This reflects whether camera red eye reduction is on or off, and is boolean - on is true</dd><dt id="widl-PhotoSettingsOptions-saturation"><code>saturation</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span>,            </dt><dd>This reflects the current saturation setting of the camera and permitted range. Values are numeric.</dd><dt id="widl-PhotoSettingsOptions-sharpness"><code>sharpness</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span>,            </dt><dd>This reflects the current sharpness setting of the camera and permitted range. Values are numeric.</dd><dt id="widl-PhotoSettingsOptions-whiteBalanceMode"><code>whiteBalanceMode</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaSettingsRange"><code>MediaSettingsRange</code></a></span>,            </dt><dd>This reflects the current white balance mode setting. Values are of type <code>WhiteBalanceModeEnum</code>.</dd></dl></section><p></p></section><section id="exposuremode"><!--OddPage--><h2><span class="secno">11. </span><code>ExposureMode</code></h2><p></p><p></p><pre class="idl"><span class="idlEnum" id="idl-def-ExposureModeEnum">enum <span class="idlEnumID">ExposureModeEnum</span> {
    "<a href="#idl-def-ExposureModeEnum.frame-average" class="idlEnumItem">frame-average</a>",
    "<a href="#idl-def-ExposureModeEnum.center-weighted" class="idlEnumItem">center-weighted</a>",
    "<a href="#idl-def-ExposureModeEnum.spot-metering" class="idlEnumItem">spot-metering</a>"
};</span></pre><table class="simple"><tr><th colspan="2">Enumeration description</th></tr><tr><td><code id="idl-def-ExposureModeEnum.frame-average">frame-average</code></td><td>Average of light information from entire scene</td></tr><tr><td><code id="idl-def-ExposureModeEnum.center-weighted">center-weighted</code></td><td>Sensitivity concentrated towards center of viewfinder</td></tr><tr><td><code id="idl-def-ExposureModeEnum.spot-metering">spot-metering</code></td><td>Spot-centered weighting</td></tr></table></section><section id="photosettings"><!--OddPage--><h2><span class="secno">12. </span><code>PhotoSettings</code></h2><p></p><p></p><p></p><p>The <code>PhotoSettings</code> object is optionally passed into the <code>ImageCapture.setOptions()</code> method
in order to modify capture device settings specific to still imagery.  Each of the attributes in this object
are optional.</p><p></p><pre class="idl"><span class="idlDictionary" id="idl-def-PhotoSettings">dictionary <span class="idlDictionaryID">PhotoSettings</span> {
<span class="idlMember">    <span class="idlMemberType"><a>attribute boolean</a></span>       <span class="idlMemberName"><a href="#widl-PhotoSettings-autoWhiteBalanceMode">autoWhiteBalanceMode</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute unsigned long</a></span> <span class="idlMemberName"><a href="#widl-PhotoSettings-whiteBalanceMode">whiteBalanceMode</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute any</a></span>           <span class="idlMemberName"><a href="#widl-PhotoSettings-autoExposureMode">autoExposureMode</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute unsigned long</a></span> <span class="idlMemberName"><a href="#widl-PhotoSettings-exposureCompensation">exposureCompensation</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute unsigned long</a></span> <span class="idlMemberName"><a href="#widl-PhotoSettings-iso">iso</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute boolean</a></span>       <span class="idlMemberName"><a href="#widl-PhotoSettings-redEyeReduction">redEyeReduction</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute unsigned long</a></span> <span class="idlMemberName"><a href="#widl-PhotoSettings-brightness">brightness</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute unsigned long</a></span> <span class="idlMemberName"><a href="#widl-PhotoSettings-constrast">constrast</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute unsigned long</a></span> <span class="idlMemberName"><a href="#widl-PhotoSettings-saturation">saturation</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute unsigned long</a></span> <span class="idlMemberName"><a href="#widl-PhotoSettings-sharpness">sharpness</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute unsigned long</a></span> <span class="idlMemberName"><a href="#widl-PhotoSettings-imageHeight">imageHeight</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>attribute unsigned long</a></span> <span class="idlMemberName"><a href="#widl-PhotoSettings-imageWidth">imageWidth</a></span>;</span>
};</span></pre><section id="dictionary-photosettings-members"><h3><span class="secno">12.1 </span>Dictionary <a href="#idl-def-PhotoSettings" class="idlType"><code>PhotoSettings</code></a> Members</h3><dl class="dictionary-members"><dt id="widl-PhotoSettings-autoExposureMode"><code>autoExposureMode</code> of type <span class="idlMemberType"><a>attribute any</a></span></dt><dd>This reflects the desired auto exposure mode setting.  Acceptable values are of type <code>ExposureModeEnum</code>.</dd><dt id="widl-PhotoSettings-autoWhiteBalanceMode"><code>autoWhiteBalanceMode</code> of type <span class="idlMemberType"><a>attribute boolean</a></span></dt><dd>This reflects whether automatic White Balance Mode selection is desired.</dd><dt id="widl-PhotoSettings-brightness"><code>brightness</code> of type <span class="idlMemberType"><a>attribute unsigned long</a></span></dt><dd>This reflects the desired brightness setting of the camera.</dd><dt id="widl-PhotoSettings-constrast"><code>constrast</code> of type <span class="idlMemberType"><a>attribute unsigned long</a></span></dt><dd>This reflects the desired contrast setting of the camera.</dd><dt id="widl-PhotoSettings-exposureCompensation"><code>exposureCompensation</code> of type <span class="idlMemberType"><a>attribute unsigned long</a></span></dt><dd>This reflects the desired exposure compensation setting.</dd><dt id="widl-PhotoSettings-imageHeight"><code>imageHeight</code> of type <span class="idlMemberType"><a>attribute unsigned long</a></span></dt><dd>This reflects the desired image height.  The UA <em title="must" class="rfc2119">must</em> select the closest height value this setting if it supports a discrete set of height options. </dd><dt id="widl-PhotoSettings-imageWidth"><code>imageWidth</code> of type <span class="idlMemberType"><a>attribute unsigned long</a></span></dt><dd>This reflects the desired image width. The UA <em title="must" class="rfc2119">must</em> select the closest width value this setting if it supports a discrete set of width options.</dd><dt id="widl-PhotoSettings-iso"><code>iso</code> of type <span class="idlMemberType"><a>attribute unsigned long</a></span></dt><dd>This reflects the desired camera ISO setting.</dd><dt id="widl-PhotoSettings-redEyeReduction"><code>redEyeReduction</code> of type <span class="idlMemberType"><a>attribute boolean</a></span></dt><dd>This reflects whether camera red eye reduction is desired</dd><dt id="widl-PhotoSettings-saturation"><code>saturation</code> of type <span class="idlMemberType"><a>attribute unsigned long</a></span></dt><dd>This reflects the desired saturation setting of the camera.</dd><dt id="widl-PhotoSettings-sharpness"><code>sharpness</code> of type <span class="idlMemberType"><a>attribute unsigned long</a></span></dt><dd>This reflects the desired sharpness setting of the camera.</dd><dt id="widl-PhotoSettings-whiteBalanceMode"><code>whiteBalanceMode</code> of type <span class="idlMemberType"><a>attribute unsigned long</a></span></dt><dd>This reflects the desired white balance mode setting.</dd></dl></section></section><section id="examples"><!--OddPage--><h2><span class="secno">13. </span> Examples</h2><section id="taking-a-picture-if-red-eye-reduction-is-activated"><h3><span class="secno">13.1 </span>Taking a picture if Red Eye Reduction is activated</h3><div class="example"><div class="example-title"><span>Example 1</span></div><pre class="example">navigator.getUserMedia({video: true}, gotMedia, failedToGetMedia);

function gotMedia(mediastream) {
   //Extract video track.  'kind' attribute not checked because stream was created with video option only.
   var videoDevice = mediastream.getTrackByID()[0];
   // Check if this device supports a picture mode...
   var pictureDevice = new ImageCapture(videoDevice);
   if (pictureDevice) {
         pictureDevice.onphoto = showPicture;
         if (pictureDevice.photoSettingsOptions.redEyeReduction) {
            pictureDevice.setOptions({redEyeReductionSetting:true});
            }
         else
            console.log('No red eye reduction');
         pictureDevice.onphotosettingschange = function(){
            if (pictureDevice.photoSettingsOptions.redEyeReduction.value)
                pictureDevice.takePhoto();
            }
         }
     }

 function showPicture(e) {
    var img = document.querySelector("img");
    img.src = URL.createObjectURL(e.data);
    }

 function failedToGetMedia{
    console.log('Stream failure');
    }</pre></div></section><section id="grabbing-a-frame-for-post-processing"><h3><span class="secno">13.2 </span>Grabbing a Frame for Post-Processing</h3><div class="example"><div class="example-title"><span>Example 2</span></div><pre class="example">navigator.getUserMedia({video: true}, gotMedia, failedToGetMedia);

function gotMedia(mediastream) {
   //Extract video track.  'kind' attribute not checked because stream was created with video option only.
   var videoDevice = mediastream.getTrackByID()[0];
   // Check if this device supports a picture mode...
   var pictureDevice = new ImageCapture(videoDevice);
   if (pictureDevice) {
         pictureDevice.onframegrab = processFrame;
         pictureDevice.getFrame();
         }
     }

 function processFrame(e) {
    imgData = e.imageData;
    width = imgData.width;
    height = imgData.height;
    for (j=3; j &lt; imgData.length; j+=4)
         {
         // Set all alpha values to medium opacity
         imgData.data[j] = 128;
         }
    // Create new ImageObject with the modified pixel values
    var canvas = document.createElement('canvas');
    ctx = canvas.getContext("2d");
    newImg = ctx.createImageData(width,height);
    for (j=0; j &lt; imgData.length; j++)
         {
         newImg.data[j] = imgData.data[j];
         }
    // ... and do something with the modified image ...
    }

 function failedToGetMedia{
    console.log('Stream failure');
    }</pre></div></section></section><section class="appendix" id="references"><!--OddPage--><h2><span class="secno">A. </span>References</h2><section id="normative-references"><h3><span class="secno">A.1 </span>Normative references</h3><dl class="bibliography"><dt id="bib-CANVAS-2D">[CANVAS-2D]</dt><dd>Rik Cabanier; Eliot Graff; Jay Munro; Tom Wiltzius; Ian Hickson. <a href="http://www.w3.org/TR/2dcontext/"><cite>HTML Canvas 2D Context</cite></a>. 17 December 2012. W3C Candidate Recommendation. URL: <a href="http://www.w3.org/TR/2dcontext/">http://www.w3.org/TR/2dcontext/</a>
</dd><dt id="bib-FILE-API">[FILE-API]</dt><dd>Arun Ranganathan; Jonas Sicking. <a href="http://www.w3.org/TR/FileAPI/"><cite>File API</cite></a>. 25 October 2012. W3C Working Draft. URL: <a href="http://www.w3.org/TR/FileAPI/">http://www.w3.org/TR/FileAPI/</a>
</dd><dt id="bib-GETUSERMEDIA">[GETUSERMEDIA]</dt><dd>D. Burnett; A. Narayanan. <a href="http://www.w3.org/TR/mediacapture-streams/"><cite>Media Capture and Streams</cite></a>. 16 May 2013. W3C Working Draft. URL: <a href="http://www.w3.org/TR/mediacapture-streams/">http://www.w3.org/TR/mediacapture-streams/</a>
</dd></dl></section></section></body></html>
