<!-- http://www.w3.org/TR/css-writing-modes-3/ -->
<!DOCTYPE html><html lang=en><head>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <title>CSS Writing Modes Level 3</title>
  <link href=default.css rel=stylesheet type=text/css>
  <link href=http://www.w3.org/StyleSheets/TR/W3C-CR rel=stylesheet type=text/css>

<style>
object { vertical-align: middle; }
.sidebar { float: right; background: #eee; border: solid gray; margin: 1em; }
.sidebar .figure { margin: 1em; }
.sidebar object { margin: 0 auto; display: block; }
.figurepair { display: table; margin: 1em auto; }
.figurepair .figure { display: table-cell; padding-left: .5em; padding-right: .5em; }
h2, .example { clear: both; }
.figure img,
.figure object,
.example img,
dd img { max-width: 100%; display: block; margin: 1em auto; }
div.figure table {
  margin:auto;
}
</style>


</head>
<body class=h-entry>
<div class=head>
  <p><a href=http://www.w3.org/>
    <img alt=W3C height=48 src=http://www.w3.org/Icons/w3c_home width=72>
</a>
</p>
  <h1 class="p-name no-ref" id=title>CSS Writing Modes Level 3</h1>
  <h2 class="no-num no-toc no-ref heading settled heading" id=subtitle><span class=content>W3C Candidate Recommendation,
    <span class=dt-updated><span class=value-title title=20140320>20 March 2014</span></span></span></h2>
  <div data-fill-with=spec-metadata><dl><dt>This version:<dd><a class=u-url href=http://www.w3.org/TR/2014/CR-css-writing-modes-3-20140320/>http://www.w3.org/TR/2014/CR-css-writing-modes-3-20140320/</a><dt>Latest version:<dd><a href=http://www.w3.org/TR/css-writing-modes-3/>http://www.w3.org/TR/css-writing-modes-3/</a><dt>Editor’s Draft:<dd><a href=http://dev.w3.org/csswg/css-writing-modes-3/>http://dev.w3.org/csswg/css-writing-modes-3/</a><dt>Previous Versions:<dd><a href=http://www.w3.org/TR/2013/WD-css-writing-modes-3-20131126/ rel=previous>http://www.w3.org/TR/2013/WD-css-writing-modes-3-20131126/</a>
    <dt>Feedback:</dt>
        <dd><a href="mailto:www-style@w3.org?subject=%5Bcss-writing-modes%5D%20feedback">www-style@w3.org</a>
            with subject line
            “<kbd>[css-writing-modes] <var>… message topic …</var></kbd>”(<a href=http://lists.w3.org/Archives/Public/www-style/ rel=discussion>archives</a>)<dt>Test Suite:<dd><a href=http://test.csswg.org/suites/css3-writing-modes/nightly-unstable/>http://test.csswg.org/suites/css3-writing-modes/nightly-unstable/</a><dt>Editors:
<dd class="p-author h-card vcard"><a class="p-name fn u-url url" href=http://fantasai.inkedblade.net/contact>fantasai</a> (<span class="p-org org">Invited Expert</span>)<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:kojiishi@gluesoft.co.jp>Koji Ishii</a> (<span class="p-org org">Invited Expert</span>)<dt>Former Editors:
<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:murakami@antenna.co.jp>Shinyu Murakami</a> (<span class="p-org org"><a href=http://www.antenna.co.jp/>Antenna House</a></span>)<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:paulnel@microsoft.com>Paul Nelson</a> (<span class="p-org org"><a href=http://www.microsoft.com/>Microsoft</a></span>)<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:michelsu@microsoft.com>Michel Suignard</a> (<span class="p-org org"><a href=http://www.microsoft.com/>Microsoft</a></span>)<dt>Issue Tracking:<dd><a href=http://www.w3.org/Style/CSS/Tracker/products/30>http://www.w3.org/Style/CSS/Tracker/products/30</a></dl></div>
  <div data-fill-with=warning></div>
  <p class=copyright data-fill-with=copyright><a href=http://www.w3.org/Consortium/Legal/ipr-notice#Copyright>Copyright</a> © 2014 <a href=http://www.w3.org/><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href=http://www.csail.mit.edu/><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href=http://www.ercim.eu/><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href=http://www.keio.ac.jp/>Keio</a>, <a href=http://ev.buaa.edu.cn/>Beihang</a>), All Rights Reserved. W3C <a href=http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer>liability</a>, <a href=http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks>trademark</a> and <a href=http://www.w3.org/Consortium/Legal/copyright-documents>document use</a> rules apply.
</p>
  <hr title="Separator for header">
</div>

<h2 class="no-num no-toc no-ref heading settled heading" id=abstract><span class=content>Abstract</span></h2>
<p class=p-summary data-fill-with=abstract>CSS Writing Modes Level 3 defines CSS support for various international writing modes, such as left-to-right (e.g. Latin or Indic), right-to-left (e.g. Hebrew or Arabic), bidirectional (e.g. mixed Latin and Arabic) and vertical (e.g. Asian scripts).
<a href=http://www.w3.org/TR/CSS/>CSS</a> is a language for describing the rendering of structured documents 
(such as HTML and XML) 
on screen, on paper, in speech, etc.</p>

<h2 class="no-num no-toc no-ref heading settled heading" id=status><span class=content>Status of this document</span></h2>

<p><em>This section describes the status of this document at the time
of its publication. Other documents may supersede this document. A
list of current W3C publications and the latest revision of this
technical report can be found in the <a
href="http://www.w3.org/TR/">W3C technical reports index at
http://www.w3.org/TR/.</a></em></p>

<p>This document was produced by the <a
href="http://www.w3.org/Style/CSS/members">CSS Working Group</a> as a
<a href="http://www.w3.org/Consortium/Process/tr#RecsCR">Candidate
Recommendation.</a></p>

<p>A Candidate Recommendation is a document that has been widely
reviewed and is ready for implementation. W3C encourages everybody to
implement this specification and return comments to the
(<a
href="http://lists.w3.org/Archives/Public/www-style/">archived</a>)
public mailing
list <a
href="mailto:www-style@w3.org?Subject=%5Bcss-writing-modes-3%5D%20PUT%20SUBJECT%20HERE">
www-style@w3.org</a>
(see <a href="http://www.w3.org/Mail/Request">instructions</a>). When
sending e-mail, please put the text &#8220;css-writing-modes-3&#8221; in the
subject, preferably like this: &#8220;[<!---->css-writing-modes-3<!---->]
<em>&hellip;summary of comment&hellip;</em>&#8221;</p>

<p>Publication as a Candidate Recommendation does not imply endorsement
by the W3C Membership. This is a draft document and may be updated,
replaced or obsoleted by other documents at any time. It is
inappropriate to cite this document as other than work in
progress.</p>

<p>This document was produced by a group operating under
the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5
February 2004 W3C Patent Policy</a>. W3C maintains
a <a rel="disclosure"
href="http://www.w3.org/2004/01/pp-impl/32061/status">public list of any
patent disclosures</a> made in connection with the deliverables of the
group; that page also includes instructions for disclosing a patent.
An individual who has actual knowledge of a patent which the
individual believes
contains <a
href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">
Essential
Claim(s)</a> must disclose the information in accordance
with <a
href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">
section 6 of
the W3C Patent Policy</a>.</p>

<p>This specification will not progress to Proposed Recommendation
before 20 September 2014. See the section <a
href="#cr-exit-criteria">“CR exit criteria”</a> for details.

<p>A <a
href="http://test.csswg.org/suites/css3-writing-modes/nightly-unstable/"
>test suite and interoperability report</a> are under development.

<p>
	For changes since the last draft, 
	see the <a href=#changes>Changes</a> section.
<div data-fill-with=at-risk><p>The following features are at-risk, and may be dropped during the CR period:
<ul><li>The <a class=css data-link-type=maybe href=#valuedef-use-glyph-orientation title=use-glyph-orientation>use-glyph-orientation</a> of <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a><li>The <a class=css data-link-type=maybe href=http://www.w3.org/TR/css3-syntax/#digit title=digits>digits</a> value of <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a>.<li>The look-ahead/look-behind sequencing rules for <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a>.</ul></div>

<h2 class="no-num no-toc no-ref heading settled heading" id=contents><span class=content>Table of Contents</span></h2>
<div data-fill-with=table-of-contents><ul class=toc>
	<li><a href=#text-flow><span class=secno>1</span> Introduction to Writing Modes</a>
		<ul class=toc>
		<li><a href=#placement><span class=secno>1.1</span> Module Interactions</a>
		<li><a href=#values><span class=secno>1.2</span> Values</a></ul>
	<li><a href=#text-direction><span class=secno>2</span> Inline Direction and Bidirectionality</a>
		<ul class=toc>
		<li><a href=#direction><span class=secno>2.1</span> Specifying Directionality: the <span class=property data-link-type=propdesc title=direction>direction</span> property</a>
		<li><a href=#unicode-bidi><span class=secno>2.2</span> Embeddings and Overrides: the <span class=property data-link-type=propdesc title=unicode-bidi>unicode-bidi</span> property</a>
		<li><a href=#bidi-example><span class=secno>2.3</span> Example of Bidirectional Text</a>
		<li><a href=#bidi-box-model><span class=secno>2.4</span> Box model for inline boxes in bidirectional context</a></ul>
	<li><a href=#vertical-intro><span class=secno>3</span> Introduction to Vertical Text</a>
		<ul class=toc>
		<li><a href=#writing-mode><span class=secno>3.1</span> Block Flow Direction: the <span class=property data-link-type=propdesc title=writing-mode>writing-mode</span> property</a>
			<ul class=toc>
			<li><a href=#svg-writing-mode><span class=secno>3.1.1</span> SVG1.1 <span class=property data-link-type=propdesc title=writing-mode>writing-mode</span> Values</a></ul></ul>
	<li><a href=#inline-alignment><span class=secno>4</span> Inline-level Alignment</a>
		<ul class=toc>
		<li><a href=#intro-baselines><span class=secno>4.1</span> Introduction to Baselines</a>
		<li><a href=#text-baselines><span class=secno>4.2</span> Text Baselines</a>
		<li><a href=#replaced-baselines><span class=secno>4.3</span> Atomic Inline Baselines</a>
		<li><a href=#baseline-alignment><span class=secno>4.4</span> Baseline Alignment</a></ul>
	<li><a href=#intro-text-layout><span class=secno>5</span> Introduction to Vertical Text Layout</a>
		<ul class=toc>
		<li><a href=#text-orientation><span class=secno>5.1</span> Orienting Text: the <span class=property data-link-type=propdesc title=text-orientation>text-orientation</span> property</a>
			<ul class=toc>
			<li><a href=#vertical-font-features><span class=secno>5.1.1</span> Vertical Typesetting and Font Features</a>
			<li><a href=#vertical-orientations><span class=secno>5.1.2</span> Mixed Vertical Orientations</a></ul></ul>
	<li><a href=#abstract-box><span class=secno>6</span> Abstract Box Terminology</a>
		<ul class=toc>
		<li><a href=#abstract-dimensions><span class=secno>6.1</span> Abstract Dimensions</a>
		<li><a href=#logical-directions><span class=secno>6.2</span> Flow-relative Directions</a>
		<li><a href=#line-directions><span class=secno>6.3</span> Line-relative Directions</a>
		<li><a href=#logical-to-physical><span class=secno>6.4</span> Abstract-to-Physical Mappings</a></ul>
	<li><a href=#abstract-layout><span class=secno>7</span> Abstract Box Layout</a>
		<ul class=toc>
		<li><a href=#vertical-layout><span class=secno>7.1</span> Principles of Layout in Vertical Writing Modes</a>
		<li><a href=#dimension-mapping><span class=secno>7.2</span> Dimensional Mapping</a>
		<li><a href=#orthogonal-flows><span class=secno>7.3</span> Orthogonal Flows</a>
			<ul class=toc>
			<li><a href=#orthogonal-auto><span class=secno>7.3.1</span> Auto-sizing in Orthogonal Flows</a>
			<li><a href=#auto-multicol><span class=secno>7.3.2</span> Auto-sizing Block Containers in Orthogonal Flows</a>
			<li><a href=#orthogonal-layout><span class=secno>7.3.3</span> Auto-sizing Orthogonal Flows</a>
			<li><a href=#orthogonal-pagination><span class=secno>7.3.4</span> Fragmenting Orthogonal Flows</a></ul>
		<li><a href=#logical-direction-layout><span class=secno>7.4</span> Flow-Relative Mappings</a>
		<li><a href=#line-mappings><span class=secno>7.5</span> Line-Relative Mappings</a>
		<li><a href=#physical-only><span class=secno>7.6</span> Purely Physical Mappings</a>
		<li><a href=#caption-side><span class=secno>7.7</span> Table Caption Mappings: the <span class=property data-link-type=propdesc title=caption-side>caption-side</span> keywords</a></ul>
	<li><a href=#page-direction><span class=secno>8</span> Page Flow: the page progression direction</a>
	<li><a href=#text-combine><span class=secno>9</span> Glyph Composition</a>
		<ul class=toc>
		<li><a href=#text-combine-upright><span class=secno>9.1</span> Horizontal-in-Vertical Composition: the <span class=property data-link-type=propdesc title=text-combine-upright>text-combine-upright</span> property</a>
			<ul class=toc>
			<li><a href=#text-combine-runs><span class=secno>9.1.1</span> Text Run Rules</a>
			<li><a href=#text-combine-layout><span class=secno>9.1.2</span> Layout Rules</a>
			<li><a href=#text-combine-compression><span class=secno>9.1.3</span> Compression Rules</a>
				<ul class=toc>
				<li><a href=#text-combine-fullwidth><span class=secno>9.1.3.1</span> Full-width Characters</a></ul></ul></ul>
	<li><a href=#changes><span class=secno></span>Changes</a>
		<ul class=toc>
		<li><a href=#changes-201311><span class=secno></span>   Changes since the <span>November   2013 CSS Writing Modes Module Level 3 <abbr title="Last Call Working Draft">LCWD</abbr></span></a>
		<li><a href=#changes-201211><span class=secno></span>   Changes since the <span>November   2012 CSS Writing Modes Module Level 3 <abbr title="Working Draft">WD</abbr></span></a>
		<li><a href=#changes-201205><span class=secno></span>   Changes since the <span>May   2012 CSS Writing Modes Module Level 3 <abbr title="Working Draft">WD</abbr></span></a>
		<li><a href=#changes-201109><span class=secno></span>   Changes since the <span>September   2011 CSS Writing Modes Module Level 3 <abbr title="Working Draft">WD</abbr></span></a></ul>
	<li><a href=#acknowledgements><span class=secno></span> Acknowledgements</a>
	<li><a href=#character-properties><span class=secno></span>Appendix A. Characters and Properties</a>
	<li><a href=#bidi-html><span class=secno></span> Appendix B: Bidi Rules for HTML 4</a>
	<li><a href=#script-orientations><span class=secno></span>Appendix C: Vertical Scripts in Unicode</a>
	<li><a href=#conformance><span class=secno></span> Conformance</a>
		<ul class=toc>
		<li><a href=#conventions><span class=secno></span> Document conventions</a>
		<li><a href=#conformance-classes><span class=secno></span> Conformance classes</a>
		<li><a href=#partial><span class=secno></span> Partial implementations</a>
		<li><a href=#experimental><span class=secno></span> Experimental implementations</a>
		<li><a href=#testing><span class=secno></span> Non-experimental implementations</a>
		<li><a href=#cr-exit-criteria><span class=secno></span> CR exit criteria</a></ul>
	<li><a href=#references><span class=secno></span> References</a>
		<ul class=toc>
		<li><a href=#normative><span class=secno></span> Normative References</a>
		<li><a href=#informative><span class=secno></span> Informative References</a></ul>
	<li><a href=#index><span class=secno></span> Index</a>
	<li><a href=#property-index><span class=secno></span> Property index</a></ul></div>




<h2 class="heading settled heading" data-level=1 id=text-flow><span class=secno>1 </span><span class=content>
Introduction to Writing Modes</span><a class=self-link href=#text-flow></a></h2>

  <p>CSS Writing Modes Level 3 defines CSS features to support for various international
    writing modes, such as left-to-right (e.g. Latin or Indic), right-to-left
    (e.g. Hebrew or Arabic), bidirectional (e.g. mixed Latin and Arabic) and
    vertical (e.g. Asian scripts).</p>

  <p>A <dfn data-dfn-type=dfn data-export="" id=writing-mode0>writing mode<a class=self-link href=#writing-mode0></a></dfn> in CSS is determined by the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a>,
    <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a>, and <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> properties. It is defined primarily
    in terms of its <a data-link-type=dfn href=#inline-base-direction title="inline base direction">inline base direction</a> and <a data-link-type=dfn href=#block-flow-direction title="block flow direction">block flow direction</a>:

  <div class=sidebar>
    <div class="figure right">
      <a href=diagrams/text-flow-vectors-tb.svg>
        <img alt="Latin-based writing mode" class=landscape src=diagrams/text-flow-vectors-tb.png></a>
      <p class=caption>Latin-based writing mode
    </div>
    <div class="figure left">
      <a href=diagrams/text-flow-vectors-lr-reverse.svg>
        <img alt="Mongolian-based writing mode" class=landscape src=diagrams/text-flow-vectors-lr-reverse.png></a>
      <p class=caption>Mongolian-based writing mode
    </div>
    <div class="figure right">
      <a href=diagrams/text-flow-vectors-tb.svg>
        <img alt="Han-based writing mode" class=landscape src=diagrams/text-flow-vectors-tb.png></a>
      <a href=diagrams/text-flow-vectors-rl.svg>
        <img alt="Han-based writing mode" class=landscape src=diagrams/text-flow-vectors-rl.png></a>
      <p class=caption>Han-based writing mode
    </div>
  </div>

  <p>The <dfn data-dfn-type=dfn data-export="" id=inline-base-direction>inline base direction<a class=self-link href=#inline-base-direction></a></dfn> is the primary direction in which
    content is ordered on a line and defines on which sides the “start”
    and “end” of a line are. The <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property specifies the
    inline base direction of a box and, together with the <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a>
    property and the inherent directionality of any text content, determines
    the ordering of inline-level content within a line.

  <p>The <dfn data-dfn-type=dfn data-export="" id=block-flow-direction>block flow direction<a class=self-link href=#block-flow-direction></a></dfn> is the direction in which
    block-level boxes stack  and the direction in which line boxes stack
    within a block container. The <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> property determines the
    block flow direction.</p>

  <p>A <dfn data-dfn-type=dfn data-export="" id=horizontal-writing-mode>horizontal writing mode<a class=self-link href=#horizontal-writing-mode></a></dfn> is one with horizontal lines of
    text, i.e. a downward or upward block flow.
    A <dfn data-dfn-type=dfn data-export="" id=vertical-writing-mode>vertical writing mode<a class=self-link href=#vertical-writing-mode></a></dfn> is one with vertical lines of text,
    i.e. a leftward or rightward block flow.

  <p class=note>These terms should not be confused with
    <dfn data-dfn-type=dfn data-noexport="" id=vertical-block-flow>vertical block flow<a class=self-link href=#vertical-block-flow></a></dfn> (which is a downward or
    upward block flow) and <dfn data-dfn-type=dfn data-noexport="" id=horizontal-block-flow>horizontal block flow<a class=self-link href=#horizontal-block-flow></a></dfn> (which is
    leftward or rightward block flow). To avoid confusion, CSS
    specifications avoid this latter set of terms.</p>

  <p>Writing systems typically have one or two native writing modes. Some
    examples are:
  <ul>
    <li>Latin-based systems are typically written using a left-to-right inline
      direction with a downward (top-to-bottom) block flow direction.
    <li>Arabic-based systems are typically written using a right-to-left
      inline direction with a downward (top-to-bottom) block flow direction.
    <li>Mongolian-based systems are typically written using a top-to-bottom
      inline direction with a rightward (left-to-right) block flow direction.
    <li>Han-based systems are commonly written using a left-to-right inline direction
      with a downward (top-to-bottom) block flow direction, <strong>or</strong>
      a top-to-bottom inline direction with a leftward (right-to-left) block
      flow direction. Many magazines and newspapers will mix these two writing
      modes on the same page.
  </ul>

  <p>The <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> component of the writing mode determines the
    <a data-link-type=dfn href=#line-orientation title="line orientation">line orientation</a>, and controls
    details of text layout such as the <i data-link-type=dfn title="glyph orientation">glyph orientation</i>.

  <p class=note>See Unicode Technical Note #22 <a data-biblio-type=informative data-link-type=biblio href=#utn22 title=utn22>[UTN22]</a>
    (<a href=http://fantasai.inkedblade.net/style/discuss/vertical-text/paper>HTML version</a>)
    for a more in-depth introduction to writing modes and vertical text.

<h3 class="heading settled heading" data-level=1.1 id=placement><span class=secno>1.1 </span><span class=content>
Module Interactions</span><a class=self-link href=#placement></a></h3>

  <p>This module replaces and extends the <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> and <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a>
  features defined in <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a> sections 8.6 and 9.10.

<h3 class="heading settled heading" data-level=1.2 id=values><span class=secno>1.2 </span><span class=content>
Values</span><a class=self-link href=#values></a></h3>

  <p>This specification follows the
  <a href=http://www.w3.org/TR/CSS21/about.html#property-defs>CSS property
  definition conventions</a> from <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>. Value types not defined in
  this specification are defined in CSS Level 2 Revision 1 <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>.
  Other CSS modules may expand the definitions of these value types: for
  example <a data-biblio-type=informative data-link-type=biblio href=#css3color title=css3color>[CSS3COLOR]</a>, when combined with this module, expands the
  definition of the &lt;color&gt; value type as used in this specification.</p>

  <p>In addition to the property-specific values listed in their definitions,
  all properties defined in this specification also accept the
  <a href=http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit>inherit</a>
  keyword as their property value. For readability it has not been repeated
  explicitly.


<p><a id=bidi title=""></a>
<h2 class="heading settled heading" data-level=2 id=text-direction><span class=secno>2 </span><span class=content>
Inline Direction and Bidirectionality</span><a class=self-link href=#text-direction></a></h2>

  <p>While the characters in most scripts are written from left to right,
    certain scripts are written from right to left. In some documents,
    in particular those written with the Arabic  or Hebrew script, and in
    some mixed-language contexts, text in a single (visually displayed)
    block may appear with mixed directionality. This phenomenon is called
    <dfn data-dfn-type=dfn data-export="" id=bidirectionality>bidirectionality<a class=self-link href=#bidirectionality></a></dfn>, or "bidi" for short.</p>

  <div class=figure>
    <p><img alt="An example of bidirectional text is a Latin name in an Arabic
                 sentence. The sentence overall is typeset right-to-left, but
                 the letters in the Latin word in the middle are typeset
                 left-to-right." src=diagrams/bidi.png>
    <p class=caption>Bidirectionality</p>
  </div>

  <p>The Unicode standard (<a href=http://www.unicode.org/reports/tr9/>Unicode Standard Annex #9</a>) defines a complex
    algorithm for determining the proper ordering of bidirectional text. The
    algorithm consists of an implicit part based on character properties,
    as well as explicit controls for embeddings and overrides. CSS relies
    on this algorithm to achieve proper bidirectional rendering.

  <p>User agents that support bidirectional text must apply the Unicode
    bidirectional algorithm to every sequence of inline-level boxes uninterrupted
    by any block boundary or
    “<a href=http://www.unicode.org/reports/tr9/#Bidirectional_Character_Types>bidi type B</a>”
    <dfn data-dfn-type=dfn data-export="" id=forced-paragraph-break>forced paragraph break<a class=self-link href=#forced-paragraph-break></a></dfn>.
    This sequence forms the <dfn data-dfn-type=dfn data-export="" id=bidi-paragraph title="bidi paragraph">paragraph<a class=self-link href=#bidi-paragraph></a></dfn> unit
    in the bidirectional algorithm.

  <p>Two CSS properties, <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> and <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a>,
    provide explicit embedding, isolation, and override controls in the CSS layer.
    Because the base directionality of a text depends on the structure and
    semantics of the document, the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> and <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> properties
    should in most cases be used only to map bidi information in the markup
    to its corresponding CSS styles.
    <strong>If a document language provides markup features to control
    bidi, authors and users should use those features instead</strong> and not
    specify CSS rules to override them.</p>

  <p>In CSS,
    the paragraph embedding level must be set
    (following <a href=http://www.unicode.org/reports/tr9/#HL1>UAX9 clause HL1</a>)
    according to the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property of the paragraph’s containing block
    rather than by the heuristic given in steps
    <a href=http://www.unicode.org/reports/tr9/#P2>P2</a> and
    <a href=http://www.unicode.org/reports/tr9/#P2>P3</a>
    of the Unicode algorithm.
    There is, however, one exception:
    when the computed <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> of the paragraph’s containing block is <a class=css data-link-type=maybe href=#valuedef-plaintext title=plaintext>plaintext</a>,
    the Unicode heuristics in P2 and P3 are used as described in <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>,
    without the HL1 override.

  <p>The HTML specifications (<a data-biblio-type=informative data-link-type=biblio href=#html401 title=html401>[HTML401]</a>, section 8.2, and <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a>, section 10.3.5) define
    bidirectionality behavior for HTML elements.</p>

  <p class=note>Because HTML UAs can turn off CSS styling, we advise HTML
    authors to use the HTML <code>dir</code> attribute and &lt;bdo&gt; element to
    ensure correct bidirectional layout in the absence of a style sheet.</p>

<h3 class="heading settled heading" data-level=2.1 id=direction><span class=secno>2.1 </span><span class=content>
Specifying Directionality: the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property</span><a class=self-link href=#direction></a></h3>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-direction>direction<a class=self-link href=#propdef-direction></a></dfn><tr><th>Value:<td class=prod>ltr | rtl<tr><th>Initial:<td>ltr<tr><th>Applies to:<td>all elements<tr><th>Inherited:<td>yes<tr><th>Media:<td>visual<tr><th>Computed value:<td>specified value<tr><th>Canonical order:<td>n/a<tr><th>Percentages:<td>n/a<tr><th>Animatable:<td>no</table>
  <p>This property specifies the inline base direction or directionality
    of any bidi paragraph, embedding, isolate, or override established by the box.
    (See <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a>.) 
    In addition, it informs the ordering of
    <a href=http://www.w3.org/TR/CSS21/tables.html>table</a> column layout,
    the direction of horizontal <a href=http://www.w3.org/TR/CSS21/visufx.html#overflow>overflow</a>,
    and the default alignment of text within a line, and other layout effects
    that depend on the box’s inline base direction.</p>

  <p>Values for this property have the following meanings:</p>

  <dl data-dfn-for=direction data-dfn-type=value>
   <dt><dfn class=css-code data-dfn-for=direction data-dfn-type=value data-export="" id=valuedef-ltr>ltr<a class=self-link href=#valuedef-ltr></a></dfn></dt>
   <dd>Left-to-right directionality.</dd>
   <dt><dfn class=css-code data-dfn-for=direction data-dfn-type=value data-export="" id=valuedef-rtl>rtl<a class=self-link href=#valuedef-rtl></a></dfn></dt>
   <dd>Right-to-left directionality.</dd>
  </dl>

  <p class=note>The <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property has no effect on bidi reordering
    when specified on inline boxes whose <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> property’s
    value is <a class=css data-link-type=maybe href=#valuedef-normal title=normal>normal</a>, because the box does not open an additional level
    of embedding with respect to the bidirectional algorithm.</p>

  <p>The value of the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property on the root element is also
    propagated to the initial containing block and, together with the
    <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> property, determines the document’s principal writing
    mode. (See <a href=#principal-writing-mode>below</a>.)

  <p class=note>Note that the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property of the HTML BODY
    element is <em>not</em> propagated to the viewport. That special
    behavior only applies to the background and overflow properties.

  <p class=note>The <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a>
     property, when specified for table column boxes, is not inherited by
     cells in the column since columns are not the ancestors of the cells in
     the document tree. Thus, CSS cannot easily capture the "dir" attribute
     inheritance rules described in <a data-biblio-type=informative data-link-type=biblio href=#html401 title=html401>[HTML401]</a>, section 11.3.2.1.

<h3 class="heading settled heading" data-level=2.2 id=unicode-bidi><span class=secno>2.2 </span><span class=content>
Embeddings and Overrides: the <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> property</span><a class=self-link href=#unicode-bidi></a></h3>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-unicode-bidi>unicode-bidi<a class=self-link href=#propdef-unicode-bidi></a></dfn><tr><th>Value:<td class=prod>normal | embed | isolate | bidi-override | isolate-override | plaintext<tr><th>Initial:<td>normal<tr><th>Applies to:<td>all elements, but see prose<tr><th>Inherited:<td>no<tr><th>Media:<td>visual<tr><th>Computed value:<td>specified value<tr><th>Percentages:<td>n/a</table>
  <p>Normally (i.e. when <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> is <a class=css data-link-type=maybe href=#valuedef-normal title=normal>normal</a>)
    an inline box is transparent to the unicode bidi algorithm;
    content is ordered as if the box’s boundaries were not there.
    Other values of the <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> property cause inline boxes
    to create scopes within the algorithm,
    and to override the intrinsic directionality of text.

  <p>The following informative table summarizes the box-internal and
    box-external effects of <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a>:

  <table class=data>
    <caption>Effect of non-<a class=css data-link-type=maybe href=#valuedef-normal title=normal>normal</a> values of <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> on inline boxes</caption>
    <colgroup span=2></colgroup>
    <colgroup span=2></colgroup>
    <thead>
      <tr><th colspan=2 rowspan=2>
          <th colspan=2 scope=rowgroup><abbr title="To surrounding contents, the box behaves as if its boundary were...">Outside</abbr>
      <tr><th><abbr title="a strong character of the box’s 'direction'.">strong</abbr>
          <th><abbr title="a neutral character.">neutral</abbr>
    </thead>
    <tbody>
      <tr><th rowspan=3 scope=colgroup><abbr title="Within the box, content is ordered as if...">Inside</abbr>
          <th><abbr title="the box’s boundaries were strong characters of the box’s 'direction'.">scoped</abbr>
          <td><a class=css data-link-type=maybe href=#valuedef-embed title=embed>embed</a>
          <td><a class=css data-link-type=maybe href=#valuedef-isolate title=isolate>isolate</a>
      <tr><th><abbr title="all text consisted of strong characters of the box’s 'direction'.">override</abbr>
          <td><a class=css data-link-type=maybe href=#valuedef-bidi-override title=bidi-override>bidi-override</a>
          <td><a class=css data-link-type=maybe href=#valuedef-isolate-override title=isolate-override>isolate-override</a>
      <tr><th><abbr title="the box were a standalone paragraph ordered using UAX9 heuristics.">plaintext</abbr>
          <td>—
          <td><a class=css data-link-type=maybe href=#valuedef-plaintext title=plaintext>plaintext</a>
    </tbody>
  </table>

  <p>Values for this property have the following (normative) meanings:</p>

  <dl>
    <dt><dfn class=css-code data-dfn-for=unicode-bidi data-dfn-type=value data-export="" id=valuedef-normal>normal<a class=self-link href=#valuedef-normal></a></dfn></dt>
    <dd>The box does not open an additional level of embedding with
      respect to the bidirectional algorithm. For inline boxes,
      implicit reordering works across box boundaries.</dd>

    <dt><dfn class=css-code data-dfn-for=unicode-bidi data-dfn-type=value data-export="" id=valuedef-embed>embed<a class=self-link href=#valuedef-embed></a></dfn></dt>
    <dd>If the box is inline, this value creates a <dfn data-dfn-type=dfn data-export="" id=directional-embedding>directional embedding<a class=self-link href=#directional-embedding></a></dfn>
      by opening an additional level of embedding with respect to the bidirectional algorithm.
      The direction of this embedding level is given by the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a>
      property. Inside the box, reordering is done implicitly.

      <p>Following clause <a href=http://www.unicode.org/reports/tr9/#HL3>HL3</a> <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>,
      this corresponds to inserting
      a LRE (U+202A), for <a class=css data-link-type=propdesc href=#propdef-direction title=direction>direction: ltr</a>,
      or RLE (U+202B), for <a class=css data-link-type=propdesc href=#propdef-direction title=direction>direction: rtl</a>,
      at the start of the inline box
      and a PDF (U+202C) at the end of the box.

      <p class=note>This value has no effect on boxes that are not inline.

    <dt><dfn class=css-code data-dfn-for=unicode-bidi data-dfn-type=value data-export="" id=valuedef-isolate>isolate<a class=self-link href=#valuedef-isolate></a></dfn></dt>
    <dd>On an inline box, this <dfn data-dfn-type=dfn data-export="" id=bidi-isolate title="bidi-isolate|bidi-isolated|bidi isolation|isolation">bidi-isolates<a class=self-link href=#bidi-isolate></a></dfn> its contents.
      This is similar to a directional embedding (and increases the embedding level accordingly)
      except that each sequence of inline-level boxes
      uninterrupted by any block boundary or <a data-link-type=dfn href=#forced-paragraph-break title="forced paragraph break">forced paragraph break</a>
      is treated as an <dfn data-dfn-type=dfn data-noexport="" id=isolated-sequence>isolated sequence<a class=self-link href=#isolated-sequence></a></dfn>:
      <ul>
        <li>the content within the sequence is ordered
          as if inside an independent paragraph
          with the base directionality specified by the box’s <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property.
        <li>for the purpose of bidi resolution in its containing bidi paragraph,
          the sequence is treated as if it were a single Object Replacement Character (U+FFFC).
      </ul>
      In effect, neither is the content inside the box bidi-affected
      by the content surrounding the box,
      nor is the content surrounding the box bidi-affected by the
      content or specified directionality of the box.
      However, <a data-link-type=dfn href=#forced-paragraph-break title="forced paragraph breaks">forced paragraph breaks</a> within the box still create
      a corresponding break in the containing paragraph.

      <p>Following clause <a href=http://www.unicode.org/reports/tr9/#HL3>HL3</a> <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>,
      this corresponds to inserting
      an LRI (U+2066), for <a class=css data-link-type=propdesc href=#propdef-direction title=direction>direction: ltr</a>,
      or RLI (U+2067), for <a class=css data-link-type=propdesc href=#propdef-direction title=direction>direction: rtl</a>,
      at the start of the inline box,
      and a PDI (U+2069) at the end of the box. <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>

      <p class=note>This value has no effect on boxes that are not inline.

    <dt><dfn class=css-code data-dfn-for=unicode-bidi data-dfn-type=value data-export="" id=valuedef-bidi-override>bidi-override<a class=self-link href=#valuedef-bidi-override></a></dfn></dt>
    <dd>This value puts the box’s immediate inline content in a <dfn data-dfn-type=dfn data-export="" id=directional-override>directional override<a class=self-link href=#directional-override></a></dfn>.
      For an inline, this means that the box acts like a <a data-link-type=dfn href=#directional-embedding title="directional embedding">directional embedding</a>
      in the bidirectional algorithm,
      except that reordering within it is strictly in sequence according to the
      <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property; the implicit part of the bidirectional algorithm
      is ignored.
      For a block container, the override is applied
      to an anonymous inline box that surrounds all of its content.

      <p>Following clause <a href=http://www.unicode.org/reports/tr9/#HL3>HL3</a> <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>,
      this corresponds to inserting
      an LRO (U+202D), for <a class=css data-link-type=propdesc href=#propdef-direction title=direction>direction: ltr</a>,
      or RLO (U+202E), for <a class=css data-link-type=propdesc href=#propdef-direction title=direction>direction: rtl</a>,
      at the start of the inline box
      and a PDF (U+202C) at the end of the box. <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>

    <dt><dfn class=css-code data-dfn-for=unicode-bidi data-dfn-type=value data-export="" id=valuedef-isolate-override>isolate-override<a class=self-link href=#valuedef-isolate-override></a></dfn></dt>
    <dd>This combines the <a data-link-type=dfn href=#bidi-isolate title=isolation>isolation</a> behavior of <a class=css data-link-type=maybe href=#valuedef-isolate title=isolate>isolate</a>
      with the <a data-link-type=dfn href=#directional-override title="directional override">directional override</a> behavior of <a class=css data-link-type=maybe href=#valuedef-bidi-override title=bidi-override>bidi-override</a>:
      to surrounding content, it is equivalent to <a class=css data-link-type=maybe href=#valuedef-isolate title=isolate>isolate</a>,
      but within the box content is ordered as if <a class=css data-link-type=maybe href=#valuedef-bidi-override title=bidi-override>bidi-override</a> were specified.

      <p>Following clause <a href=http://www.unicode.org/reports/tr9/#HL3>HL3</a> <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>,
      for inline boxes this corresponds to inserting
      an FSI (U+2068) followed by
      an LRO (U+202D), for <a class=css data-link-type=propdesc href=#propdef-direction title=direction>direction: ltr</a>,
      or RLO (U+202E), for <a class=css data-link-type=propdesc href=#propdef-direction title=direction>direction: rtl</a> at the start of the box,
      and a PDF (U+202C) followed by PDI (U+2069) at the end of the box. <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>
      For other boxes, this value is exactly equivalent to <a class=css data-link-type=maybe href=#valuedef-bidi-override title=bidi-override>bidi-override</a>.

    <dt><dfn class=css-code data-dfn-for=unicode-bidi data-dfn-type=value data-export="" id=valuedef-plaintext>plaintext<a class=self-link href=#valuedef-plaintext></a></dfn></dt>
    <dd><p>This value behaves as <a class=css data-link-type=maybe href=#valuedef-isolate title=isolate>isolate</a> except that for the purposes of
      the Unicode bidirectional algorithm, the base directionality of each
      of the box’s <a data-link-type=dfn href=#bidi-paragraph title="bidi paragraphs">bidi paragraphs</a> (if a block container)
      or <a data-link-type=dfn href=#isolated-sequence title="isolated sequences">isolated sequences</a> (if an inline)
      is determined by following the heuristic in rules P2 and P3
      of the Unicode bidirectional algorithm
      (rather than by using the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property of the box).

      <p>Following cause <a href=http://www.unicode.org/reports/tr9/#HL3>HL3</a> <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>,
      for inline boxes this corresponds to inserting
      an FSI (U+2068) at the start of the box,
      and a PDI (U+2069) at the end of the box. <a data-biblio-type=normative data-link-type=biblio href=#uax9 title=uax9>[UAX9]</a>
  </dl>

  <p class=note>Because the <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> property does not inherit,
  setting <a class=css data-link-type=maybe href=#valuedef-bidi-override title=bidi-override>bidi-override</a> or <a class=css data-link-type=maybe href=#valuedef-plaintext title=plaintext>plaintext</a> on a block box will
  not affect any descendant blocks. Therefore these values are best
  used on blocks and inlines that do not contain any block-level
  structures.

  <p class=note>Note that <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> does not affect the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a>
    property even in the case of <a class=css data-link-type=maybe href=#valuedef-plaintext title=plaintext>plaintext</a>, and thus does not affect
    <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a>-dependent layout calculations.

  <p>The final order of characters within each <a data-link-type=dfn href=#bidi-paragraph title="bidi paragraph">bidi paragraph</a> is the
    same as if the bidi control codes had been added as described above,
    markup had been stripped, and the resulting character sequence had
    been passed to an implementation of the Unicode bidirectional
    algorithm for plain text that produced the same line-breaks as the
    styled text.

  <p>In this process, replaced elements with <a class=css data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-display title=display>display: inline</a>
    are treated as neutral characters,
    unless their <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> property is either <a class=css data-link-type=maybe href=#valuedef-embed title=embed>embed</a> or <a class=css data-link-type=maybe href=#valuedef-bidi-override title=bidi-override>bidi-override</a>,
    in which case they are treated as strong characters
    in the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> specified for the element.
    All other atomic inline-level boxes are treated as neutral characters
    always.</p>

  <p>If an inline box is broken around a <a data-link-type=dfn href=#bidi-paragraph title="bidi paragraph">bidi paragraph</a> boundary
    (e.g. if split by a block or <a data-link-type=dfn href=#forced-paragraph-break title="forced paragraph break">forced paragraph break</a>),
    then the <a href=http://www.unicode.org/reports/tr9/#HL3>HL3</a> bidi control codes assigned to the end of the box
    are also added before the interruption
    and the codes assigned to the start of the box are also added after it.
    (In other words, any embedding levels, isolates, or overrides started by the box
    are closed at the paragraph break and reopened on the other side of it.)

  <div class=example>
    <p>For example, where &lt;BR/&gt; is a <a data-link-type=dfn href=#forced-paragraph-break title="forced paragraph break">forced paragraph break</a>
    the bidi ordering is identical between
<pre>&lt;para&gt;...&lt;i1&gt;&lt;i2&gt;...&lt;BR/&gt;...&lt;/i2&gt;&lt;/i1&gt;...&lt;/para&gt;</pre>    <p>and
<pre>&lt;para&gt;...&lt;i1&gt;&lt;i2&gt;...&lt;/i2&gt;&lt;i1&gt;&lt;BR/&gt;&lt;i1&gt;&lt;i2&gt;...&lt;/i2&gt;&lt;/i1&gt;...&lt;/para&gt;</pre>    <p>for all values of <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> on inline elements &lt;i1&gt; and &lt;i2&gt;.
  </div>

  <p class=note>
    Because the Unicode algorithm has a limit of 125 levels of embedding,
    care should be taken not to use <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a>
    with a value other than <a class=css data-link-type=maybe href=#valuedef-normal title=normal>normal</a> unless appropriate.
    In particular, a value of <span class=css data-link-type=maybe title=inherit>inherit</span>
    should be used with extreme caution. However, for elements that are,
    in general, intended to be displayed as blocks, a setting of
    <a class=css data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi: isolate</a> is preferred to keep the element together
    in case the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-display title=display>display</a> is changed to <span class=css data-link-type=maybe title=inline>inline</span>
    (see example below).</p>

<h3 class="heading settled heading" data-level=2.3 id=bidi-example><span class=secno>2.3 </span><span class=content>
Example of Bidirectional Text</span><a class=self-link href=#bidi-example></a></h3>

  <p>The following example shows an XML document with bidirectional
    text. It illustrates an important design principle: document language
    designers should take bidi into account both in the language proper
    (elements and attributes) and in any accompanying style sheets. The
    style sheets should be designed so that bidi rules are separate from
    other style rules, and such rules should not be overridden by other
    style sheets so that the document language’s bidi behavior is preserved.</p>

  <div class=example>
    <p>In this example, lowercase letters stand for inherently left-to-right
      characters and uppercase letters represent inherently right-to-left
      characters. The text stream is shown in logical backing store order.</p>

    <pre class=xml-example><code class=xml>
&lt;section dir=rtl&gt;
  &lt;para&gt;HEBREW1 HEBREW2 english3 HEBREW4 HEBREW5&lt;/para&gt;
  &lt;para&gt;HEBREW6 &lt;emphasis&gt;HEBREW7&lt;/emphasis&gt; HEBREW8&lt;/para&gt;
&lt;/section&gt;
&lt;section dir=ltr&gt;
  &lt;para&gt;english9 english10 english11 HEBREW12 HEBREW13&lt;/para&gt;
  &lt;para&gt;english14 english15 english16&lt;/para&gt;
  &lt;para&gt;english17 &lt;quote dir=rtl&gt;HEBREW18 english19 HEBREW20&lt;/quote&gt;&lt;/para&gt;
&lt;/section&gt;
</code></pre>
    <p>Since this is arbitrary XML, the style sheet is responsible for
      setting the writing direction. This is the style sheet:</p>

    <pre>/* Rules for bidi */
[dir=ltr] {direction: rtl;}
[dir=rtl] {direction: ltr;}
quote     {unicode-bidi: isolate;}

/* Rules for presentation */
section, para  {display: block;}
emphasis       {font-weight: bold;}
</pre>
    <p>The first <code>&lt;section&gt;</code> element is a block with a right-to-left base direction,
      the second <code>&lt;section&gt;</code> element is a block with a left-to-right base direction.
      The <code>&lt;para&gt;</code>s are blocks that inherit the base direction from their parents.
      Thus, the first two <code>&lt;para&gt;</code>s are read starting at the top right,
      the final three are read starting at the top left.</p>

    <p>The <code>&lt;emphasis&gt;</code> element is inline-level,
      and since its value for <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> is <a class=css data-link-type=maybe href=#valuedef-normal title=normal>normal</a> (the initial value),
      it has no effect on the ordering of the text.
      The <code>&lt;quote&gt;</code> element, on the other hand,
      creates an <a data-link-type=dfn href=#isolated-sequence title="isolated sequence">isolated sequence</a> with the given internal directionality.

    <p>The formatting of this text might look like this if the line length
      is long:</p>

    <pre class=ascii-art>           5WERBEH 4WERBEH english3 2WERBEH 1WERBEH

                            8WERBEH <b>7WERBEH</b> 6WERBEH

english9 english10 english11 13WERBEH 12WERBEH

english14 english15 english16

english17 20WERBEH english19 18WERBEH
</pre>
    <p>Note that the <code>&lt;quote&gt;</code> embedding causes
      <samp>HEBREW18</samp> to be to the right of <samp>english19</samp>.

    <p>If lines have to be broken, it might be more like this:</p>

    <pre class=ascii-art>   2WERBEH 1WERBEH
  -EH 4WERBEH english3
             5WERB

   -EH <b>7WERBEH</b> 6WERBEH
             8WERB

english9 english10 en-
glish11 12WERBEH
13WERBEH

english14 english15
english16

english17 18WERBEH
20WERBEH english19
</pre>
    <p>Because <samp>HEBREW18</samp> must be read before english19,
      it is on the line above <samp>english19</samp>.
      Just breaking the long line from the earlier formatting would not have worked.
      Note also that the first syllable from <samp>english19</samp>
      might have fit on the previous line,
      but hyphenation of left-to-right words in a right-to-left context, and vice versa,
      is usually suppressed to avoid having to display a hyphen in the middle of a line.

  </div>

<h3 class="heading settled heading" data-level=2.4 id=bidi-box-model><span class=secno>2.4 </span><span class=content>
Box model for inline boxes in bidirectional context</span><a class=self-link href=#bidi-box-model></a></h3>

  <p>Since bidi reordering can split apart and reorder text that is
    logically contiguous, bidirectional text can cause an inline box
    to be split and reordered within a line.

  <p class=note>Note that in order to be able to flow inline boxes in a
    uniform direction (either entirely left-to-right or entirely
    right-to-left), anonymous inline boxes may have to be created.</p>


  <p>For each line box, UAs must take the fragments of each inline box
    and render the margins, borders and padding in visual order (not logical order).
    The <a data-link-type=dfn href=#start title=start>start</a>-most fragment on the first line box in which the box appears
    has the <a data-link-type=dfn href=#start title=start>start</a> edge’s margin, border, and padding;
    and the end-most fragment on the last line box in which the box appears
    has the <a data-link-type=dfn href=#end title=end>end</a> edge’s margin, border, and padding.
    For example, in the <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a> writing mode:
    <ul>
      <li>When the parent’s <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property is <a class=css data-link-type=maybe href=#valuedef-ltr title=ltr>ltr</a>,
      the left-most box fragment on the first line box in which the box appears
      has the left margin, left border and left padding,
      and the right-most box fragment on the last line box in which the box appears
      has the right padding, right border and right margin.
      <li>When the parent’s <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property is <a class=css data-link-type=maybe href=#valuedef-rtl title=rtl>rtl</a>,
      the right-most fragment of the first line box in which the box appears
      has the right padding, right border and right margin,
      and the left-most fragment of the last line box in which the box appears
      has the left margin, left border and left padding.
    </ul>
    <p>Analogous rules hold for vertical writing modes.</p>

  <p class=note>The <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-break/#box-decoration-break title=box-decoration-break>box-decoration-break</a> property can override this behavior
  to draw box decorations on both sides of each fragment. <a data-biblio-type=normative data-link-type=biblio href=#css3-break title=css3-break>[CSS3-BREAK]</a>

<h2 class="heading settled heading" data-level=3 id=vertical-intro><span class=secno>3 </span><span class=content>
Introduction to Vertical Text</span><a class=self-link href=#vertical-intro></a></h2>

  <p><em>This subsection is non-normative.</em></p>

  <p>In addition to extensions to CSS2.1’s support for bidirectional text,
    this module introduces the rules and properties needed to support vertical
    text layout in CSS.

  <p>Unlike languages that use the Latin script which are primarily laid out
    horizontally, Asian languages such as Chinese and Japanese can be laid out
    vertically.  The Japanese example below shows the same text laid out
    horizontally and vertically. In the horizontal case, text is read
    from left to right, top to bottom. For the vertical case, the text is
    read top to bottom, right to left.
    Indentation from the left edge in the left-to-right horizontal case
    translates to indentation from the top edge in the top-to-bottom vertical
    case.

  <div class=figure>
    <p><img alt="A comparison of horizontal and vertical Japanese shows that
                 although the lines rotate, the characters remain upright.
                 Some glyphs, however change: a period mark shifts from the
                 bottom left of its glyph box to the top right. Running
                 headers, however, may remain
                 laid out horizontally across the top of the page." src=vert-horiz-comparison.png></p>
    <p class=caption>Comparison of vertical and horizontal Japanese: iBunko application (iOS)</p>
  </div>

  <p class=note>For Chinese and Japanese lines are ordered either right
    to left or top to bottom, while for Mongolian and Manchu lines are
    ordered left to right.</p>

  <p>The change from horizontal to vertical writing can affect not just the
    layout, but also the typesetting. For example, the position of a punctuation
    mark within its spacing box can change from the horizontal to the
    vertical case, and in some cases alternate glyphs are used.

  <p>Vertical text that includes Latin script text or text from other scripts
    normally displayed horizontally can display that text in a number of
    ways. For example, Latin words can be rotated sideways, or each letter
    can be oriented upright:

  <div class=figure>
    <p><img alt="A dictionary definition for ヴィルス
                 might write the English word 'virus' rotated 90° clockwise,
                 but stack the letters of the initialisms 'RNA' and 'DNA' upright." src=vert-latin-layouts.png></p>
    <p class=caption>Examples of Latin in vertical Japanese: Daijirin Viewer 1.4 (iOS)
  </div>

  <p>In some special cases such as two-digit numbers in dates, text is fit
    compactly into a single vertical character box:

  <div class=figure id=fig-mac>
    <p><img alt="An excerpt from MacFan shows several possible vertical layouts
                 for numbers: the two-digit month and day are written as
                 horizontal-in-vertical blocks; the years are written with
                 each character upright; except in the English phrase
                 “for Mac 2011”, where the date is rotated to
                 match the rotated Latin." src=vert-number-layouts.png></p>
    <p class=caption>Mac Fan, December 2010, p.49</p>
  </div>

  <p>Layouts often involve a mixture of vertical and horizontal elements:

  <div class=figure>
    <p><img alt="Magazines often mix horizontal and vertical layout; for
                 example, using one orientation for the main article text
                 and a different one for sidebar or illustrative content." src=vert-horiz-combination.png></p>
    <p class=caption>Mixture of vertical and horizontal elements</p>
  </div>

  <p>Vertical text layouts also need to handle bidirectional text layout;
    clockwise-rotated Arabic, for example, is laid out bottom-to-top.


<h3 class="heading settled heading" data-level=3.1 id=writing-mode><span class=secno>3.1 </span><span class=content>
Block Flow Direction: the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> property</span><a class=self-link href=#writing-mode></a></h3>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-writing-mode>writing-mode<a class=self-link href=#propdef-writing-mode></a></dfn><tr><th>Value:<td class=prod>horizontal-tb | vertical-rl | vertical-lr<tr><th>Initial:<td>horizontal-tb<tr><th>Applies to:<td>All elements except table row groups, table column groups, table rows, and table columns<tr><th>Inherited:<td>yes<tr><th>Media:<td>visual<tr><th>Computed value:<td>specified value<tr><th>Canonical order:<td>n/a<tr><th>Percentages:<td>n/a<tr><th>Animatable:<td>no</table>
  <p>This property specifies whether lines of text are laid out horizontally
    or vertically and the direction in which blocks progress. Possible
    values:</p>

  <dl data-dfn-for=writing-mode data-dfn-type=value>
    <dt><dfn class=css-code data-dfn-for=writing-mode data-dfn-type=value data-export="" id=valuedef-horizontal-tb>horizontal-tb<a class=self-link href=#valuedef-horizontal-tb></a></dfn></dt>
    <dd>Top-to-bottom <a data-link-type=dfn href=#block-flow-direction title="block flow direction">block flow direction</a>.
        The <a data-link-type=dfn href=#writing-mode0 title="writing mode">writing mode</a> is horizontal.</dd>
    <dt><dfn class=css-code data-dfn-for=writing-mode data-dfn-type=value data-export="" id=valuedef-vertical-rl>vertical-rl<a class=self-link href=#valuedef-vertical-rl></a></dfn></dt>
    <dd>Right-to-left <a data-link-type=dfn href=#block-flow-direction title="block flow direction">block flow direction</a>.
        The <a data-link-type=dfn href=#writing-mode0 title="writing mode">writing mode</a> is vertical.</dd>
    <dt><dfn class=css-code data-dfn-for=writing-mode data-dfn-type=value data-export="" id=valuedef-vertical-lr>vertical-lr<a class=self-link href=#valuedef-vertical-lr></a></dfn></dt>
    <dd>Left-to-right <a data-link-type=dfn href=#block-flow-direction title="block flow direction">block flow direction</a>.
        The <a data-link-type=dfn href=#writing-mode0 title="writing mode">writing mode</a> is vertical.</dd>
  </dl>

  <p>The <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> property specifies the <a data-link-type=dfn href=#block-flow-direction title="block flow direction">block flow direction</a>,
    which determines the progression of block-level boxes in a block formatting
    context; the progression of line boxes in a block container that contains
    inlines; the progression of rows in a table; etc. By virtue of determining
    the stacking direction of line boxes, the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> property also
    determines whether the line boxes' orientation (and thus the <a data-link-type=dfn href=#writing-mode0 title="writing mode">writing mode</a>)
    is horizontal or vertical. The <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> property then determines
    how text is laid out within the line box.

  <p>The <dfn data-dfn-type=dfn data-export="" id=principal-writing-mode>principal writing mode<a class=self-link href=#principal-writing-mode></a></dfn> of the
    document is determined by the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> and <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> values
    specified on the root element. This writing mode is used, for example,
    to determine the default page progression direction. (See <a data-biblio-type=informative data-link-type=biblio href=#css3page title=css3page>[CSS3PAGE]</a>.)
    Like <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a>, the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> value of the root element is also
    propagated to the initial containing block and sets the block flow
    direction of the initial block formatting context.

  <p class=note>Note that the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> property of the HTML BODY
    element is <em>not</em> propagated to the viewport. That special
    behavior only applies to the background and overflow properties.

  <p>If a box has a different block flow direction than its containing
    block:
  <ul>
   <li>If the box has a specified <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-display title=display>display</a> of <span class=css data-link-type=maybe title=inline>inline</span>, its <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-display title=display>display</a>
     computes to <span class=css data-link-type=maybe title=inline-block>inline-block</span>. <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
   <li>If the box has a specified <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-display title=display>display</a> of <span class=css data-link-type=maybe title=run-in>run-in</span>, its <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-display title=display>display</a>
     computes to <span class=css data-link-type=maybe title=block>block</span>. <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
   <li>If the box is a block container, then it establishes a new block
     formatting context.
  </ul>

  <p>The content of replaced elements do not rotate due to the writing mode:
    images, for example, remain upright. However replaced content
    involving text (such as MathML content or form elements) should match
    the replaced element’s writing mode and line orientation if the UA
    supports such a vertical writing mode for the replaced content.

  <div class=example>
    <p>In the following example, two block elements (1 and 3) separated
      by an image (2) are presented in various flow writing modes.</p>

    <p>Here is a diagram of horizontal writing mode (<code>writing-mode: horizontal-tb</code>):</p>

    <p><img alt="Diagram of horizontal layout: blocks 1, 2, and 3 are stacked top-to-bottom" height=300 src=horizontal.png width=219></p>

    <p>Here is a diagram for the right-to-left vertical writing mode commonly
      used in East Asia (<code>writing-mode: vertical-rl</code>):</p>

    <p><img alt="Diagram of a right-to-left vertical layout: blocks 1, 2,
                  and 3 are arranged side by side from right to left" height=191 src=vertical-rl.png width=297></p>

    <p>And finally, here is a diagram for the left-to-right vertical
      writing mode used for Manchu and Mongolian (<code>writing-mode: vertical-lr</code>):</p>

    <p><img alt="Diagram of left-to-right vertical layout: blocks 1, 2,
                  and 3 are arranged side by side from left to right" height=191 src=vertical-lr.png width=300></p>
  </div>

  <div class=example>
    <p>In the following example, some form controls are rendered inside
      a block with <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a> writing mode. The form controls are
      rendered to match the writing mode.
    <pre>&lt;style&gt;
  form { writing-mode: vertical-rl; }
&lt;/style&gt;
...
&lt;form&gt;
&lt;p&gt;&lt;label&gt;姓名　&lt;input value="艾俐俐"&gt;&lt;/label&gt;
&lt;p&gt;&lt;label&gt;语言　&lt;select&gt;&lt;option&gt;English
                       &lt;option&gt;français
                       &lt;option&gt;فارسی
                       &lt;option&gt;中文
                       &lt;option&gt;日本語&lt;/select&gt;&lt;/label&gt;
&lt;/form&gt;</pre>
    <p><img alt="Screenshot of vertical layout: the input element is
                laid lengthwise from top to bottom and its contents
                rendered in a vertical writing mode, matching the
                labels outside it. The drop-down selection control
                after it slides out to the side (towards the after
                edge of the block) rather than downward as it would
                in horizontal writing modes." src=vertical-form.png></p>
  </div>

  <div class=example>
    <p>In this example, <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> sets the list markers upright
      using the <a class=css data-link-type=maybe href=http://dev.w3.org/csswg/css-lists-3/#selectordef-marker title=::marker>::marker</a> pseudo-element. Vertical alignment ensures
      that longer numbers will still align with the right of the first
      line of text. <a data-biblio-type=informative data-link-type=biblio href=#css3list title=css3list>[CSS3LIST]</a>
    <pre>::marker { writing-mode: horizontal-tb;
            vertical-align: text-top;
            color: blue; }</pre>    <div class=figure>
      <p><img alt="Diagram showing list markers of '1.', '2.', '3.' sitting
                   upright atop sideways vertical Latin list item text." class=example src=vertical-horizontal-list-markers.png>
      <p class=caption>Example of horizontal list markers in a vertical list</p>
    </div>
  </div>

<h4 class="heading settled heading" data-level=3.1.1 id=svg-writing-mode><span class=secno>3.1.1 </span><span class=content>
SVG1.1 <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> Values</span><a class=self-link href=#svg-writing-mode></a></h4>

  <p>SVG1.1 <a data-biblio-type=normative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a> defines some additional values: <span class=css data-link-type=maybe title=lr>lr</span>,
    <span class=css data-link-type=maybe title=lr-tb>lr-tb</span>, <span class=css data-link-type=maybe title=rl>rl</span>, <span class=css data-link-type=maybe title=rl-tb>rl-tb</span>, <span class=css data-link-type=maybe title=tb>tb</span>, and <span class=css data-link-type=maybe title=tb-rl>tb-rl</span>.

  <p>These values are <em>deprecated</em> in any context except SVG1 documents.
    Implementations that wish to support these values in the context of CSS
    must treat them as follows:

  <table class=data>
    <thead>
      <tr><th>SVG1/Obsolete</th> <th>CSS</tr>
    </thead>
    <tbody>
      <tr><td><span class=css data-link-type=maybe title=lr>lr</span></td> <td rowspan=3><a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a></tr>
      <tr><td><span class=css data-link-type=maybe title=lr-tb>lr-tb</span></tr>
      <tr><td><span class=css data-link-type=maybe title=rl>rl</span></tr>
      <tr><td><span class=css data-link-type=maybe title=tb>tb</span></td> <td rowspan=2><a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a></tr>
      <tr><td><span class=css data-link-type=maybe title=tb-rl>tb-rl</span></tr>
    </tbody>
  </table>

  <p class=note>The SVG1.1 values were also present in an older revision
    of the CSS <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> specification, which is obsoleted by this
    specification. The additional <span class=css data-link-type=maybe title=tb-lr>tb-lr</span> value of that revision is
    replaced by <a class=css data-link-type=maybe href=#valuedef-vertical-lr title=vertical-lr>vertical-lr</a>.

  <p>In SVG1.1, these values set the <dfn data-dfn-type=dfn data-noexport="" id=inline-progression-direction>inline progression direction<a class=self-link href=#inline-progression-direction></a></dfn>,
    in other words, the direction the current text position
    advances each time a glyph is added. This is a geometric process that
    happens <em>after</em> bidi reordering, and thus has no effect on the
    interpretation of the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property (which is independent of
    <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a>). (See <a href=http://www.w3.org/TR/SVG/text.html#RelationshipWithBiDirectionality>Relationship
    with bidirectionality</a>. <a data-biblio-type=normative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a>)
  <p class=note>There are varying interpretations
    on whether this process causes "writing-mode: rl" to merely shift the
    text string or reverse the order of all glyphs in the text.</p>

<h2 class="heading settled heading" data-level=4 id=inline-alignment><span class=secno>4 </span><span class=content>
Inline-level Alignment</span><a class=self-link href=#inline-alignment></a></h2>

  <p>When different kinds of inline-level content are placed together on a
    line, the baselines of the content and the settings of the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align title=vertical-align>vertical-align</a>
    property control how they are aligned in the transverse direction of the
    line box. This section discusses what baselines are, how to find them,
    and how they are used together with the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align title=vertical-align>vertical-align</a> property to
    determine the alignment of inline-level content.

<h3 class="heading settled heading" data-level=4.1 id=intro-baselines><span class=secno>4.1 </span><span class=content>
Introduction to Baselines</span><a class=self-link href=#intro-baselines></a></h3>

  <p><em>This section is non-normative.</em></p>

  <p>A <dfn data-dfn-type=dfn data-noexport="" id=baseline>baseline<a class=self-link href=#baseline></a></dfn> is a line along the <a data-link-type=dfn href=#inline-axis- title="inline axis">inline axis</a> of a line box
    along which individual glyphs of text are aligned. Baselines guide the
    design of glyphs in a font (for example, the bottom of most alphabetic
    glyphs typically align with the alphabetic baseline), and they guide
    the alignment of glyphs from different fonts or font sizes when typesetting.

  <div class=figure>
    <p><img alt="Picture of alphabetic text in two font sizes with the baseline and em-boxes" src=alphabetic-baseline-in-two-font-sizes.svg width=480></p>
    <p class=caption>Alphabetic text in two font sizes with the baseline and em-boxes</p>
  </div>

  <p>Different writing systems prefer different baseline tables.</p>

  <div class=figure>
    <p><img alt="Latin prefers the alphabetic baseline, on top of which most
                 letters rest, though some have descenders that dangle below it.
                 Indic scripts are sometimes typeset with a hanging baseline,
                 since their glyph shapes appear to be hanging from a
                 horizontal line.
                 Han-based systems, whose glyphs are designed to fill a square,
                 tend to align on their bottoms." src=script-preferred-baselines.gif></p>
    <p class=caption>Preferred baselines in various writing systems</p>
  </div>

  <p>A well-constructed font contains a <dfn data-dfn-type=dfn data-noexport="" id=baseline-table>baseline table<a class=self-link href=#baseline-table></a></dfn>, which
    indicates the position of one or more baselines within the font’s
    design coordinate space. (The design coordinate space is scaled with
    the font size.)

  <div class=figure>
    <p><img alt="" src=baselines.gif></p>
    <p class=caption>In a well-designed mixed-script font, the glyphs are
    positioned in the coordinate space to harmonize with one another
    when typeset together. The baseline table is then constructed to
    match the shape of the glyphs, each baseline positioned to match
    the glyphs from its preferred scripts.</p>
  </div>

  <p>The baseline table is a property of the font, and the positions
    of the various baselines apply to all glyphs in the font.

  <p>Different baseline tables can be provided for alignment in
    horizontal and vertical text. UAs should use the vertical
    tables in vertical writing modes and the horizontal tables
    otherwise.

<h3 class="heading settled heading" data-level=4.2 id=text-baselines><span class=secno>4.2 </span><span class=content>
Text Baselines</span><a class=self-link href=#text-baselines></a></h3>

  <p>In this specification, only the following baselines are considered:

  <dl>
    <dt>alphabetic</dt>
    <dd>The <dfn data-dfn-type=dfn data-noexport="" id=alphabetic-baseline>alphabetic baseline<a class=self-link href=#alphabetic-baseline></a></dfn>, which typically aligns with the
      bottom of uppercase Latin glyphs.

    </dd>
    <dt>central</dt>
    <dd>The <dfn data-dfn-type=dfn data-noexport="" id=central-baseline>central baseline<a class=self-link href=#central-baseline></a></dfn>, which typically crosses the center
      of the em box. If the font is missing this baseline,
      it is assumed to be halfway between the ascender (<a data-link-type=dfn href=#over title=over>over</a>)
      and descender (<a data-link-type=dfn href=#under title=under>under</a>) edges of the em box.
    </dd>
  </dl>

  <p>In vertical writing mode, the <a data-link-type=dfn href=#central-baseline title="central baseline">central baseline</a> is used as the
    dominant baseline when <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> is <a class=css data-link-type=maybe href=#valuedef-mixed title=mixed>mixed</a> or <a class=css data-link-type=maybe href=#valuedef-upright title=upright>upright</a>.
    Otherwise the <a data-link-type=dfn href=#alphabetic-baseline title="alphabetic baseline">alphabetic baseline</a> is used.

  <p class=note>A future CSS module will deal with baselines in more
    detail and allow the choice of other dominant baselines and alignment
    options.</p>

<h3 class="heading settled heading" data-level=4.3 id=replaced-baselines><span class=secno>4.3 </span><span class=content>
Atomic Inline Baselines</span><a class=self-link href=#replaced-baselines></a></h3>

  <p>If an <a href=http://www.w3.org/TR/CSS21/visuren.html#inline-boxes>atomic
    inline</a> (such as an inline-block, inline-table, or replaced inline element)
    is not capable of providing its own baseline information, then the
    UA synthesizes a baseline table thus:

  <dl>
    <dt>alphabetic</dt>
    <dd>The alphabetic baseline is assumed to be at the <a data-link-type=dfn href=#under title=under>under</a> margin edge.</dd>
    <dt>central</dt>
    <dd>The central baseline is assumed to be halfway between the
    <a data-link-type=dfn href=#under title=under>under</a> and <a data-link-type=dfn href=#over title=over>over</a> margin edges of the box.
  </dl>

<h3 class="heading settled heading" data-level=4.4 id=baseline-alignment><span class=secno>4.4 </span><span class=content>
Baseline Alignment</span><a class=self-link href=#baseline-alignment></a></h3>

  <p>The <dfn data-dfn-type=dfn data-noexport="" id=dominant-baseline>dominant baseline<a class=self-link href=#dominant-baseline></a></dfn>
    (which <a href=#text-baselines>can change</a> based on the writing mode)
    is used in CSS for alignment in two cases:
  <ul>
    <li><strong>Aligning glyphs from different fonts within the same inline box.</strong>
      The glyphs are aligned by matching up the positions of the dominant
      baseline in their corresponding fonts.
    <li><strong>Aligning a child inline-level box within its parent.</strong>
      For the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align title=vertical-align>vertical-align</a> value of <a class=css data-link-type=maybe href=#baseline title=baseline>baseline</a>, child is aligned to
      the parent by matching the parent’s dominant baseline to the same
      baseline in the child. (E.g. if the parent’s dominant baseline is
      alphabetic, then the child’s alphabetic baseline is matched to the
      parent’s alphabetic baseline, even if the child’s dominant baseline
      is something else.)
      For values of <span class=css data-link-type=maybe title=sub>sub</span>, <span class=css data-link-type=maybe title=super>super</span>, <a class=css data-link-type=maybe href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a>, and
      <a class=css data-link-type=maybe href=http://www.w3.org/TR/css3-values/#percentage-value title="<percentage>">&lt;percentage&gt;</a>, the baselines are aligned as for <a class=css data-link-type=maybe href=#baseline title=baseline>baseline</a>,
      but the child is shifted according to the offset given by its
      <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align title=vertical-align>vertical-align</a> value.
      <div class=example>
        <p>Given following sample markup:
<pre>&lt;p&gt;&lt;span class="outer"&gt;Ap &lt;span class="inner"&gt;<i title="">ji</i>&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>        <p>And the following style rule:
<pre>span.inner { font-size: .75em; }</pre>        <p>The baseline tables of the parent (<code>.outer</code>) and the child
          (<code>.inner</code>) will not match up due to the font size difference.
          Since the dominant baseline is the alphabetic baseline, the child box
          is aligned to its parent by matching up their alphabetic baselines.
        <div class=figure>
          <p><img alt="" src=baseline-align-sizes.gif>
        </div>
      </div>

    <div class=example>
      <p>If we assign <a class=css data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align title=vertical-align>vertical-align: super</a> to the <code>.inner</code>
        element from the example above, the same rules are used to align
        the <code>.inner</code> child to its parent; the only difference
        is in addition to the baseline alignment, the child is shifted to
        the superscript position.
<pre>span.inner { vertical-align: super; font-size: .75em; }</pre>      <div class=figure>
        <p><img alt="In this example, the resulting alignment is equivalent
                     to shifting the parent baseline table upwards by the
                     superscript offset, and then aligning the child’s
                     alphabetic baseline to the shifted position of the
                     parent’s alphabetic baseline." src=baseline-align-super.gif>
      </div>
    </div>
  </ul>

<h2 class="heading settled heading" data-level=5 id=intro-text-layout><span class=secno>5 </span><span class=content>
Introduction to Vertical Text Layout</span><a class=self-link href=#intro-text-layout></a></h2>

  <p>Each writing system has one or more native orientations. Modern scripts
    can therefore be classified into three orientational categories:</p>

  <dl>
    <dt><dfn data-dfn-type=dfn data-noexport="" id=horizontal-only>horizontal-only<a class=self-link href=#horizontal-only></a></dfn>
      <dd>Scripts that have horizontal, but not vertical, native orientation.
        Includes: Latin, Arabic, Hebrew, Devanagari
    <dt><dfn data-dfn-type=dfn data-noexport="" id=vertical-only>vertical-only<a class=self-link href=#vertical-only></a></dfn>
      <dd>Scripts that have vertical, but not horizontal, native orientation.
        Includes: Mongolian, Phags Pa
    <dt><dfn data-dfn-type=dfn data-noexport="" id=bi-orientational>bi-orientational<a class=self-link href=#bi-orientational></a></dfn>
      <dd>Scripts that have both vertical and horizontal native orientation.
        Includes: Han, Hangul, Japanese Kana
  </dl>

  <p>A <dfn data-dfn-type=dfn data-noexport="" id=vertical-script>vertical script<a class=self-link href=#vertical-script></a></dfn> is one that has a native vertical orientation:
    i.e. one that is either vertical-only or that is bi-orientational.
    A <dfn data-dfn-type=dfn data-noexport="" id=horizontal-script>horizontal script<a class=self-link href=#horizontal-script></a></dfn> is one that has a native horizontal orientation:
    i.e. one that is either horizontal-only or that is bi-orientational.
    (See <a href=#script-orientations>Appendix B</a> for a categorization of
    scripts by native orientation.)

  <div class=figure>
        <p><img alt="A Venn diagram of these distinctions would show two circles:
                     one labelled 'vertical', the other 'horizontal'. The overlapped
                     region would represent the bi-orientational scripts, while
                     horizontal-only and vertical-only scripts would occupy their
                     respective circles' exclusive regions." src=baseline-align-super.gif>
  </div>

  <p>In modern typographic systems, all glyphs are assigned a horizontal
    orientation, which is used when laying out text horizontally.
    To lay out vertical text, the UA needs to transform the text from its
    horizontal orientation. This transformation is the <dfn data-dfn-type=dfn data-noexport="" id=bi-orientational----transform>bi-orientational
    transform<a class=self-link href=#bi-orientational----transform></a></dfn>, and there are two types:

  <dl>
    <dt>rotate</dt>
      <dd>Rotate the glyph from horizontal to vertical
      <a href=diagrams/glyph-right.svg>
        <img alt="Rotate the glyph from horizontal to vertical" class=figure src=diagrams/glyph-right.png></a>

    <dt>translate</dt>
      <dd>Translate the glyph from horizontal to vertical
      <a href=diagrams/glyph-upright.svg>
        <img alt="Translate the glyph from horizontal to vertical" class=figure src=diagrams/glyph-upright.png></a>
  </dl>

  <p>Scripts with a native vertical orientation have an
    intrinsic bi-orientational transform, which orients them correctly in
    vertical text: most CJK (Chinese/Japanese/Korean) characters translate,
    that is, they are always upright. Characters from other scripts,
    such as Mongolian, rotate.

  <p>Scripts without a native vertical orientation can be either rotated
    (set sideways) or translated (set upright): the transform used is a
    stylistic preference depending on the text’s usage, rather than a
    matter of correctness.
    The <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> property’s <a class=css data-link-type=maybe href=#valuedef-mixed title=mixed>mixed</a> and <a class=css data-link-type=maybe href=#valuedef-upright title=upright>upright</a> values
    are provided to specify rotation vs. translation of horizontal-only text.

  <p class=note>The <a class=css data-link-type=maybe href=#valuedef-sideways-left title=sideways-left>sideways-left</a>, <a class=css data-link-type=maybe href=#valuedef-sideways-right title=sideways-right>sideways-right</a>, and <a class=css data-link-type=maybe href=#valuedef-sideways title=sideways>sideways</a>
    values of <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> are provided for decorative layout effects
    and to work around limitations in CSS support for bottom-to-top scripts.

<h3 class="heading settled heading" data-level=5.1 id=text-orientation><span class=secno>5.1 </span><span class=content>
Orienting Text: the <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> property</span><a class=self-link href=#text-orientation></a></h3>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-text-orientation>text-orientation<a class=self-link href=#propdef-text-orientation></a></dfn><tr><th>Value:<td class=prod>mixed | upright | sideways-right | sideways-left | sideways | use-glyph-orientation<tr><th>Initial:<td>mixed<tr><th>Applies to:<td>all elements except table row groups, rows, column groups, and columns<tr><th>Inherited:<td>yes<tr><th>Media:<td>visual<tr><th>Computed value:<td>specified value<tr><th>Canonical order:<td>n/a<tr><th>Percentages:<td>n/a<tr><th>Animatable:<td>no</table>
  <p>This property specifies the orientation of text
    within a line. Current values only have an effect in vertical writing
    modes; the property has no effect on boxes in horizontal writing modes.

  <p>For readability, the term <a data-link-type=dfn href=#character title=character>character</a> is used in place of
    <em>extended grapheme cluster</em> in this section.
    See <a href=#character-properties>Characters and Properties</a>
    for further details.

  <p>Values have the following meanings:</p>

  <dl data-dfn-for=text-orientation data-dfn-type=value>
    <dt><dfn class=css-code data-dfn-for=text-orientation data-dfn-type=value data-export="" id=valuedef-mixed>mixed<a class=self-link href=#valuedef-mixed></a></dfn></dt>
    <dd><p>In vertical writing modes, characters from horizontal-only
      scripts are set sideways, i.e. 90° clockwise from their standard
      orientation in horizontal text.
      Characters from vertical scripts are set with their intrinsic orientation.
      See <a href=#vertical-orientations>Vertical Orientations</a> for further details.
    <p>This value is typical for layout of primarily vertical-script text.
    <dt><dfn class=css-code data-dfn-for=text-orientation data-dfn-type=value data-export="" id=valuedef-upright>upright<a class=self-link href=#valuedef-upright></a></dfn></dt>
    <dd><p>In vertical writing modes, characters from horizontal-only
      scripts are rendered upright, i.e. in their standard horizontal
      orientation.
      Characters from vertical scripts are set with their intrinsic orientation
      and shaped normally.
      See <a href=#vertical-orientations>Vertical Orientations</a> for further details.
      <p>For the purposes of bidi reordering, this value causes all
      characters to be treated as strong LTR.
      This value causes the used value of <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> to be <a class=css data-link-type=maybe href=#valuedef-ltr title=ltr>ltr</a>.
    <dt><dfn class=css-code data-dfn-for=text-orientation data-dfn-type=value data-export="" id=valuedef-sideways-right>sideways-right<a class=self-link href=#valuedef-sideways-right></a></dfn></dt>
    <dd><p>In vertical writing modes, this causes text to be set as if
      in a horizontal layout, but rotated 90° clockwise.
    <dt><dfn class=css-code data-dfn-for=text-orientation data-dfn-type=value data-export="" id=valuedef-sideways-left>sideways-left<a class=self-link href=#valuedef-sideways-left></a></dfn></dt>
    <dd><p>In vertical writing modes, this causes text to be set as if
      in a horizontal layout, but rotated 90° counter-clockwise.
      <p>If set on a non-replaced inline whose parent is not <a class=css data-link-type=maybe href=#valuedef-sideways-left title=sideways-left>sideways-left</a>,
      this forces bidi isolation: the <a class=css data-link-type=maybe href=#valuedef-normal title=normal>normal</a> and <a class=css data-link-type=maybe href=#valuedef-embed title=embed>embed</a> values of
      <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> compute to <a class=css data-link-type=maybe href=#valuedef-isolate title=isolate>isolate</a>, and <a class=css data-link-type=maybe href=#valuedef-bidi-override title=bidi-override>bidi-override</a> computes
      to <a class=css data-link-type=maybe href=#valuedef-isolate-override title=isolate-override>isolate-override</a>.
      Layout of text is exactly as for <a class=css data-link-type=maybe href=#valuedef-sideways-right title=sideways-right>sideways-right</a> except that the
      baseline table of each of the inline box’s fragments
      is mirrored around a vertical axis along the center of its content box
      and text layout is rotated 180° to match.
      The positions of text decorations propagated from an ancestor inline
      (including the block container’s root inline) are not mirrored, but any
      text decorations introduced by the box are positioned using the
      mirrored baseline table.
      <p>Similarly, if an inline child of the box has a <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a>
      value other than <a class=css data-link-type=maybe href=#valuedef-sideways-left title=sideways-left>sideways-left</a>, an analogous transformation (and
      bidi isolation) is applied.
    <dt><dfn class=css-code data-dfn-for=text-orientation data-dfn-type=value data-export="" id=valuedef-sideways>sideways<a class=self-link href=#valuedef-sideways></a></dfn></dt>
    <dd><p>This value is equivalent to <a class=css data-link-type=maybe href=#valuedef-sideways-right title=sideways-right>sideways-right</a> in <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a>
      writing mode and equivalent to <a class=css data-link-type=maybe href=#valuedef-sideways-left title=sideways-left>sideways-left</a> in <a class=css data-link-type=maybe href=#valuedef-vertical-lr title=vertical-lr>vertical-lr</a>
      writing mode. It can be useful when setting horizontal script text
      vertically in a primarily horizontal-only document.
    <dt><dfn class=css-code data-dfn-for=text-orientation data-dfn-type=value data-export="" id=valuedef-use-glyph-orientation>use-glyph-orientation<a class=self-link href=#valuedef-use-glyph-orientation></a></dfn></dt>
    <dd><p><a data-biblio-type=normative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a> defines <a class=property data-link-type=propdesc href=http://www.w3.org/TR/svg2/text.html#GlyphOrientationVerticalProperty title=glyph-orientation-vertical>glyph-orientation-vertical</a> and
      <a class=property data-link-type=propdesc href=http://www.w3.org/TR/svg2/text.html#GlyphOrientationHorizontalProperty title=glyph-orientation-horizontal>glyph-orientation-horizontal</a> properties that were intended to control
      text orientation. These properties are <em>deprecated</em> and do not
      apply to non-SVG elements. If an implementation supports these properties,
      the <a class=css data-link-type=maybe href=#valuedef-use-glyph-orientation title=use-glyph-orientation>use-glyph-orientation</a> value when set on SVG elements indicates
      that the SVG
      <a class=property data-link-type=propdesc href=http://www.w3.org/TR/svg2/text.html#GlyphOrientationVerticalProperty title=glyph-orientation-vertical>glyph-orientation-vertical</a> and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/svg2/text.html#GlyphOrientationHorizontalProperty title=glyph-orientation-horizontal>glyph-orientation-horizontal</a>
      behavior control the layout of text. Such UAs must set
      <a class=css data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation: use-glyph-orientation</a> on all
      <a href=http://www.w3.org/TR/SVG/intro.html#TermTextContentElement>SVG
      text content elements</a> in their default UA style sheet for SVG.
      <p>In all other contexts, and for implementations that do not support
      the glyph orientation properties, the <a class=css data-link-type=maybe href=#valuedef-use-glyph-orientation title=use-glyph-orientation>use-glyph-orientation</a> behavior
      is the same as for <a class=css data-link-type=maybe href=#valuedef-mixed title=mixed>mixed</a>.
      <p class=note>This value is at-risk and may be dropped during CR.
  </dl>

  <div class=figure id=fig-text-orientation>
    <table class=data>
      <tr>
        <td>
          <img alt="text-orientation: mixed" height=160 src=text-orientation-vr.png width=64>
        </td>
        <td>
          <img alt="text-orientation: upright" height=160 src=text-orientation-up.png width=64>
        </td>
        <td>
          <img alt="text-orientation: sideways-left" height=160 src=text-orientation-sl.png width=64>
        </td>
        <td>
          <img alt="text-orientation: sideways-right" height=160 src=text-orientation-sr.png width=64>
        </td>
      </tr>
      <tr>
        <td><a class=css data-link-type=maybe href=#valuedef-mixed title=mixed>mixed</a></td>
        <td><a class=css data-link-type=maybe href=#valuedef-upright title=upright>upright</a></td>
        <td><a class=css data-link-type=maybe href=#valuedef-sideways-left title=sideways-left>sideways-left</a></td>
        <td><a class=css data-link-type=maybe href=#valuedef-sideways-right title=sideways-right>sideways-right</a></td>
      </tr>
    </table>
    <p class=caption><a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> values (<a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> is <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a>)</p>
  </div>

  <div class=example>
    <p>In the following example, the root element of a horizontal-only document
      is set to use <a class=css data-link-type=maybe href=#valuedef-sideways title=sideways>sideways</a>. In the rest of the document, the author
      can just set <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> without worrying about whether the text is
      <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a> or <a class=css data-link-type=maybe href=#valuedef-vertical-lr title=vertical-lr>vertical-lr</a>.
    <pre>  :root { text-orientation: sideways; }
  caption { caption-side: left; writing-mode: vertical-lr; }
  thead th { writing-mode: vertical-lr; }
  h1.banner { position: absolute; top: 0; right: 0; writing-mode: vertical-rl; }
</pre>  </div>

  <p class=note>Changing the value of this property may affect inline-level alignment.
    Refer to <a href=#text-baselines>Text Baselines</a> for more details.</p>

<h4 class="heading settled heading" data-level=5.1.1 id=vertical-font-features><span class=secno>5.1.1 </span><span class=content>
Vertical Typesetting and Font Features</span><a class=self-link href=#vertical-font-features></a></h4>

  <p>When typesetting text in <a class=css data-link-type=maybe href=#valuedef-mixed title=mixed>mixed</a> and <a class=css data-link-type=maybe href=#valuedef-upright title=upright>upright</a> orientations:

  <dl>
    <dt id=typeset-upright><a class=self-link href=#typeset-upright></a>upright characters
    <dd>
      Are typeset upright with vertical font metrics.
      The UA must synthesize vertical font metrics for fonts that lack them.
      (This specification does not define heuristics for synthesizing such metrics.)
      Additionally, font features (such as alternate glyphs and other transformation)
      intended for use in vertical typesetting must be used.
      (E.g. the OpenType <span class=css data-link-type=maybe title=vert>vert</span> feature must be enabled.)
      Furthermore, characters from horizontal cursive scripts (such as Arabic)
      are shaped in their isolated forms when typeset upright.

      <p class=note>Note that even when typeset "upright",
        some glyphs should appear rotated.
        For example, dashes and enclosing punctuation
        should be oriented relative to the inline axis.
        In OpenType, this is typically handled by glyph substitution,
        although not all fonts have alternate glyphs for all relevant codepoints.
        (East Asian fonts usually provide alternates for East Asian codepoints,
        but Western fonts typically lack any vertical typesetting features
        and East Asian fonts typically lack vertical substitutions for Western codepoints.)
        Unicode published draft data on which <a data-link-type=dfn href=#character title=characters>characters</a> should appear sideways
        as the SVO property in <a href=http://www.unicode.org/reports/tr50/tr50-6.Orientation.txt>this data file</a>;
        however, this property has been abandoned for the current revision of <a data-biblio-type=normative data-link-type=biblio href=#utr50 title=utr50>[UTR50]</a>.

      <p><a data-link-type=dfn href=#character title=characters>Characters</a> which are classified as <code>Tr</code> or <code>Tu</code> in <a data-biblio-type=normative data-link-type=biblio href=#utr50 title=utr50>[UTR50]</a>
      are expected to have alternate glyphs or positioning for typesetting upright in vertical text.
      In the case of <code>Tr</code> <a data-link-type=dfn href=#character title=characters>characters</a>,
      if such vertical alternate glyphs are missing from the font,
      the UA <em>may wish to</em> <a data-biblio-type=normative data-link-type=biblio href=#rfc6919 title=rfc6919>[RFC6919]</a> (but is not expected to)
      synthesize the missing glyphs by <a href=#typeset-sideways>typesetting them sideways</a> etc.

    <dt id=typeset-sideways><a class=self-link href=#typeset-sideways></a>sideways characters
    <dd>
      Are typeset rotated 90° sideways with horizontal metrics,
      and vertical typesetting features are not used.
      However, if the font has features meant to be enabled
      for sideways text that is typeset in vertical lines
      (e.g. to adjust brush stroke angles or alignment),
      those features are used.
      (An example of such a feature would be the proposed
      <a href=http://blogs.adobe.com/CCJKType/2013/08/tale-of-three-features.html><code>vrtr</code> OpenType font feature</a>.)
  </dl>

  <p>
    All text in <a class=css data-link-type=maybe href=#valuedef-sideways title=sideways>sideways</a>, <a class=css data-link-type=maybe href=#valuedef-sideways-right title=sideways-right>sideways-right</a>, and <a class=css data-link-type=maybe href=#valuedef-sideways-left title=sideways-left>sideways-left</a> orientations is
    typeset using horizontal font metrics and the normal set of features
    used for horizontal text runs.
    Vertical metrics, vertical glyph variations, and any other features meant
    for text typeset in vertical lines are <em>not</em> used.

<h4 class="heading settled heading" data-level=5.1.2 id=vertical-orientations><span class=secno>5.1.2 </span><span class=content>
Mixed Vertical Orientations</span><a class=self-link href=#vertical-orientations></a></h4>

  <p>
    <a data-biblio-type=normative data-link-type=biblio href=#utr50 title=utr50>[UTR50]</a> defines the <code>Vertical_Orientation</code> property
    for the default character orientation of mixed-orientation vertical text.
    To typeset a <a data-link-type=dfn href=#character title=character>character</a> when <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> is <a class=css data-link-type=maybe href=#valuedef-mixed title=mixed>mixed</a>,
    the UA must <a href=#typeset-upright>typeset it upright</a>
    if its orientation property is <code>U</code>, <code>Tu</code>, or <code>Tr</code>;
    or <a href=#typeset-sideways>typeset it sideways</a> (90° clockwise from horizontal)
    if its orientation property is <code>R</code>.

  <p class=note>
    Note that UTR50 does not handle inherently bottom-to-top scripts,
    so they will not be typeset correctly with <a class=css data-link-type=maybe href=#valuedef-mixed title=mixed>mixed</a> orientation.
    Use <a class=css data-link-type=maybe href=#valuedef-sideways-left title=sideways-left>sideways-left</a> for such scripts.

  <p class=note>
    The OpenType <span class=css data-link-type=maybe title=vrt2>vrt2</span> feature, which is intended for mixed-orientation typesetting,
    is not used by CSS.
    It delegates the responsibility for orienting glyphs to the font designer.
    CSS instead dictates the orientation through <a data-biblio-type=normative data-link-type=biblio href=#utr50 title=utr50>[UTR50]</a>
    and orients glyphs by typesetting them sideways or upright as appropriate.



<h2 class="heading settled heading" data-level=6 id=abstract-box><span class=secno>6 </span><span class=content>
Abstract Box Terminology</span><a class=self-link href=#abstract-box></a></h2>

  <p>CSS2.1 <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a> defines the box layout model of CSS in detail,
    but only for the <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a> writing mode. Layout is analogous
    in writing modes other than <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a>; however directional
    and dimensional terms in CSS2.1 must be abstracted and remapped
    appropriately.

  <p>This section defines abstract directional and dimensional terms and
    their mappings in order to define box layout for other writing modes,
    and to provide terminology for future specs to define their layout
    concepts abstractly. (The next section explains how to apply them to
    CSS2.1 layout calculations and how to handle
    <a href=#orthogonal-flows>orthogonal flows</a>.)
    Although they derive from the behavior of text, these abstract
    mappings exist even for boxes that do not contain any line boxes:
    they are calculated directly from the values of the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a>,
    <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a>, and <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> properties.

  <p>There are three sets of directional terms in CSS:

  <dl data-export="">
  <dt><dfn data-dfn-type=dfn data-export="" id=physical>physical<a class=self-link href=#physical></a></dfn>
    <dd>Interpreted relative to the page, independent of writing mode.
    The <dfn data-dfn-type=dfn data-export="" id=physical-direction title="physical direction">physical directions<a class=self-link href=#physical-direction></a></dfn> are <dfn data-dfn-type=dfn data-export="" id=left>left<a class=self-link href=#left></a></dfn>, <dfn data-dfn-type=dfn data-export="" id=right>right<a class=self-link href=#right></a></dfn>, <dfn data-dfn-type=dfn data-export="" id=top>top<a class=self-link href=#top></a></dfn>, and
    <dfn data-dfn-type=dfn data-export="" id=bottom>bottom<a class=self-link href=#bottom></a></dfn>.
  <dt><dfn data-dfn-type=dfn data-export="" id=flow-relative><a href=#logical-directions>flow-relative</a><a class=self-link href=#flow-relative></a></dfn>
    <dd>Interpreted relative to the flow of content.
    The flow-relative directions are <a data-link-type=dfn href=#start title=start>start</a> and <a data-link-type=dfn href=#end title=end>end</a>,
    or <a data-link-type=dfn href=#block-start title=block-start>block-start</a>, <a data-link-type=dfn href=#block-end title=block-end>block-end</a>, <a data-link-type=dfn href=#inline-start title=inline-start>inline-start</a>, and <a data-link-type=dfn href=#inline-end title=inline-end>inline-end</a>
    if the dimension is also ambiguous.
  <dt><dfn data-dfn-type=dfn data-export="" id=line-relative><a href=#line-directions>line-relative</a><a class=self-link href=#line-relative></a></dfn>
    <dd>Interpreted relative to the orientation of the line box.
    The line-relative directions are <a data-link-type=dfn href=#line-left title=line-left>line-left</a>, <a data-link-type=dfn href=#line-right title=line-right>line-right</a>,
    <a data-link-type=dfn href=#line-over title=line-over>line-over</a>, and <a data-link-type=dfn href=#line-under title=line-under>line-under</a>.
  </dl>

  <p data-export="">The <dfn data-dfn-type=dfn data-export="" id=physical-dimensions>physical dimensions<a class=self-link href=#physical-dimensions></a></dfn> are <dfn data-dfn-type=dfn data-export="" id=width>width<a class=self-link href=#width></a></dfn> and <dfn data-dfn-type=dfn data-export="" id=height>height<a class=self-link href=#height></a></dfn>,
    which correspond to measurements along the <dfn data-dfn-type=dfn data-export="" id=x-axis title="x-axis|horizontal axis">x-axis<a class=self-link href=#x-axis></a></dfn>
    (<dfn data-dfn-type=dfn data-export="" id=horizontal-dimension>horizontal dimension<a class=self-link href=#horizontal-dimension></a></dfn>) and <dfn data-dfn-type=dfn data-export="" id=y-axis title="y-axis|vertical axis">y-axis<a class=self-link href=#y-axis></a></dfn> (<dfn data-dfn-type=dfn data-export="" id=vertical-dimension>vertical dimension<a class=self-link href=#vertical-dimension></a></dfn>),
    respectively. <a href=#abstract-dimensions>Abstract dimensions</a>
    are identical in both flow-relative and line-relative terms, so there
    is only one set of these terms.

  <p class=note>
    Note: <a data-biblio-type=informative data-link-type=biblio href=#css3-flexbox title=css3-flexbox>[CSS3-FLEXBOX]</a> also defines <a href=http://www.w3.org/TR/css3-flexbox/#box-model>flex-relative terms</a>,
    which are used in describing flex layout.

<h3 class="heading settled heading" data-level=6.1 id=abstract-dimensions><span class=secno>6.1 </span><span class=content>
Abstract Dimensions</span><a class=self-link href=#abstract-dimensions></a></h3>

  <p>The <dfn data-dfn-type=dfn data-export="" id=abstract-dimensions0>abstract dimensions<a class=self-link href=#abstract-dimensions0></a></dfn> are defined below:

  <dl data-export="">
    <dt><dfn data-dfn-type=dfn data-export="" id=block-dimension>block dimension<a class=self-link href=#block-dimension></a></dfn></dt>
      <dd>The dimension perpendicular to the flow of text within a line, i.e.
        the <a data-link-type=dfn href=#vertical-dimension title="vertical dimension">vertical dimension</a> in horizontal writing modes, and
        the <a data-link-type=dfn href=#horizontal-dimension title="horizontal dimension">horizontal dimension</a> in vertical writing modes.</dd>
    <dt><dfn data-dfn-type=dfn data-export="" id=inline-dimension>inline dimension<a class=self-link href=#inline-dimension></a></dfn></dt>
      <dd>The dimension parallel to the flow of text within a line, i.e.
        the <a data-link-type=dfn href=#horizontal-dimension title="horizontal dimension">horizontal dimension</a> in horizontal writing modes, and
        the <a data-link-type=dfn href=#vertical-dimension title="vertical dimension">vertical dimension</a> in vertical writing modes.</dd>
    <dt><dfn data-dfn-type=dfn data-export="" id=block-axis- title="block axis | block-axis">block axis<a class=self-link href=#block-axis-></a></dfn></dt>
      <dd>The axis in the block dimension,
      i.e. the <a data-link-type=dfn href=#y-axis title="vertical axis">vertical axis</a> in horizontal writing modes
      and the <a data-link-type=dfn href=#x-axis title="horizontal axis">horizontal axis</a> in vertical writing modes.</dd>
    <dt><dfn data-dfn-type=dfn data-export="" id=inline-axis- title="inline axis | inline-axis">inline axis<a class=self-link href=#inline-axis-></a></dfn></dt>
      <dd>The axis in the inline dimension, i.e. the <a data-link-type=dfn href=#x-axis title="horizontal axis">horizontal
        axis</a> in horizontal writing modes and the <a data-link-type=dfn href=#y-axis title="vertical axis">vertical axis</a>
        in vertical writing modes.</dd>
    <dt><dfn data-dfn-type=dfn data-export="" id=extent>extent<a class=self-link href=#extent></a></dfn> or <dfn data-dfn-type=dfn data-export="" id=logical-height>logical height<a class=self-link href=#logical-height></a></dfn><dt>
      <dd>A measurement in the block dimension: refers to the
        physical height (vertical dimension) in horizontal writing
        modes, and to the physical width (horizontal dimension) in
        vertical writing modes.</dd>
    <dt><dfn data-dfn-type=dfn data-export="" id=measure>measure<a class=self-link href=#measure></a></dfn> or <dfn data-dfn-type=dfn data-export="" id=logical-width>logical width<a class=self-link href=#logical-width></a></dfn><dt>
      <dd>A measurement in the inline dimension: refers to the
        physical width (horizontal dimension) in horizontal writing
        modes, and to the physical height (vertical dimension) in
        vertical writing modes. (The term <a data-link-type=dfn href=#measure title=measure>measure</a> derives
        from its <a href=http://en.wikipedia.org/wiki/Measure_%28typography%29>use
        in typography</a>.)</dd>
  </dl>

<h3 class="heading settled heading" data-level=6.2 id=logical-directions><span class=secno>6.2 </span><span class=content>
Flow-relative Directions</span><a class=self-link href=#logical-directions></a></h3>

  <p>The <dfn data-dfn-type=dfn data-export="" id=flow-relative-direction title="flow-relative direction">flow-relative directions<a class=self-link href=#flow-relative-direction></a></dfn>,
    <a data-link-type=dfn href=#block-start title=block-start>block-start</a>, <a data-link-type=dfn href=#block-end title=block-end>block-end</a>, <a data-link-type=dfn href=#inline-start title=inline-start>inline-start</a>, and <a data-link-type=dfn href=#inline-end title=inline-end>inline-end</a>,
    are defined relative to the flow of content on the page.
    In an <abbr title=left-to-right>LTR</abbr>
    <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a> writing mode, they correspond to the
    top, bottom, left, and right directions, respectively.
    They are defined as follows:

  <dl data-export="">
  <dt><dfn data-dfn-type=dfn data-export="" id=block-start>block-start<a class=self-link href=#block-start></a></dfn>
    <dd>The side that comes earlier in the block progression,
    as determined by the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> property:
    the physical top in <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a> mode,
    the right in <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a>, and the left in <a class=css data-link-type=maybe href=#valuedef-vertical-lr title=vertical-lr>vertical-lr</a>.
  <dt><dfn data-dfn-type=dfn data-export="" id=block-end>block-end<a class=self-link href=#block-end></a></dfn>
    <dd>The side opposite <a data-link-type=dfn href=#block-start title=block-start>block-start</a>.
  <dt><dfn data-dfn-type=dfn data-export="" id=inline-start>inline-start<a class=self-link href=#inline-start></a></dfn>
    <dd>The side from which text of the inline base direction would start.
    For boxes with a used <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> value of <a class=css data-link-type=maybe href=#valuedef-ltr title=ltr>ltr</a>, this means the <a data-link-type=dfn href=#line-left title=line-left>line-left</a> side.
    For boxes with a used <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a>  value of <a class=css data-link-type=maybe href=#valuedef-rtl title=rtl>rtl</a>, this means the <a data-link-type=dfn href=#line-right title=line-right>line-right</a> side.
  <dt><dfn data-dfn-type=dfn data-export="" id=inline-end>inline-end<a class=self-link href=#inline-end></a></dfn>
    <dd>The side opposite <a data-link-type=dfn href=#start title=start>start</a>.
  </dl>

  <p>Where contextually unambiguous or encompassing both meanings,
    the terms <dfn data-dfn-type=dfn data-export="" id=start>start<a class=self-link href=#start></a></dfn> and <dfn data-dfn-type=dfn data-export="" id=end>end<a class=self-link href=#end></a></dfn>
    are used in place of <a data-link-type=dfn href=#block-start title=block-start>block-start</a>/<a data-link-type=dfn href=#inline-start title=inline-start>inline-start</a>
    and <a data-link-type=dfn href=#block-end title=block-end>block-end</a>/<a data-link-type=dfn href=#inline-end title=inline-end>inline-end</a>, respectively.

  <p class=note>Note that while determining the <a data-link-type=dfn href=#block-start title=block-start>block-start</a> and
    <a data-link-type=dfn href=#block-end title=block-end>block-end</a> sides of a box depends only on the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> property,
    determining the <a data-link-type=dfn href=#inline-start title=inline-start>inline-start</a> and <a data-link-type=dfn href=#inline-end title=inline-end>inline-end</a> sides of a box depends
    not only on the <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> property but also the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> <em>and</em>
    <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> properties.</p>

  <div class=example>
    <p>An English (LTR-TB) block:</p>
    <pre class=ascii-art>              &lt;----- width / measure  -----&gt;

                         top side/
                      block-start side
              +------------------------------+                  A
  left side/  |   ---inline direction ---&gt;   |  right side/     |
inline-start side |  |                           |  inline-end side |
              |  | block      * horizontal * |                height/
              |  | direction  *writing mode* |                extent
              |  V                           |                  |
              +------------------------------+                  V
                         bottom side/
                        block-end side
</pre>  </div>
  <div class=example>
    <p>A vertical Japanese block (TTB-RL):</p>
    <pre class=ascii-art>              &lt;----- width / extent ------&gt;

                         top side/
                     inline-start side
              +------------------------------+                  A
  left side/  |    &lt;---block direction---    |  right side/     |
  block-end side  |                           |  | block-start side |
              |  *  vertical  *     inline|  |                height/
              |  *writing mode*  direction|  |                measure
              |                           V  |                  |
              +------------------------------+                  V
                        bottom side/
                       inline-end side
</pre>  </div>

<h3 class="heading settled heading" data-level=6.3 id=line-directions><span class=secno>6.3 </span><span class=content>
Line-relative Directions</span><a class=self-link href=#line-directions></a></h3>

  <p>The <dfn data-dfn-type=dfn data-export="" id=line-orientation>line orientation<a class=self-link href=#line-orientation></a></dfn> determines which side of a line
    box is the logical “top” (ascender side). It is given by a combination
    of <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> and <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a>. Usually the line-relative “top”
    corresponds to the <a data-link-type=dfn href=#block-start title=block-start>block-start</a> side, but this is not always the case:
    in Mongolian typesetting (and thus by default in <a class=css data-link-type=maybe href=#valuedef-vertical-lr title=vertical-lr>vertical-lr</a> writing
    modes), the line-relative “top” corresponds to the <a data-link-type=dfn href=#block-end title=block-end>block-end</a> side.
    Hence the need for distinct terminology.

  <div class=figure>
    <img alt="Mongolian mixed with English" src=mongolian-lr.jpg>
    <p class=caption>A primarily Mongolian document, such as the one above, is written in
    vertical lines stacking left to right, but lays its Latin text with
    the tops of the glyphs towards the right. This makes the text run in
    the same inline direction as Mongolian (top-to-bottom) and face the
    same direction it does in other East Asian layouts (which have vertical
    lines stacking right to left), but the glyphs' tops are facing the
    bottom of the line stack rather than the top, which in an English
    paragraph would be upside-down. (See this
    <a href=diagrams/text-flow-vectors-lr-reverse.svg>Diagram of Mongolian
    Text Layout</a>.)
  </div>

  <p>In addition to a line-relative “top” and “bottom” to map things like
    'vertical-align: top', CSS also needs to refer to a line-relative
    “left” and “right” in order to map things like <a class=css data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#text-align title=text-align>text-align: left</a>.
    Thus there are four <dfn data-dfn-type=dfn data-export="" id=line-relative-direction title="line-relative direction">line-relative directions<a class=self-link href=#line-relative-direction></a></dfn>, which are
    defined relative to the <a data-link-type=dfn href=#line-orientation title="line orientation">line orientation</a> as follows:

  <dl data-export="">
  <dt><dfn data-dfn-type=dfn data-export="" id=over>over<a class=self-link href=#over></a></dfn> or <dfn data-dfn-type=dfn data-export="" id=line-over>line-over<a class=self-link href=#line-over></a></dfn>
    <dd>Nominally the side that corresponds to the ascender side or “top”
      side of a line box. (The side overlines are typically drawn on.)
  <dt><dfn data-dfn-type=dfn data-export="" id=under>under<a class=self-link href=#under></a></dfn> or <dfn data-dfn-type=dfn data-export="" id=line-under>line-under<a class=self-link href=#line-under></a></dfn>
    <dd>Opposite of <a data-link-type=dfn href=#over title=over>over</a>: the line-relative “bottom” or descender side.
    (The side underlines are typically drawn on.)
  <dt><dfn data-dfn-type=dfn data-export="" id=line-left>line-left<a class=self-link href=#line-left></a></dfn>
    <dd>Nominally the side from which <abbr title=left-to-right>LTR</abbr>
    text would start.
  <dt><dfn data-dfn-type=dfn data-export="" id=line-right>line-right<a class=self-link href=#line-right></a></dfn>
    <dd>Nominally the side from which <abbr title=right-to-left>RTL</abbr>
    text would start. (Opposite of <a data-link-type=dfn href=#line-left title=line-left>line-left</a>.)
  </dl>

  <p>See the <a href=#logical-to-physical>table below</a> for the exact
    mappings between physical and line-relative directions.

  <div class=figure>
    <a href=diagrams/line-orient-up.svg>
      <img alt="Line orientation compass" class=landscape src=diagrams/line-orient-up.png></a>
    <p class=caption>Line orientation compass</p>
  </div>

  <div class=figurepair>
    <div class=figure>
    <a href=diagrams/line-orient-right.svg>
      <img alt="Typical orientation in vertical" class=portrait src=diagrams/line-orient-right.png></a>
      <p class=caption>Typical orientation in vertical</p>
    </div>

    <div class=figure>
    <a href=diagrams/line-orient-left.svg>
      <img alt="Line orientation with ‘text-orientation: sideways-left’" class=portrait src=diagrams/line-orient-left.png></a>
      <p class=caption>Line orientation with <a class=css data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation: sideways-left</a></p>
    </div>
  </div>

<h3 class="heading settled heading" data-level=6.4 id=logical-to-physical><span class=secno>6.4 </span><span class=content>
Abstract-to-Physical Mappings</span><a class=self-link href=#logical-to-physical></a></h3>

  <p>The following table summarizes the abstract-to-physical mappings:</p>

  <table class="complex data">
    <caption>Abstract-Physical Mapping</caption>
    <colgroup class=header></colgroup>
    <colgroup span=10></colgroup>
    <thead>
      <tr>
        <th scope=row><a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a></th>
        <th colspan=2><a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a></th>
        <th colspan=4><a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a></th>
        <th colspan=4><a class=css data-link-type=maybe href=#valuedef-vertical-lr title=vertical-lr>vertical-lr</a></th>
      </tr>
      <tr>
        <th scope=row><a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a></th>
        <th colspan=2>—</th>
        <th colspan=2><a class=css data-link-type=maybe href=#valuedef-sideways-left title=sideways-left>sideways-left</a></th>
        <th colspan=2><abbr title="mixed, upright, sideways-right">*right</abbr></th>
        <th colspan=2><a class=css data-link-type=maybe href=#valuedef-sideways-left title=sideways-left>sideways-left</a></th>
        <th colspan=2><abbr title="mixed, upright, sideways-right">*right</abbr></th>
      </tr>
      <tr>
        <th scope=row><a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-ltr title=ltr>ltr</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-rtl title=rtl>rtl</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-ltr title=ltr>ltr</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-rtl title=rtl>rtl</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-ltr title=ltr>ltr</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-rtl title=rtl>rtl</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-ltr title=ltr>ltr</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-rtl title=rtl>rtl</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-ltr title=ltr>ltr</a></th>
        <th><a class=css data-link-type=maybe href=#valuedef-rtl title=rtl>rtl</a></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope=row>extent</th>
        <td colspan=2>height</td>
        <td colspan=8>width</td>
      </tr>
      <tr>
        <th scope=row>measure</th>
        <td colspan=2>width</td>
        <td colspan=8>height</td>
      </tr>
      <tr>
        <th scope=row>block-start</th>
        <td colspan=2>top</td>
        <td colspan=4>right</td>
        <td colspan=4>left</td>
      </tr>
      <tr>
        <th scope=row>block-end</th>
        <td colspan=2>bottom</td>
        <td colspan=4>left</td>
        <td colspan=4>right</td>
      </tr>
      <tr>
        <th scope=row>inline-start</th>
        <td>left</td>
        <td>right</td>
        <td>bottom</td>
        <td>top</td>
        <td>top</td>
        <td>bottom</td>
        <td>bottom</td>
        <td>top</td>
        <td>top</td>
        <td>bottom</td>
      </tr>
      <tr>
        <th scope=row>inline-end</th>
        <td>right</td>
        <td>left</td>
        <td>top</td>
        <td>bottom</td>
        <td>bottom</td>
        <td>top</td>
        <td>top</td>
        <td>bottom</td>
        <td>bottom</td>
        <td>top</td>
      </tr>
    </tbody>
    <tbody>
      <tr>
        <th scope=row>over</th>
        <td colspan=2>top</td>
        <td colspan=2>left</td>
        <td colspan=2>right</td>
        <td colspan=2>left</td>
        <td colspan=2>right</td>
      </tr>
      <tr>
        <th scope=row>under</th>
        <td colspan=2>bottom</td>
        <td colspan=2>right</td>
        <td colspan=2>left</td>
        <td colspan=2>right</td>
        <td colspan=2>left</td>
      </tr>
      <tr>
        <th scope=row>line-left</th>
        <td colspan=2>left</td>
        <td colspan=2>bottom</td>
        <td colspan=2>top</td>
        <td colspan=2>bottom</td>
        <td colspan=2>top</td>
      </tr>
      <tr>
        <th scope=row>line-right</th>
        <td colspan=2>right</td>
        <td colspan=2>top</td>
        <td colspan=2>bottom</td>
        <td colspan=2>top</td>
        <td colspan=2>bottom</td>
      </tr>
    </tbody>
  </table>

<h2 class="heading settled heading" data-level=7 id=abstract-layout><span class=secno>7 </span><span class=content>
Abstract Box Layout</span><a class=self-link href=#abstract-layout></a></h2>

<h3 class="heading settled heading" data-level=7.1 id=vertical-layout><span class=secno>7.1 </span><span class=content>
Principles of Layout in Vertical Writing Modes</span><a class=self-link href=#vertical-layout></a></h3>

  <p>CSS box layout in vertical writing modes is analogous to layout in
    the horizontal writing modes, following the principles outlined below:

  <p>Layout calculation rules (such as those in CSS2.1, Section 10.3)
     that apply to the horizontal dimension in horizontal writing modes
     instead apply to the vertical dimension in vertical writing modes.
     Likewise, layout calculation rules (such as those in CSS2.1, Section 10.6)
     that apply to the vertical dimension in horizontal writing modes
     instead apply to the horizontal dimension in vertical writing modes.
     Thus:
  <ul>
    <li><p>Layout rules that refer to the width use the height instead,
        and vice versa.
    <li><p>Layout rules that refer to the <a class=property data-link-type=propdesc title=*-left>*-left</a> and <a class=property data-link-type=propdesc title=*-right>*-right</a> box
        properties (border, margin, padding) use <a class=property data-link-type=propdesc title=*-top>*-top</a> and <a class=property data-link-type=propdesc title=*-bottom>*-bottom</a>
        instead, and vice versa. Which side of the
        box the property applies to doesn’t change: only which values
        are inputs to which layout calculations changes. The <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/box.html#propdef-margin-left title=margin-left>margin-left</a>
        property still affects the lefthand margin, for example; however
        in a <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a> writing mode it takes part in margin collapsing
        in place of <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/box.html#propdef-margin-bottom title=margin-bottom>margin-bottom</a>.</p>
    <li><p>Layout rules that depend on the <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> property to choose between
        left and right (e.g. overflow, overconstraint resolution, the initial
        value for <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#text-align title=text-align>text-align</a>, table column ordering)
        are abstracted to the <a data-link-type=dfn href=#start title=start>start</a> and <a data-link-type=dfn href=#end title=end>end</a> sides
        and applied appropriately.</li>
  </ul>

  <div class=example>
    <p>For example, in vertical writing modes,
       table rows are vertical and table columns are horizontal.
      In a <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a> <a class=css data-link-type=maybe href=#valuedef-mixed title=mixed>mixed</a> <a class=css data-link-type=maybe href=#valuedef-rtl title=rtl>rtl</a> table,
      the first column would be on the bottom (the <a data-link-type=dfn href=#inline-start title=inline-start>inline-start</a> side),
      and the first row on the right (the <a data-link-type=dfn href=#block-start title=block-start>block-start</a> side).
      The table’s <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/box.html#propdef-margin-right title=margin-right>margin-right</a> and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/box.html#propdef-margin-left title=margin-left>margin-left</a> would collapse
      with margins before (on the right) and after (on the left) the table, respectively,
      and if the table had <span class=css data-link-type=maybe title=auto>auto</span> values for <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/box.html#propdef-margin-top title=margin-top>margin-top</a> and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/box.html#propdef-margin-bottom title=margin-bottom>margin-bottom</a>
      it would be centered vertically within its block flow.
    <div class=figure>
      <p><a href=diagrams/vertical-table.svg>
        <img alt="Diagram of a vertical-rl mixed rtl table in a
        vertical block formatting context, showing the ordering of rows,
        cells, and columns as described above." class=example src=diagrams/vertical-table.png></a>
      <p class=caption>Table in <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a> RTL writing mode</p>
    </div>

  </div>

  <p>For features such as text alignment, floating, and list marker positioning,
    that primarily reference the left or right sides of the line box or
    its longitudinal parallels and therefore have no top or bottom equivalent,
    the <a href=#line-left>line left</a> and <a href=#line-right>line
    right</a> sides are used as the reference for the left and right sides
    respectively.

  <p>Likewise for features such as underlining, overlining, and baseline alignment
    (the unfortunately-named <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align title=vertical-align>vertical-align</a>), that primarily reference the
    top or bottom sides of the linebox or its transversal parallels and
    therefore have no left or right equivalent, the <a href=#over>line-over</a>
    and <a href=#under>line-under</a> sides are used as the reference for the
    top and bottom sides respectively.

  <p>The details of these mappings are provided below.

<h3 class="heading settled heading" data-level=7.2 id=dimension-mapping><span class=secno>7.2 </span><span class=content>
Dimensional Mapping</span><a class=self-link href=#dimension-mapping></a></h3>



  <p>Certain properties behave logically as follows:
  <ul>
    <li>The first and second values of the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/tables.html#propdef-border-spacing title=border-spacing>border-spacing</a> property
      represent spacing between columns and rows respectively, not
      necessarily the horizontal and vertical spacing respectively.
      <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
    <li>The <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-line-height title=line-height>line-height</a> property always refers to the logical
      height. <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
  </ul>

  <p>The height properties (<a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-height title=height>height</a>, <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-min-height title=min-height>min-height</a>, and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-max-height title=max-height>max-height</a>)
    refer to the physical height, and the width properties (<a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-width title=width>width</a>,
    <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-min-width title=min-width>min-width</a>, and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-max-width title=max-width>max-width</a>) refer to the physical width. However,
    the rules used to calculate box dimensions and positions are logical.

  <p>For example, the calculation rules in
    <a href=http://www.w3.org/TR/CSS21/visudet.html#Computing_widths_and_margins>CSS2.1 Section 10.3</a>
    are used for the inline dimension measurements:
    they apply to the measure (which could be either the physical width or physical height)
    and to the <a data-link-type=dfn href=#inline-start title=inline-start>inline-start</a> and <a data-link-type=dfn href=#inline-end title=inline-end>inline-end</a> margins, padding, and border.
    Likewise the calculation rules in
        <a href=http://www.w3.org/TR/CSS21/visudet.html#Computing_heights_and_margins>CSS2.1 Section 10.6</a>
    are used in the block dimension: they apply to the <a data-link-type=dfn href=#extent title=extent>extent</a> and to
    the <a data-link-type=dfn href=#block-start title=block-start>block-start</a> and <a data-link-type=dfn href=#block-end title=block-end>block-end</a> margins, padding, and border. <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>

  <p>As a corollary, percentages on the margin and padding properties,
    which are always calculated with respect to the containing block
    width in CSS2.1, are calculated with respect to the <em>measure</em>
    of the containing block in CSS3.

<h3 class="heading settled heading" data-level=7.3 id=orthogonal-flows><span class=secno>7.3 </span><span class=content>
Orthogonal Flows</span><a class=self-link href=#orthogonal-flows></a></h3>


  <div class=note>
  	We appreciate feedback in general,
  	but we are particularly interested in feedback
    on this particularly complicated section.
  </div>

  <p>When a box has a different <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> from its
    containing block two cases are possible:

<p>  <ul>
    <li>The two writing modes are parallel to each other. (For example,
      <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a> and <a class=css data-link-type=maybe href=#valuedef-vertical-lr title=vertical-lr>vertical-lr</a>).</li>
    <li>The two writing modes are perpendicular to each other. (For
      example, <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a> and <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a>).</li>
  </ul>

  <p>
    When a box has a writing mode that is perpendicular to its containing block
    it is said to be in, or establish, an <dfn data-dfn-type=dfn data-export="" id=establish-an-orthogonal-flow- title="establish an orthogonal flow | orthogonal flow | orthogonal">orthogonal flow<a class=self-link href=#establish-an-orthogonal-flow-></a></dfn>.

  <p>
    To handle this case, CSS layout calculations are divided into
    two phases: sizing a box, and positioning the box within its flow.

<p>  <ul>
    <li>
      In the sizing phase—calculating the width and height of the
      box—the dimensions of the box and the containing block
      are mapped to the measure and extent and calculations are performed
      accordingly using the writing mode of the <em>box</em>.
    <li>
      In the positioning phase—calculating the positioning offsets,
      margins, borders, and padding—the dimensions of the box and
      its containing block are mapped to the measure and extent and
      calculations are performed according to the writing mode of the
      <em>containing block</em>.
  </ul>

  <p>Since <span class=css data-link-type=maybe title=auto>auto</span> margins are resolved consistent with the containing
    block’s writing mode, a box establishing an <a data-link-type=dfn href=#establish-an-orthogonal-flow- title="orthogonal flow">orthogonal flow</a> can,
    once sized, be aligned or centered within its containing block just
    like other block-level boxes by using auto margins.

  <div class=example>
    <div class=sidefigure>
      <p><img alt="Diagram of a vertical flow box appearing in between two horizontal flow boxes." src=orthogonal.svg width=180>
      <p class=caption>An example of orthogonal flow</p>
    </div>

    <p>
      For example, if a vertical block is placed inside a horizontal
      block, then when calculating the physical height (which is the
      measure) of the child block the physical height of the parent
      block is used as the child’s containing block measure, even
      though the physical height is the extent, not the measure, of
      the parent block.

    <p>
      On the other hand,
      because the containing block is in a horizontal writing mode,
      the vertical margins on the child participate in margin-collapsing,
      even though they are in the inline-axis of the child,
      and horizontal auto margins will expand to fill the containing block,
      even though they are in the block-axis of the child.
  </div>

<h4 class="heading settled heading" data-level=7.3.1 id=orthogonal-auto><span class=secno>7.3.1 </span><span class=content>
Auto-sizing in Orthogonal Flows</span><a class=self-link href=#orthogonal-auto></a></h4>

  <p>It is common in CSS for a containing block to have a definite
    measure, but not a definite extent. This typically happens in
    CSS2.1 when a containing block has an <span class=css data-link-type=maybe title=auto>auto</span> height, for
    example: its width is given by the calculations in
    <a href=http://www.w3.org/TR/CSS21/visudet.html#blockwidth>10.3.3</a>,
    but its extent depends on its contents. In such cases the
    <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available measure">available measure</a> is defined as the measure of the
    containing block; but the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available extent">available extent</a>, which
    would otherwise be the extent of the containing block, is
    infinite.

  <p>Putting a box in an <a data-link-type=dfn href=#establish-an-orthogonal-flow- title="orthogonal flow">orthogonal flow</a> allows the opposite to happen:
    for the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available extent">available extent</a> to be defined, but the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available measure">available
    measure</a> to be indefinite. In such cases a percentage of the
    containing block measure cannot be defined, and inline-axis
    computations cannot be resolved. In these cases, the initial
    containing block’s size is used as a <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#fallback title=fallback>fallback</a> variable
    in place of the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available measure">available measure</a> for calculations that
    require a definite <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available measure">available measure</a>.

<h4 class="heading settled heading" data-level=7.3.2 id=auto-multicol><span class=secno>7.3.2 </span><span class=content>
Auto-sizing Block Containers in Orthogonal Flows</span><a class=self-link href=#auto-multicol></a></h4>

  <p>
    If a box establishing an orthogonal flow is a block container or multi-column element,
    for the case where the box’s extent or available extent is
    <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#definite title=definite>definite</a> but the box’s measure is <span class=css data-link-type=maybe title=auto>auto</span>:

  <ol>
    <li>
      If <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-multicol/#column-count title=column-count>column-count</a> and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-multicol/#column-width title=column-width>column-width</a> are both <span class=css data-link-type=maybe title=auto>auto</span>,
      calculate the used <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-multicol/#column-width title=column-width>column-width</a> as:
      <code>min(<var>max-content</var>, max(<var>min-content</var>, min(<var>fill-available</var>, <var>fill-fallback</var>)))</code>,
      where:
      <dl>
        <dt><var>min-content</var>
        <dd>the <a href=http://www.w3.org/TR/css3-sizing/#min-content-measure>min-content measure</a> of the box

        <dt><var>max-content</var>
        <dd>the <a href=http://www.w3.org/TR/css3-sizing/#max-content-measure>max-content measure</a> of the box

        <dt><var>fill-available</var>
        <dd>the <a href=http://www.w3.org/TR/css3-sizing/#terms>fill-available fit</a> into the box’s containing block’s size in the box’s inline axis

        <dt><var>fill-fallback</var>
        <dd>the <a href=http://www.w3.org/TR/css3-sizing/#terms>fill-available fit</a> into the initial containing block’s size in the box’s inline axis
      </dl>

      <p>
        See <a data-biblio-type=normative data-link-type=biblio href=#css3-sizing title=css3-sizing>[CSS3-SIZING]</a> for further details.

    <li>
      If the columns' extent is <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#indefinite title=indefinite>indefinite</a>,
      the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#fill-available-extent title="fill-available extent">fill-available extent</a> of the box is used.
    <li>
      The used <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-multicol/#column-count title=column-count>column-count</a> then follows from filling the resulting columns with the box’s content.
  </ol>

  <p>
    The used measure of the resulting multi-column element is then calculated:
    if the content neither line-wraps nor fragments within the multi-column element,
    then the used measure is the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#max-content-measure title="max-content measure">max-content measure</a> of the box’s contents;
    else it is calculated from the used <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-multicol/#column-width title=column-width>column-width</a>, <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-multicol/#column-count title=column-count>column-count</a>, and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-multicol/#column-gap0 title=column-gap>column-gap</a>.

  <p>
    The used extent of the box is either the used column extent
    (if multiple columns were used)
    or the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#max-content-extent title="max-content extent">max-content extent</a> of the content.

  <div class=note>
    <div class=sidefigure>
      <img alt="Diagram of automatically triggered multi-column preventing T-shaped documents" src=auto-multicol.svg width=200>
    </div>
    This automatically triggers multi-column flow
    so that overflowing content, instead of continuing off the side of the containing block,
    is wrapped into columns in the flow direction of the containing block,
    thus avoiding T-shaped documents.
    <br style=clear:both;>
  </div>

  

  <p>
    If the UA does not support CSS Multi-column Layout <a data-biblio-type=normative data-link-type=biblio href=#css3col title=css3col>[CSS3COL]</a>,
    the UA may instead calculate the box’s measure assuming an infinite extent,
    thus laying out its contents into a single column.
    Note that this can, however, result in content that is clipped
    or otherwise inaccessible.

<h4 class="heading settled heading" data-level=7.3.3 id=orthogonal-layout><span class=secno>7.3.3 </span><span class=content>
Auto-sizing Orthogonal Flows</span><a class=self-link href=#orthogonal-layout></a></h4>

  <p>In order to limit the length of lines,
  block containers have special auto-sizing behavior
  when their <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available measure">available measure</a> is infinite
  (which typically occurs when they establish an orthogonal flow).

  <p>Other layout models simply shrink-wrap (as floats do) into the infinite <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available measure">available measure</a>;
  but pass through the infinite limit to block containers they contain:

<p>  <ul>
    <li>A table or flex container establishing an orthogonal flow is laid out into the given <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available space">available space</a>.
    If the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available measure">available measure</a> is infinite, this effectively lays the box out at its max-content size.
    However, any table cells or <a data-link-type=dfn href=http://dev.w3.org/csswg/css-flexbox-1/#flex-item title="flex items">flex items</a> that are <i data-link-type=dfn title="block containers">block containers</i> are laid out assuming infinite <a data-link-type=dfn href=http://dev.w3.org/csswg/css-sizing-3/#available title="available space">available space</a>
    and so behave accordingly, possibly limiting their <a data-link-type=dfn href=#measure title=measure>measure</a> to the size of the initial containing block
    or triggering multi-column layout so that they grow in the direction of the infinite measure.
  </ul>


<h4 class="heading settled heading" data-level=7.3.4 id=orthogonal-pagination><span class=secno>7.3.4 </span><span class=content>
Fragmenting Orthogonal Flows</span><a class=self-link href=#orthogonal-pagination></a></h4>

  <p><em>This section is informative.</em></p>

  <p>With regards to fragmentation, the rules in CSS2.1 still hold in
    vertical writing modes and orthogonal flows: break opportunities
    do not occur inside line boxes, only between them.
    UAs that support <a data-biblio-type=normative data-link-type=biblio href=#css3col title=css3col>[CSS3COL]</a> may break in the (potentially zero-width)
    gap between columns, however.

  <p>Note that if content spills outside the pagination stream
    established by the root element, the UA is not required to print
    such content. Authors wishing to mix writing modes with long streams
    of text are thus encouraged to use CSS columns to keep all content
    flowing in the document’s pagination direction.

  <div class=note>
    <p>In other words, if your document would require two scrollbars on
    the screen it probably won’t all print. Fix your layout, e.g. by
    using <a href=http://www.w3.org/TR/css3-multicol/>columns</a> so
    that it all scrolls (and therefore paginates) in one direction if
    you want to make sure it’ll all print. T-shaped documents tend not
    to print well.
  </div>

<h3 class="heading settled heading" data-level=7.4 id=logical-direction-layout><span class=secno>7.4 </span><span class=content>
Flow-Relative Mappings</span><a class=self-link href=#logical-direction-layout></a></h3>

  <p>Flow-relative directions are calculated with respect to
    the writing mode of the <em>containing block</em> of the
    box and used to abstract layout rules related to the
    box properties (margins, borders, padding) and any properties
    related to positioning the box within its containing block
    (<a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-float title=float>float</a>, <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-clear title=clear>clear</a>, <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-positioning/#top title=top>top</a>, <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-positioning/#bottom title=bottom>bottom</a>, <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-positioning/#left title=left>left</a>, <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-positioning/#right title=right>right</a>)
    For inline-level boxes, the writing mode of the <em>parent
    box</em> is used instead.

  <p>For example, the margin that is dropped when a box’s inline
    dimension is
    <a href=http://www.w3.org/TR/CSS21/visudet.html#blockwidth>over-constrained</a>
    is the end margin as determined by the writing mode of the
    containing block.

  <p>The <a href=http://www.w3.org/TR/CSS21/box.html#collapsing-margins>margin
    collapsing rules</a> apply exactly with the <em><a data-link-type=dfn href=#block-start title=block-start>block-start</a>
    margin</em> substituted for the top margin and the
    <em><a data-link-type=dfn href=#block-end title=block-end>block-end</a> margin</em> substituted for the bottom margin.
    Similarly the <a data-link-type=dfn href=#block-start title=block-start>block-start</a> padding and border are substituted
    for the top padding and border, and the <a data-link-type=dfn href=#block-end title=block-end>block-end</a> padding and
    border substituted for the bottom padding and border.
    Note this means only <a data-link-type=dfn href=#block-start title=block-start>block-start</a> and <a data-link-type=dfn href=#block-end title=block-end>block-end</a> margins ever collapse.

  <p>Flow-relative directions are calculated with respect to
    the writing mode of the box and used to abstract layout
    related to the box’s contents:

<p>  <ul>
    <li>The initial value of the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#text-align title=text-align>text-align</a> property
      aligns to the <a data-link-type=dfn href=#start title=start>start</a> edge of the line box.
    <li>The <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#text-indent title=text-indent>text-indent</a> property indents from the <a data-link-type=dfn href=#start title=start>start</a>
      edge of the line box.
    <li>For tables, the ordering of columns begins on the <a data-link-type=dfn href=#inline-start title=inline-start>inline-start</a>
      side of the table, and the ordering of rows begins on the
      <a data-link-type=dfn href=#block-start title=block-start>block-start</a> side of the table.
  </ul>

<h3 class="heading settled heading" data-level=7.5 id=line-mappings><span class=secno>7.5 </span><span class=content>
Line-Relative Mappings</span><a class=self-link href=#line-mappings></a></h3>

  <p>The <a data-link-type=dfn href=#line-relative-direction title="line-relative directions">line-relative directions</a> are
    <a href=#over>over</a>,
    <a href=#under>under</a>,
    <a href=#line-left>line-left</a>, and
    <a href=#line-right>line-right</a>. In an
    <abbr title=left-to-right>LTR</abbr>
    <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a> writing mode, they correspond to the
    top, bottom, left, and right directions, respectively.

  <p>The line-right and line-left directions are calculated
    with respect to the writing mode of the box and used
    to interpret the <a class=css data-link-type=maybe href=#left title=left>left</a> and <a class=css data-link-type=maybe href=#right title=right>right</a> values of the
    following properties:
  <ul>
    <li>the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#text-align title=text-align>text-align</a> property <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
  </ul>

  <p>The line-right and line-left directions are calculated
    with respect to the writing mode of the <em>containing
    block</em> of the box and used to interpret the <a class=css data-link-type=maybe href=#left title=left>left</a>
    and <a class=css data-link-type=maybe href=#right title=right>right</a> values of the following properties:
  <ul>
    <li>the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-float title=float>float</a> property <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
    <li>the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-clear title=clear>clear</a> property <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
  </ul>

  <p>The <a data-link-type=dfn href=#over title=over>over</a> and <a data-link-type=dfn href=#under title=under>under</a> directions are calculated with respect to
    the writing mode of the box and used to define the
    interpretation of the "top" (over) and "bottom" (under)
    sides of the line box as follows:

<p>  <ul>
    <li>For the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align title=vertical-align>vertical-align</a> property,
      the "top" of the line box is its <a data-link-type=dfn href=#over title=over>over</a> edge;
      the "bottom" of the line box is its under edge.
      Positive length and percentage values
      shift the baseline towards the <a data-link-type=dfn href=#line-over title=line-over>line-over</a> edge. <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
    <li>For the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css-text-decor-3/#text-decoration title=text-decoration>text-decoration</a> property,
      the underline is drawn on the <a data-link-type=dfn href=#under title=under>under</a> side of the text;
      the overline is drawn on the <a data-link-type=dfn href=#over title=over>over</a> side of the text. <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
      <span class=note>Note that the CSS Text Decoration Module defines
      this in more detail and provides additional controls for
      controlling the position of underlines and overlines.
      <a data-biblio-type=informative data-link-type=biblio href=#css3-text-decor title=css3-text-decor>[CSS3-TEXT-DECOR]</a></span>
  </ul>

<h3 class="heading settled heading" data-level=7.6 id=physical-only><span class=secno>7.6 </span><span class=content>
Purely Physical Mappings</span><a class=self-link href=#physical-only></a></h3>

  <p>The following values are purely physical in their definitions
    and do not respond to changes in writing mode:

<p>  <ul>
    <li>the <a class=css data-link-type=maybe href=http://www.w3.org/TR/css-masking/#funcdef-rect title=rect()>rect()</a> notation of the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visufx.html#propdef-clip title=clip>clip</a> property <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
    <li>the background properties <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a> <a data-biblio-type=normative data-link-type=biblio href=#css3bg title=css3bg>[CSS3BG]</a>
    <li>the border-image properties <a data-biblio-type=normative data-link-type=biblio href=#css3bg title=css3bg>[CSS3BG]</a>
    <li>the offsets of the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-background/#box-shadow title=box-shadow>box-shadow</a> and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css-text-decor-3/#text-shadow title=text-shadow>text-shadow</a> properties
  </ul>

<h3 class="heading settled heading" data-level=7.7 id=caption-side><span class=secno>7.7 </span><span class=content>
Table Caption Mappings: the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/tables.html#propdef-caption-side title=caption-side>caption-side</a> keywords</span><a class=self-link href=#caption-side></a></h3>

<table class="definition propdef partial"><tr><th>Name:<td><a class=css-code data-link-type=property href=http://www.w3.org/TR/CSS21/tables.html#propdef-caption-side title=caption-side>caption-side</a><tr><th>New values:<td>block-start | block-end</table>
  <p>This module introduces two new values to the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/tables.html#propdef-caption-side title=caption-side>caption-side</a> property:
    <dfn class=css-code data-dfn-for=caption-side data-dfn-type=value data-export="" id=valuedef-block-start>block-start<a class=self-link href=#valuedef-block-start></a></dfn> and <dfn class=css-code data-dfn-for=caption-side data-dfn-type=value data-export="" id=valuedef-block-end>block-end<a class=self-link href=#valuedef-block-end></a></dfn>,
    which position the caption before and after the table box, respectively.
    For tables with <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a> writing mode,
    they are equivalent to the existing <a class=css data-link-type=maybe href=#top title=top>top</a> and <a class=css data-link-type=maybe href=#bottom title=bottom>bottom</a> values, respectively. <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>

  <p class=note>For implementations that support the <span class=css data-link-type=maybe title=top-outside>top-outside</span>
    and <span class=css data-link-type=maybe title=bottom-outside>bottom-outside</span> model, corresponding <span class=css data-link-type=maybe title=start-outside>start-outside</span> and
    <span class=css data-link-type=maybe title=end-outside>end-outside</span> are similarly introduced.

  <p>Implementations that support the <a class=css data-link-type=maybe href=#top title=top>top</a> and <a class=css data-link-type=maybe href=#bottom title=bottom>bottom</a> values
    of the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/tables.html#propdef-caption-side title=caption-side>caption-side</a> property but do not support side captions
    (i.e. <a class=css data-link-type=maybe href=#left title=left>left</a> and <a class=css data-link-type=maybe href=#right title=right>right</a> captions in horizontal writing modes)
    must treat both <a class=css data-link-type=maybe href=#top title=top>top</a> and <a class=css data-link-type=maybe href=#bottom title=bottom>bottom</a> as <a class=css-code data-link-type=value href=#valuedef-block-start title=block-start>block-start</a>,
    when the table is in a vertical writing mode.

  <p>For implementations that do support side captions
    (i.e. the <a class=css data-link-type=maybe href=#left title=left>left</a> and <a class=css data-link-type=maybe href=#right title=right>right</a> values from the obsolete CSS 2.0 specification <a data-biblio-type=informative data-link-type=biblio href=#css2 title=css2>[CSS2]</a>),
    this module also introduces the <a class=css data-link-type=maybe href=#inline-start title=inline-start>inline-start</a> and <a class=css data-link-type=maybe href=#inline-end title=inline-end>inline-end</a> values,
    which behave similarly and which position the
    caption on the <a data-link-type=dfn href=#inline-start title=inline-start>inline-start</a> and <a data-link-type=dfn href=#inline-end title=inline-end>inline-end</a> sides of the table box,
    calculated with respect to the writing mode of the table box.
    For such implementations, the <a class=css data-link-type=maybe href=#top title=top>top</a> and <a class=css data-link-type=maybe href=#bottom title=bottom>bottom</a> values must place the
    caption on the top and bottom sides of the table box, respectively.

  <p class=note>The CSS2.0 side caption model had some
    <a href=http://lists.w3.org/Archives/Public/www-style/2002Dec/0142.html>problems</a>
    and will likely have a different definition in CSS3.</p>



<h2 class="heading settled heading" data-level=8 id=page-direction><span class=secno>8 </span><span class=content>
Page Flow: the page progression direction</span><a class=self-link href=#page-direction></a></h2>

  <p>In paged media CSS2.1 classifies all pages as either left or right pages.
    The page progression direction, which determines whether the left or right
    page in a spread is first in the flow and whether the first page is by
    default a left or right page, depends on the writing direction as follows:

<p>  <ul>
    <li>The page progression is right-to-left if the root element’s
      <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> is <a class=css data-link-type=maybe href=#valuedef-vertical-rl title=vertical-rl>vertical-rl</a> or if the root element’s <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a>
      is <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a> and its <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> is <a class=css data-link-type=maybe href=#valuedef-rtl title=rtl>rtl</a>.
    <li>The page progression is left-to-right if the root element’s
      <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a> is <a class=css data-link-type=maybe href=#valuedef-vertical-lr title=vertical-lr>vertical-lr</a> or if the root element’s <a class=property data-link-type=propdesc href=#propdef-writing-mode title=writing-mode>writing-mode</a>
      is <a class=css data-link-type=maybe href=#valuedef-horizontal-tb title=horizontal-tb>horizontal-tb</a> and its <a class=property data-link-type=propdesc href=#propdef-direction title=direction>direction</a> is <a class=css data-link-type=maybe href=#valuedef-ltr title=ltr>ltr</a>.
  </ul>

  <p>(Unless otherwise overridden, the first page of a document begins on the
    second half of a spread, e.g. on the right page in a left-to-right page
    progression.)

<h2 class="heading settled heading" data-level=9 id=text-combine><span class=secno>9 </span><span class=content>
Glyph Composition</span><a class=self-link href=#text-combine></a></h2>

<span id=text-combine-horizontal></span>
<h3 class="heading settled heading" data-level=9.1 id=text-combine-upright><span class=secno>9.1 </span><span class=content>
Horizontal-in-Vertical Composition: the <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> property</span><a class=self-link href=#text-combine-upright></a></h3>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-text-combine-upright>text-combine-upright<a class=self-link href=#propdef-text-combine-upright></a></dfn><tr><th>Value:<td class=prod>none | all | [ digits &lt;integer&gt;? ]<tr><th>Initial:<td>none<tr><th>Applies to:<td>non-replaced inline elements<tr><th>Inherited:<td>yes<tr><th>Media:<td>visual<tr><th>Computed value:<td>specified keyword, plus integer if <a class=css data-link-type=maybe href=http://www.w3.org/TR/css3-syntax/#digit title=digits>digits</a><tr><th>Canonical order:<td>n/a<tr><th>Percentages:<td>n/a<tr><th>Animatable:<td>no</table>
  <p>This property specifies the combination of multiple characters into the space of a single character.
    If the combined text is wider than 1em, the UA must fit the contents within 1em, see below.
    The resulting composition is treated as a single upright glyph for the purposes of layout and decoration.
    This property only has an effect in vertical writing modes. Values have the following meanings:

  <dl>
    <dt><dfn class=css-code data-dfn-for=text-combine-upright data-dfn-type=value data-export="" id=valuedef-none>none<a class=self-link href=#valuedef-none></a></dfn>
    <dd>No special processing.</dd>

    <dt><dfn class=css-code data-dfn-for=text-combine-upright data-dfn-type=value data-export="" id=valuedef-all>all<a class=self-link href=#valuedef-all></a></dfn>
    <dd>Attempt to typeset horizontally
      all consecutive <a data-link-type=dfn href=#character title=characters>characters</a> within the box
      such that they take up the space of a single character
      within the vertical line box.
    <dt><dfn class=css-code data-dfn-for=text-combine-upright data-dfn-type=value data-export="" id=valuedef-digits-integer>digits <var>&lt;integer&gt;</var>?<a class=self-link href=#valuedef-digits-integer></a></dfn>
    <dd>Attempt to typeset horizontally
      each maximal sequence of consecutive ASCII digits (U+0030–U+0039)
      that has as many or fewer characters than the specified integer
      such that it takes up the space of a single character
      within the vertical line box.
      If the integer is omitted, it computes to 2.
      Integers outside the range 2-4 are invalid.
  </dl>

  <div class=example>
    <p>In East Asian documents, the <span class=css data-link-type=maybe title=text-combine-upright>text-combine-upright</span> effect is often
      used to display Latin-based strings such as components of a date or
      letters of an initialism, always in a horizontal writing mode
      regardless of the writing mode of the line:</p>

    <div class=figure>
      <p><img alt="Diagram of tate-chu-yoko, showing the two digits of a date
                   set halfwidth side-by-side in a vertical column of text" class=example src=tate-chu-yoko.png>
      <p class=caption>Example of horizontal-in-vertical <i lang=ja title="">tate-chu-yoko</i></p>
    </div>

    <p>The figure is the result of the rules</p>
    <pre>date { text-combine-upright: digits 2; }
</pre>    <p>and the following markup:</p>
    <pre>&lt;date&gt;平成20年4月16日に&lt;/date&gt;
</pre>
    <p>In Japanese, this effect is known as <i lang=ja title="">tate-chu-yoko</i>.
  </div>

  <div class=example>
    <p>The following example shows that applying <a class=css data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright: digits 2</a>
      to an entire document, rather than to a segment with a known type of
      numeric content, can have unintended consequences:
<pre>&lt;p&gt;あれは10,000円ですよ！&lt;/p&gt;</pre>    <div class=figure>
      <p><img alt="Rendering of the above markup with 'text-combine-upright: digits':
                   the first two digits of the number are rendered as tate-chu-yoko
                   while the rest of the number is rendered sideways." class=example src=bad-tate-chu-yoko.png>
      <p class=caption>Example of mis-applied <i lang=ja title="">tate-chu-yoko</i></p>
    </div>
  </div>

<h4 class="heading settled heading" data-level=9.1.1 id=text-combine-runs><span class=secno>9.1.1 </span><span class=content>
Text Run Rules</span><a class=self-link href=#text-combine-runs></a></h4>

  <p>To avoid complexity in the rendering and layout,
    <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> can only combine plain text:
    consecutive <a data-link-type=dfn href=#character title=characters>characters</a> that are not interrupted by a box boundary.

  <p>However, because the property inherits,
    the UA must ensure that the contents of the box effecting the combination
    are not part of an otherwise-combinable sequence
    that happens to begin or end outside the box;
    if so, then the text is laid out normally, as if <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> were <a class=css data-link-type=maybe href=#valuedef-none title=none>none</a>.
    To avoid combining only part of a sequence:
    if the boundary of a potentially-combinable run
    is due only to one or more inline box boundaries,
    the UA must inspect any <a data-link-type=dfn href=#character title=characters>characters</a> that appear
    immediately before and immediately after the run,
    and if these characters would, without the intervening box,
    form a sequence that would (if it were not too long) combine,
    then the candidate run does not combine.

  <p class=note>The above paragraph is at-risk. Comments from implementors are welcome.</p>

  <div class=example>
    <p>For example, given the rule
<pre>tcy { text-combine-upright: digits 4; }</pre>    <p>if the following markup were given:
<pre>&lt;tcy&gt;12&lt;span&gt;34&lt;/span&gt;&lt;/tcy&gt;</pre>    <p>no text would combine: the 12 and 34 both share an ancestor with the same <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> value,
    and therefore are considered part of a sequence of four combinable digits interrupted by a box boundary.
    However in these cases:
    <pre>12&lt;tcy&gt;&lt;span&gt;34&gt;&lt;/span&gt;&lt;/tcy&gt;
12&lt;tcy&gt;&lt;span&gt;&lt;/span&gt;34&lt;/tcy&gt;
12&lt;tcy&gt;34&lt;span&gt;&lt;/span&gt;&lt;/tcy&gt;</pre>    <p>The 34 would combine, because the 12 immediately previous does not share with the 34 an ancestor with a common <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a>,
    and therefore the 34 is considered to be the entirety of a sequence of two combinable digits.
    <p>If we used the rule
<pre>tcy { text-combine-upright: all; }</pre><p>    the same results would occur:
    the first case not combining because 1234 forms a sequence of four combinable characters interrupted by a box boundary,
    and the second combining 34 because it forms the entirety of a sequence of two combinable characters.
  </div>

  <p class=note>
    Note that the value of <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> (<a class=css data-link-type=maybe href=#valuedef-all title=all>all</a> or <a class=css data-link-type=maybe href=http://www.w3.org/TR/css3-syntax/#digit title=digits>digits</a>)
    only affects which types of <a data-link-type=dfn href=#character title=characters>characters</a> can be combined
    and what is the maximum length of a combinable sequence.
    It does not otherwise change behavior.

<h4 class="heading settled heading" data-level=9.1.2 id=text-combine-layout><span class=secno>9.1.2 </span><span class=content>
Layout Rules</span><a class=self-link href=#text-combine-layout></a></h4>

  <p>When combining text as for <a class=css data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright: all</a>,
    the glyphs of the combined text are composed horizontally
    (ignoring <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#letter-spacing title=letter-spacing>letter-spacing</a> and any forced line breaks, but using the specified font settings),
    similar to the contents of an inline-box with a horizontal writing mode and a line-height of 1em.
    The effective size of the composition is assumed to be 1em square;
    anything outside the square is not measured for layout purposes.
    The UA should center the glyphs horizontally and vertically within the measured 1em square.

  <p>The baseline of the resulting composition must be chosen such that the square is centered
    between the text-over and text-under baselines of its parent inline box prior to any baseline alignment shift (<a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align title=vertical-align>vertical-align</a>).
    For bidi reordering, the composition is treated the same as a character with <a class=css data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation: upright</a>.
    For line breaking before and after the composition, it is treated as a regular inline with its actual contents.
    For other text layout purposes,
    e.g. emphasis marks, text-decoration, spacing,
    etc. the resulting composition is treated as a single glyph
    representing the Object Replacement Character U+FFFC.

<h4 class="heading settled heading" data-level=9.1.3 id=text-combine-compression><span class=secno>9.1.3 </span><span class=content>
Compression Rules</span><a class=self-link href=#text-combine-compression></a></h4>

  <p>The UA must ensure that the combined advance width of the composition
    fits within 1em by compressing the combined text if necessary.
    (This does not necessarily mean that the glyphs will fit within 1em,
    as some glyphs are designed to draw outside their geometric boundaries.)
    OpenType implementations <em>must</em> use width-specific variants
    (OpenType features <code>hwid</code>/<code>twid</code>/<code>qwid</code>;
    other glyph-width features such as <code>fwid</code> or <code>pwid</code> are not included)
    to compress text
    in cases where those variants are available for all <a data-link-type=dfn href=#character title=characters>characters</a> in the composition.
    Otherwise, the UA may use any means to compress the text,
    including substituting half-width, third-width, and/or quarter-width glyphs provided by the font,
    using other font features designed to compress text horizontally,
    scaling the text geometrically,
    or any combination thereof.

  <div class=example>
    <p>For example, a simple OpenType-based implementation might compress the text as follows:
    <ol>
      <li>Enable 1/<var>n</var>-width glyphs for combined text of <var>n</var> <a data-link-type=dfn href=#character title=characters>characters</a>
        (i.e. use OpenType <code>hwid</code> for 2 <a data-link-type=dfn href=#character title=characters>characters</a>, <code>twid</code> for 3 <a data-link-type=dfn href=#character title=characters>characters</a>, etc.)
        if the number of <a data-link-type=dfn href=#character title=characters>characters</a> &gt; 1.
        Note that the number of <a data-link-type=dfn href=#character title=characters>characters</a> ≠ number of Unicode codepoints!
      <li>If the result is wider than 1em, horizontally scale the result to 1em.
    </ol>
    <p>A different implementation that utilizes OpenType layout features
    might compose the text first with normal glyphs to see if that fits,
    then substitute in half-width or third-width forms as available and necessary,
    possibly adjusting its approach or combining it with scaling operations
    depending on the available glyph substitutions.
  </div>

  <p>In some fonts, the ideographic glyphs are given a compressed design
    such that they are 1em wide but shorter than 1em tall.
    To accommodate such fonts, the UA may vertically scale the the composition
    to match the advance height of 水 U+6C34.
  

<h5 class="heading settled heading" data-level=9.1.3.1 id=text-combine-fullwidth><span class=secno>9.1.3.1 </span><span class=content>
Full-width Characters</span><a class=self-link href=#text-combine-fullwidth></a></h5>

  <p>In order to preserve typographic color when compressing the text to 1em,
    when the combined text consists of more than one <a data-link-type=dfn href=#character title=character>character</a>,
    then any full-width <a data-link-type=dfn href=#character title=characters>characters</a> must first be converted to their non-full-width equivalents
    by reversing the algorithm defined for <a class=css data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#text-transform title=text-transform>text-transform: full-width</a> in <a data-biblio-type=normative data-link-type=biblio href=#css3text title=css3text>[CSS3TEXT]</a>
    before applying other compression techniques.

  <div class=example>
    <p>For example, an author might apply both <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#text-transform title=text-transform>text-transform</a> and <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a>
    to a date set in vertical text.
<pre>date { text-combine-upright: digits 2; text-transform: full-width; }</pre>    <p>Suppose this style rule is applied to a date such as.
<pre>&lt;date&gt;2010年2月23日&lt;/date&gt;</pre>    <p>The "2010" is too long to be combined (4 digits), but the "2" and "23" will be affected.
    Since "23" is more than one character, it will not be affected by <a class=css data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#text-transform title=text-transform>text-transform: full-width</a>.
    However since the "2" is only one character, it will be transformed to a fullwidth "２".
    Since the "2010" was not combined, its digits, too, will be transformed to fullwidth "２０１０";
    and being fullwidth, they will be typeset upright, giving the following result:
    <pre style="text-align: center">２
０
１
０
年
２
月
23
日</pre>  </div>


  <p class=note>
    Properties that affect glyph selection,
    such as the <a class=css-code data-link-type=property href=http://www.w3.org/TR/css-fonts-3/#propdef-font-variant title=font-variant>font-variant</a> and <a class=css-code data-link-type=property href=http://www.w3.org/TR/css-fonts-3/#propdef-font-feature-settings title=font-feature-settings>font-feature-settings</a> properties defined in [CSS3-FONTS],
    can potentially affect the selection of variants for characters included in combined text runs.
    Authors are advised to use these properties with care when <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> is also used.

<h2 class="no-num heading settled heading" id=changes><span class=content>Changes</span><a class=self-link href=#changes></a></h2>
  <h3 class="no-num heading settled heading" id=changes-201311><span class=content>
  Changes since the <a href=http://www.w3.org/TR/2013/WD-css-writing-modes-3-20131126/>November
  2013 CSS Writing Modes Module Level 3 <abbr title="Last Call Working Draft">LCWD</abbr></a></span><a class=self-link href=#changes-201311></a></h3>
  <ul>
    <li>Changed to use boxes rather than elements where its use is more accurate or appropriate.
    <li>Increased the maximum level of embedding to 125 to match to Unicode 6.3.
    <li>Clarified handling of bidi control codes.
    <li>Clarified <a href=#text-combine-compression>compression rules</a> of <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a>.
  </ul>

  <h3 class="no-num heading settled heading" id=changes-201211><span class=content>
  Changes since the <a href=http://www.w3.org/TR/2012/WD-css3-writing-modes-20121115/>November
  2012 CSS Writing Modes Module Level 3 <abbr title="Working Draft">WD</abbr></a></span><a class=self-link href=#changes-201211></a></h3>
  <ul>
    <li>Added back <a class=css data-link-type=maybe href=http://www.w3.org/TR/css3-syntax/#digit title=digits>digits</a> value of <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> and tightened up rules for compressing text.
    <li>Defined better analysis of text to be combined.
    <li>Various fixes/clarifications to orthogonal flows.
    <li>Updated references to UTR50 and how this specification use its values.
  </ul>

  <h3 class="no-num heading settled heading" id=changes-201205><span class=content>
  Changes since the <a href=http://www.w3.org/TR/2012/WD-css3-writing-modes-20120501/>May
  2012 CSS Writing Modes Module Level 3 <abbr title="Working Draft">WD</abbr></a></span><a class=self-link href=#changes-201205></a></h3>

  <p>Major changes include:</p>
  <ul>
    <li>Replaced <a class=property data-link-type=propdesc href=#propdef-unicode-bidi title=unicode-bidi>unicode-bidi</a> value of <span class=css data-link-type=maybe title="isolate bidi-override">isolate bidi-override</span> with single keyword <a class=css data-link-type=maybe href=#valuedef-isolate-override title=isolate-override>isolate-override</a>.
    <li>Clarified that bidi isolated content does not affect plaintext heuristics of the containing paragraph.
    <li>Lots of other clarifications to bidi.
    <li>Renamed <span class=css data-link-type=maybe title=mixed-right>mixed-right</span> value of <a class=property data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation</a> to <a class=css data-link-type=maybe href=#valuedef-mixed title=mixed>mixed</a>.
    <li>Updated references to UTR50 for orientation of characters in Unicode
        and improved text defining vertical typesetting rules.
    <li>Fixed errors and clarified auto-sizing rules for orthogonal flows.
    <li>Replaced Appendix D with references to the new <a data-biblio-type=normative data-link-type=biblio href=#css3-sizing title=css3-sizing>[CSS3-SIZING]</a> module.
    <li>Removed <a class=property data-link-type=propdesc title=text-combine-mode>text-combine-mode</a> property.
    <li>Removed all <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> values except <a class=css data-link-type=maybe href=#valuedef-none title=none>none</a> and <a class=css data-link-type=maybe href=#valuedef-all title=all>all</a>.
    <li>Defined effect of <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> on line-breaking.
  </ul>

  <h3 class="no-num heading settled heading" id=changes-201109><span class=content>
  Changes since the <a href=http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/>September
  2011 CSS Writing Modes Module Level 3 <abbr title="Working Draft">WD</abbr></a></span><a class=self-link href=#changes-201109></a></h3>

  <p>Major changes include:</p>
  <ul>
    <li>Hooked up vertical typesetting details to UTR50.
    <li>Removed concept of "typographic modes".
    <li>Altered <a href=#orthogonal-auto>orthogonal sizing</a>
      to take into account the fill-available size; now the minimum of the
      fill-available and ICB size is used to resolve <span class=css data-link-type=maybe title=auto>auto</span> sizes.
    <li>Renamed <a class=css data-link-type=maybe href=http://www.w3.org/TR/css3-syntax/#digit title=digits>digits</a> to <span class=css data-link-type=maybe title=numeric>numeric</span> and <span class=css data-link-type=maybe title=ascii-digits>ascii-digits</span> to <a class=css data-link-type=maybe href=http://www.w3.org/TR/css3-syntax/#digit title=digits>digits</a> for <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a>.
    <li>Defined interaction of <a class=property data-link-type=propdesc href=#propdef-text-combine-upright title=text-combine-upright>text-combine-upright</a> and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-text/#text-transform title=text-transform>text-transform</a>.
  </ul>


<h2 class="no-num heading settled heading" id=acknowledgements><span class=content>
Acknowledgements</span><a class=self-link href=#acknowledgements></a></h2>

<p>John Daggett, Martin Heijdra, Laurentiu Iancu,
Yasuo Kida, Tatsuo Kobayashi, Toshi Kobayashi,
Ken Lunde, Nat McCully, Eric Muller,
Paul Nelson, Kenzou Onozawa, Dwayne Robinson,
Michel Suignard, Taro Yamamoto, Steve Zilles</p>

<h2 class="no-num heading settled heading" id=character-properties><span class=content>Appendix A.
Characters and Properties</span><a class=self-link href=#character-properties></a></h2>

  <p>Unicode defines three codepoint-level properties that are referenced
    in CSS Writing Modes:
  <dl>
    <dt><a href=http://www.unicode.org/reports/tr44/#General_Category_Values>General Category</a>
    <dd>Defined in <a data-biblio-type=normative data-link-type=biblio href=#uax44 title=uax44>[UAX44]</a> and given as the General_Category property
      in the Unicode Character Database <a data-biblio-type=normative data-link-type=biblio href=#uax44 title=uax44>[UAX44]</a>.
    <dt><a href=http://www.unicode.org/reports/tr24/#Values>Script</a>
    <dd>Defined in <a data-biblio-type=normative data-link-type=biblio href=#uax24 title=uax24>[UAX24]</a> and given as the Script property
      in the Unicode Character Database <a data-biblio-type=normative data-link-type=biblio href=#uax44 title=uax44>[UAX44]</a>. (UAs should
      include any ScriptExtensions.txt assignments in this mapping.)
    <dt><a href=http://www.unicode.org/reports/tr50/>Vertical Orientation</a>
    <dd>Defined in <a data-biblio-type=normative data-link-type=biblio href=#utr50 title=utr50>[UTR50]</a> as the Vertical_Orientation property
      and given in the UTR50 data file.
  </dl>

  <p id=grapheme-cluster>In several sections (as noted), the term
    <dfn data-dfn-type=dfn data-noexport="" id=character>character<a class=self-link href=#character></a></dfn> is defined as <em>extended grapheme cluster</em>
    per <a data-biblio-type=normative data-link-type=biblio href=#uax29 title=uax29>[UAX29]</a>. It is roughly equivalent to what a language user
    considers to be a character or a basic unit of the script (which
    might not be a single Unicode codepoint).
    The UA may further tailor this definition as appropriate to match
    typographic convention. For example, when typesetting <a class=css data-link-type=maybe href=#valuedef-upright title=upright>upright</a>,
    Tibetan tsek and shad marks are kept with the preceding letters,
    rather than treated as an independent cluster.

<h2 class="no-num heading settled heading" id=bidi-html><span class=content>
Appendix B: Bidi Rules for HTML 4</span><a class=self-link href=#bidi-html></a></h2>

<p>The style sheet rules that would achieve the bidi behaviors specified
in <a data-biblio-type=informative data-link-type=biblio href=#html401 title=html401>[HTML401]</a> for the HTML Strict doctype are given below:
  <pre>/* HTML dir attribute creates an embedding */
*[dir="ltr"]    { direction: ltr; unicode-bidi: embed; }
*[dir="rtl"]    { direction: rtl; unicode-bidi: embed; }

/* BDO element creates an override */
bdo[dir="ltr"]  { direction: ltr; unicode-bidi: bidi-override; }
bdo[dir="rtl"]  { direction: rtl; unicode-bidi: bidi-override; }

/* HTML4.01:8.2.6 - preserve bidi behavior if 'display' is changed */
html, body,
div, address, blockquote, p,
ul, ol, li, dl, dt, dd,
fieldset, form,
h1, h2, h3, h4, h5, h6,
{ unicode-bidi: isolate; }
</pre>
<h2 class="no-num heading settled heading" id=script-orientations><span class=content>Appendix C:
Vertical Scripts in Unicode</span><a class=self-link href=#script-orientations></a></h2>
  <p><em>This section is informative.</em></p>

  <p>This appendix lists the vertical and bi-orientational scripts in Unicode 6.0
    <a data-biblio-type=normative data-link-type=biblio href=#unicode title=unicode>[UNICODE]</a> and their transformation from horizontal to vertical orientation.
    Any script not listed explicitly is assumed to be <a data-link-type=dfn href=#horizontal-only title=horizontal-only>horizontal-only</a>.
    The script classification of Unicode characters is given by <a data-biblio-type=normative data-link-type=biblio href=#uax24 title=uax24>[UAX24]</a>.

  <table class=data>
    <caption>Vertical Scripts in Unicode</caption>
    <thead>
      <tr><th>Code	<th>Name                	<th>Transform (Clockwise)	<th>Vertical Intrinsic Direction
    </thead>
    <tbody>
      <tr><td>Bopo	<td>Bopomofo            	<th>0°  	<th>ttb
      <tr><td>Egyp	<td>Egyptian Hieroglyphs	<th>0°  	<th>ttb
      <tr><td>Hira	<td>Hiragana            	<th>0°  	<th>ttb
      <tr><td>Kana	<td>Katakana            	<th>0°  	<th>ttb
      <tr><td>Hani	<td>Han                 	<th>0°  	<th>ttb
      <tr><td>Hang	<td>Hangul              	<th>0°  	<th>ttb
      <tr><td>Merc	<td>Meroitic Cursive    	<th>0°  	<th>ttb
      <tr><td>Mero	<td>Meroitic Hieroglyphs	<th>0°  	<th>ttb
      <tr><td>Mong	<td>Mongolian           	<th>90° 	<th>ttb
      <tr><td>Ogam	<td>Ogham               	<th>-90°	<th>btt
      <tr><td>Orkh	<td>Old Turkic          	<th>-90°	<th>ttb
      <tr><td>Phag	<td>Phags Pa            	<th>90° 	<th>ttb
      <tr><td>Yiii	<td>Yi                  	<th>0°  	<th>ttb
    </tbody>
  </table>

  <p><strong>Exceptions:</strong>
    For the purposes of this specification, all fullwidth (F) and wide (W) characters
    are treated as belonging to a vertical script,
    and halfwidth characters (H) are treated as belonging ot a horizontal script.
    <a data-biblio-type=normative data-link-type=biblio href=#uax11 title=uax11>[UAX11]</a>

  <p class=note>
    CSS3 Writing Modes cannot correctly handle either Ogham or Old Turkic.
    It is recommended that <a class=css data-link-type=propdesc href=#propdef-text-orientation title=text-orientation>text-orientation: sideways-left</a> be used to typeset these scripts.
    A future version of CSS may define automatic handling of these scripts.

  <p class=note>Note that for vertical-only characters (such as Mongolian and Phags Pa letters),
    the glyphs in the Unicode code charts are shown in their vertical orientation.
    In horizontal text, they are typeset in a 90° counter-clockwise
    rotation from this orientation.

<h2 class="no-ref no-num heading settled heading" id=conformance><span class=content>
Conformance</span><a class=self-link href=#conformance></a></h2>

<h3 class="no-ref heading settled heading" id=conventions><span class=content>
Document conventions</span><a class=self-link href=#conventions></a></h3>

    <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification.

    <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-biblio-type=normative data-link-type=biblio href=#rfc2119 title=rfc2119>[RFC2119]</a></p>

    <p>Examples in this specification are introduced with the words "for example"
    or are set apart from the normative text with <code>class="example"</code>,
    like this:

    <div class=example>
        <p>This is an example of an informative example.</p>
    </div>

    <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this:

    <p class=note>Note, this is an informative note.</p>

<h3 class="no-ref heading settled heading" id=conformance-classes><span class=content>
Conformance classes</span><a class=self-link href=#conformance-classes></a></h3>

    <p>Conformance to this specification
    is defined for three conformance classes:
    <dl>
        <dt>style sheet
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#style-sheet>CSS
            style sheet</a>.
        <dt>renderer
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that interprets the semantics of a style sheet and renders
            documents that use them.
        <dt>authoring tool
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that writes a style sheet.
    </dl>

    <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module.

    <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.)

    <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module.

<h3 class="no-ref heading settled heading" id=partial><span class=content>
Partial implementations</span><a class=self-link href=#partial></a></h3>

    <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong>
    treat as invalid (and <a href=http://www.w3.org/TR/CSS21/conform.html#ignore>ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>

<h3 class="no-ref heading settled heading" id=experimental><span class=content>
Experimental implementations</span><a class=self-link href=#experimental></a></h3>

    <p>To avoid clashes with future CSS features, the CSS2.1 specification
    reserves a <a href=http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords>prefixed
    syntax</a> for proprietary and experimental extensions to CSS.

    <p>Prior to a specification reaching the Candidate Recommendation stage
    in the W3C process, all implementations of a CSS feature are considered
    experimental. The CSS Working Group recommends that implementations
    use a vendor-prefixed syntax for such features, including those in
    W3C Working Drafts. This avoids incompatibilities with future changes
    in the draft.
    </p>

<h3 class="no-ref heading settled heading" id=testing><span class=content>
Non-experimental implementations</span><a class=self-link href=#testing></a></h3>

    <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec.

    <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group.

    <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at
    <a href=http://www.w3.org/Style/CSS/Test/>http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the
    <a href=http://lists.w3.org/Archives/Public/public-css-testsuite>public-css-testsuite@w3.org</a>
    mailing list.
    
<h3 class="no-ref heading settled heading" id=cr-exit-criteria><span class=content>
CR exit criteria</span><a class=self-link href=#cr-exit-criteria></a></h3>

    <p>
    For this specification to be advanced to Proposed Recommendation,
    there must be at least two independent, interoperable implementations
    of each feature. Each feature may be implemented by a different set of
    products, there is no requirement that all features be implemented by
    a single product. For the purposes of this criterion, we define the
    following terms:

    <dl>
        <dt>independent <dd>each implementation must be developed by a
        different party and cannot share, reuse, or derive from code
        used by another qualifying implementation. Sections of code that
        have no bearing on the implementation of this specification are
        exempt from this requirement.

        <dt>interoperable <dd>passing the respective test case(s) in the
        official CSS test suite, or, if the implementation is not a Web
        browser, an equivalent test. Every relevant test in the test
        suite should have an equivalent test created if such a user
        agent (UA) is to be used to claim interoperability. In addition
        if such a UA is to be used to claim interoperability, then there
        must one or more additional UAs which can also pass those
        equivalent tests in the same way for the purpose of
        interoperability. The equivalent tests must be made publicly
        available for the purposes of peer review.

        <dt>implementation <dd>a user agent which:

        <ol class=inline>
            <li>implements the specification.

            <li>is available to the general public. The implementation may
            be a shipping product or other publicly available version
            (i.e., beta version, preview release, or "nightly build").
            Non-shipping product releases must have implemented the
            feature(s) for a period of at least one month in order to
            demonstrate stability.

            <li>is not experimental (i.e., a version specifically designed
            to pass the test suite and is not intended for normal usage
            going forward).
        </ol>
    </dl>

    <p>The specification will remain Candidate Recommendation for at least
    six months.

<h2 class="no-num no-ref heading settled heading" id=references><span class=content>
References</span><a class=self-link href=#references></a></h2>

<h3 class="no-num no-ref heading settled heading" id=normative><span class=content>
Normative References</span><a class=self-link href=#normative></a></h3>
<div data-fill-with=normative-references><dl><dt id=css21 title=CSS21><a class=self-link href=#css21></a>[CSS21]<dd>Bert Bos; et al. <a href=http://www.w3.org/TR/2011/REC-CSS2-20110607>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>. 7 June 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-CSS2-20110607>http://www.w3.org/TR/2011/REC-CSS2-20110607</a><dt id=css3-break title=CSS3-BREAK><a class=self-link href=#css3-break></a>[CSS3-BREAK]<dd>Rossen Atanassov; Elika J. Etemad. <a href=http://www.w3.org/TR/2012/WD-css3-break-20120823/>CSS Fragmentation Module Level 3</a>. 23 August 2012. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/WD-css3-break-20120823/>http://www.w3.org/TR/2012/WD-css3-break-20120823/</a><dt id=css3-sizing title=CSS3-SIZING><a class=self-link href=#css3-sizing></a>[CSS3-SIZING]<dd>Tab Atkins Jr.; Elika J. Etemad. <a href=http://www.w3.org/TR/2012/WD-css3-sizing-20120927/>CSS Intrinsic &amp; Extrinsic Sizing Module Level 3</a>. 27 September 2012. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/WD-css3-sizing-20120927/>http://www.w3.org/TR/2012/WD-css3-sizing-20120927/</a><dt id=css3bg title=CSS3BG><a class=self-link href=#css3bg></a>[CSS3BG]<dd>Bert Bos; Elika J. Etemad; Brad Kemper. <a href=http://www.w3.org/TR/2012/CR-css3-background-20120724/>CSS Backgrounds and Borders Module Level 3</a>. 24 July 2012. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/CR-css3-background-20120724/>http://www.w3.org/TR/2012/CR-css3-background-20120724/</a><dt id=css3col title=CSS3COL><a class=self-link href=#css3col></a>[CSS3COL]<dd>Håkon Wium Lie. <a href=http://www.w3.org/TR/2011/CR-css3-multicol-20110412>CSS Multi-column Layout Module</a>. 12 April 2011. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2011/CR-css3-multicol-20110412>http://www.w3.org/TR/2011/CR-css3-multicol-20110412</a><dt id=css3text title=CSS3TEXT><a class=self-link href=#css3text></a>[CSS3TEXT]<dd>Elika J. Etemad; Koji Ishii. <a href=http://www.w3.org/TR/2012/WD-css3-text-20121113/>CSS Text Module Level 3</a>. 13 November 2012. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/WD-css3-text-20121113/>http://www.w3.org/TR/2012/WD-css3-text-20121113/</a><dt id=rfc2119 title=RFC2119><a class=self-link href=#rfc2119></a>[RFC2119]<dd>S. Bradner. <a href=http://www.ietf.org/rfc/rfc2119.txt>Key words for use in RFCs to Indicate Requirement Levels</a>. URL: <a href=http://www.ietf.org/rfc/rfc2119.txt>http://www.ietf.org/rfc/rfc2119.txt</a><dt id=rfc6919 title=RFC6919><a class=self-link href=#rfc6919></a>[RFC6919]<dd>R. Barnes; S. Kent; E. Rescorla. <a href=http://www.ietf.org/rfc/rfc6919.txt>Further Key Words for Use in RFCs to Indicate Requirement Levels</a>. April 1 2013. URL: <a href=http://www.ietf.org/rfc/rfc6919.txt>http://www.ietf.org/rfc/rfc6919.txt</a><dt id=svg11 title=SVG11><a class=self-link href=#svg11></a>[SVG11]<dd>Erik Dahlström; et al. <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/>Scalable Vector Graphics (SVG) 1.1 (Second Edition)</a>. 16 August 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/>http://www.w3.org/TR/2011/REC-SVG11-20110816/</a><dt id=uax11 title=UAX11><a class=self-link href=#uax11></a>[UAX11]<dd>Ken Lunde. <a href=http://www.unicode.org/reports/tr11/>East Asian Width</a>. 20 September 2013. URL: <a href=http://www.unicode.org/reports/tr11/>http://www.unicode.org/reports/tr11/</a><dt id=uax24 title=UAX24><a class=self-link href=#uax24></a>[UAX24]<dd>Mark Davis; Ken Whistler. <a href=http://www.unicode.org/reports/tr24/>Unicode Script Property</a>. 20 September 2013. URL: <a href=http://www.unicode.org/reports/tr24/>http://www.unicode.org/reports/tr24/</a><dt id=uax29 title=UAX29><a class=self-link href=#uax29></a>[UAX29]<dd>Mark Davis. <a href=http://www.unicode.org/reports/tr29/>Unicode Text Segmentation</a>. 20 September 2013. URL: <a href=http://www.unicode.org/reports/tr29/>http://www.unicode.org/reports/tr29/</a><dt id=uax44 title=UAX44><a class=self-link href=#uax44></a>[UAX44]<dd>Mark Davis; Ken Whistler. <a href=http://www.unicode.org/reports/tr44/>Unicode Character Database</a>. 25 September 2013. URL: <a href=http://www.unicode.org/reports/tr44/>http://www.unicode.org/reports/tr44/</a><dt id=uax9 title=UAX9><a class=self-link href=#uax9></a>[UAX9]<dd>Mark Davis; Aharon Lanin; Andrew Glass. <a href=http://www.unicode.org/reports/tr9/>Unicode Bidirectional Algorithm</a>. 24 September 2013. URL: <a href=http://www.unicode.org/reports/tr9/>http://www.unicode.org/reports/tr9/</a><dt id=unicode title=UNICODE><a class=self-link href=#unicode></a>[UNICODE]<dd>The Unicode Consortium. <a href=http://www.unicode.org/standard/versions/enumeratedversions.html>The Unicode Standard</a>. 2013. Defined by: The Unicode Standard, Version 6.3.0, (Mountain View, CA: The Unicode Consortium, 2013. ISBN 978-1-936213-08-5), as updated from time to time by the publication of new versions URL: <a href=http://www.unicode.org/standard/versions/enumeratedversions.html>http://www.unicode.org/standard/versions/enumeratedversions.html</a><dt id=utr50 title=UTR50><a class=self-link href=#utr50></a>[UTR50]<dd>Koji Ishii. <a href=http://www.unicode.org/reports/tr50/>Unicode Properties for Vertical Text Layout</a>. 31 August 2013. URL: <a href=http://www.unicode.org/reports/tr50/>http://www.unicode.org/reports/tr50/</a></dl></div>

<h3 class="no-num no-ref heading settled heading" id=informative><span class=content>
Informative References</span><a class=self-link href=#informative></a></h3>
<div data-fill-with=informative-references><dl><dt id=css2 title=CSS2><a class=self-link href=#css2></a>[CSS2]<dd>Ian Jacobs; et al. <a href=http://www.w3.org/TR/2008/REC-CSS2-20080411>Cascading Style Sheets, level 2 (CSS2) Specification</a>. 11 April 2008. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2008/REC-CSS2-20080411>http://www.w3.org/TR/2008/REC-CSS2-20080411</a><dt id=css3-flexbox title=CSS3-FLEXBOX><a class=self-link href=#css3-flexbox></a>[CSS3-FLEXBOX]<dd>Tab Atkins Jr.; Elika J. Etemad; Alex Mogilevsky. <a href=http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/>CSS Flexible Box Layout Module</a>. 18 September 2012. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/>http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/</a><dt id=css3-text-decor title=CSS3-TEXT-DECOR><a class=self-link href=#css3-text-decor></a>[CSS3-TEXT-DECOR]<dd>Elika J. Etemad; Koji Ishii. <a href=http://www.w3.org/TR/2013/CR-css-text-decor-3-20130801/>CSS Text Decoration Module Level 3</a>. 1 August 2013. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2013/CR-css-text-decor-3-20130801/>http://www.w3.org/TR/2013/CR-css-text-decor-3-20130801/</a><dt id=css3color title=CSS3COLOR><a class=self-link href=#css3color></a>[CSS3COLOR]<dd>Tantek Çelik; Chris Lilley; L. David Baron. <a href=http://www.w3.org/TR/2011/REC-css3-color-20110607>CSS Color Module Level 3</a>. 7 June 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-css3-color-20110607>http://www.w3.org/TR/2011/REC-css3-color-20110607</a><dt id=css3list title=CSS3LIST><a class=self-link href=#css3list></a>[CSS3LIST]<dd>Tab Atkins Jr.. <a href=http://www.w3.org/TR/2011/WD-css3-lists-20110524>CSS Lists and Counters Module Level 3</a>. 24 May 2011. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2011/WD-css3-lists-20110524>http://www.w3.org/TR/2011/WD-css3-lists-20110524</a><dt id=css3page title=CSS3PAGE><a class=self-link href=#css3page></a>[CSS3PAGE]<dd>Melinda Grant; et al. <a href=http://www.w3.org/TR/2013/WD-css3-page-20130314/>CSS Paged Media Module Level 3</a>. 14 March 2013. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2013/WD-css3-page-20130314/>http://www.w3.org/TR/2013/WD-css3-page-20130314/</a><dt id=html401 title=HTML401><a class=self-link href=#html401></a>[HTML401]<dd>Dave Raggett; Arnaud Le Hors; Ian Jacobs. <a href=http://www.w3.org/TR/1999/REC-html401-19991224>HTML 4.01 Specification</a>. 24 December 1999. W3C Recommendation. URL: <a href=http://www.w3.org/TR/1999/REC-html401-19991224>http://www.w3.org/TR/1999/REC-html401-19991224</a><dt id=html5 title=HTML5><a class=self-link href=#html5></a>[HTML5]<dd>Robin Berjon; et al. <a href=http://www.w3.org/TR/2013/CR-html5-20130806/>HTML5</a>. 6 August 2013. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2013/CR-html5-20130806/>http://www.w3.org/TR/2013/CR-html5-20130806/</a><dt id=utn22 title=UTN22><a class=self-link href=#utn22></a>[UTN22]<dd>Elika J. Etemad. <a href=http://unicode.org/notes/tn22/>Robust Vertical Text Layout</a>. 25 April 2005. URL: <a href=http://unicode.org/notes/tn22/>http://unicode.org/notes/tn22/</a></dl></div>

<h2 class="no-num no-ref heading settled heading" id=index><span class=content>
Index</span><a class=self-link href=#index></a></h2>
<div data-fill-with=index><ul class=indexlist>
<li>abstract dimensions, <a href=#abstract-dimensions0 title="section 6.1">6.1</a>
<li>all, <a href=#valuedef-all title="section 9.1">9.1</a>
<li>alphabetic baseline, <a href=#alphabetic-baseline title="section 4.2">4.2</a>
<li>baseline, <a href=#baseline title="section 4.1">4.1</a>
<li>baseline table, <a href=#baseline-table title="section 4.1">4.1</a>
<li>bidi-isolate, <a href=#bidi-isolate title="section 2.2">2.2</a>
<li>bidi-isolated, <a href=#bidi-isolate title="section 2.2">2.2</a>
<li>bidi isolation, <a href=#bidi-isolate title="section 2.2">2.2</a>
<li>bidi-override, <a href=#valuedef-bidi-override title="section 2.2">2.2</a>
<li>bidi paragraph, <a href=#bidi-paragraph title="section 2">2</a>
<li>bidirectionality, <a href=#bidirectionality title="section 2">2</a>
<li>bi-orientational, <a href=#bi-orientational title="section 5">5</a>
<li>bi-orientational
    transform, <a href=#bi-orientational----transform title="section 5">5</a>
<li>block-axis, <a href=#block-axis- title="section 6.1">6.1</a>
<li>block axis, <a href=#block-axis- title="section 6.1">6.1</a>
<li>block dimension, <a href=#block-dimension title="section 6.1">6.1</a>
<li>block-end<ul><li>definition of, <a href=#block-end title="section 6.2">6.2</a>
<li>value for caption-side, <a href=#valuedef-block-end title="section 7.7">7.7</a>
</ul><li>block flow direction, <a href=#block-flow-direction title="section 1">1</a>
<li>block-start<ul><li>definition of, <a href=#block-start title="section 6.2">6.2</a>
<li>value for caption-side, <a href=#valuedef-block-start title="section 7.7">7.7</a>
</ul><li>bottom, <a href=#bottom title="section 6">6</a>
<li>central baseline, <a href=#central-baseline title="section 4.2">4.2</a>
<li>character, <a href=#character title="section Unnumbered section">Unnumbered section</a>
<li>digits &lt;integer&gt;?, <a href=#valuedef-digits-integer title="section 9.1">9.1</a>
<li>direction, <a href=#propdef-direction title="section 2.1">2.1</a>
<li>directional embedding, <a href=#directional-embedding title="section 2.2">2.2</a>
<li>directional override, <a href=#directional-override title="section 2.2">2.2</a>
<li>dominant baseline, <a href=#dominant-baseline title="section 4.4">4.4</a>
<li>embed, <a href=#valuedef-embed title="section 2.2">2.2</a>
<li>end, <a href=#end title="section 6.2">6.2</a>
<li>establish an orthogonal flow, <a href=#establish-an-orthogonal-flow- title="section 7.3">7.3</a>
<li>extent, <a href=#extent title="section 6.1">6.1</a>
<li>flow-relative, <a href=#flow-relative title="section 6">6</a>
<li>flow-relative direction, <a href=#flow-relative-direction title="section 6.2">6.2</a>
<li>forced paragraph break, <a href=#forced-paragraph-break title="section 2">2</a>
<li>height, <a href=#height title="section 6">6</a>
<li>horizontal axis, <a href=#x-axis title="section 6">6</a>
<li>horizontal block flow, <a href=#horizontal-block-flow title="section 1">1</a>
<li>horizontal dimension, <a href=#horizontal-dimension title="section 6">6</a>
<li>horizontal-only, <a href=#horizontal-only title="section 5">5</a>
<li>horizontal script, <a href=#horizontal-script title="section 5">5</a>
<li>horizontal-tb, <a href=#valuedef-horizontal-tb title="section 3.1">3.1</a>
<li>horizontal writing mode, <a href=#horizontal-writing-mode title="section 1">1</a>
<li>inline axis, <a href=#inline-axis- title="section 6.1">6.1</a>
<li>inline-axis, <a href=#inline-axis- title="section 6.1">6.1</a>
<li>inline base direction, <a href=#inline-base-direction title="section 1">1</a>
<li>inline dimension, <a href=#inline-dimension title="section 6.1">6.1</a>
<li>inline-end, <a href=#inline-end title="section 6.2">6.2</a>
<li>inline progression direction, <a href=#inline-progression-direction title="section 3.1.1">3.1.1</a>
<li>inline-start, <a href=#inline-start title="section 6.2">6.2</a>
<li>isolate, <a href=#valuedef-isolate title="section 2.2">2.2</a>
<li>isolated sequence, <a href=#isolated-sequence title="section 2.2">2.2</a>
<li>isolate-override, <a href=#valuedef-isolate-override title="section 2.2">2.2</a>
<li>isolation, <a href=#bidi-isolate title="section 2.2">2.2</a>
<li>left, <a href=#left title="section 6">6</a>
<li>line-left, <a href=#line-left title="section 6.3">6.3</a>
<li>line orientation, <a href=#line-orientation title="section 6.3">6.3</a>
<li>line-over, <a href=#line-over title="section 6.3">6.3</a>
<li>line-relative, <a href=#line-relative title="section 6">6</a>
<li>line-relative direction, <a href=#line-relative-direction title="section 6.3">6.3</a>
<li>line-right, <a href=#line-right title="section 6.3">6.3</a>
<li>line-under, <a href=#line-under title="section 6.3">6.3</a>
<li>logical height, <a href=#logical-height title="section 6.1">6.1</a>
<li>logical width, <a href=#logical-width title="section 6.1">6.1</a>
<li>ltr, <a href=#valuedef-ltr title="section 2.1">2.1</a>
<li>measure, <a href=#measure title="section 6.1">6.1</a>
<li>mixed, <a href=#valuedef-mixed title="section 5.1">5.1</a>
<li>none, <a href=#valuedef-none title="section 9.1">9.1</a>
<li>normal, <a href=#valuedef-normal title="section 2.2">2.2</a>
<li>orthogonal, <a href=#establish-an-orthogonal-flow- title="section 7.3">7.3</a>
<li>orthogonal flow, <a href=#establish-an-orthogonal-flow- title="section 7.3">7.3</a>
<li>over, <a href=#over title="section 6.3">6.3</a>
<li>physical, <a href=#physical title="section 6">6</a>
<li>physical dimensions, <a href=#physical-dimensions title="section 6">6</a>
<li>physical direction, <a href=#physical-direction title="section 6">6</a>
<li>plaintext, <a href=#valuedef-plaintext title="section 2.2">2.2</a>
<li>principal writing mode, <a href=#principal-writing-mode title="section 3.1">3.1</a>
<li>right, <a href=#right title="section 6">6</a>
<li>rtl, <a href=#valuedef-rtl title="section 2.1">2.1</a>
<li>sideways, <a href=#valuedef-sideways title="section 5.1">5.1</a>
<li>sideways-left, <a href=#valuedef-sideways-left title="section 5.1">5.1</a>
<li>sideways-right, <a href=#valuedef-sideways-right title="section 5.1">5.1</a>
<li>start, <a href=#start title="section 6.2">6.2</a>
<li>text-combine-upright, <a href=#propdef-text-combine-upright title="section 9.1">9.1</a>
<li>text-orientation, <a href=#propdef-text-orientation title="section 5.1">5.1</a>
<li>top, <a href=#top title="section 6">6</a>
<li>under, <a href=#under title="section 6.3">6.3</a>
<li>unicode-bidi, <a href=#propdef-unicode-bidi title="section 2.2">2.2</a>
<li>upright, <a href=#valuedef-upright title="section 5.1">5.1</a>
<li>use-glyph-orientation, <a href=#valuedef-use-glyph-orientation title="section 5.1">5.1</a>
<li>vertical axis, <a href=#y-axis title="section 6">6</a>
<li>vertical block flow, <a href=#vertical-block-flow title="section 1">1</a>
<li>vertical dimension, <a href=#vertical-dimension title="section 6">6</a>
<li>vertical-lr, <a href=#valuedef-vertical-lr title="section 3.1">3.1</a>
<li>vertical-only, <a href=#vertical-only title="section 5">5</a>
<li>vertical-rl, <a href=#valuedef-vertical-rl title="section 3.1">3.1</a>
<li>vertical script, <a href=#vertical-script title="section 5">5</a>
<li>vertical writing mode, <a href=#vertical-writing-mode title="section 1">1</a>
<li>width, <a href=#width title="section 6">6</a>
<li>writing mode, <a href=#writing-mode0 title="section 1">1</a>
<li>writing-mode, <a href=#propdef-writing-mode title="section 3.1">3.1</a>
<li>x-axis, <a href=#x-axis title="section 6">6</a>
<li>y-axis, <a href=#y-axis title="section 6">6</a>
</ul></div>

<h2 class="no-num no-ref heading settled heading" id=property-index><span class=content>
Property index</span><a class=self-link href=#property-index></a></h2>
<div data-fill-with=property-index><table class="proptable data"><thead><tr><th scope=col>Name<th scope=col>Value<th scope=col>Initial<th scope=col>Applies to<th scope=col>Inh.<th scope=col>%ages<th scope=col>Media<th scope=col>Animatable<th scope=col>Canonical order<th scope=col>Computed value<tbody>
<tr><th scope=row><a data-property="">direction</a><td>ltr | rtl<td>ltr<td>all elements<td>yes<td>n/a<td>visual<td>no<td>n/a<td>specified value
<tr><th scope=row><a data-property="">unicode-bidi</a><td>normal | embed | isolate | bidi-override | isolate-override | plaintext<td>normal<td>all elements, but see prose<td>no<td>n/a<td>visual<td><td><td>specified value
<tr><th scope=row><a data-property="">writing-mode</a><td>horizontal-tb | vertical-rl | vertical-lr<td>horizontal-tb<td>All elements except table row groups, table column groups, table rows, and table columns<td>yes<td>n/a<td>visual<td>no<td>n/a<td>specified value
<tr><th scope=row><a data-property="">text-orientation</a><td>mixed | upright | sideways-right | sideways-left | sideways | use-glyph-orientation<td>mixed<td>all elements except table row groups, rows, column groups, and columns<td>yes<td>n/a<td>visual<td>no<td>n/a<td>specified value
<tr><th scope=row><a data-property="">text-combine-upright</a><td>none | all | [ digits &lt;integer&gt;? ]<td>none<td>non-replaced inline elements<td>yes<td>n/a<td>visual<td>no<td>n/a<td>specified keyword, plus integer if digits</table></div>


