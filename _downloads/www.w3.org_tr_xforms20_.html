<!-- http://www.w3.org/TR/xforms20/ -->
<!DOCTYPE html  PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'  'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>XForms 2.0</title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
  <style type="text/css">
   .editsection { display: none; }
</style>
<link href="tr.css" rel="stylesheet" type="text/css" />
<link href="xforms.css" rel="stylesheet" type="text/css" />
<link href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet" type="text/css" />

  
</head>
<body>

<div class="head">
<a href="http://www.w3.org/"><img alt="W3C" height="48" src="http://www.w3.org/Icons/w3c_home" width="72" /></a><h1 id="title" style="clear:both"><span id="short-title">XForms 2.0</span></h1>

<h2 id="W3C-doctype">W3C Working Draft 7 August 2012</h2>

<dl>
<dt>This version:</dt>
<dd><a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/" id="this-version-url">http://www.w3.org/TR/2012/WD-xforms20-20120807/</a></dd>

<dt>Latest version:</dt>
<dd><a href="http://www.w3.org/TR/xforms20/">http://www.w3.org/TR/xforms20/</a></dd>
</dl>

<dl><dt>Editors:</dt><dd>John M. Boyer, IBM</dd>
<dd>Leigh L. Klotz, Jr., Xerox</dd>
<dd>Steven Pemberton, CWI</dd>
<dd>Nick Van den Bleeken, Inventive Designers</dd>
</dl>

<p>This document is also available in these non-normative formats: <a href="Overview-diff.html">diff-marked HTML</a>.</p>





<p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> &copy; 2012 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>&reg;</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p>

</div>
<hr />
<h2><a id="abstract" name="abstract">Abstract</a></h2>

<div>
<div>XForms is an XML markup for a new generation of forms and form-like applications on the Web. XForms is not a free-standing document type, but is integrated into other markup languages, such as [<a href="#ref-xhtml-1.0" title="">XHTML</a>], [<a href="#ref-odf-1.1" title="">ODF</a>] or [<a href="#ref-svg-1.1" title="">SVG</a>]. An XForms-based application gathers and processes data using an architecture that separates presentation, purpose and content. The underlying data of a form is organized into <b>instances</b>. XForms allows processing of data to occur using three mechanisms:
<ul><li> a declarative <b>model</b> composed of formulae for data calculations and constraints, data type and other property declarations, and data submission parameters
</li><li> a <b>view</b> layer composed of intent-based user interface controls
</li><li> an imperative <b>controller</b> for orchestrating data manipulations, interactions between the model and view layers, and data submissions.
</li></ul>
<p>Thus, XForms accommodates form component reuse, fosters strong data type validation, eliminates unnecessary round-trips to the server, offers device independence and accessibility, and reduces the need for scripting.
</p>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: What is XForms 2.0">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: What is XForms 2.0</b>
</td><td align="right" valign="top" width="50%"> 2012-03-29
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> Update the paragraph below
</td></tr></tbody></table>
<p>XForms 2.0 adds support for defining custom functions, variables, a pluggable expression language with extra functions (XPath 2.0), model-based switch and repeat, Attribute Value Templates, consuming and submitting JSON and CSV instance data, amongst other things. 
</p>
 </div>
</div>

<h2 class="no-toc no-num">
<a id="w3c_status" name="w3c_status">Status of this Document</a>
</h2>
    
<h4 class="no-toc no-num" id="may-be">May Be Superseded</h4>
    
<p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current W3C publications and the latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/">W3C technical reports index</a> at http://www.w3.org/TR/.</em></p>

    

<!-- no eventStatusExtra -->

<!-- no statusExtra -->

<div></div>



           <h4 class="no-toc no-num" id="status-first-public">First
           Public Working Draft</h4>

            <div>
 
 <p>This document is intended to encourage discussion and should not
be considered complete. Within the document there are Editorial
notes. These notes reflect areas that need particular attention.
Feedback on these areas is particularly appreciated.</p> 
</div>



<h4 class="no-toc no-num" id="please">Please Comment By 9 October 2012</h4><p>The <a href="http://www.w3.org/MarkUp/Forms/">Forms Working Group</a> seeks
    public feedback on this First Public Working Draft.  Please send your
    comments to <a class="mailto" href="mailto:www-forms-editor@w3.org" shape="rect">www-forms-editor@w3.org</a> (<a class="http" href="http://lists.w3.org/Archives/Public/www-forms-editor/" shape="rect">public archive</a>).  If possible, please offer
    specific changes to the text that would address your
    concern.  You may also wish to check the <a href="http://www.w3.org/MarkUp/Forms/wiki/XForms_2.0">Wiki
    Version</a> of this document and see if the relevant text has already 
    been updated.</p>
    
<h4 class="no-toc no-num" id="no-endorsement">No Endorsement</h4>
    
<p><em>Publication as a Working Draft does not imply endorsement by the W3C Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.</em></p>


<h4 class="no-toc no-num" id="patents">Patents</h4>
    
<p><em>This document was produced by a group operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>. W3C maintains a <a href="http://www.w3.org/2004/01/pp-impl/32219/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure"> section 6 of the W3C Patent Policy</a>.</em></p>

<hr title="Separator After Status Section" />


<div class="body">
<div class="div1">
<table class="toc" id="toc" summary="Contents"><tbody><tr><td><div id="toctitle"><h2>Table of Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#About_the_XForms_Specification"><span class="tocnumber">1</span> <span class="toctext">About the XForms Specification</span></a>
<ul>
<li class="toclevel-2"><a href="#Background"><span class="tocnumber">1.1</span> <span class="toctext">Background</span></a></li>
<li class="toclevel-2"><a href="#Reading_the_Specification"><span class="tocnumber">1.2</span> <span class="toctext">Reading the Specification</span></a></li>
<li class="toclevel-2"><a href="#How_the_Specification_is_Organized"><span class="tocnumber">1.3</span> <span class="toctext">How the Specification is Organized</span></a></li>
<li class="toclevel-2"><a href="#Documentation_Conventions"><span class="tocnumber">1.4</span> <span class="toctext">Documentation Conventions</span></a></li>
<li class="toclevel-2"><a href="#Differences_between_XForms_2.0_and_XForms_1.1"><span class="tocnumber">1.5</span> <span class="toctext">Differences between XForms 2.0 and XForms 1.1</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Introduction_to_XForms"><span class="tocnumber">2</span> <span class="toctext">Introduction to XForms</span></a>
<ul>
<li class="toclevel-2"><a href="#An_Example"><span class="tocnumber">2.1</span> <span class="toctext">An Example</span></a></li>
<li class="toclevel-2"><a href="#Providing_XML_Instance_Data"><span class="tocnumber">2.2</span> <span class="toctext">Providing XML Instance Data</span></a></li>
<li class="toclevel-2"><a href="#Constraining_Values"><span class="tocnumber">2.3</span> <span class="toctext">Constraining Values</span></a></li>
<li class="toclevel-2"><a href="#Multiple_Forms_per_Document"><span class="tocnumber">2.4</span> <span class="toctext">Multiple Forms per Document</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Document_Structure"><span class="tocnumber">3</span> <span class="toctext">Document Structure</span></a>
<ul>
<li class="toclevel-2"><a href="#Namespace_for_XForms"><span class="tocnumber">3.1</span> <span class="toctext">Namespace for XForms</span></a></li>
<li class="toclevel-2"><a href="#The_XForms_Core_Module"><span class="tocnumber">3.2</span> <span class="toctext">The XForms Core Module</span></a>
<ul>
<li class="toclevel-3"><a href="#The_model_Element"><span class="tocnumber">3.2.1</span> <span class="toctext">The model Element</span></a></li>
<li class="toclevel-3"><a href="#The_instance_Element"><span class="tocnumber">3.2.2</span> <span class="toctext">The instance Element</span></a>
<ul>
<li class="toclevel-4"><a href="#Creating_instance_data_from_external_resources"><span class="tocnumber">3.2.2.1</span> <span class="toctext">Creating instance data from external resources</span></a></li>
<li class="toclevel-4"><a href="#External_JSON_values"><span class="tocnumber">3.2.2.2</span> <span class="toctext">External JSON values</span></a></li>
<li class="toclevel-4"><a href="#External_CSV_values"><span class="tocnumber">3.2.2.3</span> <span class="toctext">External CSV values</span></a></li>
<li class="toclevel-4"><a href="#Other_External_values"><span class="tocnumber">3.2.2.4</span> <span class="toctext">Other External values</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#The_bind_Element"><span class="tocnumber">3.2.3</span> <span class="toctext">The bind Element</span></a></li>
<li class="toclevel-3"><a href="#The_var_element"><span class="tocnumber">3.2.4</span> <span class="toctext">The var element</span></a>
<ul>
<li class="toclevel-4"><a href="#Variable_Scope"><span class="tocnumber">3.2.4.1</span> <span class="toctext">Variable Scope</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#The_submission_Element"><span class="tocnumber">3.2.5</span> <span class="toctext">The submission Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#XForms_Core_Attribute_Collections"><span class="tocnumber">3.3</span> <span class="toctext">XForms Core Attribute Collections</span></a>
<ul>
<li class="toclevel-3"><a href="#Common_Attributes"><span class="tocnumber">3.3.1</span> <span class="toctext">Common Attributes</span></a></li>
<li class="toclevel-3"><a href="#Linking_Attributes"><span class="tocnumber">3.3.2</span> <span class="toctext">Linking Attributes</span></a></li>
<li class="toclevel-3"><a href="#Binding_Attributes"><span class="tocnumber">3.3.3</span> <span class="toctext">Binding Attributes</span></a></li>
<li class="toclevel-3"><a href="#Model_Item_Property_Attributes"><span class="tocnumber">3.3.4</span> <span class="toctext">Model Item Property Attributes</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_XForms_Extension_Module"><span class="tocnumber">3.4</span> <span class="toctext">The XForms Extension Module</span></a>
<ul>
<li class="toclevel-3"><a href="#The_extension_Element"><span class="tocnumber">3.4.1</span> <span class="toctext">The extension Element</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Expressions_in_XForms"><span class="tocnumber">4</span> <span class="toctext">Expressions in XForms</span></a>
<ul>
<li class="toclevel-2"><a href="#Evaluation_Context"><span class="tocnumber">4.1</span> <span class="toctext">Evaluation Context</span></a>
<ul>
<li class="toclevel-3"><a href="#Maintaining_Position:_the_Focus"><span class="tocnumber">4.1.1</span> <span class="toctext">Maintaining Position: the Focus</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#References.2C_Dependencies.2C_and_Dynamic_Dependencies"><span class="tocnumber">4.2</span> <span class="toctext">References, Dependencies, and Dynamic Dependencies</span></a></li>
<li class="toclevel-2"><a href="#Expression_Categories"><span class="tocnumber">4.3</span> <span class="toctext">Expression Categories</span></a></li>
<li class="toclevel-2"><a href="#Model_Binding_Expressions_and_Computed_Expressions"><span class="tocnumber">4.4</span> <span class="toctext">Model Binding Expressions and Computed Expressions</span></a></li>
<li class="toclevel-2"><a href="#Expressions_in_Actions_and_Submissions"><span class="tocnumber">4.5</span> <span class="toctext">Expressions in Actions and Submissions</span></a></li>
<li class="toclevel-2"><a href="#UI_Expressions"><span class="tocnumber">4.6</span> <span class="toctext">UI Expressions</span></a></li>
<li class="toclevel-2"><a href="#UI_Binding_in_other_XML_vocabularies"><span class="tocnumber">4.7</span> <span class="toctext">UI Binding in other XML vocabularies</span></a></li>
<li class="toclevel-2"><a href="#Binding_Examples"><span class="tocnumber">4.8</span> <span class="toctext">Binding Examples</span></a></li>
<li class="toclevel-2"><a href="#Attribute_Value_Templates"><span class="tocnumber">4.9</span> <span class="toctext">Attribute Value Templates</span></a>
<ul>
<li class="toclevel-3"><a href="#AVT_Evaluation"><span class="tocnumber">4.9.1</span> <span class="toctext">AVT Evaluation</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_function_Element"><span class="tocnumber">4.10</span> <span class="toctext">The function Element</span></a>
<ul>
<li class="toclevel-3"><a href="#Function_signature_syntax"><span class="tocnumber">4.10.1</span> <span class="toctext">Function signature syntax</span></a></li>
<li class="toclevel-3"><a href="#Function_body"><span class="tocnumber">4.10.2</span> <span class="toctext">Function body</span></a></li>
<li class="toclevel-3"><a href="#Function_body_evaluation_context"><span class="tocnumber">4.10.3</span> <span class="toctext">Function body evaluation context</span></a></li>
<li class="toclevel-3"><a href="#The_sequence_element"><span class="tocnumber">4.10.4</span> <span class="toctext">The sequence element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Extension_Functions"><span class="tocnumber">4.11</span> <span class="toctext">Extension Functions</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Datatypes"><span class="tocnumber">5</span> <span class="toctext">Datatypes</span></a>
<ul>
<li class="toclevel-2"><a href="#XML_Schema_Built-in_Datatypes"><span class="tocnumber">5.1</span> <span class="toctext">XML Schema Built-in Datatypes</span></a></li>
<li class="toclevel-2"><a href="#XForms_Datatypes"><span class="tocnumber">5.2</span> <span class="toctext">XForms Datatypes</span></a>
<ul>
<li class="toclevel-3"><a href="#XForms_Datatypes_Allowing_Empty_Content"><span class="tocnumber">5.2.1</span> <span class="toctext">XForms Datatypes Allowing Empty Content</span></a></li>
<li class="toclevel-3"><a href="#xforms:listItem"><span class="tocnumber">5.2.2</span> <span class="toctext">xforms:listItem</span></a></li>
<li class="toclevel-3"><a href="#xforms:listItems"><span class="tocnumber">5.2.3</span> <span class="toctext">xforms:listItems</span></a></li>
<li class="toclevel-3"><a href="#xforms:dayTimeDuration"><span class="tocnumber">5.2.4</span> <span class="toctext">xforms:dayTimeDuration</span></a></li>
<li class="toclevel-3"><a href="#xforms:yearMonthDuration"><span class="tocnumber">5.2.5</span> <span class="toctext">xforms:yearMonthDuration</span></a></li>
<li class="toclevel-3"><a href="#xforms:email"><span class="tocnumber">5.2.6</span> <span class="toctext">xforms:email</span></a></li>
<li class="toclevel-3"><a href="#xforms:card-number"><span class="tocnumber">5.2.7</span> <span class="toctext">xforms:card-number</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Model_Item_Properties"><span class="tocnumber">6</span> <span class="toctext">Model Item Properties</span></a>
<ul>
<li class="toclevel-2"><a href="#Model_Item_Property_Definitions"><span class="tocnumber">6.1</span> <span class="toctext">Model Item Property Definitions</span></a>
<ul>
<li class="toclevel-3"><a href="#The_type_Property"><span class="tocnumber">6.1.1</span> <span class="toctext">The type Property</span></a></li>
<li class="toclevel-3"><a href="#The_readonly_Property"><span class="tocnumber">6.1.2</span> <span class="toctext">The readonly Property</span></a></li>
<li class="toclevel-3"><a href="#The_required_Property"><span class="tocnumber">6.1.3</span> <span class="toctext">The required Property</span></a></li>
<li class="toclevel-3"><a href="#The_relevant_Property"><span class="tocnumber">6.1.4</span> <span class="toctext">The relevant Property</span></a></li>
<li class="toclevel-3"><a href="#The_calculate_Property"><span class="tocnumber">6.1.5</span> <span class="toctext">The calculate Property</span></a></li>
<li class="toclevel-3"><a href="#The_constraint_Property"><span class="tocnumber">6.1.6</span> <span class="toctext">The constraint Property</span></a></li>
<li class="toclevel-3"><a href="#The_p3ptype_Property_.28deprecated.29"><span class="tocnumber">6.1.7</span> <span class="toctext">The p3ptype Property (deprecated)</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Schema_Constraints"><span class="tocnumber">6.2</span> <span class="toctext">Schema Constraints</span></a>
<ul>
<li class="toclevel-3"><a href="#Atomic_Datatype"><span class="tocnumber">6.2.1</span> <span class="toctext">Atomic Datatype</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#The_XForms_Submission_Module"><span class="tocnumber">7</span> <span class="toctext">The XForms Submission Module</span></a>
<ul>
<li class="toclevel-2"><a href="#The_submission_Element_2"><span class="tocnumber">7.1</span> <span class="toctext">The submission Element</span></a></li>
<li class="toclevel-2"><a href="#The_xforms-submit_Event"><span class="tocnumber">7.2</span> <span class="toctext">The xforms-submit Event</span></a>
<ul>
<li class="toclevel-3"><a href="#Processing_the_Response_from_a_Submission"><span class="tocnumber">7.2.1</span> <span class="toctext">Processing the Response from a Submission</span></a></li>
<li class="toclevel-3"><a href="#Replacing_Data_with_the_Submission_Response"><span class="tocnumber">7.2.2</span> <span class="toctext">Replacing Data with the Submission Response</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_xforms-submit-serialize_Event"><span class="tocnumber">7.3</span> <span class="toctext">The xforms-submit-serialize Event</span></a></li>
<li class="toclevel-2"><a href="#The_xforms-submit-done_Event"><span class="tocnumber">7.4</span> <span class="toctext">The xforms-submit-done Event</span></a></li>
<li class="toclevel-2"><a href="#The_xforms-submit-error_Event"><span class="tocnumber">7.5</span> <span class="toctext">The xforms-submit-error Event</span></a></li>
<li class="toclevel-2"><a href="#The_Submission_Resource"><span class="tocnumber">7.6</span> <span class="toctext">The Submission Resource</span></a>
<ul>
<li class="toclevel-3"><a href="#The_resource_Element"><span class="tocnumber">7.6.1</span> <span class="toctext">The resource Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_Submission_Method"><span class="tocnumber">7.7</span> <span class="toctext">The Submission Method</span></a>
<ul>
<li class="toclevel-3"><a href="#The_method_Element"><span class="tocnumber">7.7.1</span> <span class="toctext">The method Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_header_Element"><span class="tocnumber">7.8</span> <span class="toctext">The header Element</span></a>
<ul>
<li class="toclevel-3"><a href="#The_name_Element"><span class="tocnumber">7.8.1</span> <span class="toctext">The name Element</span></a></li>
<li class="toclevel-3"><a href="#The_value_Element"><span class="tocnumber">7.8.2</span> <span class="toctext">The value Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Submission_Options"><span class="tocnumber">7.9</span> <span class="toctext">Submission Options</span></a>
<ul>
<li class="toclevel-3"><a href="#The_get_Submission_Method"><span class="tocnumber">7.9.1</span> <span class="toctext">The get Submission Method</span></a></li>
<li class="toclevel-3"><a href="#The_post.2C_multipart-post.2C_form-data-post.2C_and_urlencoded-post_Submission_Methods"><span class="tocnumber">7.9.2</span> <span class="toctext">The post, multipart-post, form-data-post, and urlencoded-post Submission Methods</span></a></li>
<li class="toclevel-3"><a href="#The_put_Submission_Method"><span class="tocnumber">7.9.3</span> <span class="toctext">The put Submission Method</span></a></li>
<li class="toclevel-3"><a href="#The_delete_Submission_Method"><span class="tocnumber">7.9.4</span> <span class="toctext">The delete Submission Method</span></a></li>
<li class="toclevel-3"><a href="#Serialization"><span class="tocnumber">7.9.5</span> <span class="toctext">Serialization</span></a>
<ul>
<li class="toclevel-4"><a href="#Serialization_as_application.2Fxml"><span class="tocnumber">7.9.5.1</span> <span class="toctext">Serialization as application/xml</span></a></li>
<li class="toclevel-4"><a href="#Serialization_as_multipart.2Frelated"><span class="tocnumber">7.9.5.2</span> <span class="toctext">Serialization as multipart/related</span></a></li>
<li class="toclevel-4"><a href="#Serialization_as_multipart.2Fform-data"><span class="tocnumber">7.9.5.3</span> <span class="toctext">Serialization as multipart/form-data</span></a></li>
<li class="toclevel-4"><a href="#Serialization_as_application.2Fx-www-form-urlencoded"><span class="tocnumber">7.9.5.4</span> <span class="toctext">Serialization as application/x-www-form-urlencoded</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Integration_with_SOAP"><span class="tocnumber">7.10</span> <span class="toctext">Integration with SOAP</span></a>
<ul>
<li class="toclevel-3"><a href="#Representation_of_SOAP_Envelope"><span class="tocnumber">7.10.1</span> <span class="toctext">Representation of SOAP Envelope</span></a></li>
<li class="toclevel-3"><a href="#Indicating_a_SOAP_submission"><span class="tocnumber">7.10.2</span> <span class="toctext">Indicating a SOAP submission</span></a></li>
<li class="toclevel-3"><a href="#SOAP_HTTP_Binding"><span class="tocnumber">7.10.3</span> <span class="toctext">SOAP HTTP Binding</span></a></li>
<li class="toclevel-3"><a href="#Handling_the_SOAP_Response"><span class="tocnumber">7.10.4</span> <span class="toctext">Handling the SOAP Response</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Core_Form_Controls"><span class="tocnumber">8</span> <span class="toctext">Core Form Controls</span></a>
<ul>
<li class="toclevel-2"><a href="#The_XForms_Core_Form_Controls_Module"><span class="tocnumber">8.1</span> <span class="toctext">The XForms Core Form Controls Module</span></a>
<ul>
<li class="toclevel-3"><a href="#Implementation_Requirements_Common_to_All_Form_Controls"><span class="tocnumber">8.1.1</span> <span class="toctext">Implementation Requirements Common to All Form Controls</span></a></li>
<li class="toclevel-3"><a href="#The_input_Element"><span class="tocnumber">8.1.2</span> <span class="toctext">The input Element</span></a></li>
<li class="toclevel-3"><a href="#The_secret_Element"><span class="tocnumber">8.1.3</span> <span class="toctext">The secret Element</span></a></li>
<li class="toclevel-3"><a href="#The_textarea_Element"><span class="tocnumber">8.1.4</span> <span class="toctext">The textarea Element</span></a></li>
<li class="toclevel-3"><a href="#The_output_Element"><span class="tocnumber">8.1.5</span> <span class="toctext">The output Element</span></a>
<ul>
<li class="toclevel-4"><a href="#The_mediatype_Element_.28for_output.29"><span class="tocnumber">8.1.5.1</span> <span class="toctext">The mediatype Element (for output)</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#The_upload_Element"><span class="tocnumber">8.1.6</span> <span class="toctext">The upload Element</span></a>
<ul>
<li class="toclevel-4"><a href="#The_filename_Element"><span class="tocnumber">8.1.6.1</span> <span class="toctext">The filename Element</span></a></li>
<li class="toclevel-4"><a href="#The_mediatype_Element_.28for_upload.29"><span class="tocnumber">8.1.6.2</span> <span class="toctext">The mediatype Element (for upload)</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#The_range_Element"><span class="tocnumber">8.1.7</span> <span class="toctext">The range Element</span></a></li>
<li class="toclevel-3"><a href="#The_trigger_Element"><span class="tocnumber">8.1.8</span> <span class="toctext">The trigger Element</span></a></li>
<li class="toclevel-3"><a href="#The_submit_Element"><span class="tocnumber">8.1.9</span> <span class="toctext">The submit Element</span></a></li>
<li class="toclevel-3"><a href="#The_select_Element"><span class="tocnumber">8.1.10</span> <span class="toctext">The select Element</span></a></li>
<li class="toclevel-3"><a href="#The_select1_Element"><span class="tocnumber">8.1.11</span> <span class="toctext">The select1 Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Common_Support_Elements"><span class="tocnumber">8.2</span> <span class="toctext">Common Support Elements</span></a>
<ul>
<li class="toclevel-3"><a href="#The_label_Element"><span class="tocnumber">8.2.1</span> <span class="toctext">The label Element</span></a></li>
<li class="toclevel-3"><a href="#The_help_Element"><span class="tocnumber">8.2.2</span> <span class="toctext">The help Element</span></a></li>
<li class="toclevel-3"><a href="#The_hint_Element"><span class="tocnumber">8.2.3</span> <span class="toctext">The hint Element</span></a></li>
<li class="toclevel-3"><a href="#The_alert_Element"><span class="tocnumber">8.2.4</span> <span class="toctext">The alert Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Common_Markup_for_Selection_Controls"><span class="tocnumber">8.3</span> <span class="toctext">Common Markup for Selection Controls</span></a>
<ul>
<li class="toclevel-3"><a href="#The_choices_Element"><span class="tocnumber">8.3.1</span> <span class="toctext">The choices Element</span></a></li>
<li class="toclevel-3"><a href="#The_item_Element"><span class="tocnumber">8.3.2</span> <span class="toctext">The item Element</span></a></li>
<li class="toclevel-3"><a href="#The_value_Element_2"><span class="tocnumber">8.3.3</span> <span class="toctext">The value Element</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Container_Form_Controls"><span class="tocnumber">9</span> <span class="toctext">Container Form Controls</span></a>
<ul>
<li class="toclevel-2"><a href="#The_XForms_Group_Module"><span class="tocnumber">9.1</span> <span class="toctext">The XForms Group Module</span></a>
<ul>
<li class="toclevel-3"><a href="#The_group_Element"><span class="tocnumber">9.1.1</span> <span class="toctext">The group Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_XForms_Switch_Module"><span class="tocnumber">9.2</span> <span class="toctext">The XForms Switch Module</span></a>
<ul>
<li class="toclevel-3"><a href="#The_switch_Element"><span class="tocnumber">9.2.1</span> <span class="toctext">The switch Element</span></a></li>
<li class="toclevel-3"><a href="#The_case_Element"><span class="tocnumber">9.2.2</span> <span class="toctext">The case Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_XForms_Repeat_Module"><span class="tocnumber">9.3</span> <span class="toctext">The XForms Repeat Module</span></a>
<ul>
<li class="toclevel-3"><a href="#The_repeat_Element"><span class="tocnumber">9.3.1</span> <span class="toctext">The repeat Element</span></a></li>
<li class="toclevel-3"><a href="#Nested_Repeats"><span class="tocnumber">9.3.2</span> <span class="toctext">Nested Repeats</span></a></li>
<li class="toclevel-3"><a href="#Repeat_Processing"><span class="tocnumber">9.3.3</span> <span class="toctext">Repeat Processing</span></a></li>
<li class="toclevel-3"><a href="#User_Interface_Interaction"><span class="tocnumber">9.3.4</span> <span class="toctext">User Interface Interaction</span></a></li>
<li class="toclevel-3"><a href="#Creating_Repeating_Structures_Via_Attributes"><span class="tocnumber">9.3.5</span> <span class="toctext">Creating Repeating Structures Via Attributes</span></a></li>
<li class="toclevel-3"><a href="#The_itemset_Element"><span class="tocnumber">9.3.6</span> <span class="toctext">The itemset Element</span></a></li>
<li class="toclevel-3"><a href="#The_copy_Element"><span class="tocnumber">9.3.7</span> <span class="toctext">The copy Element</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Processing_Model"><span class="tocnumber">10</span> <span class="toctext">Processing Model</span></a>
<ul>
<li class="toclevel-2"><a href="#Events_Overview"><span class="tocnumber">10.1</span> <span class="toctext">Events Overview</span></a></li>
<li class="toclevel-2"><a href="#Initialization_Events"><span class="tocnumber">10.2</span> <span class="toctext">Initialization Events</span></a>
<ul>
<li class="toclevel-3"><a href="#The_xforms-model-construct_Event"><span class="tocnumber">10.2.1</span> <span class="toctext">The xforms-model-construct Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-model-construct-done_Event"><span class="tocnumber">10.2.2</span> <span class="toctext">The xforms-model-construct-done Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-ready_Event"><span class="tocnumber">10.2.3</span> <span class="toctext">The xforms-ready Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-model-destruct_Event"><span class="tocnumber">10.2.4</span> <span class="toctext">The xforms-model-destruct Event</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Interaction_Events"><span class="tocnumber">10.3</span> <span class="toctext">Interaction Events</span></a>
<ul>
<li class="toclevel-3"><a href="#The_xforms-rebuild_Event"><span class="tocnumber">10.3.1</span> <span class="toctext">The xforms-rebuild Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-recalculate_Event"><span class="tocnumber">10.3.2</span> <span class="toctext">The xforms-recalculate Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-revalidate_Event"><span class="tocnumber">10.3.3</span> <span class="toctext">The xforms-revalidate Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-refresh_Event"><span class="tocnumber">10.3.4</span> <span class="toctext">The xforms-refresh Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-reset_Event"><span class="tocnumber">10.3.5</span> <span class="toctext">The xforms-reset Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-next_and_xforms-previous_Events"><span class="tocnumber">10.3.6</span> <span class="toctext">The xforms-next and xforms-previous Events</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-focus_Event"><span class="tocnumber">10.3.7</span> <span class="toctext">The xforms-focus Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-help_and_xforms-hint_Events"><span class="tocnumber">10.3.8</span> <span class="toctext">The xforms-help and xforms-hint Events</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-submit_Event_2"><span class="tocnumber">10.3.9</span> <span class="toctext">The xforms-submit Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-submit-serialize_Event_2"><span class="tocnumber">10.3.10</span> <span class="toctext">The xforms-submit-serialize Event</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Notification_Events"><span class="tocnumber">10.4</span> <span class="toctext">Notification Events</span></a>
<ul>
<li class="toclevel-3"><a href="#The_xforms-insert_Event"><span class="tocnumber">10.4.1</span> <span class="toctext">The xforms-insert Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-delete_Event"><span class="tocnumber">10.4.2</span> <span class="toctext">The xforms-delete Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-value-changed_Event"><span class="tocnumber">10.4.3</span> <span class="toctext">The xforms-value-changed Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-valid_Event"><span class="tocnumber">10.4.4</span> <span class="toctext">The xforms-valid Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-invalid_Event"><span class="tocnumber">10.4.5</span> <span class="toctext">The xforms-invalid Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-readonly_Event"><span class="tocnumber">10.4.6</span> <span class="toctext">The xforms-readonly Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-readwrite_Event"><span class="tocnumber">10.4.7</span> <span class="toctext">The xforms-readwrite Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-required_Event"><span class="tocnumber">10.4.8</span> <span class="toctext">The xforms-required Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-optional_Event"><span class="tocnumber">10.4.9</span> <span class="toctext">The xforms-optional Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-enabled_Event"><span class="tocnumber">10.4.10</span> <span class="toctext">The xforms-enabled Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-disabled_Event"><span class="tocnumber">10.4.11</span> <span class="toctext">The xforms-disabled Event</span></a></li>
<li class="toclevel-3"><a href="#The_DOMActivate_Event"><span class="tocnumber">10.4.12</span> <span class="toctext">The DOMActivate Event</span></a></li>
<li class="toclevel-3"><a href="#The_DOMFocusIn_Event"><span class="tocnumber">10.4.13</span> <span class="toctext">The DOMFocusIn Event</span></a></li>
<li class="toclevel-3"><a href="#The_DOMFocusOut_Event"><span class="tocnumber">10.4.14</span> <span class="toctext">The DOMFocusOut Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-select_and_xforms-deselect_Events"><span class="tocnumber">10.4.15</span> <span class="toctext">The xforms-select and xforms-deselect Events</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-in-range_Event"><span class="tocnumber">10.4.16</span> <span class="toctext">The xforms-in-range Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-out-of-range_Event"><span class="tocnumber">10.4.17</span> <span class="toctext">The xforms-out-of-range Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-scroll-first_and_xforms-scroll-last_Events"><span class="tocnumber">10.4.18</span> <span class="toctext">The xforms-scroll-first and xforms-scroll-last Events</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-submit-done_Event_2"><span class="tocnumber">10.4.19</span> <span class="toctext">The xforms-submit-done Event</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Error_Indications"><span class="tocnumber">10.5</span> <span class="toctext">Error Indications</span></a>
<ul>
<li class="toclevel-3"><a href="#The_xforms-binding-exception_Event"><span class="tocnumber">10.5.1</span> <span class="toctext">The xforms-binding-exception Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-compute-exception_Event"><span class="tocnumber">10.5.2</span> <span class="toctext">The xforms-compute-exception Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-version-exception_Event"><span class="tocnumber">10.5.3</span> <span class="toctext">The xforms-version-exception Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-link-exception_Event"><span class="tocnumber">10.5.4</span> <span class="toctext">The xforms-link-exception Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-script-language-not-supported-exception_Event"><span class="tocnumber">10.5.5</span> <span class="toctext">The xforms-script-language-not-supported-exception Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-script-exception_Event"><span class="tocnumber">10.5.6</span> <span class="toctext">The xforms-script-exception Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-output-error_Event"><span class="tocnumber">10.5.7</span> <span class="toctext">The xforms-output-error Event</span></a></li>
<li class="toclevel-3"><a href="#The_xforms-submit-error_Event_2"><span class="tocnumber">10.5.8</span> <span class="toctext">The xforms-submit-error Event</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Event_Sequencing"><span class="tocnumber">10.6</span> <span class="toctext">Event Sequencing</span></a>
<ul>
<li class="toclevel-3"><a href="#For_input.2C_secret.2C_textarea.2C_range.2C_or_upload_Controls"><span class="tocnumber">10.6.1</span> <span class="toctext">For input, secret, textarea, range, or upload Controls</span></a></li>
<li class="toclevel-3"><a href="#For_output_Controls"><span class="tocnumber">10.6.2</span> <span class="toctext">For output Controls</span></a></li>
<li class="toclevel-3"><a href="#For_select_or_select1_Controls"><span class="tocnumber">10.6.3</span> <span class="toctext">For select or select1 Controls</span></a></li>
<li class="toclevel-3"><a href="#For_trigger_Controls"><span class="tocnumber">10.6.4</span> <span class="toctext">For trigger Controls</span></a></li>
<li class="toclevel-3"><a href="#For_submit_Controls"><span class="tocnumber">10.6.5</span> <span class="toctext">For submit Controls</span></a></li>
<li class="toclevel-3"><a href="#Sequence:_Selection_Without_Value_Change"><span class="tocnumber">10.6.6</span> <span class="toctext">Sequence: Selection Without Value Change</span></a></li>
<li class="toclevel-3"><a href="#Sequence:_Value_Change"><span class="tocnumber">10.6.7</span> <span class="toctext">Sequence: Value Change</span></a></li>
<li class="toclevel-3"><a href="#Sequence:_Activating_a_Trigger"><span class="tocnumber">10.6.8</span> <span class="toctext">Sequence: Activating a Trigger</span></a></li>
<li class="toclevel-3"><a href="#Sequence:_Submission"><span class="tocnumber">10.6.9</span> <span class="toctext">Sequence: Submission</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Resolving_ID_References_in_XForms"><span class="tocnumber">10.7</span> <span class="toctext">Resolving ID References in XForms</span></a>
<ul>
<li class="toclevel-3"><a href="#References_to_Elements_within_a_repeat_Element"><span class="tocnumber">10.7.1</span> <span class="toctext">References to Elements within a repeat Element</span></a></li>
<li class="toclevel-3"><a href="#References_to_Elements_within_a_bind_Element"><span class="tocnumber">10.7.2</span> <span class="toctext">References to Elements within a bind Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#DOM_Interface_for_Access_to_Instance_Data"><span class="tocnumber">10.8</span> <span class="toctext">DOM Interface for Access to Instance Data</span></a>
<ul>
<li class="toclevel-3"><a href="#The_getInstanceDocument.28.29_Method"><span class="tocnumber">10.8.1</span> <span class="toctext">The getInstanceDocument() Method</span></a></li>
<li class="toclevel-3"><a href="#The_rebuild.28.29_Method"><span class="tocnumber">10.8.2</span> <span class="toctext">The rebuild() Method</span></a></li>
<li class="toclevel-3"><a href="#The_recalculate.28.29_Method"><span class="tocnumber">10.8.3</span> <span class="toctext">The recalculate() Method</span></a></li>
<li class="toclevel-3"><a href="#The_revalidate.28.29_Method"><span class="tocnumber">10.8.4</span> <span class="toctext">The revalidate() Method</span></a></li>
<li class="toclevel-3"><a href="#The_refresh.28.29_Method"><span class="tocnumber">10.8.5</span> <span class="toctext">The refresh() Method</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Feature_string_for_the_hasFeature_method_call"><span class="tocnumber">10.9</span> <span class="toctext">Feature string for the hasFeature method call</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#XForms_Actions"><span class="tocnumber">11</span> <span class="toctext">XForms Actions</span></a>
<ul>
<li class="toclevel-2"><a href="#The_action_Element"><span class="tocnumber">11.1</span> <span class="toctext">The action Element</span></a></li>
<li class="toclevel-2"><a href="#The_setvalue_Element"><span class="tocnumber">11.2</span> <span class="toctext">The setvalue Element</span></a></li>
<li class="toclevel-2"><a href="#The_insert_Element"><span class="tocnumber">11.3</span> <span class="toctext">The insert Element</span></a></li>
<li class="toclevel-2"><a href="#The_delete_Element"><span class="tocnumber">11.4</span> <span class="toctext">The delete Element</span></a></li>
<li class="toclevel-2"><a href="#The_setindex_Element"><span class="tocnumber">11.5</span> <span class="toctext">The setindex Element</span></a></li>
<li class="toclevel-2"><a href="#The_toggle_Element"><span class="tocnumber">11.6</span> <span class="toctext">The toggle Element</span></a>
<ul>
<li class="toclevel-3"><a href="#The_case_Element_Child_of_the_toggle_Element"><span class="tocnumber">11.6.1</span> <span class="toctext">The case Element Child of the toggle Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_setfocus_Element"><span class="tocnumber">11.7</span> <span class="toctext">The setfocus Element</span></a>
<ul>
<li class="toclevel-3"><a href="#The_control_Element_Child_of_the_setfocus_Element"><span class="tocnumber">11.7.1</span> <span class="toctext">The control Element Child of the setfocus Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_dispatch_Element"><span class="tocnumber">11.8</span> <span class="toctext">The dispatch Element</span></a>
<ul>
<li class="toclevel-3"><a href="#The_name_Child_Element"><span class="tocnumber">11.8.1</span> <span class="toctext">The name Child Element</span></a></li>
<li class="toclevel-3"><a href="#The_targetid_Child_Element"><span class="tocnumber">11.8.2</span> <span class="toctext">The targetid Child Element</span></a></li>
<li class="toclevel-3"><a href="#The_delay_Child_Element"><span class="tocnumber">11.8.3</span> <span class="toctext">The delay Child Element</span></a></li>
<li class="toclevel-3"><a href="#The_property_Child_Element"><span class="tocnumber">11.8.4</span> <span class="toctext">The property Child Element</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_rebuild_Element"><span class="tocnumber">11.9</span> <span class="toctext">The rebuild Element</span></a></li>
<li class="toclevel-2"><a href="#The_recalculate_Element"><span class="tocnumber">11.10</span> <span class="toctext">The recalculate Element</span></a></li>
<li class="toclevel-2"><a href="#The_revalidate_Element"><span class="tocnumber">11.11</span> <span class="toctext">The revalidate Element</span></a></li>
<li class="toclevel-2"><a href="#The_refresh_Element"><span class="tocnumber">11.12</span> <span class="toctext">The refresh Element</span></a></li>
<li class="toclevel-2"><a href="#The_reset_Element"><span class="tocnumber">11.13</span> <span class="toctext">The reset Element</span></a></li>
<li class="toclevel-2"><a href="#The_load_Element"><span class="tocnumber">11.14</span> <span class="toctext">The load Element</span></a>
<ul>
<li class="toclevel-3"><a href="#The_resource_Element_child_of_load"><span class="tocnumber">11.14.1</span> <span class="toctext">The resource Element child of load</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_unload_Element"><span class="tocnumber">11.15</span> <span class="toctext">The unload Element</span></a></li>
<li class="toclevel-2"><a href="#The_send_Element"><span class="tocnumber">11.16</span> <span class="toctext">The send Element</span></a></li>
<li class="toclevel-2"><a href="#The_message_Element"><span class="tocnumber">11.17</span> <span class="toctext">The message Element</span></a>
<ul>
<li class="toclevel-3"><a href="#Modal_messages"><span class="tocnumber">11.17.1</span> <span class="toctext">Modal messages</span></a></li>
<li class="toclevel-3"><a href="#Modeless_messages"><span class="tocnumber">11.17.2</span> <span class="toctext">Modeless messages</span></a></li>
<li class="toclevel-3"><a href="#Ephemeral_messages"><span class="tocnumber">11.17.3</span> <span class="toctext">Ephemeral messages</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#The_script_Element"><span class="tocnumber">11.18</span> <span class="toctext">The script Element</span></a></li>
<li class="toclevel-2"><a href="#Conditional_Execution_of_XForms_Actions"><span class="tocnumber">11.19</span> <span class="toctext">Conditional Execution of XForms Actions</span></a></li>
<li class="toclevel-2"><a href="#The_while_attribute"><span class="tocnumber">11.20</span> <span class="toctext">The while attribute</span></a></li>
<li class="toclevel-2"><a href="#The_iterate_attribute"><span class="tocnumber">11.21</span> <span class="toctext">The iterate attribute</span></a></li>
<li class="toclevel-2"><a href="#Actions_from_Other_Modules"><span class="tocnumber">11.22</span> <span class="toctext">Actions from Other Modules</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Conformance"><span class="tocnumber">12</span> <span class="toctext">Conformance</span></a>
<ul>
<li class="toclevel-2"><a href="#Conforming_XForms_Documents"><span class="tocnumber">12.1</span> <span class="toctext">Conforming XForms Documents</span></a></li>
<li class="toclevel-2"><a href="#Conforming_XForms_Generators"><span class="tocnumber">12.2</span> <span class="toctext">Conforming XForms Generators</span></a></li>
<li class="toclevel-2"><a href="#Base_Technologies_for_XForms_Processors"><span class="tocnumber">12.3</span> <span class="toctext">Base Technologies for XForms Processors</span></a></li>
<li class="toclevel-2"><a href="#Conformance_Levels"><span class="tocnumber">12.4</span> <span class="toctext">Conformance Levels</span></a>
<ul>
<li class="toclevel-3"><a href="#XForms_Model"><span class="tocnumber">12.4.1</span> <span class="toctext">XForms Model</span></a></li>
<li class="toclevel-3"><a href="#XForms_Full"><span class="tocnumber">12.4.2</span> <span class="toctext">XForms Full</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Glossary_Of_Terms"><span class="tocnumber">13</span> <span class="toctext">Glossary Of Terms</span></a></li>
<li class="toclevel-1"><a href="#References"><span class="tocnumber">14</span> <span class="toctext">References</span></a>
<ul>
<li class="toclevel-2"><a href="#Normative_References"><span class="tocnumber">14.1</span> <span class="toctext">Normative References</span></a></li>
<li class="toclevel-2"><a href="#Informative_References"><span class="tocnumber">14.2</span> <span class="toctext">Informative References</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Patterns_for_Data_Mutations"><span class="tocnumber">15</span> <span class="toctext">Patterns for Data Mutations</span></a>
<ul>
<li class="toclevel-2"><a href="#Prepend_Element_Copy"><span class="tocnumber">15.1</span> <span class="toctext">Prepend Element Copy</span></a></li>
<li class="toclevel-2"><a href="#Append_Element_Copy"><span class="tocnumber">15.2</span> <span class="toctext">Append Element Copy</span></a></li>
<li class="toclevel-2"><a href="#Duplicate_Element"><span class="tocnumber">15.3</span> <span class="toctext">Duplicate Element</span></a></li>
<li class="toclevel-2"><a href="#Set_Attribute"><span class="tocnumber">15.4</span> <span class="toctext">Set Attribute</span></a></li>
<li class="toclevel-2"><a href="#Remove_Element"><span class="tocnumber">15.5</span> <span class="toctext">Remove Element</span></a></li>
<li class="toclevel-2"><a href="#Remove_Attribute"><span class="tocnumber">15.6</span> <span class="toctext">Remove Attribute</span></a></li>
<li class="toclevel-2"><a href="#Remove_Nodeset"><span class="tocnumber">15.7</span> <span class="toctext">Remove Nodeset</span></a></li>
<li class="toclevel-2"><a href="#Copy_Nodeset"><span class="tocnumber">15.8</span> <span class="toctext">Copy Nodeset</span></a></li>
<li class="toclevel-2"><a href="#Copy_Attribute_List"><span class="tocnumber">15.9</span> <span class="toctext">Copy Attribute List</span></a></li>
<li class="toclevel-2"><a href="#Replace_Element"><span class="tocnumber">15.10</span> <span class="toctext">Replace Element</span></a></li>
<li class="toclevel-2"><a href="#Replace_Attribute"><span class="tocnumber">15.11</span> <span class="toctext">Replace Attribute</span></a></li>
<li class="toclevel-2"><a href="#Replace_Instance_with_Insert"><span class="tocnumber">15.12</span> <span class="toctext">Replace Instance with Insert</span></a></li>
<li class="toclevel-2"><a href="#Move_Element"><span class="tocnumber">15.13</span> <span class="toctext">Move Element</span></a></li>
<li class="toclevel-2"><a href="#Move_Attribute"><span class="tocnumber">15.14</span> <span class="toctext">Move Attribute</span></a></li>
<li class="toclevel-2"><a href="#Insert_Element_into_Non-Contiguous.2C_Heterogeneous_Nodeset"><span class="tocnumber">15.15</span> <span class="toctext">Insert Element into Non-Contiguous, Heterogeneous Nodeset</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Recalculation_Sequence_Algorithm"><span class="tocnumber">16</span> <span class="toctext">Recalculation Sequence Algorithm</span></a>
<ul>
<li class="toclevel-2"><a href="#Details_on_Creating_the_Master_Dependency_Directed_Graph"><span class="tocnumber">16.1</span> <span class="toctext">Details on Creating the Master Dependency Directed Graph</span></a></li>
<li class="toclevel-2"><a href="#Details_on_Creating_the_Pertinent_Dependency_Subgraph"><span class="tocnumber">16.2</span> <span class="toctext">Details on Creating the Pertinent Dependency Subgraph</span></a></li>
<li class="toclevel-2"><a href="#Details_on_Computing_Individual_Vertices"><span class="tocnumber">16.3</span> <span class="toctext">Details on Computing Individual Vertices</span></a></li>
<li class="toclevel-2"><a href="#Example_of_Calculation_Processing"><span class="tocnumber">16.4</span> <span class="toctext">Example of Calculation Processing</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Privacy_Considerations"><span class="tocnumber">17</span> <span class="toctext">Privacy Considerations</span></a>
<ul>
<li class="toclevel-2"><a href="#Using_P3P_with_XForms"><span class="tocnumber">17.1</span> <span class="toctext">Using P3P with XForms</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Input_Modes_.28Non-Normative.29"><span class="tocnumber">18</span> <span class="toctext">Input Modes (Non-Normative)</span></a>
<ul>
<li class="toclevel-2"><a href="#inputmode_Attribute_Value_Syntax"><span class="tocnumber">18.1</span> <span class="toctext">inputmode Attribute Value Syntax</span></a></li>
<li class="toclevel-2"><a href="#User_Agent_Behavior"><span class="tocnumber">18.2</span> <span class="toctext">User Agent Behavior</span></a></li>
<li class="toclevel-2"><a href="#List_of_Tokens"><span class="tocnumber">18.3</span> <span class="toctext">List of Tokens</span></a>
<ul>
<li class="toclevel-3"><a href="#Script_Tokens"><span class="tocnumber">18.3.1</span> <span class="toctext">Script Tokens</span></a></li>
<li class="toclevel-3"><a href="#Modifier_Tokens"><span class="tocnumber">18.3.2</span> <span class="toctext">Modifier Tokens</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Relationship_to_XML_Schema_pattern_facets"><span class="tocnumber">18.4</span> <span class="toctext">Relationship to XML Schema pattern facets</span></a></li>
<li class="toclevel-2"><a href="#Examples"><span class="tocnumber">18.5</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Schema_for_XForms_.28Non-Normative.29"><span class="tocnumber">19</span> <span class="toctext">Schema for XForms (Non-Normative)</span></a>
<ul>
<li class="toclevel-2"><a href="#Schema_for_XML_Events"><span class="tocnumber">19.1</span> <span class="toctext">Schema for XML Events</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#XForms_and_Styling_.28Non-Normative.29"><span class="tocnumber">20</span> <span class="toctext">XForms and Styling (Non-Normative)</span></a>
<ul>
<li class="toclevel-2"><a href="#Pseudo-classes"><span class="tocnumber">20.1</span> <span class="toctext">Pseudo-classes</span></a></li>
<li class="toclevel-2"><a href="#Pseudo-elements"><span class="tocnumber">20.2</span> <span class="toctext">Pseudo-elements</span></a></li>
<li class="toclevel-2"><a href="#Examples_2"><span class="tocnumber">20.3</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Complete_XForms_Examples_.28Non-Normative.29"><span class="tocnumber">21</span> <span class="toctext">Complete XForms Examples (Non-Normative)</span></a>
<ul>
<li class="toclevel-2"><a href="#XForms_in_XHTML"><span class="tocnumber">21.1</span> <span class="toctext">XForms in XHTML</span></a></li>
<li class="toclevel-2"><a href="#Editing_Hierarchical_Bookmarks_Using_XForms"><span class="tocnumber">21.2</span> <span class="toctext">Editing Hierarchical Bookmarks Using XForms</span></a></li>
<li class="toclevel-2"><a href="#Survey_Using_XForms_and_SVG"><span class="tocnumber">21.3</span> <span class="toctext">Survey Using XForms and SVG</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Acknowledgements_.28Non-Normative.29"><span class="tocnumber">22</span> <span class="toctext">Acknowledgements (Non-Normative)</span></a></li>
<li class="toclevel-1"><a href="#Production_Notes_.28Non-Normative.29"><span class="tocnumber">23</span> <span class="toctext">Production Notes (Non-Normative)</span></a></li>
</ul>
</td></tr></tbody></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a id="About_the_XForms_Specification" name="About_the_XForms_Specification"></a><h2> <span class="mw-headline">1 <span id="intro">About the XForms Specification</span></span></h2>
<div class="div2">
<a id="Background" name="Background"></a><h3> <span class="mw-headline">1.1 <span id="intro-background">Background</span></span></h3>
<p>Forms are an important part of the Web, and they continue to be the primary means for enabling interactive Web applications. Web applications and electronic commerce solutions have sparked the demand for better Web forms with richer interactions. XForms is the response to this demand, and provides a new platform-independent markup language for online interaction between a person (through an <a href="#def-xforms-processor" title="">XForms Processor</a>) and another, usually remote, agent. XForms are the successor to HTML forms, and benefit from the lessons learned from HTML forms.
</p><p>Further background information on XForms can be found at <a class="external text" href="http://www.w3.org/MarkUp/Forms/" rel="nofollow" title="http://www.w3.org/MarkUp/Forms/">http://www.w3.org/MarkUp/Forms</a>.
</p>
</div><div class="div2">
<a id="Reading_the_Specification" name="Reading_the_Specification"></a><h3> <span class="mw-headline">1.2 <span id="intro-reading">Reading the Specification</span></span></h3>
<p>This specification has been written with various types of readers in mind, in particular XForms authors and XForms implementors. We hope the specification will provide authors with the tools they need to write efficient, attractive and accessible documents without overexposing them to the XForms implementation details. Implementors, however, should find all they need to build conforming XForms Processors. The specification begins with a general presentation of XForms before specifying the technical details of the various XForms components.
</p><p>The specification has been written with various modes of presentation in mind. In case of a discrepancy, the online electronic version is considered the authoritative version of the document.
</p><p>With regard to implementing behaviors defined for XForms content herein, this document uses the terms <b>must</b>, <b>must not</b>, <b>required</b>, <b>shall</b>, <b>shall not</b>, <b>recommended</b>, <b>should</b>, <b>should not</b>, <b>may</b>, and <b>optional</b> in accord with [<a href="#ref-rfc-2119" title="">RFC 2119</a>]. Generally, the elements, attributes, functions and behaviors of XForms content defined in this specification are required to implement unless explicitly specified otherwise. The term <b>author-optional</b>, when applied to a content item such as an element, attribute, or function parameter, indicates to form authors that they may omit the content item and obtain the default behavior. The term author-optional is orthogonal to the conformance status (required, recommended, or optional) of the content item.
</p>
</div><div class="div2">
<a id="How_the_Specification_is_Organized" name="How_the_Specification_is_Organized"></a><h3> <span class="mw-headline">1.3 <span id="intro-org">How the Specification is Organized</span></span></h3>
<p>The specification is organized into the following chapters:
</p>
<dl><dt> Chapters 1 and 2
</dt><dd> An introduction to XForms. The introduction outlines the design principles and includes a brief tutorial on XForms.
</dd><dt> Chapters 3 and up
</dt><dd> XForms reference manual. The bulk of the reference manual consists of the specification of XForms. This reference defines XForms and how XForms Processors must interpret the various components in order to claim conformance.
</dd><dt> Appendixes
</dt><dd> Appendixes contain an XML Schema description of XForms, references, examples, and other useful information.
</dd></dl>
</div><div class="div2">
<a id="Documentation_Conventions" name="Documentation_Conventions"></a><h3> <span class="mw-headline">1.4 <span id="intro-conventions">Documentation Conventions</span></span></h3>
<p>Throughout this document, the following namespace prefixes and corresponding namespace identifiers are used:
</p>
<blockquote>

<b>xforms:</b> The XForms namespace, e.g. <code><a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a></code> (see <a href="#Namespace_for_XForms" title="">Namespace for XForms</a>)<br /><b>html:</b> An XHTML namespace, e.g. <code><a class="external free" href="http://www.w3.org/1999/xhtml" rel="nofollow" title="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</a></code> (see [<a href="#ref-xhtml-1.0" title="">XHTML 1.0</a>])<br /><b>xs:</b> The XML Schema namespace <code><a class="external free" href="http://www.w3.org/2001/XMLSchema" rel="nofollow" title="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a></code> (see [<a href="#ref-xschema-1" title="">XML Schema part 1</a>])<br /><b>xsd:</b> The XML Schema namespace <code><a class="external free" href="http://www.w3.org/2001/XMLSchema" rel="nofollow" title="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a></code> (see [<a href="#ref-xschema-2" title="">XML Schema part 2</a>])<br /><b>xsi:</b> The XML Schema for instances namespace <code><a class="external free" href="http://www.w3.org/2001/XMLSchema-instance" rel="nofollow" title="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a></code> (see [<a href="#ref-xschema-1" title="">XML Schema part 1</a>])<br /><b>ev:</b> The XML Events namespace <code><a class="external free" href="http://www.w3.org/2001/xml-events" rel="nofollow" title="http://www.w3.org/2001/xml-events">http://www.w3.org/2001/xml-events</a></code> (see [<a href="#ref-xml-events" title="">XML Events</a>])<br /><b>my:</b> Any user defined namespace

</blockquote>
<p>This is only a convention; any namespace prefix may be used in practice.
</p><p>The following typographical conventions are used to present technical material in this document.
</p><p>Official terms are defined in the following manner: [Definition: You can find most <b>terms</b> in chapter <a href="#Glossary_Of_Terms" title="">Glossary Of Terms</a>]. Links to <b>term</b>s may be specially highlighted where necessary.
</p><p>The XML representations of various elements within XForms are presented using the syntax for Abstract Modules in XHTML Modularization [<a href="#ref-xhtml-mod" title="">XHTML Modularization</a>].
</p><p>Examples are set off typographically:
</p>
<div class="exampleOuter"><div class="exampleHead">Example item</div><div class="exampleInner">
<pre>Example Item
</pre>
</div></div>
<p>References to external documents appear as follows: [<a href="#ref-example" title="">Sample Reference</a>] with links to the references section of this document.
</p>
<dl><dt> <a name="ref-example" id="ref-example"></a>Sample Reference
</dt><dd> <cite>Reference</cite> - linked to from above.
</dd></dl>
<p>The following typesetting convention is used for additional commentary:
</p>
<div class="note">
<p><b>Note:</b>
</p><p>A gentle explanation to readers.
</p>
</div>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Editorial Note Name">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Editorial Note Name</b>
</td><td align="right" valign="top" width="50%"> 2011-08-31
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> Editorial commentary, not intended for final publication.
</td></tr></tbody></table>
<div class="issue">
<p><b>Issue (sample-implementation-issue):</b>
</p><p><b>Issue-Name</b>
</p><p>A specific issue for which input from implementors is requested, for example as part of the Candidate Recommendation phase.
</p><p><b>Resolution:</b>
</p><p>None recorded.
</p>
</div></div><div class="div2">
<a id="Differences_between_XForms_2.0_and_XForms_1.1" name="Differences_between_XForms_2.0_and_XForms_1.1"></a><h3> <span class="mw-headline">1.5 <span id="intro-diffs">Differences between XForms 2.0 and XForms 1.1</span></span></h3>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Complete list">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Complete list</b>
</td><td align="right" valign="top" width="50%"> 2011-08-31
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> Complete list of differences below
</td></tr></tbody></table>
<ul><li> Custom functions
</li><li> Variable support
</li><li> repeat over sequences of atomic values and nodes (doesn't need to be in document order, same node can occur multiple times)
</li><li> Pluggable expression language (XPath 2.0 module)
</li><li> json, csv and other external instance data formats
</li><li> @nodeset is deprecated in favour of @ref
</li><li> p3ptype is deprecated
</li><li> repeat @indexref
</li><li> Multiple MIPs of the same property allowed on one node.
</li><li> @iterate
</li><li> model-based switch&nbsp;: @caseref
</li><li> Attribute Value Template support
</li><li> script action
</li><li> property child of dispatch element
</li></ul>
<a id="Introduction_to_XForms" name="Introduction_to_XForms"></a><h2> <span class="mw-headline">2 Introduction to XForms</span></h2>
<p>XForms has been designed on the basis of several years' experience with HTML forms. HTML forms have formed the backbone of the e-commerce revolution, and having shown their worth, have also indicated numerous ways they could be improved.
</p><p>The primary difference when comparing XForms with HTML forms, apart from XForms being in XML, is the separation of the data being collected from the markup of the controls collecting the individual values. By doing this, it not only makes XForms more tractable by making it clear what is being submitted where, it also eases reuse of forms, since the underlying essential part of a Form is no longer irretrievably bound to the page it is used in.
</p><p>A second major difference is that XForms, while designed to be integrated into XHTML, is no longer restricted only to be a part of that language, but may be integrated into any suitable markup language.
</p><p>XForms has striven to improve authoring, reuse, internationalization, accessibility, usability, and device independence. Here is a summary of the primary benefits of using XForms:
</p>
<dl><dt> Strong typing
</dt><dd> Submitted data is strongly typed and can be checked using off-the-shelf tools. This speeds up form filling since it reduces the need for round trips to the server for validation.
</dd><dt> XML submission
</dt><dd> This obviates the need for custom server-side logic to marshal the submitted data to the application back-end. The received XML instance document can be directly validated and processed by the application back-end.
</dd><dt> Existing schema re-use
</dt><dd> This obviates duplication, and ensures that updating the validation rules as a result of a change in the underlying business logic does not require re-authoring validation constraints within the XForms application.
</dd><dt> External schema augmentation
</dt><dd> This enables the XForms author to go beyond the basic set of constraints available from the back-end. Providing such additional constraints as part of the XForms Model enhances the overall usability of the resulting Web application.
</dd><dt> Internationalization
</dt><dd> Using XML 1.0 for instance data ensures that the submitted data is internationalization ready.
</dd><dt> Enhanced accessibility
</dt><dd> XForms separates content and presentation. User interface controls encapsulate all relevant metadata such as labels, thereby enhancing accessibility of the application when using different modalities. XForms user interface controls are generic and suited for device-independence.
</dd><dt> Multiple device support
</dt><dd> The high-level nature of the user interface controls, and the consequent intent-based authoring of the user interface makes it possible to re-target the user interaction to different devices.
</dd><dt> Less use of scripting
</dt><dd> By defining XML-based declarative event handlers that cover common use cases, the majority of XForms documents can be statically analyzed, reducing the need for imperative scripts for event handlers.
</dd></dl>
<div class="div2">
<a id="An_Example" name="An_Example"></a><h3> <span class="mw-headline">2.1 <span id="concepts-xhtml">An Example</span></span></h3>
<p>In the XForms approach, forms are comprised of a section that describes what the form does, called the <a href="#def-xforms-model" title="">XForms Model</a>, and another section that describes how the form is to be presented.
</p><p>Consider a simple electronic commerce form that might be rendered as follows:
</p><p><img alt="screen shot of a graphic rendering" border="0" height="121" src="images/concepts-xhtml.png" width="345" />
</p><p>It is clear that we are collecting a value that represents whether cash or a credit card is being used, and if a credit card, its number and expiration date.
</p><p>This can be represented in the XForms <code>model</code> element, which in XHTML would typically be contained within the <code>head</code> section:
</p>
<div class="exampleOuter"><div class="exampleInner">
<pre>&lt;model&gt;
  &lt;instance&gt;
    &lt;ecommerce xmlns=""&gt;
      &lt;method/&gt;
      &lt;number/&gt;
      &lt;expiry/&gt;
    &lt;/ecommerce&gt;
  &lt;/instance&gt;
  &lt;submission action="http://example.com/submit" method="post" id="submit" includenamespaceprefixes=""/&gt;
&lt;/model&gt;
</pre>
</div></div>
<p>This simply says that we are collecting three pieces of information (note that we have as yet not said anything about their types), and that they will be submitted using the URL in the <code>action</code> attribute.
</p><p>XForms defines a device-neutral, platform-independent set of <a href="#def-form-control" title="">form controls</a> suitable for general-purpose use. The controls are <i>bound</i> to the XForms Model via the XForms binding mechanism, in this simple case using the <code>ref</code> attribute on the controls. In XHTML, this markup would typically appear within the <code>body</code> section (note that we have intentionally defaulted the XForms namespace prefix here):
</p>
<div class="exampleOuter"><div class="exampleInner">
<pre>&lt;select1 ref="method"&gt;
  &lt;label&gt;Select Payment Method:&lt;/label&gt;
  &lt;item&gt;
    &lt;label&gt;Cash&lt;/label&gt;
    &lt;value&gt;cash&lt;/value&gt;
  &lt;/item&gt;
  &lt;item&gt;
    &lt;label&gt;Credit&lt;/label&gt;
    &lt;value&gt;cc&lt;/value&gt;
  &lt;/item&gt;
&lt;/select1&gt;
&lt;input ref="number"&gt;
  &lt;label&gt;Credit Card Number:&lt;/label&gt;
&lt;/input&gt;
&lt;input ref="expiry"&gt;
  &lt;label&gt;Expiration Date:&lt;/label&gt;
&lt;/input&gt;
&lt;submit submission="submit"&gt;
  &lt;label&gt;Submit&lt;/label&gt;
&lt;/submit&gt;
</pre>
</div></div>
<p>Notice the following features of this design:
</p>
<ul><li> The user interface is not hard-coded to use radio buttons. Different devices (such as voice browsers) can render the concept of "select one" as appropriate.
</li><li> <a href="#Core_Form_Controls" title="">Core form controls</a> always have labels directly associated with them as child elements &mdash; this is a key feature designed to enhance accessibility.
</li><li> There is no need for an enclosing <code>form</code> element, as in HTML. (See <a href="#Multiple_Forms_per_Document" title="">Multiple Forms per Document</a> for details on how to author multiple forms per document)
</li><li> Markup for specifying form controls has been simplified in comparison with HTML forms.
</li></ul>
<p>The fact that you can bind form controls to the model like this simplifies integrating XForms into other <a href="#def-host-language" title="">host languages</a>, since any form control markup may be used to bind to the model.
</p>
</div><div class="div2">
<a id="Providing_XML_Instance_Data" name="Providing_XML_Instance_Data"></a><h3> <span class="mw-headline">2.2 <span id="concepts-xml-instance-data">Providing XML Instance Data</span></span></h3>
<p>The <a href="#def-xforms-processor" title="">XForms Processor</a> can directly submit the data collected as XML. In the example, the submitted data would look like this:
</p>
<div class="exampleOuter"><div class="exampleHead">Submitted Data</div><div class="exampleInner">
<pre>&lt;ecommerce&gt;
  &lt;method&gt;cc&lt;/method&gt;
  &lt;number&gt;1235467789012345&lt;/number&gt;
  &lt;expiry&gt;2001-08&lt;/expiry&gt;
&lt;/ecommerce&gt;
</pre>
</div></div>
<p>XForms processing keeps track of the state of the partially filled form through this <a href="#def-instance-data" title="">instance data</a>. Initial values for the instance data may be provided or left empty as in the example. Element <code>instance</code> essentially holds a skeleton XML document that gets updated as the user fills out the form. It gives the author full control on the structure of the submitted XML data, including namespace information. When the form is submitted, the instance data is serialized as an XML document. Here is an alternative version of the earlier example:
</p>
<div class="exampleOuter"><div class="exampleHead">Model</div><div class="exampleInner">
<pre>&lt;model&gt;
  &lt;instance&gt;
    &lt;payment method="cc" xmlns="http://commerce.example.com/payment"&gt;
      &lt;number/&gt;
      &lt;expiry/&gt;
    &lt;/payment&gt;
  &lt;/instance&gt;
  &lt;submission action="http://example.com/submit" method="post" includenamespaceprefixes="#default"/&gt;
&lt;/model&gt;
</pre>
</div></div>
<p>In this case the submitted data would look like this:
</p>
<div class="exampleOuter"><div class="exampleHead">Submitted Data</div><div class="exampleInner">
<pre>&lt;payment method="cc" xmlns="http://commerce.example.com/payment"&gt;
  &lt;number&gt;1235467789012345&lt;/number&gt;
  &lt;expiry&gt;2001-08&lt;/expiry&gt;
&lt;/payment&gt;
</pre>
</div></div>
<p>This design has features worth calling out:
</p>
<ul><li> There is complete flexibility in the structure of the XML instance data, including the use of attributes. Notice that XML namespaces are used, and that a wrapper element of the author's choosing contains the instance data.
</li><li> Empty elements <code>number</code> and <code>expiry</code> serve as place-holders in the XML structure, and will be filled in with form data provided by the user.
</li><li> An initial value (<code>"cc"</code>) for the form control is provided through the instance data, in this case an attribute <code>method</code>. In the submitted XML, this initial value will be replaced by the user input, if the user changes the form control displaying that data.
</li></ul>
<p>To connect this instance data with form controls, the <code>ref</code> attributes on the form controls need to be changed to point to the proper part of the instance data, using <a href="#def-binding-expression" title="">binding expressions</a>:
</p>
<div class="exampleOuter"><div class="exampleHead">Binding Form Controls to Instance Nodes with <code>ref</code></div><div class="exampleInner">
<pre>... xmlns:my="http://commerce.example.com/payment"
  ...
  &lt;select1 ref="@method"&gt;...&lt;/select1&gt;
  ...
  &lt;input ref="my:number"&gt;...&lt;/input&gt;
  ...
  &lt;input ref="/my:payment/my:expiry"&gt;...&lt;/input&gt;
</pre>
</div></div>
<p>Binding expressions are based on XPath [<a href="#ref-xpath-1.0" title="">XPath 1.0</a>], including the use of the <code>@</code> character to refer to attributes, as seen here. Note that for illustrative purposes, the first two expressions make use of the XPath context node, which defaults to the top-level element (here <code>my:payment</code>). The third expression shows an absolute path.
</p>
</div><div class="div2">
<a id="Constraining_Values" name="Constraining_Values"></a><h3> <span class="mw-headline">2.3 <span id="concepts-model">Constraining Values</span></span></h3>
<p>XForms allows data to be checked for validity as the form is being filled. In the absence of specific information about the types of values being collected, all values are returned as strings, but it is possible to assign types to values in the instance data. In this example, <code>number</code> should accept digits only, and should have between 14 and 18 digits and <code>expiry</code> should accept only valid month/date combinations.
</p><p>Furthermore, the credit card information form controls for <code>number</code> and <code>expiry</code> are only relevant if the <code>"cc"</code> option is chosen for <code>method</code>, but are required in that case.
</p><p>By specifying an additional component, <a href="#def-model-item-property" title="">model item properties</a>, authors can include rich declarative validation information in forms. Such information can be taken from XML Schemas as well as XForms-specific additions, such as <code>relevant</code>. Such properties appear on <code>bind</code> elements, while <a href="#def-schema-constraint" title="">Schema constraints</a> are expressed in an XML Schema fragment, either inline or external. For example:
</p>
<div class="exampleOuter"><div class="exampleHead">Declarative Validation with Model Item Properties</div><div class="exampleInner">
<pre>... xmlns:my="http://commerce.example.com/payment"...

  &lt;model&gt;
    ...
    &lt;bind ref="/my:payment/my:number"
 	   relevant="/my:payment/@method = 'cc'"
	   required="true()"
	   type="my:ccnumber"/&gt;

    &lt;bind ref="/my:payment/my:expiry"
	   relevant="/my:payment/@method = 'cc'"
	   required="true()"
	   type="xsd:gYearMonth"/&gt;

    &lt;xs:schema ...&gt;
      ...
      &lt;xs:simpleType name="ccnumber"&gt;
	&lt;xs:restriction base="xsd:string"&gt;
	  &lt;xs:pattern value="\d{14,18}"/&gt;
	&lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
      ...
    &lt;/xs:schema&gt;
  &lt;/model&gt;
</pre>
</div></div><div class="note">
<p><b>Note:</b>
</p><p>In the above example, the <code>relevant</code> expression uses absolute XPath notation (beginning with <code>/</code>) because the evaluation context nodes for <a href="#def-computed-expression" title="">computed expressions</a> are determined by the <a href="#def-binding-expression" title="">binding expression</a> (see <a href="#Evaluation_Context" title="">Evaluation Context</a>), and so any relative node path in the first <code>bind</code> <code>relevant</code> above would be relative to <code>/my:payment/my:number</code>
</p>
</div></div><div class="div2">
<a id="Multiple_Forms_per_Document" name="Multiple_Forms_per_Document"></a><h3> <span class="mw-headline">2.4 <span id="concepts-multiple">Multiple Forms per Document</span></span></h3>
<p>XForms processing places no limits on the number of individual forms that can be placed in a single <a href="#def-containing-document" title="">containing document</a>. When a single document contains multiple forms, each form needs a separate <code>model</code> element, each with an <code>id</code> attribute so that they can be referenced from elsewhere in the containing document.
</p><p>In addition, form controls should specify which <code>model</code> element contains the instance data to which they bind. This is accomplished through a <code>model</code> attribute that is part of the binding attributes. If no <code>model</code> attribute is specified on the binding element, the nearest ancestor binding element's <code>model</code> attribute is used, and failing that, the first XForms Model in document order is used. This technique is called 'scoped resolution', and is used frequently in XForms.
</p><p>The next example adds an opinion poll to our electronic commerce form.
</p>
<div class="exampleOuter"><div class="exampleHead">Adding a <code>poll</code> model</div><div class="exampleInner">
<pre>&lt;model&gt;
  &lt;instance&gt;
    ...payment instance data...
  &lt;/instance&gt;
  &lt;submission action="http://example.com/submit" method="post"/&gt;
&lt;/model&gt;

&lt;model id="poll"&gt;
  &lt;instance&gt;
    &lt;helpful xmlns=""/&gt;
  &lt;/instance&gt;
  &lt;submission id="pollsubmit" .../&gt;
&lt;/model&gt;
</pre>
</div></div>
<p>Additionally, the following markup would appear in the body section of the document:
</p>
<div class="exampleOuter"><div class="exampleHead">Form Controls for <code>poll</code> model</div><div class="exampleInner">
<pre>&lt;select1 ref="/helpful" model="poll"&gt;
  &lt;label&gt;How useful is this page to you?&lt;/label&gt;
  &lt;item&gt;
    &lt;label&gt;Not at all helpful&lt;/label&gt;
    &lt;value&gt;0&lt;/value&gt;
  &lt;/item&gt;
  &lt;item&gt;
    &lt;label&gt;Barely helpful&lt;/label&gt;
    &lt;value&gt;1&lt;/value&gt;
  &lt;/item&gt;
  &lt;item&gt;
    &lt;label&gt;Somewhat helpful&lt;/label&gt;
    &lt;value&gt;2&lt;/value&gt;
  &lt;/item&gt;
  &lt;item&gt;
    &lt;label&gt;Very helpful&lt;/label&gt;
    &lt;value&gt;3&lt;/value&gt;
  &lt;/item&gt;
&lt;/select1&gt;

&lt;submit submission="pollsubmit"&gt;
  &lt;label&gt;Submit&lt;/label&gt;
&lt;/submit&gt;
</pre>
</div></div>
<p>The main difference here is the use of <code>model="poll"</code>, which identifies the instance. Note that <code>submit</code> refers to the <code>submission</code> element by ID and does not require binding attributes.
</p><p>More XForms examples can be found in <a href="#Complete_XForms_Examples_.28Non-Normative.29" title="">Complete XForms Examples</a>.
</p>
</div></div>
<p><br />
</p>
<div class="div1">
<a id="Document_Structure" name="Document_Structure"></a><h2> <span class="mw-headline">3 <span id="structure">Document Structure</span></span></h2>
<p>XForms is an application of XML [<a href="#ref-xml-1.0" title="">XML 1.0</a>] and has been designed for use within other XML vocabularies, in particular within versions of XHTML [<a href="#ref-xhtml-1.0" title="">XHTML 1.0</a>]. XForms always requires such a <a href="#def-host-language" title="">host language</a>. This chapter discusses the structure of XForms that allow XForms to be used with other document types.
</p>
<div class="div2">
<a id="Namespace_for_XForms" name="Namespace_for_XForms"></a><h3> <span class="mw-headline">3.1 <span id="structure-namespace">Namespace for XForms</span></span></h3>
<p>The namespace URI for XForms is <code><a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a></code>. The XForms schema has the target namespace specified and as such is compatible with the XForms 1.0 definition.
</p>
<div class="exampleOuter"><div class="exampleHead">XForms used in combination with XHTML 1.0</div><div class="exampleInner">
<pre>&lt;switch xmlns="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>"&gt;
  &lt;case id="in" selected="true"&gt;
    &lt;input ref="yourname"&gt;
      &lt;label&gt;Please tell me your name&lt;/label&gt;
      &lt;toggle ev:event="DOMActivate" case="out"/&gt;
    &lt;/input&gt;
  &lt;/case&gt;
  &lt;case id="out" selected="false"&gt;
    &lt;html:p&gt;Hello &lt;output ref="yourname" /&gt;
      &lt;trigger id="editButton"&gt;
        &lt;label&gt;Edit&lt;/label&gt;
        &lt;toggle ev:event="DOMActivate" case="in"/&gt;
      &lt;/trigger&gt;
    &lt;/html:p&gt;
  &lt;/case&gt;
&lt;/switch&gt;
</pre>
</div>
<p>(the prefixes <code>html</code> and <code>ev</code> are defined by an ancestor of the <code>switch</code> element).
</p>
</div></div>
<p><br />
</p>
<div class="div2">
<a id="The_XForms_Core_Module" name="The_XForms_Core_Module"></a><h3> <span class="mw-headline">3.2 <span id="structure-abstract">The XForms Core Module</span></span></h3>
<p>The XForms Core Module defines the major structural elements of XForms, intended for inclusion in a containing document. The elements and attributes included in this module are:
</p>
<table border="1" summary="listing of XForms Core elements, attributes, and content models">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Attributes and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Minimal Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#structure-model" title="">model</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, functions (QNameList)[doesn't support AVT], schema (list of xsd:anyURI)[doesn't support AVT], version (<a href="#def-versionList" title="">xforms:versionList</a>)[doesn't support AVT]
</p>
</td><td colspan="1" rowspan="1">
<p>(function|instance|xs:schema| submission|bind<a href="#action-content-set" title="">Action</a>)*
</p>
</td></tr>
<tr>
<td> <a href="#The_function_Element" title="">function</a>
</td><td> <a href="#structure-attrs-common" title="">Common</a>, signature[doesn't support AVT], override?
</td><td> param*, var*, (sequence* | script*)
</td></tr>
<tr>
<td> <a href="#The_sequence_element" title="">sequence</a>
</td><td> <a href="#structure-attrs-common" title="">Common</a>, value
</td><td> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#structure-model-instance" title="">instance</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, src (xsd:anyURI)[doesn't support AVT], resource (xsd:anyURI) [doesn't support AVT]
</p>
</td><td colspan="1" rowspan="1"> (ANY)
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#structure-bind-element" title=""> bind</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-mip" title=""> Model Item Properties</a>, ref (<a href="#def-model-binding-expression" title="">model-binding-expression</a>), nodeset (<a href="#def-model-binding-expression" title="">model-binding-expression</a> [deprecated])
</p>
</td><td colspan="1" rowspan="1"> (bind)*
</td></tr>
<tr>
<td><a href="#structure-var-element" title="">var</a>
</td><td><a href="#structure-attrs-common" title="">Common</a>, name (QName), value (expression)
</td><td> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1"> submission
</td><td colspan="1" rowspan="1">
<blockquote>

<a href="#structure-attrs-common" title="">Common</a><br />ref (<a href="#def-binding-expression" title="">binding-expression</a>)<br />bind (xsd:IDREF) [doesn't support AVT]<br />resource (xsd:anyURI)<br />action (xsd:anyURI) [deprecated]<br />mode ("asynchronous"|"synchronous")<br />method ("post"|"get"|"put"|"delete"|"multipart-post"|"form-data-post"|"urlencoded-post"|Any other <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>|<a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a>)<br />validate (xsd:boolean)<br />relevant (xsd:boolean)<br />serialization ("application/xml"|"application/x-www-form-urlencoded"|"multipart/related"|"multipart/form-data"|"none")<br />version (xsd:NMTOKEN)<br />indent (xsd:boolean)<br />mediatype (xsd:string)<br />encoding (xsd:string)<br />omit-xml-declaration (xsd:boolean)<br />standalone (xsd:boolean)<br />cdata-section-elements (QNameList)<br />replace ("all"|"instance"|"text"|"none" | <a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a>)<br />instance (xsd:IDREF)<br />targetref (node-sequence Expression)<br />separator (';' | '&amp;')<br />includenamespaceprefixes (xsd:NMTOKENS)

</blockquote>
</td><td colspan="1" rowspan="1">
<p>(<a href="#submit-resource-elem" title=""> resource</a>  [deprecated] | <a href="#submit-method-elem" title=""> method</a>  [deprecated] | <a href="#submit-header" title=""> header</a>)*, <a href="#action-content-set" title="">Action</a>*
</p>
</td></tr></tbody></table>
<p>Elements defined in the XForms Actions module, when that module is included, are also allowed in the content model of <code>model</code> and <code>submission</code>, as shown above.
</p><p>Within the containing document, these structural elements are typically not rendered.
</p><p>The <a href="#def-xforms-processor" title="">XForms Processor</a> must ignore any foreign-namespaced attributes that are unrecognized.
</p><p>Note that the presence of foreign namespaced elements is subject to the definition of the containing or <a href="#def-compound-document" title="">compound document</a> profile.
</p>
<div class="div3">
<a id="The_model_Element" name="The_model_Element"></a><h4> <span class="mw-headline">3.2.1 <span id="structure-model">The model Element</span></span></h4>
<p>This element represents a form definition and is used as a container for elements that define the XForms Model. No restriction is placed on how many <code>model</code> elements may exist within a containing document.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> functions
</dt><dd> Author-optional space-separated list of extension functions (represented by QNames) required by this XForms Model. Guidance on the use of this attribute is at <a href="#Extension_Functions" title="">Extension Functions</a>.
</dd><dt> schema
</dt><dd> Author-optional list of <code>xsd:anyURI</code> links to XML Schema documents outside this <code>model</code> element. The <a href="#def-xforms-processor" title="">XForms Processor</a> must process all Schemas listed in this attribute. Within each XForms Model, there is a limit of one Schema per namespace declaration, including inline and linked Schemas.
</dd></dl>
The schema definitions for a namespace are determined to be <b>applicable</b> to instance nodes based on an instance schema validation episode initialized to <a href="#def-lax-schema-processing" title="">lax processing</a>. When an element lacks a schema declaration, the XML Schema specification defines the recursive checking of children and attributes as optional. For this specification, this recursive checking is required. Schema processing for a node with matching schema declarations is governed by its content processing definition, which is <a href="#def-strict-schema-processing" title="">strict</a> by default.<div class="note"><b>Note:</b>The <code>schema</code> list may include URI fragments referring to elements located outside the current model elsewhere in the containing document; e.g. <code>"#myschema"</code>. <code>xs:schema</code> elements located inside the current model need not be listed.</div>
<dl><dt> version
</dt><dd> Author-optional attribute with a default value of empty string and legal values defined by the datatype <a href="#def-versionList" title="">xforms:versionList</a>. Examples are <code>"1.0"</code> and <code>"1.0 2.0"</code>. If one or more versions are indicated by this attribute on the default <code>model</code>, then an <a href="#def-xforms-processor" title="">XForms Processor</a> must support at least one of the listed language versions of XForms. Otherwise, the <a href="#def-xforms-processor" title="">XForms Processor</a> must terminate processing after dispatching the event <a href="#evt-versionException" title="">xforms-version-exception</a> to the default <code>model</code>. If the <a href="#def-xforms-processor" title="">XForms Processor</a> supports more than one language version indicated by the version setting on the default <code>model</code> or if the version setting on the default <code>model</code> is empty string (whether specified or by default), then the <a href="#def-xforms-processor" title="">XForms Processor</a> may execute the XForms content using any language conformance level available to it. If any non-default <code>model</code> has a version setting that is incompatible with the language version selected by the <a href="#def-xforms-processor" title="">XForms Processor</a>, then the <a href="#def-xforms-processor" title="">XForms Processor</a> must terminate processing after dispatching the event <a href="#evt-versionException" title="">xforms-version-exception</a> to the default <code>model</code>.
</dd></dl>
<div class="exampleOuter"><div class="exampleHead">Example: a simple usage of <code>model</code>, with the XForms namespace defaulted:</div><div class="exampleInner">
<pre>&lt;model id="Person" schema="MySchema.xsd"&gt;
  &lt;instance resource="http://example.com/cgi-bin/get-instance" /&gt;
  ...
&lt;/model&gt;
</pre>
</div></div><div class="exampleOuter"><div class="exampleHead">Example: Handler for xforms-version-exception</div><div class="exampleInner">
<pre>&lt;model&gt;
  &lt;message level="modal" ev:event="xforms-version-exception"&gt;
      &lt;output value="event('errorinformation')"/&gt;
  &lt;/message&gt;
  ...
&lt;/model&gt;
...
&lt;model id="m2" version="2.0"&gt;
  ...
&lt;/model&gt;
</pre>
</div>
<p>Since the <code>version</code> attribute is not specified on the <code>model</code>, the <a href="#def-xforms-processor" title="">XForms Processor</a> may choose any language conformance level, which may be incompatible with the version setting of the second <code>model</code>. Therefore, the message action occurs during initialization of the second <code>model</code> due to its version incompatibility with the default <code>model</code>.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Example: Differing but Compatible Version Settings</div><div class="exampleInner">
<pre>&lt;model version="1.0 2.0"&gt;
  ...
&lt;/model&gt;
...
&lt;model id="m2"&gt;
  ...
&lt;/model&gt;
</pre>
</div>
<p>Since the <code>version</code> attribute is not specified on the second <code>model</code>, it is compatible with any choice made based on the version setting on the default model.
</p>
</div></div><div class="div3">
<a id="The_instance_Element" name="The_instance_Element"></a><h4> <span class="mw-headline">3.2.2 <span id="structure-model-instance">The instance Element</span></span></h4>
<p>This author-optional element contains or references initial instance data.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> src
</dt><dd> Author-optional link to externally defined initial instance data. If the link traversal fails, it is treated as an exception (<a href="#The_xforms-link-exception_Event" title="">The xforms-link-exception Event</a>).
</dd><dt> resource
</dt><dd> Author-optional link to externally defined initial instance data. If the link is traversed and the traversal fails, it is treated as an exception (<a href="#The_xforms-link-exception_Event" title="">The xforms-link-exception Event</a>).
</dd></dl>
<p>If the <code>src</code> attribute is given, then it takes precedence over inline content and the <code>resource</code> attribute, and the XML data for the instance is obtained from the link. If the <code>src</code> attribute is omitted, then the data for the instance is obtained from inline content if it is given or the <code>resource</code> attribute otherwise. If both the <code>resource</code> attribute and inline content are provided, the inline content takes precedence.
</p><p>If the initial instance data is given by inline content, then instance data is obtained by first creating a detached copy of the inline content (including namespaces inherited from the enveloping ancestors), then creating an XPath data model over the detached copy. The detached copy must consist of content that would be well-formed XML if it existed in a separate document. Note that this restricts the element content of <code>instance</code> to a single child element.
</p><p>If the initial instance data is given by a link (from <code>src</code> or <code>resource</code>), and the link cannot be traversed, then processing halts after dispatching an <a href="#evt-linkException" title=""> xforms-link-exception</a> with a <code>resource-uri</code> of the link that failed.
Otherwise the instance data is formed by creating an XPath data model of the linked resource as described below under <a href="#initialize-instance-external" title="">Creating instance data from external resources</a>.
</p><p>If creation of the XPath data model for the instance data fails, then processing halts after dispatching an <a href="#evt-linkException" title=""> xforms-link-exception</a> with a <code>resource-uri</code> indicating either the URI for an external instance, a fragment identifier URI reference (including the leading # mark) for an identified internal instance, or empty string for an unidentified internal instance. This exception could happen, for example, if the content had no top-level element or more than one top-level element, neither of which is permitted by the grammar of XML.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>All data relevant to the XPath data model must be preserved during processing and as input to submission serialization, including processing instructions, comment nodes and all whitespace.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>XForms authors who need additional control over the serialization of namespace nodes can use the <code>includenamespaceprefixes</code> attribute on the <code>submission</code> element.
</p>
</div>
<p><br />
</p>
<div class="exampleOuter"><div class="exampleHead">Example: An instance initialized from an external resource, and one initialized inline:</div><div class="exampleInner">
<pre>&lt;instance resource="http://example.org/templates/a1.xml" /&gt;
</pre>
<pre>&lt;instance&gt;
    &lt;data xmlns=""&gt;
        &lt;height&gt;1024&lt;/height&gt;&lt;width&gt;1920&lt;/width&gt;
    &lt;/data&gt;
&lt;/instance&gt;
</pre>
</div></div>
</div>
<div class="div4">
<a id="Creating_instance_data_from_external_resources" name="Creating_instance_data_from_external_resources"></a><h5> <span class="mw-headline">3.2.2.1 <span id="initialize-instance-external">Creating instance data from external resources</span></span></h5>
<p>Although inline instance values are created from XML markup, there is no requirement that external sources be XML, just that they be converted to an XPath Data Model [<a href="#ref-xpath-data-model" title="">XDM</a>] internally.
</p><p>If the external resource is an XML format (i.e. with a content type matching any of the specifiers in [<a href="#ref-rfc-3023" title="">RFC 3023</a>]), then an XPath data model is created as defined in [<a href="#ref-xpath-data-model" title="">XDM</a>].
</p><p>If the external resource is not an XML format, it should be parsed as if a one-to-one mapping had been applied to the original to produce an equivalent XML document which is then used to produce the XPath Data Model. The one-to-one mapping is defined per format. Two examples are given below, but implementors are encouraged to add others, and report on their experiences.
</p><p>A requirement on such a mapping is that it should only require simple and obvious XPath expressions to access the data. It is not necessary to be able to map all possible XML onto the external data type, but it is required to be able to map all possible values of the external data to XML, and then back again.
</p><p>The conversion of external data to an XPath data model is used both for initializing instances, and for <a href="#submission-response" title="">processing the data returned by submissions</a>.
</p><p>For every media type accepted for external sources by the processor, the processor must provide an equivalent serialization using the <code>serialization</code> attribute of <a href="#The_submission_Element_2" title="">the <code>submission</code> element</a>.
</p>
</div>
<div class="div4">
<a id="External_JSON_values" name="External_JSON_values"></a><h5> <span class="mw-headline">3.2.2.2 <span id="external-json">External JSON values</span></span></h5>
<p>When an XForms processor receives a JSON object @@[ref JSON], it maps it as follows:
</p>
<ul><li> A root element <code>&lt;json/&gt;</code> is created whose content is the transformation of each of the contained members, if any, of the JSON object.
</li><li> Each name/value member is encoded as an XML element whose name is the name of the member, and whose content is the transformation of the value part of the member. If the name of the member contains characters that are not NMCHARs, those characters are replaced with underscores in the element name, and an attribute <code>name</code> is added to the element, with the value of the original name of the member. If the value part is an array, then each value in the array is so treated, and the first such element is given an attribute <code>starts="array"</code>. If the value of the member is not a string, array or object, an attribute <code>type</code> is added to the element, with one of the values "number", "boolean" or "null".
</li><li> The content of a string is copied across. Characters and escapes that have no equivalent XML character (\b, \f, and characters of the form \uxxxx less than \u0020) are transformed by adding \uE000 to them.
</li><li> A number is copied across.
</li><li> Objects are transformed by transforming each of the contained members, if any.
</li><li> true and false are copied across.
</li><li> null produces empty content.
</li></ul>
<p>This format can be serialized by the <code>submission</code> element with a <code>serialization</code> attribute value of "application/json".
</p>
</div>
<div class="div4">
<a id="External_CSV_values" name="External_CSV_values"></a><h5> <span class="mw-headline">3.2.2.3 <span id="external-csv">External CSV values</span></span></h5>
<p>@@TO DO
</p>
</div>
<div class="div4">
<a id="Other_External_values" name="Other_External_values"></a><h5> <span class="mw-headline">3.2.2.4 <span id="external-other">Other External values</span></span></h5>
<p>@@TO DO
</p>
</div>
</div>
<div class="div3">
<a id="The_bind_Element" name="The_bind_Element"></a><h4> <span class="mw-headline">3.2.3 <span id="structure-bind-element">The bind Element</span></span></h4>
<p>Element <code>bind</code> selects a sequence of items consisting of nodes from the <a href="#def-instance-data" title="">instance data</a> and atomic values (such as an integer, date, or string) with either a <a href="#def-model-binding-expression" title="">model binding expression</a> in the <code>ref</code> attribute or the default of the in-scope evaluation context node. Other attributes on element <code>bind</code> encode <a href="#def-model-item-property" title="">model item properties</a> to be applied to each node in the sequence. When <code>bind</code> has an attribute of type <code>xsd:ID</code>, the <code>bind</code> then associates that identifier with the selected sequence.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-mip" title=""> Model Item Properties</a> (author-optional)
</p><p>If the <code>model</code> attribute is expressed in a <code>bind</code> element, then an (<a href="#The_xforms-binding-exception_Event" title="">xforms-binding-exception</a>) occurs if the identified model is not the containing <code>model</code> element.
</p><p>Special Attributes:
</p>
<dl><dt> ref
</dt><dd> An author-optional attribute containing a <a href="#def-model-binding-expression" title="">model binding expression</a> that selects the items on which this <code>bind</code> operates. If the attribute is omitted, the default is the in-scope evaluation context item.
</dd><dt> nodeset
</dt><dd> A deprecated synonym for <code>ref</code>.  It has no meaning if attribute <code>ref</code> is present.
</dd></dl>
<p>See <a href="#Model_Item_Properties" title="">Model Item Properties</a> for details on model item properties.
</p><p>See <a href="#Evaluation_Context" title="">Evaluation Context</a> for details on how the evaluation context is determined for each attribute of the <code>bind</code> element.
</p><p><br />
</p>
<div class="exampleOuter"><div class="exampleHead">Example: Constraining a value to be always greater than zero:</div><div class="exampleInner">
<pre>&lt;bind ref="height" constraint=". &amp;gt; 0" /&gt;
</pre>
</div></div>
<div class="exampleOuter"><div class="exampleHead">Example: binds may nest:</div><div class="exampleInner">
<pre>&lt;bind ref="c"&gt;&lt;bind calculate="../a + ../b"/&gt;&lt;/bind&gt;
</pre>
</div></div>
<div class="exampleOuter"><div class="exampleHead">Example: the context attribute can be used to simplify expressions:</div><div class="exampleInner">
<pre>&lt;bind ref="c"&gt;&lt;bind context=".." calculate="a+b"/&gt;&lt;/bind&gt;
</pre>
</div></div>
<p><br />
</p>
</div>
<div class="div3">
<a id="The_var_element" name="The_var_element"></a><h4> <span class="mw-headline">3.2.4  <span id="structure-var-element">The var element</span> </span></h4>
<p>The <code>var</code> element is a local variable-binding element and enables the declaration of a variable. A variable is a binding between a name and a value. The value of a variable is any sequence (of nodes and/or atomic values), as defined in XPath Data Model [<a href="#ref-xpath-data-model" title="">XDM</a>].
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> name
</dt><dd> Required attribute containing the name of the variable. The value of the name attribute is a QName. The Scope of the variable is defined in the Variable Scope section
</dd><dt> value
</dt><dd> Required attribute containing an expression to evaluate, the result of the expression will be made available as a variable.  
</dd></dl>
<p>The value can either be specified by the value attribute or as inline text. The value attribute has precedence over the inline context (i.e.: if the value attribute is specified, the result of evaluating the expression specified by the value, is used as the value for the variable).
</p><p>Variables can occur either as a child of an action element or somewhere in the document except the model. The value of the variable will be updated when needed. If the variable is a child of an action it means that the value of the variable will be up to date when the action runs, i.e. the value will behave as if it was updated during the execution of the action, in document order relative to other variables and actions. All other variables will behave as if they were updated on xforms-refresh in the order as how they were defined.
</p>
<div class="note"><div class="prefix"><b>Note:</b></div><p>Variables in actions are only evaluated once during the execution of an action and will hold a references to all the nodes the expression returns (if any). For example deleting those nodes from an instance with a subsequent delete action will <b>not</b> remove those nodes from the value of the variable. Changes in the predicates of the expression by subsequent actions won't update the value of  variable either.</p></div>
<div class="note"><div class="prefix"><b>Note:</b></div><p>Currently we don't support variables inside the model outside actions, we are waiting for more implementation experience before allowing this.</p></div>
<a id="Variable_Scope" name="Variable_Scope"></a><h5> <span class="mw-headline">3.2.4.1  Variable Scope </span></h5>
<p>For any variable-binding element, there is a region (more specifically, a set of element nodes) of the form within which the binding is visible. The set of variable bindings in scope for an expression consists of those bindings that are visible at the point in the form where the expression occurs.
</p><p>A local variable binding element is visible for all following siblings and their descendants. The binding is not visible for the xf:var element itself.
</p><p>It is an error to create multiple variable-binding with the same name if they are visible to each other and an (<a href="#The_xforms-binding-exception_Event" title="">The xforms-binding-exception Event</a>) will be dispatched.
</p>
</div>
<div class="div3">
<a id="The_submission_Element" name="The_submission_Element"></a><h4> <span class="mw-headline">3.2.5 <span id="structure-model-submission">The submission Element</span></span></h4>
<p>Details about the <code>submission</code> element and its processing are described in <a href="#The_XForms_Submission_Module" title="">The XForms Submission Module</a>.
</p>
</div>
<div class="div2">
<a id="XForms_Core_Attribute_Collections" name="XForms_Core_Attribute_Collections"></a><h3> <span class="mw-headline">3.3 <span id="structure-attrs">XForms Core Attribute Collections</span></span></h3>
<div class="div3">
<a id="Common_Attributes" name="Common_Attributes"></a><h4> <span class="mw-headline">3.3.1 <span id="structure-attrs-common">Common Attributes</span></span></h4>
<p>The Common Attribute Collection applies to every element in the XForms namespace.
</p>
<dl><dt> anyAttribute
</dt><dd> Foreign attributes are allowed on all XForms elements.
</dd></dl>
<div class="note">
<p><b>Note:</b>
</p><p>The <a href="#action-xmlevents" title="">XML Events attributes</a> are foreign attributes and therefore are allowed on any XForms element that includes the <a href="#structure-attrs-common" title="">Common</a> attributes. This specification lists both <a href="#structure-attrs-common" title="">Common</a> and <a href="#action-xmlevents" title=""> Events</a> attributes on XForms actions for reading convenience, i.e. since authors are most likely to place <a href="#action-xmlevents" title="">Events</a> attributes on the actual event handler elements.
</p>
</div>
<dl><dt> id
</dt><dd> The author-optional <code>id</code> attribute [doesn't support AVT] of type <code>xsd:ID</code> assigns an identity to the containing element.
</dd></dl>
<div class="note">
<p><b>Note:</b>
</p><p>Elements can be identified using any attribute of type ID (such as <code>xml:id</code>), not just the <code>id</code> attribute defined above.
</p>
</div>
<dl><dt> model
</dt><dd> Author-optional XForms Model selector [doesn't support AVT]. Specifies the <code>ID</code> of an XForms Model to be associated with this binding element. This attribute has no meaning for the current binding element when a <code>bind</code> attribute is present. Rules for determining the context XForms Model are located at <a href="#Evaluation_Context" title="">Evaluation Context</a>.
</dd></dl>
<dl><dt> context
</dt><dd> an expression interpreted as specified in the <a href="#def-expression-module" title="">expression module</a>. This author-optional attribute has no meaning when a <code>bind</code> attribute is present. If the <code>model</code> attribute is present, then it is processed first as described in <a href="#Evaluation_Context" title="">Evaluation Context</a>. The expression is evaluated in the initial <a href="#in-scope-evaluation-context" title="">in-scope evaluation context</a> before any other attributes that contain an expression, and the first node of the result overrides the in-scope evaluation context item, and the context size and position are changed to 1. When this attribute is absent, the in-scope evaluation context is not overridden.
</dd></dl>
<p>It is an exception (<a href="#The_xforms-binding-exception_Event" title="">The xforms-binding-exception Event</a>) if the <a href="#def-xforms-processor" title="">XForms Processor</a> encounters a <code>model</code> attribute <code>IDREF</code> value that refers to an <code>ID</code> not on a <code>model</code> element.
</p>
</div><div class="div3">
<a id="Linking_Attributes" name="Linking_Attributes"></a><h4> <span class="mw-headline">3.3.2 <span id="structure-attrs-link">Linking Attributes</span></span></h4>
<p>The <a href="#def-host-language" title="">host language</a> may permit a Linking Attributes Collection to be applied to XForms elements as an alternate means of obtaining content related to the element. An example is the <code>src</code> attribute from [<a href="#ref-xhtml-1.0" title="">XHTML 1.0</a>]. The schedule by which link traversal occurs is defined by the host language. If the link traversal fails, the host language may dispatch <a href="#evt-linkException" title=""> xforms-link-exception</a> to the <code>model</code> associated with the in-scope evaluation context node of the element that bears the Linking Attributes Collection for the failed link.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Section <a href="#The_instance_Element" title="">The instance Element</a> defines attribute <code>src</code> for the <code>instance</code> element.
</p>
</div></div><div class="div3">
<a id="Binding_Attributes" name="Binding_Attributes"></a><h4> <span class="mw-headline">3.3.3 <span id="structure-attrs-nodeset">Binding Attributes</span></span></h4>
<p>These attributes create a binding between an XForms element such as a form control and items returned by a <a href="#def-binding-expression" title="">Binding expression</a>. Those items can be either nodes or atomic values (such as an integer, date, or string). Typically form controls will bind to instance data nodes, but they can bind to any type of item.
</p>
<dl><dt> ref
</dt><dd> <a href="#def-binding-expression" title="">Binding expression</a> interpreted as specified in the <a href="#def-expression-module" title="">expression module</a> and evaluated in the <a href="#in-scope-evaluation-context" title="">in-scope evaluation context</a>. This attribute has no meaning when a <code>bind</code> attribute is present.
</dd><dt> nodeset (deprecated)
</dt><dd> <a href="#def-binding-expression" title="">Binding expression</a> interpreted as specified in the <a href="#def-expression-module" title="">expression module</a> and evaluated in the <a href="#in-scope-evaluation-context" title="">in-scope evaluation context</a>. This author-optional, deprecated attribute has no meaning when a <code>bind</code> or <code>ref</code> attribute is present.
</dd><dt> bind
</dt><dd> Author-optional reference to a <code>bind</code> element [doesn't support AVT].
</dd></dl>
<p>In this specification, when an XForms element is declared to have a (item or sequence) binding, then the author must specify the binding unless the element explicitly states that it is author-optional.
</p><p><br />
When a binding is required, one of <code>ref</code> or <code>bind</code> is required. When <code>bind</code> is used, the item is determined by the referenced <code>bind</code>. See <a href="#References_to_Elements_within_a_bind_Element" title="">References to Elements within a bind Element</a> for details on selecting an identified <code>bind</code> that is iterated by one or more containing <code>bind</code> elements. When <code>ref</code> is used, the item is determined by evaluating the expression with the evaluation context described in Section <a href="#Evaluation_Context" title="">Evaluation Context</a>.
</p><p>In XForms 2.0, the attribute <code>nodeset</code> is a synonym for <code>ref</code>, but deprecated. Should both <code>nodeset</code> and <code>ref</code> be on an element, <code>nodeset</code> is ignored.
</p><p>It is an exception (<a href="#The_xforms-binding-exception_Event" title="">The xforms-binding-exception Event</a>) if the <a href="#def-xforms-processor" title="">XForms Processor</a> encounters a <code>bind</code> attribute <code>IDREF</code> value that refers to an <code>ID</code> not on a <code>bind</code> element.
</p><p>When a binding is defined as a <span id="structure-attrs-single-node"><b>Single Item Binding</b></span> then the  
<b>First-item rule</b> is applied: When a binding selects a sequence of size &gt; 1, the first item in the sequence is used.
</p><p><br />
</p>
</div><div class="div3">
<a id="Model_Item_Property_Attributes" name="Model_Item_Property_Attributes"></a><h4> <span class="mw-headline">3.3.4 <span id="structure-attrs-mip">Model Item Property Attributes</span></span></h4>
<p>This collection contains one attribute for each model item property, with an attribute name exactly matching the name of the model item property, as defined in <a href="#Model_Item_Property_Definitions" title="">Model Item Property Definitions</a>.
</p>
</div></div>
<p><br />
</p>
<div class="div2">
<a id="The_XForms_Extension_Module" name="The_XForms_Extension_Module"></a><h3> <span class="mw-headline">3.4 <span id="module-extension">The XForms Extension Module</span></span></h3>
<p>There are many different ways a <a href="#def-host-language" title="">host language</a> might include XForms. One approach uses only well-formed processing, disregarding validation. Another case uses strict validation, for example XHTML 1.0, in which only predefined elements are allowed. Another common approach is to allow unregulated content in a few select places. A host language that chooses this option can use the Extension module.
</p>
<table border="1" summary="listing of XForms Core elements, attributes, and content models">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Attributes and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Minimal Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#structure-extension" title="">extension</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>
</p>
</td><td colspan="1" rowspan="1"> ANY
</td></tr></tbody></table>
<div class="div3">
<a id="The_extension_Element" name="The_extension_Element"></a><h4> <span class="mw-headline">3.4.1 <span id="structure-extension">The extension Element</span></span></h4>
<p>Author-optional element <code>extension</code> is a container for application-specific extension elements from any namespace other than the XForms namespace. This specification does not define the processing of this element.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p>
<div class="exampleOuter"><div class="exampleHead">Example: Attaching RDF metadata to a form control</div><div class="exampleInner">
<pre>&lt;input ref="dataset/user/email" id="email-input"&gt;
  &lt;label&gt;Enter your email address&lt;/label&gt;
  &lt;extension&gt;
    &lt;rdf:RDF xmlns:rdf="<a class="external free" href="http://www.w3.org/1999/02/22-rdf-syntax-ns" rel="nofollow" title="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</a>"&gt;
      &lt;rdf:Description rdf:about="#email-input"&gt;
        &lt;my:addressBook&gt;personal&lt;/my:addressBook&gt;
      &lt;/rdf:Description&gt;
    &lt;/rdf:RDF&gt;
  &lt;/extension&gt;
&lt;/input&gt;
</pre>
</div></div></div></div></div>
<div class="div1">
<a id="Expressions_in_XForms" name="Expressions_in_XForms"></a><h2> <span class="mw-headline">4 <span id="expr-eval">Expressions in XForms</span></span></h2>
<p>XForms uses expressions to address <a href="#def-instance-data-node" title="">instance data nodes</a> in binding expressions, to express constraints, and to specify calculations. The expressions will have access to variables (see <a href="#Variable_Scope" title="">Variable Scope</a> for more information about which variables will be in scope for the expression) and the focus (see next section for more information about the focus). 
</p><p>The expression languages are pluggable and are defined in a separate specifications. Currently W3C defines only one expression language that can be used in XForms ( XPath which is defined in <a href="http://www.w3.org/TR/2012/WD-xforms-xpath-20120807/" title="XPath Expressions Module">XForms 2.0: XPath expression module</a>), other expression language modules could be defined in the future by W3C or other standardization bodies.
</p><p>At the time of evaluation, an expression must be syntactically correct. In addition, the namespaces the expression references must be in scope and the functions and variables it references must be defined. If any of these conditions is not satisfied, an exception <a href="#evt-computeException" title="">xforms-compute-exception Event</a> is raised, except for binding expressions, which produce a different exception (<a href="#evt-bindingException" title="">xforms-binding-exception Event</a>).
</p>
<a id="Evaluation_Context" name="Evaluation_Context"></a><h3> <span class="mw-headline">4.1 Evaluation Context</span></h3>
<p>Expressions are evaluated in an evaluation context. The <b>evaluation context</b> for a given expression consists of all the information that can affect the result of the expression. The evaluation context consists of at least the focus (see following section for details), the variables in scope and the available functions. An expression language can add additional properties to the evaluation context.  
</p>
<a id="Maintaining_Position:_the_Focus" name="Maintaining_Position:_the_Focus"></a><h4> <span class="mw-headline">4.1.1 <span id="expression-focus">Maintaining Position: the Focus</span></span></h4>
<p>The focus consists of the <b>context item</b>, <b>position</b> and <b>size</b> and are determined according to rules described below.
</p><p>A <b>binding element</b> is any element that is explicitly allowed to have a binding expression attribute, and a <b>bound element</b> is any element that explicitly declares a binding expression attribute. A binding expression attribute contains an expression that references zero or more nodes of instance data. Every expression requires an evaluation context. The <span id="in-scope-evaluation-context"><b>in-scope evaluation context</b></span> of a binding element provides an evaluation context for the binding expression attribute. The following rules are used in determining the node, position and size of the in-scope evaluation context:
</p>
<ol><li> A binding element is "<b>outermost</b>" if the element has no ancestor binding elements. If an outermost binding element is contained by a <code>model</code>, then the context item for the outermost binding element is the top-level document element node of the default instance of the containing <code>model</code> element. Otherwise, the context item for outermost binding elements is the top-level document element node of the default instance in the default model. For outermost binding elements, the context size and position are 1.
</li><li> The context item, position and size for non-outermost binding elements is determined using the binding expression attribute or in-scope evaluation context of the nearest ancestor binding element. This is also referred to as "scoped resolution". For a non-outermost binding element:
<ol><li> If the nearest ancestor binding element is not a bound element, then the in-scope evaluation context of the non-outermost binding element is equivalent to the in-scope evaluation context of the nearest ancestor binding element.
</li><li> If the nearest ancestor binding element expresses a Single Item Binding, then the in-scope evaluation context of the non-outermost binding element has a context size and position of 1 and the context item is the one resulting from the Single Item Binding of the nearest ancestor binding element. If the context item is a node, it will also be the context node. If it is not a node, there will be no context node: that is, any attempt to reference the context node will result in a fatal exception (<a href="#evt-bindingException" title="">xforms-bind-exception</a> or <a href="#evt-computeException" title="">xforms-compute-exception</a>).
</li><li> If the nearest ancestor binding element expresses a Sequence Binding, then the XForms processor dynamically generates an occurrence of the non-outermost binding element for each of the items in the Sequence Binding of the nearest ancestor binding element. The <b>dynamic in-scope evaluation context</b> for each generated occurrence of the non-outermost binding element has a context size equal to the size of the sequence identified by the Sequence Binding of the nearest ancestor binding element, the context item is the item for which the occurrence of the non-outermost binding element was generated. If the context item is a node, it will also be the context node. If it is not a node, there will be no context node: that is, any attempt to reference the context node will result in a fatal exception (<a href="#evt-bindingException" title="">xforms-bind-exception</a> or <a href="#evt-computeException" title="">xforms-compute-exception</a>). The position is equal to the position of the generator item in the sequence identified by the Sequence Binding of the nearest ancestor binding element.
</li><li> If the nearest ancestor binding element expresses a Sequence Binding, then the non-outermost binding element has its own in-scope evaluation context separately from those of its dynamically generated occurences described above. The in-scope evaluation context has a context position of 1, and the context item and size are set by the first item and the size of the sequence identified by the Sequence Binding of the nearest ancestor binding element. If the first item is a node, it will also be the context node. If it is not a node, there will be no context node: that is, any attempt to reference the context node will result in a fatal exception (<a href="#evt-bindingException" title="">xforms-bind-exception</a> or <a href="#evt-computeException" title="">xforms-compute-exception</a>).
</li></ol>
</li><li> Once the context item of the in-scope evaluation context has been determined according to the rules above, if the element expresses a <code>model</code> attribute that refers to a <code>model</code> other than the one containing the context item (if the context item isn't an instance node, the model is the model specified on the element or the model of its parent if no model attribute is specified on the element), then the context item of the in-scope evaluation context is changed to be the top-level document element node of the default instance of the referenced <code>model</code>, and the context position and size are changed to 1.
</li><li> Once the context item of the in-scope evaluation context has been determined according to the rules above, if the element expresses a <code>context</code> attribute, then the expression is evaluated in the in-scope evaluation context determined by the rules above, and the first item of the result overrides the in-scope evaluation context item, and the context size and position are changed to 1. If the first item is a node the context node is that node. If it is not a node, there will be no context node: that is, any attempt to reference the context node will result in a fatal exception (<a href="#evt-bindingException" title="">xforms-bind-exception</a> or <a href="#evt-computeException" title="">xforms-compute-exception</a>). When this attribute is absent, the in-scope evaluation context is not modified.
</li></ol>
<p>The <b>in-scope evaluation context</b> of an element that is not a binding element is the same as if the element were a binding element. For example, the in-scope evaluation context for the <code>setindex</code> action element is required to provide the context for evaluating the <code>index</code> attribute, so it is determined as if the element could contain a binding expression attribute.
</p><p>Expressions also appear in model item property attributes of the <code>bind</code> element to define computed expressions. If the <code>bind</code> element does not express a Sequence Binding, then the in-scope evaluation context for model item property attributes of the <code>bind</code> is equal to the in-scope evaluation context for the <code>bind</code>. Otherwise, the <code>bind</code> has a Sequence Binding, and computed expressions for each model item property attribute are generated for each node. For each computed expression generated, the evaluation context item, position and size are determined by the same method as dynamic in-scope evaluation context rule above, except the computed expression is used in lieu of a binding expression attribute such that the <code>bind</code> element is the nearest ancestor binding element.
</p><p>Expressions also appear in the special attributes of several other XForms elements, such as the <code>value</code> attribute on <code>setvalue</code> and <code>output</code>, the <code>at</code> attribute of <code>insert</code> and <code>delete</code>, or the <code>index</code> attribute of <code>setindex</code>. Generally, if the containing element does not express a Single Item Binding or Sequence Binding, then the special attribute is evaluated using the in-scope evaluation context. Special attributes may be evaluated using the in-scope evaluation context even if the containing element expresses a Single Item Binding or Sequence Binding. However, for some special attributes, the evaluation context item, position and size are based on the result of the Single Item Binding or Sequence Binding. Each special attribute that contains an expression describes how its evaluation context item, position and size are determined.
</p><p>In the following example (we use XPath as an expression language in this sample), the <code>group</code> has a binding expression of <code>level2/level3</code>. According to the rules above, this outermost element node would have a context item of <code>/level1</code>, which is the document element node of the instance data. The <code>select1</code> form control then inherits a context item from the parent group.
</p>
<div class="exampleOuter"><div class="exampleHead">Sample XML Instance Data</div><div class="exampleInner">
<pre>&lt;level1&gt;
  &lt;level2&gt;
    &lt;level3 attr="xyz"/&gt;
  &lt;/level2&gt;
&lt;/level1&gt;
</pre>
</div></div><div class="exampleOuter"><div class="exampleHead">Binding Expression Context Items</div><div class="exampleInner">
<pre>&lt;group ref="level2/level3"&gt;
  &lt;select1 ref="@attr" ... &gt;
     &lt;label&gt;...&lt;/label&gt;
  &lt;/select1&gt;
&lt;/group&gt;
</pre>
</div></div>
<p>This section describes how the in-scope evaluation context of an element is determined, not whether the in-scope evaluation will be used. The Single Item Binding or Sequence Binding of a non-outermost binding element is not evaluated if the in-scope evaluation context does not contain a context item. This can occur if the Single Item Binding or Sequence Binding of the nearest ancestor bound element produces an empty sequence. Also, if the Single Item Binding or Sequence Binding of an element is expressed with the <code>bind</code> attribute, then the resulting item or sequence is obtained from the referenced <code>bind</code> element. The <code>ref</code> (or deprecated <code>nodeset</code>) attribute of a <code>bind</code> element is evaluated using the in-scope evaluation of the <code>bind</code> element, not the in-scope evaluation context of an element that references it with a <code>bind</code> attribute.
</p>
</div>
</div><div class="div2">
<a id="References.2C_Dependencies.2C_and_Dynamic_Dependencies" name="References.2C_Dependencies.2C_and_Dynamic_Dependencies"></a><h3> <span class="mw-headline">4.2 <span id="expr-dependencies">References, Dependencies, and Dynamic Dependencies</span></span></h3>
<p>An expression <b>references</b> a node of instance data if the node is selected during the evaluation of the expression. 
The selection mechanism is defined in the <a href="#def-expression-module" title="">expression module</a>. The <b>reference list</b> of an expression is the set of instance nodes 
that it references, including the nodes that were referenced while evaluating the expression but were subsequently excluded from further 
participation in the expression evaluation (for example by a filter expression).
</p>
<div class="exampleOuter"><div class="exampleHead">Example of References and Non-References</div>
<p>Given the following default instance:
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
   &lt;data xmlns=""&gt;
      &lt;a attr="X"&gt;
         &lt;b attr="Y"&gt;
            &lt;c/&gt;
         &lt;/b&gt;
         &lt;d/&gt;
      &lt;/a&gt;
      &lt;a attr="Z"&gt;
         &lt;b attr="Z"&gt;
            &lt;c/&gt;
         &lt;/b&gt;
         &lt;d/&gt;
      &lt;/a&gt;
   &lt;/data&gt;
&lt;/instance&gt;
</pre>
</div>
<p>and the following XPath expression:
</p>
<div class="exampleInner">
<pre>a[@attr='X']/b[@attr='X']/c
</pre>
</div>
<p>Both nodes named <code>a</code> are referenced since both are matched by a NameTest. The <code>attr</code> attribute in each element <code>a</code> is referenced during the evaluation of the filter expression. The filter expression rejects the second element <code>a</code>, but that element is still considered to have been referenced because it was selected for further processing during the expression evaluation.
</p><p>The element named <code>b</code> in the first element <code>a</code> is referenced, but element <code>b</code> in the second <code>a</code> is not referenced because the expression evaluation did not proceed beyond the filter expression that rejected the second <code>a</code> element.
</p><p>While performing the NameTest for element <code>b</code>, observe that an XPath expression evaluator may visit all the children of the first element <code>a</code> in order to perform the NodeTest. However, a node is not referenced if it is only visited but fails the NodeTest. In this case, the NodeTest is a NameTest for <code>b</code>, which the element <code>d</code> fails. Therefore, <code>d</code> is not referenced.
</p><p>The filter expression test on <code>b</code> rejects the only element <code>b</code> that has been selected so far because the attribute value of <code>attr</code> does not match the equality test. Still, <code>b</code> and its attribute <code>attr</code> have been referenced by this expression.
</p><p>Element <code>c</code> is not considered to be referenced by this expression given this data. Although a NameTest for <code>c</code> appears in the expression, the evaluation of the expression did not proceed to perform the NameTest due to the rejection of <code>b</code> by the filter expression.
</p><p>Finally, note that an XPath expression can reference many nodes even if its final result is an empty nodeset.
</p>
</div><div class="note">
<p><br />
</p>
</div>
<p>A function can introduces additional dependencies, the additional dependencies should be defined in the module that makes the function available to the XForms engine. It is recommended to define the additional dependencies as if it were dependencies to  implicitly managed instance data nodes.
</p><p>If an expression other than a <a href="#def-computed-expression" title="">computed expression</a> references an instance node, then the expression is <b>dependent</b> on the instance node. If a <a href="#def-computed-expression" title="">computed expression</a> references an instance node and uses its character content (rather than just referencing for navigation), then the <a href="#def-computed-expression" title="">computed expression</a> is <b>dependent</b> on the instance node. A <b>dependency list</b> for an instance node is the list of expressions of a given category that are dependent upon the instance node. For example, in Section <a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a>, the dependency list of computed expressions for each instance node helps establish the recalculation order for the computed expressions when the values of instance data nodes are changed.
</p><p>The references of an expression may be altered by insertion of instance nodes since the new nodes may be referenced by the expression if it is re-evaluated. Similarly, the references of an expression may be altered by deletion of instance nodes that are being referenced by the expression. An expression is <b>dynamically dependent</b> on an instance node if its reference list is altered by inserting, deleting or changing the value of the instance node. An instance node is a <b>dynamic dependency</b> for an expression if the expression is dynamically dependent on the instance node. If an expression contains a dynamic dependency and the XForms processor is maintaining dependency lists for the category of the expression, then changing the dynamic dependency implies a change to the dependency lists of instance nodes referenced by the expression.
</p><p>The computational dependency data structure described in Section <a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a> essentially stores the dependency lists of instance nodes corresponding to all the references made by computed expressions (see Appendix <a href="#Recalculation_Sequence_Algorithm" title="">Recalculation Sequence Algorithm</a> for details). The computational dependency data structure is not reconstructed in response to a dynamic dependency change. Instead, the form author may request a rebuild of the computational dependency data structures using the <code>rebuild</code> action. Additionally, the <code>insert</code> and <code>delete</code> actions set a rebuild flag so that computational dependency data structures will be rebuild at the end of an action sequence.
</p><p>Due to the rebuild flag setting on <code>insert</code> and <code>delete</code>, a form author can use many kinds of dynamic dependencies in model binding expressions and computed expressions without ever explicitly invoking the <code>rebuild</code> action. This includes the use of functions such as <code>position()</code>, <code>last()</code>, and <code>count()</code> on element and attribute nodes because the return values of the functions in these cases is fixed except when an <code>insert</code> or <code>delete</code> occurs. By comparison, functions such as <code>id()</code>, <code>instance()</code>, and <code>index()</code> can establish dynamic dependencies that can necessitate invoking a <code>rebuild</code> if they are used in model binding expressions or computed expressions because the results of the functions are affected by changing the values of instance nodes, not by inserting or deleting nodes.
</p>
</div><div class="div2">
<a id="Expression_Categories" name="Expression_Categories"></a><h3> <span class="mw-headline">4.3 <span id="expr-expression-categories">Expression Categories</span></span></h3>
<p>There are several different categories of expressions used in XForms, and they are processed at different times depending on the category.
A <a href="#def-binding-expression" title="">binding expression</a> is an expression used to bind a <a href="#def-model-item-property" title="">model item property</a> to one or
more instance nodes, or to bind a form control to an item (node or atomic value), or to specify the item or sequence for operation by an action.
The evaluation schedule for binding expressions differs based on whether the binding expression is a model binding expression,
UI binding expression, or a binding expression for an XForms action. Expressions are also used in various other attributes of
XForms binds, actions, form controls, and <code>submission</code>s, and their descendant elements. These expressions follow one of the
three schedules associated with binding expressions as described below.
</p>
</div>
<div class="div2">
<a id="Model_Binding_Expressions_and_Computed_Expressions" name="Model_Binding_Expressions_and_Computed_Expressions"></a><h3> <span class="mw-headline">4.4 <span id="expr-model-binding-expression-computed-expression">Model Binding Expressions and Computed Expressions</span></span></h3>
<p>A <a href="#def-model-binding-expression" title="">model binding expression</a> is a kind of binding expression that can be used to declare model item properties,
and is used in the Sequence Binding of the <code>bind</code> element. A <a href="#def-computed-expression" title="">computed expression</a> is an expression
used to determine the value of a <a href="#def-model-item-property" title="">model item property</a> based on instance data. Several of the attributes of
<code>bind</code> are computed expressions, including <code>calculate</code>, <code>readonly</code>, <code>relevant</code>,
and <code>required</code>.
</p><p>Dynamic dependencies in model binding expressions and computed expressions will require manual rebuilding of dependencies.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>If the <code>index()</code> function is being invoked from a model binding expression or computed expression, it will be necessary
to invoke <code>rebuild</code> manually. If the repeat index change occurs due to an implicit behavior such as a change to the focused
form control, then the rebuild (along with recalculate, revalidate and refresh) can be invoked from a handler for <code>DOMFocusIn</code> a
ttached to the <code>repeat</code> or each repeat object.
</p>
</div></div><div class="div2">
<a id="Expressions_in_Actions_and_Submissions" name="Expressions_in_Actions_and_Submissions"></a><h3> <span class="mw-headline">4.5 <span id="expr-actions-submissions">Expressions in Actions and Submissions</span></span></h3>
<p>Binding expressions on XForms actions and expressions appearing in other attributes of XForms actions are evaluated at the time
the XForms action is performed. In some cases, XForms actions have child elements that allow the values of some of their attributes
to be determined based on instance data. In these cases, the <code>value</code> attribute of the child element is evaluated at the
time the corresponding attribute is needed in the processing model of the containing XForms action.
</p><p>Similarly, expressions used in the attributes of <code>submission</code> and its child elements (other than XForms actions) are evaluated
as needed within the submission processing model.
</p><p>Form authors can use dynamic dependencies in the expressions of XForms Actions and Submissions without invoking any special data structure
reconstruction actions because implementations must behave as if these expressions are evaluated as needed.
</p>
</div><div class="div2">
<a id="UI_Expressions" name="UI_Expressions"></a><h3> <span class="mw-headline">4.6 <span id="expr-ui-expressions">UI Expressions</span></span></h3>
<p>A <a href="#def-ui-binding-expression" title="">UI Binding Expression</a> is a Single Item Binding or Sequence Binding in a form control. A <b>UI expression</b>
is a UI Binding Expression or an expression appearing in a descendant element of a form control, except for expressions in the categories
described above (such as XForms action expressions). These include the Single Item Bindings and Sequence Bindings of the additional elements
that contribute to the behavior of a form control (including <code>label</code>, <code>help</code>, <code>hint</code> and <code>alert</code>,
<code>filename</code> and <code>mediatype</code>) and the selection helper elements (<code>itemset</code>, <code>label</code>, <code>value</code>
and <code>copy</code>). This also includes the <code>value</code> attribute on <code>output</code> and <code>value</code> elements.
</p><p>Form authors can use dynamic dependencies in UI Expressions without invoking any special data structure reconstruction actions because
the state of the user interface at the end of processing <a href="#evt-refresh" title="">xforms-refresh</a> is required to reflect the instance data as if
all UI Expressions had been re-evaluated.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Implementations may record UI Expression dependency lists on instance nodes to help streamline detection of the need to re-evaluate
a UI Expression at the beginning of processing for <a href="#evt-refresh" title="">xforms-refresh</a>. Such implementations may determine that a UI Expression
is stale (needs re-evaluation) when a node on which it depends has been changed. An implementation may also indicate that all UI Expressions
are stale if a node of instance data is inserted, deleted or replaced, or the implementation may streamline detection of which UI Expressions
may be affected by the insertion, deletion or replacement of an instance data node.
</p>
</div></div><div class="div2">
<a id="UI_Binding_in_other_XML_vocabularies" name="UI_Binding_in_other_XML_vocabularies"></a><h3> <span class="mw-headline">4.7 <span id="ui-binding-foreign">UI Binding in other XML vocabularies</span></span></h3>
<p>The XForms binding mechanism allows other XML vocabularies to make Single Item Bindings between custom user interface controls
and XForms instance data. As an example, XForms binding attribute <code>bind</code> might be used within XHTML 1.x user interface controls
as shown below. See <a href="#structure-attrs-single-node" title="">Single Item Binding Attributes</a>.
</p>
<div class="exampleOuter"><div class="exampleHead">XForms Binding In XHTML 1.x User Interface Controls</div><div class="exampleInner">
<pre>&lt;html:input type="text" name="..." xforms:bind="fn"/&gt;
</pre>
</div></div></div><div class="div2">
<a id="Binding_Examples" name="Binding_Examples"></a><h3> <span class="mw-headline">4.8 <span id="ui-binding-examples">Binding Examples</span></span></h3>
<p>Consider the following document with the one-and-only XForms model:
</p>
<div class="exampleOuter"><div class="exampleInner">
<pre>&lt;model id="orders"&gt;
  &lt;instance&gt;
    &lt;orderForm xmlns=""&gt;
      &lt;shipTo&gt;
        &lt;firstName&gt;John&lt;/firstName&gt;
      &lt;/shipTo&gt;
    &lt;/orderForm&gt;
  &lt;/instance&gt;
  &lt;bind ref="shipTo/firstName" id="fn" /&gt;
&lt;/model&gt;
</pre>
</div></div>
<p>The following examples show three ways of binding user interface control <code>input</code> to instance element <code>firstName</code> declared in the model shown above.
</p>
<div class="exampleOuter"><div class="exampleHead">UI Binding Using Attribute <code>ref</code></div><div class="exampleInner">
<pre>&lt;input ref="shipTo/firstName"&gt;...
</pre>
</div></div><div class="exampleOuter"><div class="exampleHead">UI Binding Using Attribute <code>bind</code></div><div class="exampleInner">
<pre>&lt;input bind="fn"&gt;...
</pre>
</div></div><div class="exampleOuter"><div class="exampleHead">Specifies Model Containing The Instance Explicitly</div><div class="exampleInner">
<pre>&lt;input model="orders" ref="shipTo/firstName"&gt;...
</pre>
</div></div></div>
<div class="div2">
<a id="Attribute_Value_Templates" name="Attribute_Value_Templates"></a><h3> <span class="mw-headline">4.9 <span id="avts">Attribute Value Templates</span></span></h3>
<p>In an attribute that is designated as an <b>attribute value template</b> (AVT), an expression can be used by surrounding the expression with curly brackets ({}). Adding attribute value template support to <a href="#def-host-language" title="">host language</a> attributes is recommended, but should be defined in the <a href="#def-host-language" title="">host language</a> integration specification.
</p><p>An attribute value template consists of an alternating sequence of fixed parts and variable parts. A variable part consists of an XPath expression enclosed in curly brackets ({}). A fixed part may contain any characters, except that a left curly bracket must be written as {{ and a right curly bracket must be written as }}.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>An expression within a variable part may contain an unescaped curly bracket within a StringLiteral or within a comment.
</p>
</div>
<p>An exception (<a href="#The_xforms-compute-exception_Event" title="">The xforms-compute-exception Event</a>) must be thrown when one of the following error conditions occur:
</p>
<ul><li> an unescaped left curly bracket appears in a fixed part of an attribute value template without a matching right curly bracket.
</li><li> an unescaped right curly bracket occurs in a fixed part of an attribute value template.
</li><li> the string contained between matching curly brackets in an attribute value template is not a valid XPath expression, or contains other XPath static errors. 
</li></ul>
<a id="AVT_Evaluation" name="AVT_Evaluation"></a><h4> <span class="mw-headline">4.9.1 <span id="avt-evaluation">AVT Evaluation</span></span></h4>
<p>The result of evaluating an attribute value template is referred to as the <b>effective value</b> of the attribute. The effective value is the string obtained by concatenating the expansions of the fixed and variable parts:
</p>
<ul><li> The expansion of a fixed part is obtained by replacing any double curly brackets ({{ or }}) by the corresponding single curly bracket.
</li><li> The expansion of a variable part is obtained by evaluating the enclosed XPath expression using the the in-scope evaluation context and converting the resulting value to a string.
</li></ul>
<p>Curly brackets are not treated specially in an attribute value in an XForms document if the attribute doesn't support attribute value templates or if the content model of the attribute is already an expression.
</p><p>Attribute value templates are evaluated when necessary. If the attribute is on a UI control, its effective value is calculated on xforms-refresh. If the the attribute is on an XForms action, its effective value is calculated when the action is executed. 
</p>
<div class="note"><div class="prefix"><b>Note:</b></div><p>All XForms attributes that aren't XPath expressions and don't explicitly disallow AVT's support AVTs. The following non-normative list of attributes <b>don't</b> support AVTs: <code>functions</code>, <code>schema</code> and <code>version</code> on <code>model</code>; <code>signature</code> on <code>function</code>; <code>src</code> and <code>resource</code> on <code>instance</code>; <code>type</code> and <code>p3ptype</code> on <code>bind</code>; <code>id</code>.</p></div>
<div class="exampleOuter"><div class="exampleHead">Attribute value template on <code>resource</code> attribute of <code>load</code></div><div class="exampleInner">
<p>&lt;xforms:load resource="/forms/detail/{instance('document-instance')/document/id}"/&gt;
</p>
</div>
<div class="exampleHead">When <code>&lt;xforms:load&gt;</code> is executed, the resource attribute is evaluated. The result is the concatenation of /forms/detail/ and of the result of the expression within brackets. If the id element pointed to contains the string C728595E0E43A8BF50D8DED9F196A582, the resource attribute takes the value:</div><div class="exampleInner">
<p>/forms/detail/C728595E0E43A8BF50D8DED9F196A582
</p>
</div></div>
</div>
<div class="div2">
<a id="The_function_Element" name="The_function_Element"></a><h3> <span class="mw-headline">4.10  The function Element </span></h3>
<p>The <code>function</code> element  defines a custom function that can be called from any expression within the XForms document that is associated with the model in which the function is defined.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> signature
</dt><dd> The signature (name, parameters and return type) of the function. 
</dd></dl>
<dl><dt>override
</dt><dd> Author-optional specifies if this function overrides previously declared functions. Default value is yes.
</dd></dl>
<p>A <code>function</code> element can only appear as a top-level element in a model.
</p>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Function scoping">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Function scoping</b>
</td><td align="right" valign="top" width="50%"> 2012-03-08
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> We are considering to to also allow the definition of custom functions outside the model but we are waiting for implementation experience.
</td></tr></tbody></table>
<p>A custom function is included in the in-scope functions of the static context for all XPath expressions associated with the model that contains the function definition, unless
</p>
<ul><li> the <code>override</code> attribute has the value no and there is already a function with the same name and arity in the in-scope functions.
</li></ul>
<p>The value of the <code>signature</code> attribute defines the name, parameters and return type of the function see <a href="#Function_signature_syntax" title="">Function signature syntax</a> for more information about the function signature.
</p><p>The function that is executed as the result of a function call is identified by looking in the in-scope functions of the static context for a function whose name and arity  matches the name and number of arguments in the function call.
</p><p><b>Note:</b> Functions are not polymorphic. Although the function call mechanism allows two functions to have the same name and different arity, it does not allow them to be distinguished by the types of their arguments.
</p><p>If the result type of the function is specified, the result evaluated by the sequence constructor is converted to the required type (specified using a SequenceType, as defined in <a href="#ref-xpath-2.0" title="">XPath 2.0</a>), using the function conversion rules. It is a type error if this conversion fails. If the as attribute is omitted, the calculated result is used as supplied, and no conversion takes place.
</p>
<div class="exampleOuter"><div class="exampleHead">The following custom function multiplies corresponding components in the given sequences, and returns the sum of those products.</div>
<div class="exampleInner">
<pre>&lt;function signature="my:sumproduct($p as xs:decimal*, $q as xs:decimal*) as xs:decimal"&gt;
   &lt;sequence value="sum(for $i in 1 to count($p) return $p[$i]*$q[$i])"/&gt;
&lt;/function&gt;
</pre>
</div>
</div>
<div class="exampleOuter"><div class="exampleHead">Define a custom function using javascript, but also have a fallback function using the standard expression language for XForms processors that don't supports javascript.</div>
<div class="exampleInner">
<pre>&lt;function signature="my:foo($p as xs:decimal*) as xs:decimal" override="no"&gt;
   &lt;script type="text/javascript"&gt;
      foo(XForms.var.p);
   &lt;/script&gt;
&lt;/function&gt;
</pre>
<pre>&lt;function signature="my:foo($p as xs:decimal*) as xs:decimal" override="no"&gt;
  &lt;sequence value="sum($p)"/&gt;
&lt;/function&gt;
</pre>
</div>
<p>The second definition of the my:foo function won't override the first one because the <code>override</code> attribute is set to <code>no</code> (even though the expanded QName and the arity of the functions are the same). 
</p>
</div>
<a id="Function_signature_syntax" name="Function_signature_syntax"></a><h4> <span class="mw-headline">4.10.1  Function signature syntax </span></h4>
<p>The <code>signature</code> attribute  of the <code>function</code> element has the following syntax:
</p>
<table border="0" cellpadding="2" cellspacing="0">
<tbody><tr>
<td> CustomFunctionSignature
</td><td>&nbsp;::=
</td><td> <code>FunctionName "(" ParamList? ")" ("as" SequenceType)?</code>
</td></tr>
<tr>
<td> FunctionName
</td><td>&nbsp;::=
</td><td> <code>QNameButNoNCName</code>
</td></tr>
<tr>
<td> ParamList
</td><td>&nbsp;::=
</td><td> <code>Param ("," Param)*</code>
</td></tr>
<tr>
<td> Param
</td><td>&nbsp;::=
</td><td> <code>"$" QName TypeDeclaration?</code>
</td></tr>
<tr>
<td> TypeDeclaration
</td><td>&nbsp;::=
</td><td> <code>"as" SequenceType</code>
</td></tr></tbody></table>
<p><br />
The function name is a QName but not an NCName. This means that a form author cannot add functions to the default function namespace.
</p><p>The parameter list defines the formal arguments to the function. When the function is called using a function-call in an expression, the first argument supplied is assigned to the first parameter, the second argument supplied is assigned to the second parameter, and so on.
</p><p>The type declaration defines the required type of the parameter. The rules for converting the values of the actual arguments supplied in the function call to the types required by each parameter are defined in [XPath 2.0]. The rules that apply are those for the case where XPath 1.0 compatibility mode is set to false.
</p><p>If the value of a parameter to a custom function cannot be converted to the required type, a type error is signaled.
</p><p>If the type declaration is omitted, no conversion takes place and any value is accepted.
</p><p>[ERR] It is a static error if two parameters of a custom function have the same name.
</p>
<div class="note"><div class="prefix"><b>Note:</b></div><p>We do not allow optional parameters.</p></div>
<p>The following are examples of some function signatures:
</p>
<div class="exampleOuter"><div class="exampleHead">function with name my:foo that has no arguments and returns an xs:integer</div><div class="exampleInner">my:foo() as xs:integer</div></div>
<div class="exampleOuter"><div class="exampleHead">function with name my:sumproduct that takes two sequences of xs:decimal and returns an xs:decimal</div><div class="exampleInner">my:sumproduct($p as xs:decimal*, $q as xs:decimal*) as xs:decimal</div></div>
<a id="Function_body" name="Function_body"></a><h4> <span class="mw-headline">4.10.2  Function body </span></h4>
<p>The function body contains an optional sequence of variables, followed by a constructor for the return value of the function. The constructor can either be a sequence of <code>sequence</code> elements or a sequence of <code>script</code> elements.
</p><p>Both the <code>sequence</code> and <code>script</code> elements allow specifying a return value comprised or atomic values or nodes.
</p><p>The definition of the function is skipped when the <code>script</code> element uses a language that isn't supported by the XForms implementation. The script implementation should be stable (calling the same function twice within an execution scope with the same arguments returns the same result) and should be side effect free (they should for example not change any instance data).
</p>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Function scoping">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Function scoping</b>
</td><td align="right" valign="top" width="50%"> 2012-03-15
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> We are considering a lighter syntax, we are thinking of also allow a value attribute on the function element and/or making the expression/script the child contents of the element.
</td></tr></tbody></table>
<p>The implementation of the function should be stable and should not change any instance data, nor should it change the internal state of form (e.g.: should not change the repeat index) or processor.
</p>
<a id="Function_body_evaluation_context" name="Function_body_evaluation_context"></a><h4> <span class="mw-headline">4.10.3   Function body evaluation context </span></h4>
<p>Within the body of a custom function, the focus is initially undefined; this means that any attempt to reference the context item, context position, or context size is a non-recoverable dynamic error ([err:XPDY0002] as defined in <a href="#ref-xpath-2.0" title="">XPath 2.0</a>)
</p><p>The variables in scope for the function body include all variables representing the function parameters, as well as all variables that are in scope where the custom function is defined.
</p><p><b>Note:</b> Function parameter names can mask variables that would otherwise be in scope for the function body. 
</p><p>XPath expressions within the function body may refer to instance data through the instance() function.
</p>
<a id="The_sequence_element" name="The_sequence_element"></a><h4> <span class="mw-headline">4.10.4  The sequence element </span></h4>
<p>The <code>sequence</code> element  is used to construct a sequence. The element is used inside a <code>function</code> element to construct the result the function.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Contains the expression that is used to construct the sequence. 
</dd></dl>
<div class="div2">
<a id="Extension_Functions" name="Extension_Functions"></a><h3> <span class="mw-headline">4.11  Extension Functions</span></h3>
<p>XForms documents may use additional extension functions beyond those defined in the document and added by the expression language. A number of useful community extensions are defined at <a href="#ref-exslt" title=""> [EXSLT]</a>. The names of any such extension functions must be declared in attribute <code>functions</code> on element <code>model</code>. Such declarations are used by the XForms Processor to check against available extension functions. XForms Processors perform this check at the time the document is loaded, and halt processing by signaling an exception (<a href="#evt-computeException" title="">xforms-compute-exception</a>) if the XForms document declares an extension function for which the processor does not have an implementation.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Explicitly declaring extension functions enables XForms Processors to detect the use of unimplemented extension functions at document load-time, rather than throwing a fatal exception (<a href="#evt-bindingException" title="">xforms-bind-exception</a> or <a href="#evt-computeException" title="">xforms-compute-exception</a>) during user interaction. Failure by authors to declare extension functions will result in an XForms Processor potentially halting processing during user interaction with a fatal error.
</p>
</div>
</div>
<div class="div1">
<a id="Datatypes" name="Datatypes"></a><h2> <span class="mw-headline">5 <span id="datatypes">Datatypes</span></span></h2>
<p>This chapter defines the datatypes used in defining an <a href="#def-xforms-model" title="">XForms Model</a>.
</p>
<div class="div2">
<a id="XML_Schema_Built-in_Datatypes" name="XML_Schema_Built-in_Datatypes"></a><h3> <span class="mw-headline">5.1 <span id="datatypes-schema">XML Schema Built-in Datatypes</span></span></h3>
<p>XForms supports all XML Schema 1.0 <a href="#def-datatype" title="">datatypes</a> except for <code>xsd:ENTITY</code>, <code>xsd:ENTITIES</code>, and <code>xsd:NOTATION</code>. Concepts <a href="#def-value-space" title="">value space</a>, <a href="#def-lexical-space" title="">lexical space</a> and constraining <a href="#def-facet" title="">facets</a> are as specified in [<a href="#ref-xschema-2" title="">XML Schema part 2</a>]. XForms Processors must treat these datatypes as in-scope without requiring the inclusion of an XML Schema.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The built-in datatype <code>xsd:duration</code> does not support a total ordering. Form authors are encouraged to use <code>xforms:dayTimeDuration</code> or <code>xforms:yearMonthDuration</code> instead.
</p>
</div></div><div class="div2">
<a id="XForms_Datatypes" name="XForms_Datatypes"></a><h3> <span class="mw-headline">5.2 <span id="datatypes-xforms">XForms Datatypes</span></span></h3>
<p>XForms defines the following types in the XForms namespace. These datatypes can be used in the <code>type</code> model item property without a namespace prefix when the default namespace is the XForms namespace. All of these datatypes allow empty content. XForms Processors must treat these datatypes as in-scope without requiring the inclusion of an XML Schema.
</p>
<div class="div3">
<a id="XForms_Datatypes_Allowing_Empty_Content" name="XForms_Datatypes_Allowing_Empty_Content"></a><h4> <span class="mw-headline">5.2.1 <span id="empty-content-types">XForms Datatypes Allowing Empty Content</span></span></h4>
<p>Many default XML schema types report empty content as invalid, which conflicts with the use of the <code>required</code> model item property. The following XForms datatypes are defined as having a lexical space consisting of either the empty string or the lexical space of the corresponding XML schema datatype. Although some XML schema datatypes do allow empty string content, they have also been added to the available XForms datatypes for form authoring consistency.
</p><p>Built-in primitive types (in the XForms namespace):
</p>
<blockquote>

dateTime<br />time<br />date<br />duration<br />gYearMonth<br />gYear<br />gMonthDay<br />gDay<br />gMonth<br />string<br />boolean<br />base64Binary<br />hexBinary<br />float<br />decimal<br />double<br />anyURI<br />QName

</blockquote>
<p>Built-in derived types (in the XForms namespace):
</p>
<blockquote>

normalizedString<br />token<br />language<br />Name<br />NCName<br />ID<br />IDREF<br />IDREFS<br />NMTOKEN<br />NMTOKENS<br />integer<br />nonPositiveInteger<br />negativeInteger<br />long<br />int<br />short<br />byte<br />nonNegativeInteger<br />unsignedLong<br />unsignedInt<br />unsignedShort<br />unsignedByte<br />positiveInteger

</blockquote></div><div class="div3">
<a id="xforms:listItem" name="xforms:listItem"></a><h4> <span class="mw-headline">5.2.2 <span id="dt-listItem">xforms:listItem</span></span></h4>
<p>This datatype serves as a base for the <a href="#dt-listItems" title=""> listItems</a> datatype. The lexical space for listItem permits one or more characters valid for xsd:string, except white space characters.
</p>
</div><div class="div3">
<a id="xforms:listItems" name="xforms:listItems"></a><h4> <span class="mw-headline">5.2.3 <span id="dt-listItems">xforms:listItems</span></span></h4>
<p>XForms includes form controls that produce simpleType list content. This is facilitated by defining a <code>derived-by-list</code> datatype. The lexical space for listItems is defined by list-derivation from <a href="#dt-listItem" title=""> listItem</a>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>In most cases, it is better to use markup to distinguish items in a list. See <a href="#The_itemset_Element" title="">The itemset Element</a>.
</p>
</div></div><div class="div3">
<a id="xforms:dayTimeDuration" name="xforms:dayTimeDuration"></a><h4> <span class="mw-headline">5.2.4 <span id="dt-dayTimeDuration">xforms:dayTimeDuration</span></span></h4>
<p>XForms includes a totally ordered duration datatype that can represent a duration of days, hours, minutes, and fractional seconds. The value space for this datatype is the set of fractional second values. This datatype is derived from <code>xsd:duration</code>.
</p><p>The dayTimeDuration datatype is made available by the XForms processor based on the following lexical space definition:
</p>
<div class="exampleOuter"><div class="exampleHead">xforms:dayTimeDuration type definition</div><div class="exampleInner">
<pre>&lt;xs:simpleType name="dayTimeDuration"&gt;
  &lt;xs:restriction base="xsd:string"&gt;

    &lt;xs:pattern value="([\-]?P([0-9]+D(T([0-9]+(H([0-9]+(M([0-9]+(\.[0-9]*)?S
			|\.[0-9]+S)?|(\.[0-9]*)?S)|(\.[0-9]*)?S)?|M([0-9]+
			(\.[0-9]*)?S|\.[0-9]+S)?|(\.[0-9]*)?S)|\.[0-9]+S))?
			|T([0-9]+(H([0-9]+(M([0-9]+(\.[0-9]*)?S|\.[0-9]+S)?
			|(\.[0-9]*)?S)|(\.[0-9]*)?S)?|M([0-9]+(\.[0-9]*)?S|\.[0-9]+S)?
			|(\.[0-9]*)?S)|\.[0-9]+S)))?"/&gt;

  &lt;/xs:restriction&gt;
&lt;/xs:simpleType&gt;
</pre>
</div>
</div>
<div class="exampleOuter"><div class="exampleHead">Example xforms:dayTimeDuration values</div><div class="exampleInner">
<pre> P13D
 PT47H
 P3DT2H
-PT35.89S
 P4DT251M
</pre>
</div>
</div><div class="div3">
<a id="xforms:yearMonthDuration" name="xforms:yearMonthDuration"></a><h4> <span class="mw-headline">5.2.5 <span id="dt-yearMonthDuration">xforms:yearMonthDuration</span></span></h4>
<p>XForms includes a totally ordered duration datatype that can represent a duration of a whole number of months and years. The value space for this datatype is the set of integer month values. This datatype is derived from <code>xsd:duration</code>.
</p><p>The yearMonthDuration datatype is made available by the XForms processor based on the following lexical space definition:
</p>
<div class="exampleOuter"><div class="exampleHead">xforms:yearMonthDuration type definition</div><div class="exampleInner">
<pre>&lt;xs:simpleType name="yearMonthDuration"&gt;
  &lt;xs:restriction base="xsd:string"&gt;

    &lt;xs:pattern value="([\-]?P[0-9]+(Y([0-9]+M)?|M))?"/&gt;

  &lt;/xs:restriction&gt;
&lt;/xs:simpleType&gt;
</pre>
</div>
</div>
<div class="exampleOuter"><div class="exampleHead">Example xforms:yearMonthDuration values</div><div class="exampleInner">
<pre>P3Y
P36M
-P1Y1M
</pre>
</div>
</div><div class="div3">
<a id="xforms:email" name="xforms:email"></a><h4> <span class="mw-headline">5.2.6 <span id="dt-email">xforms:email</span></span></h4>
<p>This datatype represents an email address, as defined by [<a href="#ref-rfc-2822" title="">RFC 2822</a>]. Internationalized email addresses are not restricted by XForms beyond the definition in the RFC. For simplicity, some extremely uncommon features of the RFC syntax are not allowed, such as "Obsolete Addressing" from section 4.4, square-bracketed "domain-literal"s, and insignificant whitespace and comments.
</p><p>The email datatype is made available by the XForms processor based on the following lexical space definition:
</p>
<div class="exampleOuter"><div class="exampleHead">xforms:email type definition</div><div class="exampleInner">
<pre>&lt;xs:simpleType name="email"&gt;
  &lt;xs:restriction base="xsd:string"&gt;

    &lt;xs:pattern value="([A-Za-z0-9!#-'\*\+\-/=\?\^_`\{-~]+(\.[A-Za-z0-9!#-'\*\+\-/=\?\^_`\{-~]+)*@[A-Za-z0-9!#-'\*\+\-/=\?\^_`\{-~
]+(\.[A-Za-z0-9!#-'\*\+\-/=\?\^_`\{-~]+)*)?"/&gt;

  &lt;/xs:restriction&gt;
&lt;/xs:simpleType&gt;
</pre>
</div>
</div>
<div class="exampleOuter"><div class="exampleHead">Example xforms:email addresses</div><div class="exampleInner">
<pre>editors@example.com
~my_mail+{nospam}$?@sub-domain.example.info
</pre>
</div>
<div class="note">
<p><b>Note:</b>
</p><p>Whilst the string <code><a class="external free" href="mailto:editors@example.com" rel="nofollow" title="mailto:editors@example.com">mailto:editors@example.com</a></code> is a valid xsd:anyURI, it is not a valid xforms:email because the colon separator for the URI scheme is not allowed before the '@' symbol. A valid xforms:email address does not include a <code>mailto:</code> URI scheme.
</p>
</div>
</div><div class="div3">
<a id="xforms:card-number" name="xforms:card-number"></a><h4> <span class="mw-headline">5.2.7 <span id="dt-card-number">xforms:card-number</span></span></h4>
<p>This type defines the basic lexical properties of a datatype that can be used to represent various ID, debit and credit card numbers.. The lexical space of the xforms:card-number datatype is a pattern restriction on <code>xsd:string</code>: it must be zero or more digits (0 - 9).
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The display representation of this datatype by form controls is not required to match the lexical space of the bound instance data. User agents should apply appropriate conventions to the display and input of values, including separator characters.
</p>
</div><div class="exampleOuter"><div class="exampleHead">xforms:card-number type definition</div><div class="exampleInner">
<pre>&lt;xs:simpleType name="card-number"&gt;
   &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
         This type defines the basic lexical properties for a datatype that can be used to represent
         various ID numbers such as for debit and credit cards.
         This type does not apply the Luhn checksum algorithm.
      &lt;/xs:documentation&gt;
   &lt;/xs:annotation&gt;
   &lt;xs:restriction base="xsd:string"&gt;
      &lt;xs:pattern value="[0-9]*"/&gt;
   &lt;/xs:restriction&gt;
&lt;/xs:simpleType&gt;
</pre>
</div></div>
<p>The standard defines the structure of the number as well as how to apply the Luhn formula to ensure a correct check digit. This type only specifies the format of the number. The complementary function <code>is-card-number()</code> should be used to validate that the ID number conforms to the specification.
</p>
<div class="exampleOuter"><div class="exampleHead">Credit Card Example</div><div class="exampleInner">
<pre>&lt;model xmlns="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>"&gt;
   &lt;instance&gt;
      &lt;payment method="cc" xmlns="http://commerce.example.com/payment"&gt;
         &lt;number&gt;4111111111111111&lt;/number&gt;
         &lt;expiry/&gt;
      &lt;/payment&gt;
   &lt;/instance&gt;
   &lt;bind ref="number" type="card-number" constraint="is-card-number(.)"/&gt;
&lt;/model&gt;
</pre>
</div>
<p>This example specifies that the element <code>number</code> is of the type <code>card-number</code> and that to be valid the <code>is-card-number()</code> function must evaluate to true indicating that check digit is valid.
</p>
</div></div></div></div>
<div class="div1">
<a id="Model_Item_Properties" name="Model_Item_Properties"></a><h2> <span class="mw-headline">6 <span id="model">Model Item Properties</span></span></h2>
<p>This chapter defines infoset contributions that can be bound to <b>instance data nodes</b> with element <code>bind</code> (see <a href="#The_bind_Element" title="">The bind Element</a>). The combination of these contributions to an <a href="#def-instance-data-node" title="">instance data node</a> is called a <a href="#def-model-item" title="">model item</a>. Taken together, these contributions are called <a href="#def-model-item-property" title="">model item properties</a>, and are defined in the following section. In contrast, the term <a href="#def-schema-constraint" title="">Schema constraint</a> refers only to XML Schema constraints from the <a href="#def-facet" title="">facets</a> of a given datatype.
</p><p>It is an exception (<a href="#The_xforms-binding-exception_Event" title="">The xforms-binding-exception Event</a>) to attach <a href="#Model_Item_Properties" title="">Model Item Properties</a> to atomic values or nodes that don't belong to an instance.
</p>
<div class="div2">
<a id="Model_Item_Property_Definitions" name="Model_Item_Property_Definitions"></a><h3> <span class="mw-headline">6.1 <span id="model-xformsconstraints">Model Item Property Definitions</span></span></h3>
<p>Model item properties can be distinguished along various axes.
</p><p>Computed expressions vs. fixed properties:
</p>
<ul><li> Fixed properties are static values that the XForms Processor evaluates only once. Such properties consist of literals, and are not subject to evaluation of expressions.
</li><li> <a href="#def-computed-expression" title="">Computed expressions</a> are expressions that provide a value to the XForms Processor. Such values are recalculated at certain times as specified by the XForms Processing Model (see <a href="#Processing_Model" title="">Processing Model</a>). These expressions encode dynamic properties, often constraints, such as the dependency among various data items. Computed expressions are not restricted to examining the value of the instance data node to which they apply. Expressions provide the means to traverse the instance data; more complex computations may be encoded as call-outs to external scripts.
</li></ul>
<p>Inheritance rules:
</p><p>Some model item properties define inheritance rules, in which case the XForms Processor needs to keep track of two separate values: 1) the <b>local value</b>, which is applied from an attribute of element <code>bind</code>, and 2) the <b>inherited value</b>, which is determined by combining the evaluated local value with the evaluated values from ancestor nodes in the instance data.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The sample recalculation algorithm defined in <a href="#Recalculation_Sequence_Algorithm" title="">Recalculation Sequence Algorithm</a> is defined to operate only on the local values of a model item property. It assumes that an implementation propagates the combined values to a node's descendants.
</p>
</div>
<p>Assigning local values:
</p><p>Local values are assigned by processing all bind elements in an XForms Model in document order.
For most properties it is allowed to assign the same property more than once to a value using different bind elements (for instance having two binds selecting the same element, each specifying a constraint). Depending on the property, the additional bindings are either combined so that all have to be true, or that at least one has to be true, according to the following table:
</p>
<table border="1">

<tbody><tr>
<th> property
</th><th> combination
</th></tr>
<tr>
<td> type
</td><td> all
</td></tr>
<tr>
<td> constraint
</td><td> all
</td></tr>
<tr>
<td> relevant
</td><td> all
</td></tr>
<tr>
<td> required
</td><td> one
</td></tr>
<tr>
<td> readonly
</td><td> one
</td></tr>
<tr>
<td> calculate
</td><td> (not allowed)
</td></tr>
<tr>
<td> p3ptype
</td><td> (not allowed)
</td></tr></tbody></table>
<p>For example, 
</p>
<pre>&lt;bind ref="action" readonly="../status='accepted'" /&gt;
&lt;bind ref="action" readonly="../status='rejected'" /&gt;
</pre>
<p>has the same effect as
</p>
<pre>&lt;bind ref="action" readonly="../status='accepted' or ../status='rejected'" /&gt;
</pre>
<p>See also <a href="#The_xforms-rebuild_Event" title="">The xforms-rebuild Event</a> for details of the properties being applied.
</p><p>The following sections list the model item properties available as part of all <a href="#def-model-item" title="">model items</a>. For each, the following information is provided:
</p>
<blockquote>

Description<br />Computed Expression (yes or no)<br />Legal Values<br />Default Value<br />Inheritance Rules

</blockquote><div class="div3">
<a id="The_type_Property" name="The_type_Property"></a><h4> <span class="mw-headline">6.1.1 <span id="model-prop-type">The type Property</span></span></h4>
<p>Description: The <code>type</code> model item property [doesn't support AVT] can be applied to both elements and attributes. The <code>type</code> model item property is not applied to instance nodes that contain child elements. The <code>type</code> model item property associates a datatype (as defined in [<a href="#ref-xschema-2" title="">XML Schema part 2</a>]) with the string-value (as defined in [<a href="#ref-xpath-1.0" title="">XPath 1.0</a>]) of an instance node. The datatype being associated can be obtained from a simpleType definition or a simpleContent definition from a complexType. If the datatype cannot be obtained as just described, then the Default Value of <code>xsd:string</code> is used. This model item property does not prevent form controls and XForms actions from setting invalid values into data nodes.
</p><p>Computed Expression: No.
</p><p>Legal Values: Any <code>xsd:QName</code> representing a datatype definition in an XML Schema. The namespace context from the parent <code>bind</code> of the <code>type</code> attribute is used to resolve the namespace qualification of the value.
</p><p>Default Value: <code>xsd:string</code>.
</p><p>Inheritance Rules: does not inherit.
</p><p>This model item property contributes to the overall validity assessment of a node; the effect of validity state on bound form controls is described in Section <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>In XML Schema, an element can be made nillable. Although this means it can have empty content, nillable is defined by [<a href="#ref-xschema-1" title="">XML Schema part 1</a>] to be a property of an element, not a type. Therefore, the nillable property from XML Schema cannot be applied to instance nodes using the <code>type</code> model item property.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Associating datatypes with instance nodes</div><div class="exampleInner">
<pre>&lt;model xmlns:my="http://example.org"&gt;

   &lt;xs:schema targetNamespace="http://example.org" xmlns:my="http://example.org"&gt;
      &lt;xs:simpleType name="Currency"&gt;
	&lt;xs:restriction base="xsd:string"&gt;
           &lt;xs:enumeration value="USD"/&gt;
           &lt;xs:enumeration value="EUR"/&gt;
	&lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;

      &lt;xs:complexType name="Price"&gt;
         &lt;xs:simpleContent&gt;
            &lt;xs:extension base="xsd:double"&gt;
               &lt;xs:attribute name="currency" type="my:Currency" use="optional" default="USD"/&gt;
            &lt;/xs:extension&gt;
         &lt;/xs:simpleContent&gt;
      &lt;/xs:complexType&gt;
   &lt;/xs:schema&gt;

   &lt;instance&gt;
      &lt;data xmlns="http://example.org"&gt;
         &lt;aString&gt;Hello, world!&lt;/aString&gt;
         &lt;simpleType&gt;
            &lt;price&gt;100.00&lt;/price&gt;
            &lt;price&gt;abc&lt;/price&gt;
            &lt;price currency="EUR"&gt;100.00&lt;/price&gt;
            &lt;price currency="EUR"&gt;abc&lt;/price&gt;
         &lt;/simpleType&gt;
         &lt;complexType&gt;
            &lt;price&gt;100.00&lt;/price&gt;
            &lt;price&gt;abc&lt;/price&gt;
            &lt;price currency="abc"&gt;100.00&lt;/price&gt;
            &lt;price currency="EUR"&gt;abc&lt;/price&gt;
         &lt;/complexType&gt;
      &lt;/data&gt;
   &lt;/instance&gt;

   &lt;bind ref="my:aString" type="xsd:string"/&gt;
   &lt;bind ref="my:simpleType/my:price" type="xsd:double"/&gt;
   &lt;bind ref="my:complexType/my:price" type="my:Price"/&gt;
   &lt;bind ref="my:complexType/my:price[3]/@currency" type="my:Currency"/&gt;
   &lt;bind ref="/my:data" type="xsd:string"/&gt;

&lt;/model&gt;
</pre>
</div>
<p>The first bind expresses the default datatype of xsd:string.
</p><p>The second and third binds place type model item properties on each of the four <code>price</code> element children of the elements <code>simpleType</code> and <code>complexType</code>. Both binds associate the datatype <code>xsd:double</code> with the nodes. In both cases, the first and third nodes are considered valid according to the type model item property because their content matches the <code>xsd:double</code> datatype constraint. For both binds, the second and fourth <code>price</code> nodes are not valid due to their content.
</p><p>The fourth bind places a type model item property on the <code>currency</code> attribute of the third <code>price</code> element. According to this association, the <code>currency</code> attribute node is not valid because its content does not match the enumeration given for <code>my:Currency</code>. Note that the containing element <code>price</code> is valid according to its type model item property.
</p><p>The fifth bind attempts to associate a datatype with the <code>data</code> element. The association is ignored since the <code>data</code> element contains child elements.
</p>
</div></div><div class="div3">
<a id="The_readonly_Property" name="The_readonly_Property"></a><h4> <span class="mw-headline">6.1.2 <span id="model-prop-readOnly">The readonly Property</span></span></h4>
<p>Description: describes whether the node content is restricted from changing.
</p><p>Computed Expression: Yes.
</p><p>Legal Values: Any expression that is convertible to a <code>boolean</code> as described in the <a href="#def-expression-module" title="">expression module</a>.
</p><p>Default Value: <code>false()</code>, unless a <code>calculate</code> is specified for the value property, then <code>true()</code>.
</p><p>Inheritance Rules: If any ancestor node evaluates to <code>true</code>, this value is treated as <code>true</code>. Otherwise, the local value is used.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This is the equivalent of taking the logical OR of the evaluated <code>readonly</code> property on the local and every ancestor node.
</p>
</div>
<p>When <code>true</code>, this model item property indicates that the XForms Processor must not allow any direct changes to the content of the bound instance data node from constructs other than the model item property system (i.e. other than a <code>calculate</code>). Instance mutations performed by <code>submission</code>, form controls, DOM interface access, and XForms actions must not insert or copy a new node into a parent node that is readonly, delete or replace a node whose parent is readonly, nor change the value or content of a readonly node. A node that is readonly but whose parent is not readonly can be entirely deleted or replaced by a submission even though doing so indirectly results in deletion or replacement of readonly descendant nodes.
</p><p>In addition to restricting value changes, the <code>readonly</code> model item property provides information to the XForms user interface about how bound form controls should be rendered. Form controls bound to instance data with the <code>readonly</code> model item property that evaluates to <code>true</code> should indicate that entering or changing the value is not allowed. This specification does not define any effect of the <code>readonly</code> model item property on visibility, focus, or navigation order.
</p>
<div class="exampleOuter"><div class="exampleHead">Attaching a readonly property</div><div class="exampleInner">
<pre>&lt;instance&gt;
  &lt;my:person-name&gt;
    &lt;my:first-name&gt;Roland&lt;/my:first-name&gt;
    &lt;my:last-name/&gt;
  &lt;/my:person-name&gt;
&lt;/instance&gt;
&lt;bind ref="my:first-name" readonly="true()"/&gt;
</pre>
</div>
<p>Here, we have associated a <code>readonly</code> property with an element.
</p>
</div>
<p>The following example illustrates the ability to override the default <code>readonly</code> setting on calculated nodes.
</p>
<div class="exampleOuter"><div class="exampleHead">Setting a default value</div><div class="exampleInner">
<pre>&lt;model&gt;
   &lt;instance&gt;
     &lt;my:data&gt;&lt;/my:data&gt;
   &lt;/instance&gt;
   &lt;bind ref="/my:data" readonly="false()" calculate="choose(.='', 'default', .)"/&gt;
 &lt;model&gt;
 &lt;input ref="/my:data"&gt; ...
 
</pre>
</div>
<p>The calculate on <code>my:data</code> is executed on any recalculate that follows a rebuild, including the form initialization, so the user initially sees the word 'default'. The user may make any change to <code>my:data</code> with the <code>input</code>, and the calculation will be executed again as a result. Therefore, if the user enters an empty value, then the calculate will change <code>my:data</code> back to 'default'.
</p>
</div></div><div class="div3">
<a id="The_required_Property" name="The_required_Property"></a><h4> <span class="mw-headline">6.1.3 <span id="model-prop-required">The required Property</span></span></h4>
<p>Description: describes whether a value is required before the instance data is submitted.
</p><p>Computed Expression: Yes.
</p><p>Legal Values: Any expression that is convertible to a <code>boolean</code> as described in the <a href="#def-expression-module" title="">expression module</a>.
</p><p>Default Value: <code>false()</code>.
</p><p>Inheritance Rules: does not inherit.
</p><p>A form may <i>require</i> certain values, and this requirement may be dynamic. When evaluating to <code>true</code>, this model item property indicates that a non-empty instance data node is required before a submission of instance data can occur. Non-empty is defined as: The value of the bound instance data node must be convertible to <code>string</code> using the string conversion function as described in the <a href="#def-expression-module" title="">expression module</a> with a length greater than zero.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The XML Schema feature represented by <code>nillable</code> and <code>xsi:nil</code> is unrelated to the XForms <code>required</code> model item property. An element may have the <code>xsi:nil</code> attribute set to <code>true</code> to indicate that its empty content is schema valid, but if the <code>required</code> model item property for that element node is <code>true</code>, then the element violates the <code>required</code> constraint because a required node must be non-empty as defined above.
</p>
</div>
<p>Except as noted below, the <code>required</code> model item property does not provide a hint to the XForms user interface regarding visibility, focus, or navigation order. XForms authors are strongly encouraged to make sure that form controls that accept <code>required</code> data are visible. An XForms Processor must provide an indication that a form control is required, and may provide immediate feedback, including limiting navigation. This model item property does not prevent form controls and XForms actions from setting empty strings into data nodes.
</p>
<div class="exampleOuter"><div class="exampleHead">Attaching a required property</div><div class="exampleInner">
<pre>&lt;instance&gt;
  &lt;my:person-name&gt;
    &lt;my:first-name&gt;Roland&lt;/my:first-name&gt;
    &lt;my:last-name /&gt;
  &lt;/my:person-name&gt;
&lt;/instance&gt;
&lt;bind ref="my:last-name" required="true()"/&gt;
</pre>
</div>
<p>Here, we have associated a <code>required</code> property with element <code>my:last-name</code> to indicate that a value must be supplied.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>XML Schema has a similarly named concept with <code>use</code>=<code>"required|optional|prohibited"</code>. This is different than the XForms Model item property, in two ways: 1) <code>use</code> applies only to attributes, while XForms <code>required</code> applies to any node. 2) <code>use</code> is concerned with whether the entire attribute must be specified (without regard to value), while <code>required</code> determines whether a value is required of the node before submission.
</p>
</div></div><div class="div3">
<a id="The_relevant_Property" name="The_relevant_Property"></a><h4> <span class="mw-headline">6.1.4 <span id="model-prop-relevant">The relevant Property</span></span></h4>
<p>Description: indicates whether the model item is currently <i>relevant</i>. Instance data nodes with this property evaluating to <code>false</code> are unavailable in the user interface and can be removed from submission serialization.
</p><p>Computed Expression: Yes.
</p><p>Legal Values: Any expression that is convertible to a <code>boolean</code> as described in the <a href="#def-expression-module" title="">expression module</a>.
</p><p>Default Value: <code>true()</code>.
</p><p>Inheritance Rules: If any ancestor node evaluates to <code>false</code>, this value is treated as <code>false</code>. Otherwise, the local value is used.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This is the equivalent of taking the logical AND of the evaluated <code>relevant</code> property on the local and every ancestor node.
</p>
</div>
<p>Many forms have data entry sections that depend on other conditions. For example, a form might ask whether the respondent owns a car. It is only appropriate to ask for further information about their car if they have indicated that they own one.
</p><p>Through single node UI bindings, the <code>relevant</code> model item property provides information to the XForms user interface regarding visibility, focus, and navigation order. In general, when <code>true</code>, associated form controls should be made available for user interaction. When <code>false</code>, associated form controls (and any children) and group and switch elements (including content) must be made unavailable, removed from the navigation order, and not allowed focus. Typically, non-relevant user interface content is not presented, or it may be styled as disabled. Elements other than form controls may also use a Single Item Binding that selects a non-relevant node, but such elements are not made unavailable or non-operable due to the Single Item Binding because it is not a <a href="#def-ui-binding-expression" title="">UI binding expression</a>. For example, actions such as <a href="#The_setvalue_Element" title="">The setvalue Element</a> and <a href="#The_message_Element" title="">The message Element</a> or the <a href="#The_submission_Element" title="">The submission Element</a> remain operable if their Single Item Bindings select a non-relevant node. However, some such elements may indirectly be affected by the <code>relevant</code> model item property. For example, it is possible for non-relevant nodes to be excluded from the data of a submission. Similarly, non-relevance indirectly affects the running of actions because a non-relevant form control disables event handlers that listen for events targeted at the form control element.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>A core form control, group or switch must express a Single Item Binding in order to be associated with an instance node. Due to the definition of <a href="#def-repeat-object" title="">repeat object</a>, the <code>relevant</code> model item property of the node in the associated <a href="#def-repeat-item" title="">repeat item</a> affects the availability of the repeat object.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Attaching a relevant property</div><div class="exampleInner">
<pre>&lt;instance&gt;
  &lt;my:order&gt;
    &lt;my:item&gt;
      &lt;my:amount /&gt;
      &lt;my:discount&gt;100&lt;/my:discount&gt;
    &lt;/my:item&gt;
  &lt;/my:order&gt;
&lt;/instance&gt;
&lt;bind ref="my:item/my:discount" readonly="true()"
      relevant="../my:amount &gt; 1000"/&gt;
</pre>
</div>
<p>Here, we have associated a <code>relevant</code> property with element <code>my:discount</code> to indicate a discount is relevant when the order amount is greater than 1000.
</p>
</div></div><div class="div3">
<a id="The_calculate_Property" name="The_calculate_Property"></a><h4> <span class="mw-headline">6.1.5 <span id="model-prop-calculate">The calculate Property</span></span></h4>
<p>Description: supplies an expression used to calculate a string value for the associated instance data node.
</p><p>Computed Expression: Yes.
</p><p>Legal Values: Any expression.
</p><p>Default Value: none.
</p><p>Inheritance Rules: does not inherit.
</p><p>An XForms Model may include model items whose string values are computed from other values. For example, the sum over line items for quantity times unit price, or the amount of tax to be paid on an order. The formula for such a computed value can be expressed with a <code>calculate</code> property, whose expression is evaluated, converted to a string with the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>, and stored as the value content of the calculated data node. Chapter <a href="#Processing_Model" title="">Processing Model</a> contains details of when and how the calculation is performed.
</p>
<div class="exampleOuter"><div class="exampleHead">Attaching a calculate property</div><div class="exampleInner">
<pre>&lt;instance&gt;
  &lt;my:order&gt;
    &lt;my:item&gt;
      &lt;my:amount /&gt;
      &lt;my:discount /&gt;
    &lt;/my:item&gt;
  &lt;/my:order&gt;
&lt;/instance&gt;
&lt;bind ref="my:item/my:discount" calculate="../my:amount * 0.1"
      relevant="../my:amount &gt; 1000"/&gt;
</pre>
</div>
<p>Here, we have associated a <code>relevant</code> property with element <code>my:discount</code> to indicate a discount of 10% is relevant when the order amount is greater than 1000.
</p>
</div></div><div class="div3">
<a id="The_constraint_Property" name="The_constraint_Property"></a><h4> <span class="mw-headline">6.1.6 <span id="model-prop-constraint">The constraint Property</span></span></h4>
<p>Description: specifies a predicate that needs to be satisfied for the associated instance data node to be considered valid.
</p><p>Computed Expression: Yes.
</p><p>Legal Values: Any expression that is convertible to a <code>boolean</code> as described in the <a href="#def-expression-module" title="">expression module</a>.
</p><p>Default Value: <code>true()</code>.
</p><p>Inheritance Rules: does not inherit.
</p><p>When evaluating to <code>false</code>, the associated model item is not valid; the converse is not necessarily true. This model item property does not prevent form controls and XForms actions from setting invalid values into data nodes. Chapter <a href="#Processing_Model" title="">Processing Model</a> contains details of when and how the constraint is calculated as well as when validation is performed. This model item property contributes to the overall validity assessment of a node; the effect of validity state on bound form controls is described in Section <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a>.
</p>
<div class="exampleOuter"><div class="exampleHead">Attaching a constraint property</div><div class="exampleInner">
<pre>&lt;instance&gt;
  &lt;my:range&gt;
    &lt;my:from /&gt;
    &lt;my:to /&gt;
  &lt;/my:range&gt;
&lt;/instance&gt;
&lt;bind ref="my:to" constraint=". &gt; ../my:from" /&gt;
</pre>
</div>
<p>Here, a <code>constraint</code> property associated with element <code>my:to</code> indicates that its value must be greater than that of element <code>my:from</code>.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>Specifying minimum and maximum occurrences for nodes in the instance data can be achieved by using the <code>count()</code> function within a <code>constraint</code> property.
</p>
</div></div><div class="div3">
<a id="The_p3ptype_Property_.28deprecated.29" name="The_p3ptype_Property_.28deprecated.29"></a><h4> <span class="mw-headline">6.1.7 <span id="model-prop-p3ptype">The p3ptype Property (deprecated)</span></span></h4>
<p>The p3ptype is deprecated.
</p><p>Description: Attaches a P3P data element to an instance data node, indicating the specific kind of data collected there. The attribute doesn't support AVT.
</p><p>Computed Expression: No.
</p><p>Legal Values: <code>xsd:string</code>.
</p><p>Default Value: none
</p><p>Inheritance Rules: does not inherit.
</p><p>This model item property holds a description of the kind of data collected by the associated instance data node, based on the P3P datatype system [<a href="#ref-p3p-1.0" title="">P3P 1.0</a>]. This information may be used to enhance the form-fill experience, for example by supplying previously-known data.
</p>
<div class="exampleOuter"><div class="exampleHead">Attaching a type constraint using Binding</div><div class="exampleInner">
<pre>&lt;instance&gt;
  &lt;my:person-name&gt;
    &lt;my:first-name /&gt;
    &lt;my:last-name /&gt;
  &lt;/my:person-name&gt;
&lt;/instance&gt;
&lt;bind type="my:nonEmptyString" ref="my:first-name"
      p3ptype="user.name.given"/&gt;
</pre>
</div>
<p>Here, we have attached both XML Schema and P3P type information to element <code>first-name</code> via element <code>bind</code>.
</p>
</div></div></div><div class="div2">
<a id="Schema_Constraints" name="Schema_Constraints"></a><h3> <span class="mw-headline">6.2 <span id="model-using">Schema Constraints</span></span></h3>
<p>Chapter <a href="#Datatypes" title="">Datatypes</a> described how XForms uses the XML Schema datatype system to constrain the <a href="#def-value-space" title="">value space</a> of data values collected by an XForms Model. Such datatype constraints can be provided via an XML Schema. Alternatively, this section lists various mechanisms for attaching type constraints to instance data. Attributes <code>xsi:schemaLocation</code> and <code>xsi:noNamespaceSchemaLocation</code> are ignored for purposes for locating a Schema.
</p>
<div class="div3">
<a id="Atomic_Datatype" name="Atomic_Datatype"></a><h4> <span class="mw-headline">6.2.1 <span id="model-using-atomic">Atomic Datatype</span></span></h4>
<p>The XForms Processing Model applies XML Schema facets as part of the validation process. At the simplest level, it is necessary to associate a set of facets (through an XML Schema datatype) with a model item. This has the effect of restricting the allowable values of the associated instance data node to valid representations of the lexical space of the datatype.
</p><p>The set of facets associated with a model item must be determined by the following list, as if it were processed in the given order. When multiple datatype restrictions apply to the same model item, the combination of all given restrictions must apply. Note that it is possible to produce a combination of restrictions that is impossible to satisfy; authors are encouraged to avoid this practice.
</p>
<ol><li> Applicable XML schema definitions (including those associated an external or an inline schema, or by <code>xsi:type</code>)
</li><li> An XForms <code>type</code> constraint associated with the instance data node using XForms <a href="#def-binding" title="">binding</a>.
</li><li> If no type constraint is provided, the instance data node defaults to <code>type="xsd:string"</code> (default to string rule).
</li></ol>
<p>The following declares a datatype based on <code>xsd:string</code> with an additional constraining facet.
</p>
<div class="exampleOuter"><div class="exampleHead">Type Constraint Using XML Schema</div><div class="exampleInner">
<pre>&lt;xs:simpleType name="nonEmptyString"&gt;
  &lt;xs:restriction base="xsd:string"&gt;
    &lt;xs:minLength value="1"/&gt;
  &lt;/xs:restriction&gt;
&lt;/xs:simpleType&gt;
</pre>
</div>
<p>This new datatype would then be associated with one or more model items through one of the methods outlined here.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Attaching A Type Constraint</div><div class="exampleInner">
<pre>&lt;my:first-name xsi:type="my:nonEmptyString"/&gt;
</pre>
</div>
<p>This defines element <code>first-name</code> to be of type <code>my:nonEmptyString</code>.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Attaching Type Constraint Using XForms Binding</div><div class="exampleInner">
<pre>&lt;instance&gt;
  &lt;my:first-name /&gt;
&lt;/instance&gt;
&lt;bind type="my:nonEmptyString" ref="/my:first-name"/&gt;
</pre>
</div>
<p>Here, we have attached type information to element <code>first-name</code> via element <code>bind</code>. Thus the XForms author can extend external schemas without having the ability to change them.
</p>
</div></div></div></div>
<div class="div1">
<a id="The_XForms_Submission_Module" name="The_XForms_Submission_Module"></a><h2> <span class="mw-headline">7 <span id="submit">The XForms Submission Module</span></span></h2>
<p>XForms is designed to gather <a href="#def-instance-data" title="">instance data</a>, serialize it into an external representation, and submit it with a protocol. XForms defines a set of options for serialization and submission. The following sections define the processing of instance data for submission, and the behavior for the serialization and submission options.
</p>
<div class="div2">
<a id="The_submission_Element_2" name="The_submission_Element_2"></a><h3> <span class="mw-headline">7.1 <span id="submit-submission-element">The submission Element</span></span></h3>
<p>The <code>submission</code> element represents declarative instructions on what to submit, how to submit it, and what to do with the result.
</p>
<table border="1" summary="listing of XForms submission element attributes and content model">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Overview of Attributes and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Overview of Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1"> submission
</td><td colspan="1" rowspan="1">
<blockquote>

<a href="#structure-attrs-common" title="">Common</a><br />
ref (<a href="#def-binding-expression" title="">binding-expression</a>)<br />
bind (xsd:IDREF)<br />
relevant (xsd:boolean)<br />
validate (xsd:boolean)<br />

resource (xsd:anyURI)<br />
action (xsd:anyURI) [deprecated]<br />
mode ("asynchronous"|"synchronous")<br />
method ("post"|"get"|"put"|"delete"|"multipart-post"|"form-data-post"|"urlencoded-post"|Any other <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>|<a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a>)<br />
serialization (xsd:string)<br />
mediatype (xsd:string)<br />
encoding (xsd:string)<br />

replace ("all"|"instance"|"text"|"none" | <a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a>)<br />
instance (xsd:IDREF)<br />
targetref (node-sequence Expression)<br />

separator (';' | '&amp;')<br />

version (xsd:NMTOKEN)<br />
indent (xsd:boolean)<br />
omit-xml-declaration (xsd:boolean)<br />
standalone (xsd:boolean)<br />
cdata-section-elements (QNameList)<br />
includenamespaceprefixes (xsd:NMTOKENS)

</blockquote>
</td><td colspan="1" rowspan="1">
<p>(<a href="#submit-resource-elem" title="">resource</a> | <a href="#submit-method-elem" title=""> method</a> | <a href="#submit-header" title=""> header</a>)*, <a href="#action-content-set" title="">Action</a>*
</p>
</td></tr></tbody></table>
<p>Below is a more detailed decription of each attribute whose name and datatype information appears above.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p><p>What to submit:
</p>
<dl><dt> ref
</dt><dd> Author-optional selector <a href="#def-binding-expression" title="">binding expression</a> enabling submission of a portion of the instance data. The selected node, and all descendants, are selected for submission. The default value is "/".
</dd><dt> bind
</dt><dd> Author-optional reference to a <code>bind</code> element. When present, the binding reference on this attribute is used in preference to any binding reference from the <code>ref</code> attribute.
</dd><dt> relevant
</dt><dd> Author-optional boolean attribute that indicates whether or not the relevance pruning of the submission is performed. The default value is "false" if the value of <code>serialization</code> is "none" and "true" otherwise.
</dd><dt> validate
</dt><dd> Author-optional boolean attribute that indicates whether or not the data validation checks of the submission are performed. The default value is "false" if the value of <code>serialization</code> is "none" and "true" otherwise.
</dd></dl>
<p>How to submit it:
</p>
<dl><dt> resource
</dt><dd> Attribute indicating the destination URI for submitting instance data. This attribute is not author-optional unless the destination URI is provided by the <code>resource</code> element, which can dynamically specify the URI based on instance data, or the <code>action</code> attribute. This attribute should be used in place of the <code>action</code> attribute. Behavior of relative URIs in links is determined by the host language, although [<a href="#ref-xml-base" title="">XML Base</a>] processing is strongly recommended.
</dd><dt> action
</dt><dd> Deprecated author-optional attribute indicating the destination URI for submitting instance data. Behavior of relative URIs in links is determined by the host language, although [<a href="#ref-xml-base" title="">XML Base</a>] processing is strongly recommended. Due to the addition of the <code>resource</code> attribute, this attribute is deprecated and optional. However, the destination URI must be specified by this attribute or by either the <code>resource</code> attribute or the <code>resource</code> element.
</dd><dt> mode
</dt><dd> Author-optional attribute defaulting to "asynchronous" and with legal values of "synchronous" and "asynchronous". This attribute controls whether or not the submission response processing is performed as part of the default processing of event <code>xforms-submit</code>. An asynchronous submission can complete default processing for this event before the submission response is received; in this case, submission response is processed once it is completely received asynchronously. For a "synchronous" submission, the submission response is received and processed during the default processing of event <code>xforms-submit</code>.
</dd><dt> method
</dt><dd> Author-optional attribute specifying the protocol operation to be used to transmit the serialized instance data. There is no default value because either the attribute <code>method</code> or the element <code>method</code> must be specified. See Section <a href="#Submission_Options" title="">Submission Options</a> for information on how this attribute affects the default serialization of instance data and the HTTP method [<a href="#ref-rfc-2616" title="">RFC 2616</a>].
</dd><dt> serialization
</dt><dd> Author-optional attribute that controls how and whether to serialize instance data as part of the submission. The format is type/subtype, or the single word "none". Allowable values are "application/xml", "application/x-www-form-urlencoded", "multipart/related", "multipart/form-data", or any of the values allowed in the section <a href="#initialize-instance-external" title="">Creating instance data from external resources</a>.  The default value of this attribute is based on the submission <code>method</code> as described in Section <a href="#Submission_Options" title="">Submission Options</a>. If the attribute value is "none", then instance data is not serialized as part of the submission. This can be useful for requests that either require no data or that have the data already gathered in the URI. <div class="note"><b>Note:</b> Setting <code>serialization</code> to "none" will also have the default effect of preventing relevance pruning and validation. However, the author is free to override this by setting <code>relevant</code> and/or <code>validate</code> attributes to "true".</div>
</dd><dt> mediatype
</dt><dd> Author-optional attribute specifying the mediatype of the serialization, to be used in the <code>Content-type</code> header of HTTP, or similar, according to the format specified in [<a href="#ref-rfc-2119" title="">RFC 2119</a>]. It is the author's responsibility to ensure that the type specified is compatible with the serialization used, such as <code>application/xhtml+xml</code> for posted XML data. The default is serialization-dependent, but is "application/xml" for XML serialization. <div class="note"><b>Note:</b> This attribute does not affect serialization and does not override the <code>serialization</code> attribute. It is only used to provide additional information about the submission data serialized. For example, this attribute could be used to indicate that the content type of an XML serialization is <code>application/xhtml+xml</code>.</div>
</dd><dt> encoding
</dt><dd> Author-optional attribute specifying the character encoding to be used for serialization. The default is "UTF-8".
</dd></dl>
<p>What to do with the result:
</p>
<dl><dt> replace
</dt><dd> Author-optional attribute specifying how the information returned after submit should be applied. The legal values are "all", "instance", "text" and "none", with a default of "all"
</dd><dt> instance
</dt><dd> Author-optional attribute specifying the instance to replace when the <code>replace</code> attribute value is "instance". When the attribute is absent, then the default is the instance that contains the submission data. An xforms-binding-exception (<a href="#The_xforms-binding-exception_Event" title="">The xforms-binding-exception Event</a>) occurs if this attribute does not indicate an instance in the same model as the submission.
</dd><dt> targetref
</dt><dd> Author-optional attribute containing an expression that indicates the target node for data replacement. The in-scope evaluation context of the <code>submission</code> element is used to evaluate the expression. If <code>replace</code> is "instance", then the target node is replaced by the submission result. If <code>replace</code> is "text", then the content of the target node is replaced by the submission result. For other values of the <code>replace</code> attribute, this attribute is ignored. By default, the target node is the document element of the instance indicated by the <code>instance</code> attribute.
</dd></dl>
<p>If the data is serialized as application/x-www-form-urlencoded, the following attribute also applies:
</p>
<dl><dt> separator
</dt><dd> Author-optional attribute specifying the separator character between name/value pairs in urlencoding. The default value is '&amp;'. To express the default, character entity encoding is used: <code>separator='&amp;amp;'</code>.
</dd></dl>
<p>If the data is serialized as XML, the following attributes also apply:
</p>
<dl><dt> version
</dt><dd> Author-optional attribute specifying the <code>version</code> of XML to be serialized. The default is "1.0".
</dd><dt> indent
</dt><dd> Author-optional attribute specifying whether the serializer should add extra white space nodes for readability. The default is "false".
</dd><dt> omit-xml-declaration
</dt><dd> Author-optional attribute specifying whether to omit the XML declaration on the serialized instance data. The default value is "false".
</dd><dt> standalone
</dt><dd> Author-optional attribute specifying whether to include a standalone declaration in the serialized XML. If the <code>omit-xml-declaration</code> attribute has the value <code>true</code>, then this attribute is ignored. Otherwise, if this attribute is omitted, then the XML declaration does not include a standalone document declaration, and if this attribute is specified, then the XML declaration includes a standalone document declaration with the same value as this attribute.
</dd><dt> cdata-section-elements
</dt><dd> Author-optional attribute specifying element names to be serialized with CDATA sections. The default is empty string.
</dd><dt> includenamespaceprefixes
</dt><dd> Author-optional attribute providing control over namespace serialization. If absent, all namespace nodes present in the instance data are considered for serialization. If present, specifies list of namespace prefixes to consider for serialization, in addition to those visibly utilized. As in <a href="#Exc-C14N" title="">Exc-C14N</a> [<a href="#ref-Exc-C14N" title="">Exc-C14N</a>], the special value <code>#default</code> specifies the default namespace.
</dd></dl>
<p>The following examples show how various options on element <code>submission</code> can affect serialization as <code>application/xml</code>. Given the following XForms fragment:
</p>
<div class="exampleInner">
<pre>&lt;model xmlns:xforms="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>"
       xmlns:my="http://ns.example.org/2003"&gt;
  &lt;instance&gt;
    &lt;qname xmlns=""&gt;my:sample&lt;/qname&gt;
  &lt;/instance&gt;
  &lt;submission method="post" resource="..."/&gt;
&lt;/model&gt;
</pre>
</div>
<p>Note that the <code>includenamespaceprefixes</code> attribute is not present, which causes all namespace nodes to be serialized, resulting in the following serialized instance data:
</p>
<div class="exampleInner">
<pre>&lt;qname xmlns:xforms="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>"
       xmlns:my="http://ns.example.org/2003"&gt;my:sample&lt;/qname&gt;
</pre>
</div>
<p>In particular, note that the XForms namespace has been serialized. To prevent this example from including the unneeded XForms namespace while maintaining the needed <code>my</code> prefix, <code>includenamespaceprefixes="my"</code> must be added to the submission element. When this attribute is present, the author takes responsibility to list all namespace prefixes not visibly utilized by the submitted instance data.
</p><p>The following attributes correspond (in spelling, processing, and default values) to attributes on the <code>output</code> element of [<a href="#ref-xslt" title="">XSLT 1.0</a>], with the exception of using <code>xsd:boolean</code> to replace <code>"yes"|"no"</code>:
</p>
<blockquote>

version<br />indent<br />encoding<br />omit-xml-declaration<br />cdata-section-elements

</blockquote><div class="note">
<p><b>Note:</b>
</p><p>The following XSLT attributes have no counterpart in XForms:
</p>
<blockquote>

doctype-system<br />doctype-public

</blockquote></div>
<p>The table below provides an overview of the child elements of the XForms <code>submission</code> element, including their attributes and content models. Elements defined in the XForms Actions module are also allowed in the content model of <code>submission</code>.
</p>
<table border="1" summary="listing of child elements of the XForms submission element, and their attributes and content models">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Overview of Attributes and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Overview of Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1"> resource
</td><td colspan="1" rowspan="1"> value (string Expression)
</td><td colspan="1" rowspan="1"> PCDATA
</td></tr>
<tr>
<td colspan="1" rowspan="1"> method
</td><td colspan="1" rowspan="1"> value (string Expression)
</td><td colspan="1" rowspan="1"> PCDATA
</td></tr>
<tr>
<td colspan="1" rowspan="1"> header
</td><td colspan="1" rowspan="1"> ref (node-sequence Expression) | nodeset (node-sequence Expression, deprecated)
</td><td colspan="1" rowspan="1"> name, value+
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-content-set" title="">Action</a>
</p>
</td><td colspan="1" rowspan="1"> various
</td><td colspan="1" rowspan="1"> various
</td></tr></tbody></table>
</div><div class="div2">
<a id="The_xforms-submit_Event" name="The_xforms-submit_Event"></a><h3> <span class="mw-headline">7.2 <span id="submit-evt-submit">The xforms-submit Event</span></span></h3>
<p>Target: <code>submission</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>For brevity in the following, the text "the submission succeeds" means "submission processing concludes after dispatching <code>xforms-submit-done</code> with appropriate context information", and the text "the submission fails with <i>error-code</i>" means "the submission processing concludes after dispatching <code>xforms-submit-error</code> with appropriate context information, including an <code>error-type</code> of <i>error-code</i>".
</p><p>No more than a single submit process can be under way at any time for a particular XForms submission. From the start of the default action of <code>xforms-submit</code> for a <code>submission</code>, until immediately before <code>xforms-submit-done</code> or <code>xforms-submit-error</code> is dispatched to that <code>submission</code>, the default action for subsequent <code>xforms-submit</code> events dispatched to that <code>submission</code> is to dispatch <code>xforms-submit-error</code> to that submission with context information containing an <code>error-type</code> of <code>submission-in-progress</code>.
</p><p>Otherwise, the default action for this event results in the following steps:
</p>
<ol><li> The data model is updated based on some of the flags defined for <a href="#action-deferred-updates" title="">deferred updates</a>. Specifically, if the deferred update <code>rebuild</code> flag is set for the <code>model</code> containing this <code>submission</code>, then the rebuild operation is performed without dispatching an event to invoke the operation. Then, if the deferred update <code>recalculate</code> flag is set for the <code>model</code> containing this <code>submission</code>, then the recalculate operation is performed without dispatching an event to invoke the operation. This sequence of operations affects the <a href="#action-deferred-update-behavior" title="">deferred update behavior</a> by clearing the deferred update flags associated with the operations performed.
</li><li> If the binding attributes of <code>submission</code> indicate an empty sequence or an item other than an element or an instance document root node, then submission fails with <code>no-data</code>. Otherwise, the binding attributes of <code>submission</code> indicate a node of instance data.
</li><li> The indicated node and all nodes for which it is an ancestor are selected. If the attribute <code>relevant</code> is <code>true</code>, whether by default or declaration, then any selected node which is not relevant as defined in <a href="#The_relevant_Property" title="">The relevant Property</a> is deselected (pruned). If all instance nodes are deselected, then submission fails with <code>no-data</code>.
</li><li> If the attribute <code>validate</code> is <code>true</code>, whether by default or declaration, then all selected instance data nodes are checked for validity according to the definition in <a href="#The_xforms-revalidate_Event" title="">The xforms-revalidate Event</a> (no notification events are marked for dispatching due to this operation). If any selected instance data node is found to be invalid, submission fails with <code>validation-error</code>.
</li><li> The <a href="#submit-method" title="">submission method</a> is determined.
</li><li> The <a href="#submit-resource" title="">submission resource</a> is determined. If the resource is not specified, then submission fails with <code>resource-error</code>.
</li><li> If the <code>serialization</code> attribute value is <code>"none"</code>, then the submission data serialization is the empty string. Otherwise, the event <code>xforms-submit-serialize</code> is dispatched; if the <code>submission-body</code> property of the event is changed from the initial value of empty string, then the content of the <code>submission-body</code> property string is used as the <code>submission data serialization</code>. Otherwise, the <code>submission data serialization</code> consists of a serialization of the selected instance data according to the rules stated in <a href="#serialization" title="">Serialization</a>.
</li><li> The <code>submission headers</code> are determined using the header entries produced by the <code>header</code> element(s) in the submission and the <code>mediatype</code> attribute or its default.
</li><li> The submission is performed based on the <code>submission headers</code>, <a href="#submit-method" title="">submission method</a>, <a href="#submit-resource" title="">submission resource</a>, and <code>submission data serialization</code>. The exact rules of submission are based on the URI scheme and the <a href="#submit-method" title="">submission method</a>, as defined in <a href="#Submission_Options" title="">Submission Options</a>.
</li></ol>
<p>If the <code>mode</code> of the <code>submission</code> is <code>asynchronous</code>, then default processing for this event ends after the above steps, and submission processing is resumed once the response from the submission is returned. In the same manner used to handle user-generated events or the dispatch and processing of delayed events, the processing of the asynchronous submission response is done without interrupting the processing of any other event and its event handlers. If the <code>mode</code> of the <code>submission</code> is <code>synchronous</code>, then the XForms processor suspends user interaction with all form controls of the document and action processing is blocked within the default processing for this event until the response from the submission is returned.
</p>
<div class="note"><div class="prefix"><b>Note:</b></div><p>A <code>submission</code> with no resource specification can be used to test validity of data. If the selected data is invalid, then the <code>xforms-submit-error</code> has an <code>error-type</code> of <code>validation-error</code>. If the selected data is valid, then the <code>xforms-submit-error</code> has an <code>error-type</code> of <code>resource-error</code>.
</p></div>
</div>
<div class="div3">
<a id="Processing_the_Response_from_a_Submission" name="Processing_the_Response_from_a_Submission"></a><h4> <span class="mw-headline">7.2.1 <span id="submission-response">Processing the Response from a Submission</span></span></h4>
<p>For success responses, if the response does not include a body, submission succeeds; otherwise, processing depends on the value of the <code>replace</code> attribute on element <code>submission</code>:
</p>
<ul><li><code>none</code>: submission succeeds.
</li><li><code>all</code>: the event <code>xforms-submit-done</code> <a href="#intro-reading" title="">may</a> be dispatched with appropriate context information, and submit processing concludes with the entire containing document being replaced with the returned body.
</li><li><code>instance</code>: If the body is not of type accepted by the processor, as specified in <a href="#initialize-instance-external" title="">Creating instance data from external resources</a>, nothing in the document is replaced and submission fails with <code>resource-error</code>. Otherwise the body is parsed to give an XPath Data Model according to <a href="#initialize-instance-external" title="">Creating instance data from external resources</a>. If the parse fails, then submission fails with <code>parse-error</code>. If the parse succeeds, then instance data replacement is performed according to <a href="#Replacing_Data_with_the_Submission_Response" title="">Replacing Data with the Submission Response</a>. If this operation fails, submission fails with <code>target-error</code>. Otherwise, submission succeeds. 
</li><li><code>text</code>: If the body is neither an XML media type (i.e. with a content type not matching any of the specifiers in [<a href="#ref-rfc-3023" title="">RFC 3023</a>]) nor a text type (i.e. with a content type not matching <code>text/*</code>), nothing in the document is replaced and submission fails with <code>resource-error</code>. Otherwise the content replacement is performed according to <a href="#Replacing_Data_with_the_Submission_Response" title="">Replacing Data with the Submission Response</a>. If this operation fails, then the submission fails with <code>target-error</code>. Otherwise, submission succeeds.
</li></ul>
<p>For error responses, processing depends on the value of the <code>replace</code> attribute on element <code>submission</code>:
</p>
<ul><li> <code>all</code>: either the document is replaced with an implementation-specific indication of an error or submission fails with <code>resource-error</code>.
</li><li> any other value: nothing in the document is replaced, and submission fails with <code>resource-error</code>.
</li></ul>
<p>Behaviors of other possible values for attribute <code>replace</code> are not defined in this specification.
</p><p>In addition to initiating a submission with its default processing, XForms actions can also provide handlers for the <code>xforms-submit</code> event to perform tasks such as data preparation.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Preparing data for submission</div><div class="exampleInner">
<pre>&lt;submission resource="http://example.com/searchDoctors" method="post" ref="instance('doctorSearchParams')"
            replace="instance" targetref="instance('doctorList')" &gt;
    &lt;action ev:event="xforms-submit"&gt;
        &lt;setvalue ref="diagnosis" value="instance('patientRecord')/malady"/&gt;
        &lt;setvalue ref="city" value="instance('patientRecord')/city"/&gt;
    &lt;/action&gt;
&lt;/submission&gt;
</pre>
</div>
<p>The schema for the doctor search service requires certain portions of the patient record in order to provide a list of specialists who could treat the patient. The server-side module may perform database searches for doctors with the required specialties as well as implement business rules such as providing doctors that are within an acceptable distance of the given city. The resulting list is provided to a separate instance so it can be presented to the user for selection or used in subsequent availability searches.
</p>
</div></div><div class="div3">
<a id="Replacing_Data_with_the_Submission_Response" name="Replacing_Data_with_the_Submission_Response"></a><h4> <span class="mw-headline">7.2.2 <span id="submit-data-replacement">Replacing Data with the Submission Response</span></span></h4>
<p>First, the <b>replacement target node</b> is determined:
</p>
<ul><li> if the <code>submission</code> element has neither an <code>instance</code> attribute nor a <code>targetref</code> attribute, the replacement target node is the document element node of the default instance of the model;
</li></ul>
<ul><li> if the <code>submission</code> element has an <code>instance</code> attribute but no <code>targetref</code> attribute, the replacement target node is the document element node of the instance identified by the <code>instance</code> attribute;
</li></ul>
<ul><li> if the <code>submission</code> element has a <code>targetref</code> attribute, the attribute value is interpreted as a <a href="#def-binding-expression" title="">binding expression</a> to which the <a href="#def-first-node-rule" title="">first-item rule</a> is applied to obtain the replacement target node. The evaluation context for this attribute is the in-scope evaluation context for the <code>submission</code> element, except the context node is modified to be the document element of the instance identified by the <code>instance</code> attribute if present.
</li></ul>
<p>If the replacement target node is any of the following, the processing of the replacement fails:
</p>
<ul><li> an empty sequence
</li><li> a readonly node, if <code>replace="text"</code>
</li><li> a non-element, if <code>replace="instance"</code>
</li><li> a node whose parent is readonly, if <code>replace="instance"</code>
</li></ul>
<p>Then the replacement is done according to the value of the <code>replace</code> attribute:
</p>
<ul><li> <code>text</code>: the response data is treated as text, regardless of its media type, and used to replace the content of the replacement target node using the XForms Action <code>setvalue</code> (<a href="#The_setvalue_Element" title="">The setvalue Element</a>).
</li></ul>
<ul><li> <code>instance</code>: the XML obtained from the submission response is used to replace the target node. The XML in the response may have comment and processing instruction nodes before and after the document element. These nodes are discarded if the replacement target node is not the document element of an instance. Otherwise, those processing instructions and comments replace any processing instructions and comments that previously appeared outside of the document element of the instance being replaced. The replacement is performed by an XForms action that performs some combination of node insertion and deletion operations that are performed by the <code>insert</code> action (<a href="#The_insert_Element" title="">The insert Element</a>) and the <code>delete</code> action (<a href="#The_delete_Element" title="">The delete Element</a>). 
</li></ul>
<p>If the <code>submission</code> has a <code>mode</code> of "<code>asynchronous</code>", then the text replacement action or the instance node replacement action is an outermost action handler, so the <a href="#action-deferred-update-behavior" title="">deferred update behavior</a> occurs at the end of the action. If the <code>mode</code> is "<code>synchronous</code>", then the text replacement action or the instance node replacement action is not outermost since it occurs during the default processing of <code>xforms-submit</code>, so the appropriate <a href="#action-deferred-update-behavior" title="">deferred update flags</a> are set based on whether the action was a <code>setvalue</code> or whether it performed a series of <code>insert</code> and <code>delete</code> actions.
</p>
<div class="note"><div class="prefix"><b>Note:</b></div><p>For backwards compatibility with earlier versions of this specification, the processor may treat an attribute named <code>target</code> as equivalent to <code>targetref</code> as long as there is no <code>targetref</code> attribute present.</p></div>
<p><br />
</p>
<div class="note"><div class="prefix"><b>Note:</b></div><p>In an asynchronous submission, the deferred update behavior ensures that the user interface is up to date with the latest calculated values before the <code>xforms-submit-done</code> event is dispatched. In a synchronous submission, the calculated values dependent on replaced text or data nodes can be made available to actions in the <code>xforms-submit-done</code> handler by first invoking the <code>recalculate</code> action. A sequence of synchronous submissions performed with successive <code>send</code> actions can avoid refreshing the user interface until after the completion of the last <code>send</code> action.</p></div>
<p>Examples:
</p>
<div class="exampleOuter"><div class="exampleHead">Replacing a subtree of instance data</div><div class="exampleInner">
<pre>&lt;submission resource="http://example.com/jsp/prefill" method="post" ref="name" replace="instance" targetref="address"/&gt;
</pre>
</div>
<p>This submission would be invoked after the user enters a value for <code>name</code>. Based on the name given, a simple server-side database lookup is performed to get a last known address. The <code>address</code> element is replaced with the result, prefilling part of the form for the user.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Replacing text in an instance</div><div class="exampleInner">
<pre>&lt;submission resource="http://example.com/postalCodeSearch" method="get" ref="address" replace="text" targetref="address/postalCode"/&gt;
</pre>
</div>
<p>The address information is past to a postal code search service that returns a textual result, which is placed into the <code>postalCode</code> element.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Submission and Read-Only Content</div><div class="exampleInner">
<pre>&lt;model xmlns:my="http://example.org"&gt;
  &lt;instance&gt;
    &lt;my:data&gt;
      &lt;my:name&gt;
        &lt;my:first-name&gt;John&lt;/my:first-name&gt;
        &lt;my:last-name&gt;Doe&lt;/my:last-name&gt;
      &lt;/my:name&gt;
      &lt;my:address&gt;
        &lt;my:street&gt;123 Main St.&lt;/my:street&gt;
        &lt;my:city&gt;Smallville&lt;/my:city&gt;
      &lt;/my:address&gt;
    &lt;/my:data&gt;
  &lt;/instance&gt;

  &lt;bind ref="my:name" readonly="true()"/&gt;
  &lt;bind ref="my:address/my:street" readonly="true()"/&gt;

  &lt;submission id="S1" targetref="my:name" replace="instance" method="post" resource="..."/&gt;
  &lt;submission id="S2" targetref="my:name/my:first-name" replace="instance" method="post" resource="..."/&gt;

  &lt;submission id="S3" targetref="my:name/my:first-name" replace="text" method="post" resource="..."/&gt;
  &lt;submission id="S4" targetref="my:address/my:street" replace="text" method="post" resource="..."/&gt;
&lt;/model&gt;
</pre>
</div>
<p>Submission S1 succeeds because a readonly node (<code>my:name</code>) can be replaced if its parent is not readonly. Submission S2 fails because a node (<code>my:first-name</code>) cannot be replaced if its parent is readonly. Submission S3 fails because the content of a readonly node cannot be replaced, even if it is readonly due to inheritance. Submission S4 failse because the content of a readonly node cannot be replaced, even if the node's parent is not readonly.
</p>
</div></div>
<div class="div2">
<a id="The_xforms-submit-serialize_Event" name="The_xforms-submit-serialize_Event"></a><h3> <span class="mw-headline">7.3 <span id="submit-evt-submit-serialize">The xforms-submit-serialize Event</span></span></h3>
<p>Dispatched at the beginning of <code>submission</code> serialization (see <a href="#The_xforms-submit_Event" title="">The xforms-submit Event</a>).
</p><p>Target: <code>submission</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-compute-exception event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> submission-body
</td><td colspan="1" rowspan="1"> node-sequence
</td><td colspan="1" rowspan="1"> A document element node with a QName of <code>submission-body</code>. The node initially contains an empty string. Event handlers can write data into the node. If the string value of this node is non-empty, then the string value is used in the submission in lieu of the default instance data serialization.
</td></tr></tbody></table>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>submission-body</code> property is a string, but the <code>event()</code> function encapsulates the string in a text node so that the string can be modified by the <code>setvalue</code> action, which sets a value into a node determined by its Single Item Binding.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>Since the <code>submission-body</code> is a string, this feature may be used to submit non-XML data.
</p>
</div>
<p>Default Action: If the event context <code>submission-body</code> property string is empty, then no operation is performed so that the <code>submission</code> will use the normal serialization data (see <a href="#The_xforms-submit_Event" title="">The xforms-submit Event</a>). Otherwise, if the event context <code>submission-body</code> property string is non-empty, then the serialization data for the <code>submission</code> is set to be the content of the <code>submission-body</code> string.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Submitting plain text</div><div class="exampleInner">
<pre>&lt;submission resource="http://example.com/greeter" method="post" mediatype="text/plain"&gt;
    &lt;setvalue ev:event="xforms-submit-serialize" ref="event('submission-body')" value="my/text"/&gt;
&lt;/submission&gt;
</pre>
</div>
<p>The string value of the element <code>my/text</code> is placed into the node representing the submission body, so that is the text posted by the submission. In this example, the result returned by the submission replaces the document. This feature could be used to submit plain text, but it could also be used to allow a document to submit its serialization rather than just submitting instance data.
</p>
</div></div><div class="div2">
<a id="The_xforms-submit-done_Event" name="The_xforms-submit-done_Event"></a><h3> <span class="mw-headline">7.4 <span id="submit-evt-submit-done">The xforms-submit-done Event</span></span></h3>
<p>Dispatched as an indication of: successful completion of a submission process
</p><p>Target: <code>submission</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-submit-done event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> resource-uri
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> The submission resource URI that succeeded (xsd:anyURI)
</td></tr>
<tr>
<td colspan="1" rowspan="1"> response-status-code
</td><td colspan="1" rowspan="1"> number
</td><td colspan="1" rowspan="1"> The protocol return code of the success response, or <code>NaN</code> if the submission did not receive a success response.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> response-headers
</td><td colspan="1" rowspan="1"> node-sequence
</td><td colspan="1" rowspan="1"> Zero or more elements, each one representing a content header in the success response received by the submission. The returned node-sequence is empty if the submission did not receive a response or if there were no headers. Each element has a local name of <code>header</code> with no namespace URI and two child elements, <code>name</code> and <code>value</code>, whose string contents are the name and value of the header, respectively.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> response-reason-phrase
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> The protocol response reason phrase of the success response. The string is empty if the submission did not receive a response or if the response did not contain a reason phrase.
</td></tr></tbody></table>
<p>Default Action: None; notification event only.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Submission Sequencing</div><div class="exampleInner">
<pre>&lt;submission resource="<a class="external free" href="https://example.com/getRecord" rel="nofollow" title="https://example.com/getRecord">https://example.com/getRecord</a>" method="post" replace="instance" instance="record"&gt;
    &lt;send ev:event="xforms-submit-done" submission="chargeForRecord"/&gt;
&lt;/submission&gt;
&lt;submission id="chargeForRecord" resource="<a class="external free" href="https://example.com/chargeForRecord" rel="nofollow" title="https://example.com/chargeForRecord">https://example.com/chargeForRecord</a>" method="get" serialization="none" replace="none"/&gt;
</pre>
</div>
<p>The default instance data is submitted as the search criteria for a desired record. Only upon successful completion of the submission is a second submission performed to charge the user's account for the record.
</p>
</div></div><div class="div2">
<a id="The_xforms-submit-error_Event" name="The_xforms-submit-error_Event"></a><h3> <span class="mw-headline">7.5 <span id="submit-evt-submit-error">The xforms-submit-error Event</span></span></h3>
<p>Dispatched as an indication of: failure of a submission process
</p><p>Target: <code>submission</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-submit-error event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> error-type
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> One of the following: <code>submission-in-progress</code>, <code>no-data</code>, <code>validation-error</code>, <code>parse-error</code>, <code>resource-error</code>, <code>target-error</code>.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> resource-uri
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> The submission resource URI that failed (xsd:anyURI)
</td></tr>
<tr>
<td colspan="1" rowspan="1"> response-status-code
</td><td colspan="1" rowspan="1"> number
</td><td colspan="1" rowspan="1"> The protocol return code of the error response, or <code>NaN</code> if the failed submission did not receive an error response.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> response-headers
</td><td colspan="1" rowspan="1"> node-sequence
</td><td colspan="1" rowspan="1"> Zero or more elements, each one representing a content header in the error response received by a failed submission. The returned node-sequence is empty if the failed submission did not receive an error response or if there were no headers. Each element has a local name of <code>header</code> with no namespace URI and two child elements, <code>name</code> and <code>value</code>, whose string contents are the name and value of the header, respectively.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> response-reason-phrase
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> The protocol response reason phrase of the error response. The string is empty if the failed submission did not receive an error response or if the error response did not contain a reason phrase.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> response-body
</td><td colspan="1" rowspan="1"> object (string or node-sequence)
</td><td colspan="1" rowspan="1">
<p>When the error response specifies an XML media type as defined by [<a href="#ref-rfc-3023" title="">RFC 3023</a>], the response body is parsed into an XML document and the root element of the document is returned. If the parse fails, or if the error response specifies a text media type (starting with <code>text/</code>), then the response body is returned as a string. Otherwise, an empty string is returned.
</p>
</td></tr></tbody></table>
<p>Default Action: None; notification event only.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Reporting a Submission Error</div><div class="exampleInner">
<pre>&lt;submission resource="<a class="external free" href="https://example.com/getRecord" rel="nofollow" title="https://example.com/getRecord">https://example.com/getRecord</a>" method="post" replace="instance" instance="record"&gt;
    &lt;message ev:event="xforms-submit-error"&gt;A submission error (&lt;output value="event('error-type')"/&gt;) occurred.&lt;/message&gt;
&lt;/submission&gt;
</pre>
</div>
<p>The default instance data is submitted as the search criteria for a desired record. Only upon successful completion of the submission is a second submission performed to charge the user's account for the record.
</p>
</div></div><div class="div2">
<a id="The_Submission_Resource" name="The_Submission_Resource"></a><h3> <span class="mw-headline">7.6 <span id="submit-resource">The Submission Resource</span></span></h3>
<p>The <code>submission resource</code> is the URI for the submission. It is of type <code>xsd:anyURI</code>.
</p><p>In XForms 1.0, the URI for submission was provided by the <code>action</code> attribute. For consistency, form authors should now use the attribute <code>resource</code> of type <code>xsd:anyURI</code>, which deprecates the <code>action</code> attribute. If both <code>action</code> and <code>resource</code> are present, then the <code>resource</code> attribute takes precedence.
</p><p>The <code>resource</code> element provides the submission URI, overriding the <code>resource</code> attribute and the <code>action</code> attribute. If a <code>submission</code> has more than one <code>resource</code> child element, the first <code>resource</code> element child must be selected for use. Individually, the <code>resource</code> element, the <code>resource</code> attribute and the <code>action</code> attribute are not required. However, one of the three is mandatory as there is no default submission resource.
</p>
<div class="div3">
<a id="The_resource_Element" name="The_resource_Element"></a><h4> <span class="mw-headline">7.6.1 <span id="submit-resource-elem">The resource Element</span></span></h4>
<p>The <code>resource</code> element (deprecated in favor of using an AVT in the resource attribute) allows the URI used for a submission to be dynamically calculated based on instance data.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the URI, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>Content: PCDATA
</p><p>The URI to be used by the <code>submission</code> can be specified with either the <code>value</code> attribute or the string content of the <code>resource</code> element. If both are specified, then the <code>value</code> attribute takes precedence. If the <code>submission</code> does not have a <code>resource</code> child element, then the submission URI is obtained from the <code>resource</code> attribute or the <code>action</code> attribute.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Submitting the default instance to a location determined dynamically from an instance</div><div class="exampleInner">
<pre>&lt;submission method="post"&gt;
    &lt;resource value="instance('params')/anyURI"/&gt;
&lt;/submission&gt;
</pre>
</div></div></div></div><div class="div2">
<a id="The_Submission_Method" name="The_Submission_Method"></a><h3> <span class="mw-headline">7.7 <span id="submit-method">The Submission Method</span></span></h3>
<p>The <code>submission method</code> indicates the submission protocol operation to be performed.
</p><p>The submission method may be specified by the <code>method</code> attribute. The <code>submission</code> element can have a child element named <code>method</code>, which overrides the submission method setting obtained from the <code>method</code> attribute if both are specified. If more than one <code>method</code> element is given, the first occurrence in document order must be selected for use. Individually, the <code>method</code> element and the <code>method</code> attribute are not required. However, one of the two is mandatory as there is no default submission method.
</p>
<div class="div3">
<a id="The_method_Element" name="The_method_Element"></a><h4> <span class="mw-headline">7.7.1 <span id="submit-method-elem">The method Element</span></span></h4>
<p>The <code>method</code> element  (deprecated in favor of using an AVT in the method attribute) allows the submission method to be dynamically calculated based on instance data.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the method, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>Content: PCDATA
</p><p>The method to be used by the <code>submission</code> can be specified with either the <code>value</code> attribute or the string content of the <code>method</code> element. If both are specified, then the <code>value</code> attribute takes precedence. If the <code>submission</code> does not have a <code>method</code> child element, then the submission method is obtained from the <code>method</code> attribute.
</p>
</div></div><div class="div2">
<a id="The_header_Element" name="The_header_Element"></a><h3> <span class="mw-headline">7.8 <span id="submit-header">The header Element</span></span></h3>
<p>The <code>header</code> element can be used to contribute information to the preamble of a submission in a manner appropriate to the protocol. The <code>submission</code> element can contain zero or more <code>header</code> child elements. Each produces zero or more header entries containing a name, a value, and a combination. The entries are provided to the submission protocol in the specified order. It is the responsibility of the submission protocol implementation to combine the entries and to serialize the result into submission protocol headers. Accordingly, entries may be re-ordered, combined, or otherwise altered in accordance with the specific protocol implementation requirements.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p><br />
Special Attributes:
</p>
<dl><dt> ref
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. One or more header entries are generated for each item selected by this attribute.
</dd><dt> nodeset
</dt><dd> Deprecated synonym for attribute <code>ref</code>. If <code>ref</code> is present, <code>nodeset</code> has no meaning.
</dd><dt> combine
</dt><dd> Author-optional attribute defaulting to "append" and with legal values of "append", "prepend", and "replace". This attribute controls the method of combination for entries produced by this element <code>header</code> with other entries produced by other <code>header</code> elements. This attribute and its default also provide information for the protocol implementation, which may use some or all of the information to combine XForms submission headers with headers provided by the user agent.
</dd></dl>
<p>Content: (<code>name</code>, <code>value</code>+) | (<code>value</code>+, <code>name</code>)
</p><p>If the <code>header</code> element does not contain a <code>ref</code> (or deprecated <code>nodeset</code>) attribute, then one header entry is created for each <code>value</code> element. If the <code>header</code> element contains a <code>ref</code> (or deprecated <code>nodeset</code>) attribute, then for each selected item, one header entry is created for each <code>value</code> element. The name and value of the header entry are obtained from the required child elements <code>name</code> (<a href="#The_name_Element" title="">The name Element</a>) and <code>value</code> (<a href="#The_value_Element" title="">The value Element</a>). If the name obtained from the <code>name</code> element is the empty string, then the header entry is omitted.
</p><p>The header entry order is determined as follows:
</p>
<ol><li> document order of <code>header</code> elements
</li><li> item order of items in <code>ref</code> (or deprecated <code>nodeset</code>) attribute
</li><li> document order of <code>value</code> elements
</li></ol>
<p>The application of this order information to header serialization is determined by the submission protocol.
</p><p>If a <code>header</code> element defines the <code>Content-type</code> header, then this setting overrides a <code>Content-type</code> set by the <code>mediatype</code> attribute.
</p><p>In the case of a multipart submission, the header entries are combined with those for the first part of the submission.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Setting the Accept header</div>
<p>In the example below, the submission request uses the <code>header</code> element to replace the user agent's existing value of the HTTP Accept header with <code>application/sparql-results+xml</code>.
</p>
<div class="exampleInner">
<pre>&lt;submission id="loadConcepts"
            resource="http://example.com/taxonomy/concepts" method="get"
            ref="instance('conceptsList')" replace="instance"&gt;
  &lt;header combine="replace"&gt;
    &lt;name&gt;Accept&lt;/name&gt;
    &lt;value&gt;application/sparql-results+xml&lt;/value&gt;
  &lt;/header&gt;
&lt;/submission&gt;
</pre>
</div></div><div class="div3">
<a id="The_name_Element" name="The_name_Element"></a><h4> <span class="mw-headline">7.8.1 <span id="submit-header-name">The name Element</span></span></h4>
<p>When the <code>name</code> element appears as a child of element <code>header</code>, it is used to specify the name of a header entry to be provided to the submission protocol.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>If the <code>model</code> attribute is expressed in a <code>name</code> child element of a <code>header</code> element, then an (<a href="#The_xforms-binding-exception_Event" title="">xforms-binding-exception</a>) occurs if the identified model is not the containing <code>model</code> element.
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the header name, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>The header entry name may be given by the string content of the <code>name</code> element, or by the result of the <code>value</code> attribute. If both are given, the result from the <code>value</code> attribute takes precedence. If the resulting name is the empty string, then the entry is considered to be void, and it is not supplied to the submission protocol.
</p>
</div><div class="div3">
<a id="The_value_Element" name="The_value_Element"></a><h4> <span class="mw-headline">7.8.2 <span id="submit-header-value">The value Element</span></span></h4>
<p>When the <code>value</code> element appears as a child of element <code>header</code>, it is used to specify the value component of a header entry to be supplied to the submission protocol to be added to the preamble of a submission. The <code>value</code> element may be used more than once in a given element <code>header</code>, in which case each value produces a new header entry.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>If the <code>model</code> attribute is expressed in a <code>value</code> child element of a <code>header</code> element, then an (<a href="#The_xforms-binding-exception_Event" title="">xforms-binding-exception</a>) occurs if the identified model is not the containing <code>model</code> element.
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the header entry value, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>The header entry value may be given by the string content of the <code>value</code> element, or by the result of the <code>value</code> attribute. If both are given, the result from the <code>value</code> attribute takes precedence.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a> combines multiple items by concatenating them into a string separated with spaces. As a result, a header value specified by a <code>value</code> element sequence containing multiple items may not be properly serialized in a submission protocol preamble. To assure proper delivery of individual header items to the submission protocol, restrict use of expressions producing sequences for element <code>header</code> with attribute <code>ref</code> (or deprecated <code>nodeset</code>), where each item will produce its own separate header entry, and use expressions resulting in only a single item in element <code>value</code>.
</p>
</div></div></div><div class="div2">
<a id="Submission_Options" name="Submission_Options"></a><h3> <span class="mw-headline">7.9 <span id="submit-options">Submission Options</span></span></h3>
<p>The XForms Model specifies a <code>submission</code> element containing the following attributes and child elements that affect serialization and submission. This section summarizes the behaviors for the allowable values of these attributes and child elements, and presents subsections that define the behavior for submission and serialization.
</p>
<ul><li> the <a href="#submit-resource" title="">submission resource</a>
</li><li> the <a href="#submit-method" title="">submission method</a>
</li><li> the <code>header</code> elements
</li></ul>
<p>For the submission protocol obtained from the URI scheme in the <a href="#submit-resource" title="">submission resource</a>, XForms normatively defines a binding to HTTP/1.1 [<a href="#ref-rfc-2616" title="">RFC 2616</a>], and to HTTPS [<a href="#ref-rfc-2818" title="">RFC 2818</a>].
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Other bindings, in particular to the URI scheme "mailto:" may, and the scheme "file:" should, be supported. Bindings to these schemes are not normatively defined in XForms. Implementations that choose to provide a binding to these schemes should pay particular attention to privacy and security concerns. Within the "http:" and "https:" schemes, form creators are encouraged to follow the finding of the W3C Technical Architecture Group on when to use the GET method: [<a href="#ref-tag7" title="">TAG Finding 7</a>]
</p>
</div>
<p>The <a href="#submit-method" title="">submission method</a> determines the default data serialization format, and both the <a href="#submit-method" title="">submission method</a> and the URI scheme in the <a href="#submit-resource" title="">submission resource</a> determine the submission protocol operation, according to the following table:
</p>
<table border="1" summary="Form Serialization and Submission Behaviors">
<tbody><tr>
<th colspan="1" rowspan="1"> URI scheme
</th><th colspan="1" rowspan="1">
<p><a href="#submit-method" title="">Submission Method</a>
</p>
</th><th colspan="1" rowspan="1"> Default Serialization
</th><th colspan="1" rowspan="1"> Submission Protocol Operation
</th></tr>
<tr>
<td colspan="1" rowspan="1"> http https mailto
</td><td colspan="1" rowspan="1"> "post"
</td><td colspan="1" rowspan="1"> <code>application/xml</code>
</td><td colspan="1" rowspan="1"> HTTP POST or equivalent
</td></tr>
<tr>
<td colspan="1" rowspan="1"> http https file
</td><td colspan="1" rowspan="1"> "get"
</td><td colspan="1" rowspan="1"> <code>application/x-www-form-urlencoded</code>
</td><td colspan="1" rowspan="1"> HTTP GET or equivalent
</td></tr>
<tr>
<td colspan="1" rowspan="1"> http https file
</td><td colspan="1" rowspan="1"> "delete"
</td><td colspan="1" rowspan="1"> <code>application/x-www-form-urlencoded</code>
</td><td colspan="1" rowspan="1"> HTTP DELETE or equivalent
</td></tr>
<tr>
<td colspan="1" rowspan="1"> http https file
</td><td colspan="1" rowspan="1"> "put"
</td><td colspan="1" rowspan="1"> <code>application/xml</code>
</td><td colspan="1" rowspan="1"> HTTP PUT or equivalent
</td></tr>
<tr>
<td colspan="1" rowspan="1"> http https mailto
</td><td colspan="1" rowspan="1"> "multipart-post"
</td><td colspan="1" rowspan="1"> <code>multipart/related</code>
</td><td colspan="1" rowspan="1"> HTTP POST or equivalent
</td></tr>
<tr>
<td colspan="1" rowspan="1"> http https mailto
</td><td colspan="1" rowspan="1"> "form-data-post"
</td><td colspan="1" rowspan="1"> <code>multipart/form-data</code>
</td><td colspan="1" rowspan="1"> HTTP POST or equivalent
</td></tr>
<tr>
<td colspan="1" rowspan="1"> http https mailto
</td><td colspan="1" rowspan="1"> "urlencoded-post"
</td><td colspan="1" rowspan="1"> <code>application/x-www-form-urlencoded</code>
</td><td colspan="1" rowspan="1"> HTTP POST or equivalent
</td></tr>
<tr>
<td colspan="1" rowspan="1"> (any)
</td><td colspan="1" rowspan="1">
<p>Any other <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>
</p>
</td><td colspan="1" rowspan="1"> <code>application/xml</code>
</td><td colspan="1" rowspan="1">
<p>As given by the <a href="#submit-method" title="">Submission Method</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> (any)
</td><td colspan="1" rowspan="1">
<p><a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a>
</p>
</td><td colspan="1" rowspan="1"> implementation-defined
</td><td colspan="1" rowspan="1"> implementation-defined
</td></tr></tbody></table>
<div class="note">
<p><b>Note:</b>
</p><p>Foreign-namespaced attribute values are allowed in the <a href="#submit-method" title="">Submission Method</a>, but no behavior is defined by XForms.
</p>
</div><div class="div3">
<a id="The_get_Submission_Method" name="The_get_Submission_Method"></a><h4> <span class="mw-headline">7.9.1 <span id="submit-get">The get Submission Method</span></span></h4>
<p>This submit method represents HTTP GET or the equivalent concept. The serialized form data is delivered as part of the URI that is requested during the submit process.
</p><p>This method is not suitable for submission of forms that are intended to change state or cause other actions to take place at the server. See [<a href="#ref-rfc-2616" title="">RFC 2616</a>] for recommended uses of HTTP GET.
</p><p>The URI is constructed as follows:
</p>
<ul><li> The submit URI is examined. If it does not already contain a <code>?</code> (question mark) character, one is appended. If it does already contain a question mark character and the serialized form data is non-empty, then a separator character from the attribute <code>separator</code> is appended.
</li><li> The serialized form data, if any, is appended to the URI.
</li></ul>
<p>No message body is sent with the request.
</p><p>Examples:
</p>
<div class="exampleOuter"><div class="exampleHead">Simple search submission</div><div class="exampleInner">
<pre>&lt;submission resource="http://example.com/search" method="get"/&gt;
</pre>
</div>
<p>After doing relevance and validity checking on the data, the leaf nodes of the default instance are submitted asynchronously, encoded as a URL (<code>application/x-www-form-urlencoded</code>), to <code>http://example.com/search</code>. The result replaces the whole page.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Reading from a local file</div><div class="exampleInner">
<pre>&lt;submission resource="file:data.xml" method="get" serialization="none" replace="instance" instance="data" /&gt;
</pre>
</div>
<p>Replaces the instance 'data' with the content of the file data.xml. Serialization, and its associated validity and relevance processing, is not needed. See the corresponding example for saving a file in Section <a href="#The_put_Submission_Method" title="">The put Submission Method</a>. The user agent may restrict file access to a user-specific and domain-specific security zone in local storage.
</p>
</div></div><div class="div3">
<a id="The_post.2C_multipart-post.2C_form-data-post.2C_and_urlencoded-post_Submission_Methods" name="The_post.2C_multipart-post.2C_form-data-post.2C_and_urlencoded-post_Submission_Methods"></a><h4> <span class="mw-headline">7.9.2 <span id="submit-post">The post, multipart-post, form-data-post, and urlencoded-post Submission Methods</span></span></h4>
<p>These submit methods represent HTTP POST or the equivalent concept (such as a mail message). The serialized form data is delivered as the message body.
</p><p>Examples:
</p>
<div class="exampleOuter"><div class="exampleHead">Posting instance data</div><div class="exampleInner">
<pre>&lt;submission resource="<a class="external free" href="https://example.com/jsp/orders" rel="nofollow" title="https://example.com/jsp/orders">https://example.com/jsp/orders</a>" method="post" ref="/purchaseOrder" /&gt;
</pre>
</div>
<p>Submits the XML for a purchase order to a secure server order processing system.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Simple posted login</div><div class="exampleInner">
<pre>&lt;submission resource="http://example.com/login" method="urlencoded-post"/&gt;
</pre>
</div>
<p>After doing relevance pruning and validity checking on the login data, the leaf nodes of the default instance are submitted asynchronously in the posted data, encoded based on the <code>application/x-www-form-urlencoded</code> serialization, to <code>http://example.com/login</code>. The result replaces the whole page.
</p>
</div></div><div class="div3">
<a id="The_put_Submission_Method" name="The_put_Submission_Method"></a><h4> <span class="mw-headline">7.9.3 <span id="submit-put">The put Submission Method</span></span></h4>
<p>This submit method represents HTTP PUT or the equivalent concept (such as writing to a local file). The serialized form data is delivered as the message body.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Saving to a local file</div><div class="exampleInner">
<pre>&lt;submission resource="file:data.xml" ref="instance('data')" method="put" validate="false" relevant="false" replace="none" /&gt;
</pre>
</div>
<p>Saves the instance 'data' to the file data.xml without validation checking and relevance pruning. See the corresponding example for reading from a local file in Section <a href="#The_get_Submission_Method" title="">The get Submission Method</a>. The user agent may restrict file access to a user-specific and domain-specific security zone in local storage.
</p>
</div></div><div class="div3">
<a id="The_delete_Submission_Method" name="The_delete_Submission_Method"></a><h4> <span class="mw-headline">7.9.4 <span id="submit-delete">The delete Submission Method</span></span></h4>
<p>This submit method represents HTTP DELETE or the equivalent concept (such as deleting a local file). The serialized form data is delivered in the same manner as the <a href="#submit-get" title="">get</a> submission method (see <a href="#The_get_Submission_Method" title="">The get Submission Method</a>).
</p>
</div>
<div class="div3">
<a id="Serialization" name="Serialization"></a><h4> <span class="mw-headline">7.9.5 <span id="serialization">Serialization</span></span></h4>
<div class="div4">
<a id="Serialization_as_application.2Fxml" name="Serialization_as_application.2Fxml"></a><h5> <span class="mw-headline">7.9.5.1 <span id="serialize-xml">Serialization as application/xml</span></span></h5>
<p>This format permits the expression of the instance data as XML that is straightforward to process with off-the-shelf XML processing tools. In addition, this format is capable of submission of binary content.
</p><p>The steps for serialization are as follows:
</p>
<ol><li> An XML document is produced following the rules of the XML output method defined in [<a href="#ref-xslt" title="">XSLT 1.0</a>] section 16 and 16.1, using the values supplied as attributes of the <code>submission</code> element.
<ol><li> Handling of namespace nodes: The default behavior is that every namespace node is serialized according to the rules of the XML output method, so that at least one namespace declaration appears in the serialized XML for each in-scope namespace. Additional inherited namespaces are declared on the root element of the serialized XML. If, however, attribute <code>includenamespaceprefixes</code> on element <code>submission</code> is present, then all namespace declarations not visibly utilized in the instance data (as defined in [<a href="#ref-Exc-C14N" title="">Exc-C14N</a>]) and the default namespace if it is empty are excluded from the root element serialization, unless the corresponding namespace prefix is listed in the <code>includenamespaceprefixes</code> attribute. The special value <code>#default</code> represents the default namespace.
</li><li> Mediatype: By default, the mediatype of the serialized XML instance is <code>application/xml</code>, but can be changed to a compatible type using element <code>submission</code> attribute <code>mediatype</code>. Authors should ensure that the type specified is compatible with <code>application/xml</code>.
</li></ol>
</li></ol>
<div class="note"><div class="prefix"><b>Note:</b></div><p>We are considering adding extra serialization parameters added by <a class="external free" href="http://www.w3.org/TR/xslt-xquery-serialization/" rel="nofollow" title="http://www.w3.org/TR/xslt-xquery-serialization/">http://www.w3.org/TR/xslt-xquery-serialization/</a>, but are waiting for further implementation experience and user feedback, to decide which serialization parameters to add.</p></div>
</div><div class="div4">
<a id="Serialization_as_multipart.2Frelated" name="Serialization_as_multipart.2Frelated"></a><h5> <span class="mw-headline">7.9.5.2 <span id="serialize-multipart">Serialization as multipart/related</span></span></h5>
<p>This format is intended for integration of XForms into environments that involve large amounts of binary data where the inclusion of the data as <code>xsd:base64Binary</code> or <code>xsd:hexBinary</code> is undesirable.
</p><p>In this format, XML instance data is serialized as one part of the [<a href="#ref-rfc-2387" title="">RFC 2387</a>] <code>multipart/related</code> message, using the rules as described in <a href="#Serialization_as_application.2Fxml" title="">Serialization as application/xml</a>. Binary content from <code>xsd:anyURI</code> instance nodes populated by the <code>upload</code> (see <a href="#The_upload_Element" title="">The upload Element</a>) control is serialized in separate parts of the [<a href="#ref-rfc-2387" title="">RFC 2387</a>] <code>multipart/related</code> message.
</p><p>This format follows the rules of <code>multipart/related</code> MIME data streams for in [<a href="#ref-rfc-2387" title="">RFC 2387</a>], with specific requirements of this serialization listed below:
</p>
<ul><li> <code>multipart/related</code> message header requirements:
<ul><li> Must contain a <code>type</code> parameter of the mediatype of the serialized XML instance.
</li><li> Must contain a <code>start</code> parameter referring to the Content-ID first body part (root).
</li></ul>
</li><li> First body part (root) requirements:
<ul><li> Must have <code>Content-Type</code> parameter of the type specified by the <code>submission</code> <code>mediatype</code> attribute.
</li><li> Content is serialized by the rules at <a href="#Serialization_as_application.2Fxml" title="">Serialization as application/xml</a>.
</li></ul>
</li><li> Subsequent part requirements:
<ul><li> One part for each node with a datatype of <code>xsd:anyURI</code> populated by <code>upload</code> with:
<ul><li> A <code>Content-Type</code> header that represents the type of the attachment if known, otherwise <code>application/octet-stream</code>.
</li><li> A <code>Content-Transfer-Encoding</code> header.
</li><li> A <code>Content-ID</code> header whose value matches the URI in the associated instance data node.
</li><li> The binary content associated with the URI, serialized according to the <code>Content-Transfer-Encoding</code> heading.
</li></ul>
</li></ul>
</li></ul>
<div class="exampleOuter"><div class="exampleHead">multipart/related</div><div class="exampleInner">
<pre>&lt;submission method="multipart-post" resource="http://example.com/photo" /&gt;
</pre>
</div>
<p>Submits the instance data in <code>multipart/related</code>, along with the selected file as an attachment.
</p>
<div class="exampleInner">
<pre>POST /photo HTTP/1.0
Host: example.com
Content-Type: multipart/related; boundary=f93dcbA3; type=application/xml; start="&lt;980119.X53GGT@example.com&gt;"
Content-Length: xxx

--f93dcbA3
Content-Type: application/xml; charset=UTF-8
Content-ID: &lt;980119.X53GGT@example.com&gt;

&lt;?xml version="1.0"?&gt;
&lt;uploadDocument&gt;
  &lt;title&gt;My Proposal&lt;/title&gt;
  &lt;author&gt;E. X. Ample&lt;/author&gt;
  &lt;summary&gt;A proposal for a new project.&lt;/summary&gt;
  &lt;notes image="cid:980119.X17AXM@example.com"&gt;(see handwritten region)&lt;/notes&gt;
  &lt;keywords&gt;project proposal funding&lt;/keywords&gt;
  &lt;readonly&gt;false&lt;/readonly&gt;
  &lt;filename&gt;image.png&lt;/filename&gt;
  &lt;content&gt;cid:980119.X25MNC@example.com&lt;/content&gt;
&lt;/uploadDocument&gt;
--f93dcbA3
Content-Type: image/png
Content-Transfer-Encoding: binary
Content-ID: &lt;980119.X25MNC@example.com&gt;

...Binary data here...
--f93dcbA3
Content-Type: image/png
Content-Transfer-Encoding: binary
Content-ID: &lt;980119.X17AXM@example.com&gt;

...Binary data here...
--f93dcbA3--
</pre>
</div></div></div><div class="div4">
<a id="Serialization_as_multipart.2Fform-data" name="Serialization_as_multipart.2Fform-data"></a><h5> <span class="mw-headline">7.9.5.3 <span id="serialize-form-data">Serialization as multipart/form-data</span></span></h5>
<p>This format is for legacy compatibility to permit the use of XForms clients with [<a href="#ref-rfc-2388" title="">RFC 2388</a>] servers. This method is suitable for the persistence of binary content. Contextual path information, attribute values, namespaces and namespace prefixes are not preserved. As a result, different elements might serialize to the same name.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Existing HTML user agents fail to encode special characters (such as double quotes) and non-ASCII characters in the <code>Content-Disposition: form-data</code> <code>name</code> and <code>filename</code> parameters. Since this serialization method is supported for legacy applications only, new applications should use <code>application/xml</code> or <code>multipart/related</code>.
</p>
</div>
<p>This format follows the rules for <code>multipart/form-data</code> MIME data streams in [<a href="#ref-rfc-2388" title="">RFC 2388</a>], with specific requirements of this serialization listed below:
</p>
<ul><li> Each element node is visited in document order, except non-relevant elements are skipped if the <code>relevant</code> setting of the <code>submission</code> is <code>true</code>.
</li><li> Each visited element that has no child element nodes (i.e., each leaf element node) is selected for inclusion, including those that have no value (no text node).
</li><li> Element nodes selected for inclusion are encoded as <code>Content-Disposition: form-data</code> MIME parts as defined in [<a href="#ref-rfc-2388" title="">RFC 2388</a>], with the <code>name</code> parameter being the element local name.
</li><li> Element nodes of any datatype populated by <code>upload</code> also have a <code>Content-Disposition</code> <code>filename</code> parameter, if the filename is available.
</li><li> Element nodes of any datatype populated by <code>upload</code> are serialized as the specified binary content. In the case of <code>xsd:anyURI</code> and derived types, the serialization content is obtained from the URI. For <code>xsd:base64Binary</code>, <code>xsd:hexBinary</code>, and derived types, the serialization content is obtained by decoding the element string value.
</li><li> Element nodes of any datatype not populated by <code>upload</code> are serialized as the string value of the element (the concatenation of all text node children, or empty string if the element has no text node children).
</li><li> The <code>Content-Type</code> must be <code>text/plain</code> except for <code>xsd:anyURI</code>, <code>xsd:base64Binary</code>, <code>xsd:hexBinary</code>, and derived types, in which case the header represents the media type of the attachment if known, otherwise <code>application/octet-stream</code>. If a character set is applicable, the <code>Content-Type</code> may have a <code>charset</code> parameter.
</li></ul>
<p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">multipart/form-data</div><div class="exampleInner">
<pre>&lt;submission method="form-data-post" resource="http://example.com/photo" /&gt;
</pre>
</div>
<p>Submits the instance data in <code>multipart/form-data</code>, along with the selected file as a part.
</p>
<div class="exampleInner">
<pre>POST /photo HTTP/1.0
Host: example.com
Content-Type: multipart/form-data; boundary=AaB03x
Content-Length: xxx

--AaB03x
Content-Disposition: form-data; name="document"; filename="b.txt"
Content-Type: text/plain; charset=iso-8859-1
This is a file.
It has two lines.
--AaB03x
Content-Disposition: form-data; name="title"
A File
--AaB03x
Content-Disposition: form-data; name="summary"
This is my file
file test
--AaB03x--
</pre>
</div></div></div><div class="div4">
<a id="Serialization_as_application.2Fx-www-form-urlencoded" name="Serialization_as_application.2Fx-www-form-urlencoded"></a><h5> <span class="mw-headline">7.9.5.4 <span id="serialize-urlencode">Serialization as application/x-www-form-urlencoded</span></span></h5>
<p>This format represents an extension of the [<a href="#ref-xhtml-1.0" title="">XHTML 1.0</a>] form content type <code>application/x-www-form-urlencoded</code> with specific rules for encoding non-ASCII and reserved characters.
</p><p>This format is not suitable for the persistence of binary content. Therefore, it is recommended that forms capable of containing binary content use another serialization method.
</p><p>The steps for serialization are as follows:
</p>
<ol><li> Each element node is visited in document order, except non-relevant elements are skipped if the <code>relevant</code> setting of the <code>submission</code> is <code>true</code>. Each visited element that has no child element nodes (i.e., each leaf element node) is selected for inclusion, including those that have no value (no text node). Note that attribute information is not preserved.
</li><li> Element nodes selected for inclusion are encoded as <code>EltName=value</code>, where <code>=</code> is a literal character, <code>EltName</code> represents the element local name, and <code>value</code> represents the string value of the element (the concatenation of all text node children, or empty string if the element has no text node children). The separator character {sep} from the <code>separator</code> attribute on <code>submission</code> is used between pairs of encoded name/value pairs, e.g. <code>EltName1=value1{sep}EltName2=value2{sep}EltName3=value3</code>. Note that contextual path information is not preserved, nor are namespaces or namespace prefixes. As a result, different elements might serialize to the same name.
<ul><li> The encoding of <code>EltName</code> and <code>value</code> are as follows: space characters are replaced by <code>+</code>, and then non-ASCII and reserved characters (as defined by [<a href="#ref-rfc-2396" title="">RFC 2396</a>] as amended by subsequent documents in the IETF track) are escaped by replacing the character with one or more octets of the UTF-8 representation of the character, with each octet in turn replaced by <code>%HH</code>, where <code>HH</code> represents the uppercase hexadecimal notation for the octet value and <code>%</code> is a literal character. Line breaks are represented as "CR LF" pairs (i.e., <code>%0D%0A</code>).
</li></ul>
</li><li> All such encodings are concatenated, maintaining document order.
</li></ol>
<p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">application/x-www-form-urlencoded</div><div class="exampleInner">
<pre>GivenName=Ren%C3%A9
</pre>
</div>
<p>This format consists of simple name-value pairs.
</p>
<div class="exampleInner">
<pre>&lt;PersonName title="Mr"&gt;
  &lt;GivenName&gt;Ren&Atilde;&copy;&lt;/GivenName&gt;
&lt;/PersonName&gt;
</pre>
</div>
<p>Here is the instance data for the above example. Note that very little of the data is preserved. Authors desiring greater data integrity should select a different serialization format.
</p>
</div></div></div></div><div class="div2">
<a id="Integration_with_SOAP" name="Integration_with_SOAP"></a><h3> <span class="mw-headline">7.10 <span id="SOAP">Integration with SOAP</span></span></h3>
<p>This section describes the integration of XForms submission with [<a href="#ref-soap-11" title="">SOAP 1.1</a>] and [<a href="#ref-soap-12" title="">SOAP 1.2</a>]
</p>
<div class="div3">
<a id="Representation_of_SOAP_Envelope" name="Representation_of_SOAP_Envelope"></a><h4> <span class="mw-headline">7.10.1 <span id="SOAP-envelope">Representation of SOAP Envelope</span></span></h4>
<p>The Single Item Binding of the <code>submission</code> element refers to the XML data to be submitted. In the case of a SOAP submission, the instance data includes the SOAP envelope and related SOAP tags.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The form author may choose to store the data payload in one instance and copy the data to the submission instance containing the SOAP envelope as part of an <code>xforms-submit</code> event handler. The form author is responsible for declaring the appropriate model item properties on both instances (e.g. the <code>relevant</code> declarations).
</p>
</div></div><div class="div3">
<a id="Indicating_a_SOAP_submission" name="Indicating_a_SOAP_submission"></a><h4> <span class="mw-headline">7.10.2 <span id="SOAP-mediatype">Indicating a SOAP submission</span></span></h4>
<p>For a SOAP submission, the <code>mediatype</code> attribute of the <code>submission</code> <a href="#intro-reading" title="">must</a> be set to the MIME type of <code>application/soap+xml</code>. The form author may append <code>charset</code> and <code>action</code> MIME parameters.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>action</code> MIME parameter has no effect unless the submission <code>method</code> is "post" because the GET method implies no SOAP processing by the receiving SOAP node.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>SOAP 1.1 does not support the HTTP GET operation.
</p>
</div></div><div class="div3">
<a id="SOAP_HTTP_Binding" name="SOAP_HTTP_Binding"></a><h4> <span class="mw-headline">7.10.3 <span id="SOAP-HTTP-Binding">SOAP HTTP Binding</span></span></h4>
<p>The <code>method</code> attribute of the <code>submission</code> <a href="#intro-reading" title="">must</a> be set to <code>get</code> or <code>post</code> in order to access the SOAP HTTP binding.
</p><p>If <code>method="get"</code>, then the SOAP response message exchange pattern is used. The HTTP headers <a href="#intro-reading" title="">must</a> contain the Accept parameter with a value conforming to the following properties:
</p>
<ul><li> <a href="#intro-reading" title="">must</a> begin with <code>application/soap+xml</code>
</li><li> If the submission <code>mediatype</code> contains a <code>charset</code> MIME parameter, then it is appended to the <code>application/soap+xml</code> MIME type. Otherwise, a <code>charset</code> MIME parameter with same value as the <code>encoding</code> attribute (or its default) is appended to the <code>application/soap+xml</code> MIME type.
</li><li> No other MIME parameters from the <code>mediatype</code> are copied to the <code>application/soap+xml</code> MIME type
</li><li> The <code>q</code> MIME parameter <a href="#intro-reading" title="">must not</a> be specified in the <code>application/soap+xml</code> MIME type so that the default quality of 1 is used.
</li></ul>
<p>If <code>method="post"</code>, then the SOAP request-response message exchange pattern is used. For SOAP 1.2, the current submission behavior of using the <code>mediatype</code> attribute value as the value of the <code>Content-type</code> parameter in the HTTP headers is sufficient. If the instance data being submitted has as its root element node a SOAP envelope in the SOAP 1.1 namespace (<code><a class="external free" href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow" title="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a></code>), then:
</p>
<ul><li> the <code>Content-type</code> HTTP header is changed to <code>text/xml</code>
</li><li> the <code>charset</code> MIME parameter is appended . The charset parameter value from the <code>mediatype</code> attribute is used if it is specified. Otherwise, the value of the <code>encoding</code> attribute (or its default) is used.
</li><li> if the <code>action</code> MIME parameter appears in the <code>mediatype</code> then a SOAPAction HTTP header is added and given a value equal to the content of the <code>action</code> MIME parameter
</li></ul>
<div class="note">
<p><b>Note:</b>
</p><p>XForms 2.0 does not support the SOAP email binding, so method="post" with a <code>mailto:</code> scheme results in an <code>xforms-submit-error</code> event before any submit processing message is dispatched.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>XForms 2.0 does not support the SOAP 1.1 binding to the HTTP Extension Framework.
</p>
</div>
<p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Consuming a SOAP 1.1 Request-Response Web Service</div><div class="exampleInner">
<pre>&lt;model xmlns:soap="<a class="external free" href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow" title="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a>"
       xmlns:tns="<a class="external free" href="http://www.webservice.net" rel="nofollow" title="http://www.webservice.net">http://www.webservice.net</a>"&gt;
   &lt;instance id="data"&gt;
       &lt;data xmlns=""&gt;
           &lt;city&gt;Victoria&lt;/city&gt;
           &lt;country&gt;Canada&lt;/country&gt;
           &lt;weather&gt;Mostly sunny and cool. High 12C. Low 3C.&lt;/weather&gt;
       &lt;/data&gt;
   &lt;/instance&gt;

   &lt;instance id="GetWeatherSoapIn"&gt;
	  &lt;soap:Envelope xmlns:soap="<a class="external free" href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow" title="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a>"&gt;
		 &lt;soap:Body&gt;
			&lt;GetWeather xmlns="<a class="external free" href="http://www.webservice.net" rel="nofollow" title="http://www.webservice.net">http://www.webservice.net</a>"&gt;
			   &lt;CityName&gt;Victoria&lt;/CityName&gt;
			   &lt;CountryName&gt;Canada&lt;/CountryName&gt;
			&lt;/GetWeather&gt;
		 &lt;/soap:Body&gt;
	  &lt;/soap:Envelope&gt;
   &lt;/instance&gt;
   &lt;instance id="GetWeatherSoapOut"&gt;
	  &lt;soap:Envelope xmlns:soap="<a class="external free" href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow" title="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a>"&gt;
		 &lt;soap:Body&gt;
			&lt;GetWeatherResponse xmlns="<a class="external free" href="http://www.webservice.net" rel="nofollow" title="http://www.webservice.net">http://www.webservice.net</a>"&gt;
			   &lt;GetWeatherResult&gt;Mostly sunny and cool. High 12C. Low 3C.&lt;/GetWeatherResult&gt;
			&lt;/GetWeatherResponse&gt;
		 &lt;/soap:Body&gt;
	  &lt;/soap:Envelope&gt;
   &lt;/instance&gt;

   &lt;submission id="GetWeather" resource="<a class="external free" href="http://www.webservice.net/getweather.asmx" rel="nofollow" title="http://www.webservice.net/getweather.asmx">http://www.webservice.net/getweather.asmx</a>" method="post"
               ref="instance('GetWeatherSoapIn')"
               mediatype="application/soap+xml; action=<a class="external free" href="http://www.webservice.net/GetWeather" rel="nofollow" title="http://www.webservice.net/GetWeather">http://www.webservice.net/GetWeather</a>"
               replace="instance" instance="GetWeatherSoapOut"&gt;
        &lt;action ev:event="xforms-submit"&gt;
            &lt;setvalue ref="instance('GetWeatherSoapOut')/soap:Body/tns:GetWeather/tns:CityName"
                      value="instance('data')/city"/&gt;
            &lt;setvalue ref="instance('GetWeatherSoapOut')/soap:Body/tns:GetWeather/tns:CountryName"
                      value="instance('data')/country"/&gt;
        &lt;/action&gt;
        &lt;action ev:event="xforms-submit-done"&gt;
            &lt;setvalue ref="instance('data')/weather"
                      value="instance('GetWeatherSoapOut')/soap:Body/tns:GetWeatherResponse/tns:GetWeatherResult"/&gt;
        &lt;/action&gt;
   &lt;/submission&gt;
&lt;/model&gt;

&lt;input ref="city"&gt;
   &lt;label&gt;City &lt;/label&gt;
   &lt;send ev:event="xforms-value-changed" submission="GetWeather"/&gt;
&lt;/input&gt;
&lt;input ref="country"&gt;
   &lt;label&gt;Country &lt;/label&gt;
   &lt;send ev:event="xforms-value-changed" submission="GetWeather"/&gt;
&lt;/input&gt;
&lt;output ref="weather"&gt;
   &lt;label&gt;The weather forecast is &lt;/label&gt;
&lt;/output&gt;
</pre>
</div>
<p>This form accepts input of a city name and country name from the user. When the user changes either value, the 'GetWeather' web service is initiated. On <code>xforms-submit</code>, the user input is copied into the request envelope. When the web service submission result is received, the <code>xforms-submit-done</code> handler copies the weather forecast from the response envelope to the data instance.
</p><p>The submission and the request and response instances correspond to the web service definition below:
</p>
<div class="exampleInner">
<pre>&lt;wsdl:definitions xmlns:wsdl="<a class="external free" href="http://schemas.xmlsoap.org/wsdl/" rel="nofollow" title="http://schemas.xmlsoap.org/wsdl/">http://schemas.xmlsoap.org/wsdl/</a>"
     xmlns:xs="<a class="external free" href="http://www.w3.org/2001/XMLSchema" rel="nofollow" title="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>" xmlns:soap="<a class="external free" href="http://schemas.xmlsoap.org/wsdl/soap/" rel="nofollow" title="http://schemas.xmlsoap.org/wsdl/soap/">http://schemas.xmlsoap.org/wsdl/soap/</a>"
     xmlns:tns="<a class="external free" href="http://www.webservice.net" rel="nofollow" title="http://www.webservice.net">http://www.webservice.net</a>" targetNamespace="<a class="external free" href="http://www.webservice.net" rel="nofollow" title="http://www.webservice.net">http://www.webservice.net</a>"&gt;
  &lt;wsdl:types&gt;
    &lt;xs:schema elementFormDefault="qualified" targetNamespace="<a class="external free" href="http://www.webservice.net" rel="nofollow" title="http://www.webservice.net">http://www.webservice.net</a>"&gt;
      &lt;xs:element name="GetWeather"&gt;
        &lt;xs:complexType&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element minOccurs="0" maxOccurs="1" name="CityName" type="xs:string" /&gt;
            &lt;xs:element minOccurs="0" maxOccurs="1" name="CountryName" type="xs:string" /&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="GetWeatherResponse"&gt;
        &lt;xs:complexType&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element minOccurs="0" maxOccurs="1" name="GetWeatherResult" type="xs:string" /&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
      ...
  &lt;/wsdl:types&gt;

  &lt;wsdl:message name="GetWeatherSoapIn"&gt;
    &lt;wsdl:part name="parameters" element="tns:GetWeather" /&gt;
  &lt;/wsdl:message&gt;
  &lt;wsdl:message name="GetWeatherSoapOut"&gt;
    &lt;wsdl:part name="parameters" element="tns:GetWeatherResponse" /&gt;
  &lt;/wsdl:message&gt;
  ...
  &lt;wsdl:portType name="GetWeatherSoap"&gt;
    &lt;wsdl:operation name="GetWeather"&gt;
      &lt;wsdl:input message="tns:GetWeatherSoapIn" /&gt;
      &lt;wsdl:output message="tns:GetWeatherSoapOut" /&gt;
    &lt;/wsdl:operation&gt;
    ...
  &lt;/wsdl:portType&gt;
  ...
  &lt;wsdl:binding name="GetWeatherSoap" type="tns:GetWeatherSoap"&gt;
    &lt;soap:binding transport="<a class="external free" href="http://schemas.xmlsoap.org/soap/http" rel="nofollow" title="http://schemas.xmlsoap.org/soap/http">http://schemas.xmlsoap.org/soap/http</a>" style="document" /&gt;
    &lt;wsdl:operation name="GetWeather"&gt;
      &lt;soap:operation soapAction="<a class="external free" href="http://www.webservice.net/GetWeather" rel="nofollow" title="http://www.webservice.net/GetWeather">http://www.webservice.net/GetWeather</a>" style="document" /&gt;
      &lt;wsdl:input&gt;
        &lt;soap:body use="literal" /&gt;
      &lt;/wsdl:input&gt;
      &lt;wsdl:output&gt;
        &lt;soap:body use="literal" /&gt;
      &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
    ...
  &lt;/wsdl:binding&gt;

  &lt;wsdl:service name="GetWeatherService"&gt;
    &lt;wsdl:port name="GetWeatherSoap" binding="tns:GetWeatherSoap"&gt;
      &lt;soap:address location="<a class="external free" href="http://www.webservice.net/getweather.asmx" rel="nofollow" title="http://www.webservice.net/getweather.asmx">http://www.webservice.net/getweather.asmx</a>" /&gt;
    &lt;/wsdl:port&gt;
    ...
  &lt;/wsdl:service&gt;
&lt;/wsdl:definitions&gt;
</pre>
</div></div></div><div class="div3">
<a id="Handling_the_SOAP_Response" name="Handling_the_SOAP_Response"></a><h4> <span class="mw-headline">7.10.4 <span id="SOAP-response">Handling the SOAP Response</span></span></h4>
<p>The XForms processor <a href="#intro-reading" title="">must</a> handle client authorization and redirection.
</p><p>SOAP faults (400 and 500 level errors) are handled in the same manner as underlying HTTP errors, which is to say that an <code>xforms-submit-error</code> event is dispatched.
</p><p>On successful completion, the results are consumed according to the XForms submission process, culminating in an <code>xforms-submit-done</code> event. The form author may capture this event and copy data from the target instance that receives the returned SOAP envelope to other instances that are designed to carry only data.
</p>
</div></div></div>
<p><br />
</p>
<div class="div1">
<a id="Core_Form_Controls" name="Core_Form_Controls"></a><h2> <span class="mw-headline">8 <span id="controls">Core Form Controls</span></span></h2>
<p>This chapter covers the XForms view layer features for directly interacting with instance data and properties from the XForms Model. This includes features that provide data from the model to the view layer as well as features of the view layer that commit data collected from the user to the model.
</p>
<div class="div2">
<a id="The_XForms_Core_Form_Controls_Module" name="The_XForms_Core_Form_Controls_Module"></a><h3> <span class="mw-headline">8.1 <span id="N74868">The XForms Core Form Controls Module</span></span></h3>
<p><a href="#def-form-control" title="">Form controls</a> are declared using markup elements, and their behavior refined via markup attributes. The core form controls are described in this module, including their attributes and their content models (their metadata elements). A <b>core form control</b> is an element that acts as a direct point of user interaction and often provides read, write, or read/write access to a node of instance data. See Section <a href="#Container_Form_Controls" title="">Container Form Controls</a> for a description of container form controls.
</p>
<table border="1" summary="listing of XForms Core Form Control elements, their attributes and content models (their metadata elements)">
<tbody><tr>
<th colspan="1" rowspan="1"> Core Form Control Element
</th><th colspan="1" rowspan="1"> Attributes  and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Minimal Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-input" title="">input</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>, inputmode (xsd:string), incremental (xsd:boolean)
</p>
</td><td colspan="1" rowspan="1">
<p>label, (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-secret" title="">secret</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>, inputmode (xsd:string), incremental (xsd:boolean)
</p>
</td><td colspan="1" rowspan="1">
<p>label, (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-textarea" title="">textarea</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>, inputmode (xsd:string), incremental (xsd:boolean)
</p>
</td><td colspan="1" rowspan="1">
<p>label, (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-output" title="">output</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional), appearance ("full"|"compact"|"minimal"|<a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a>), value (Expression), mediatype (xsd:string)
</p>
</td><td colspan="1" rowspan="1">
<p>label?, <a href="#ui-output-mediatype" title="">mediatype</a>? [deprecated], (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-upload" title="">upload</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>, mediatype (xsd:string), incremental (xsd:boolean)
</p>
</td><td colspan="1" rowspan="1">
<p>label, <a href="#ui-upload-filename" title="">filename</a>?, <a href="#ui-upload-mediatype" title="">mediatype</a>? [deprecated], (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-range" title="">range</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>, start (xsd:string), end (xsd:string), step (xsd:string), incremental (xsd:boolean)
</p>
</td><td colspan="1" rowspan="1">
<p>label, (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-trigger" title="">trigger</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p>
</td><td colspan="1" rowspan="1">
<p>label, (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-submit" title="">submit</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional), submission (xsd:IDREF)
</p>
</td><td colspan="1" rowspan="1">
<p>label, (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-selectMany" title="">select</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>, selection ("open" | "closed"), incremental (xsd:boolean)
</p>
</td><td colspan="1" rowspan="1">
<p>label, (<a href="#elems-ui-common" title="">UI Common</a>)*, (<a href="#elems-list-ui-common" title="">List UI Common</a>)+, (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-selectOne" title="">select1</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>, selection ("open" | "closed"), incremental (xsd:boolean)
</p>
</td><td colspan="1" rowspan="1">
<p>label, (<a href="#elems-ui-common" title="">UI Common</a>)*, (<a href="#elems-list-ui-common" title="">List UI Common</a>)+, (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr></tbody></table>
<div class="note">
<p><b>Note:</b>
</p><p>Unless bound to form controls, instance data nodes are not presented to the user; consequently, there is no need for a form control corresponding to HTML <code>input type="hidden"</code>.
</p>
</div>
<p>The following table summarizes additional support elements for form controls.
</p>
<table border="1" summary="listing of support elements for form controls, their attributes and their content models">
<tbody><tr>
<th colspan="1" rowspan="1"> Support Element
</th><th colspan="1" rowspan="1"> Attributes and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Minimal Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-commonelems-label" title="">label</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p>
</td><td colspan="1" rowspan="1">
<p>(PCDATA|(<a href="#elems-inline" title="">UI Content</a>))*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-commonelems-help" title="">help</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p>
</td><td colspan="1" rowspan="1">
<p>(PCDATA|(<a href="#elems-inline" title="">UI Content</a>))*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-commonelems-hint" title="">hint</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p>
</td><td colspan="1" rowspan="1">
<p>(PCDATA|(<a href="#elems-inline" title="">UI Content</a>))*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-commonelems-alert" title="">alert</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p>
</td><td colspan="1" rowspan="1">
<p>(PCDATA|(<a href="#elems-inline" title="">UI Content</a>))*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-upload-filename" title="">filename</a> (for <a href="#ui-upload" title="">upload</a>)
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-upload-mediatype" title="">mediatype</a> (for <a href="#ui-upload" title="">upload</a>)
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-output-mediatype" title="">mediatype</a> (for <a href="#ui-output" title="">output</a>)
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>, value (string Expression)
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-selection-commonelems-choices" title="">choices (for selection controls)</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>
</p>
</td><td colspan="1" rowspan="1">
<p>label?, (<a href="#elems-list-ui-common" title="">List UI Common</a>)+
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-selection-commonelems-item" title="">item</a> (for selection controls)
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>
</p>
</td><td colspan="1" rowspan="1">
<p>label, value, (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-selection-commonelems-value" title="">value (for selection controls)</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p>
</td><td colspan="1" rowspan="1"> PCDATA
</td></tr></tbody></table>
<p>See also: <a href="#The_itemset_Element" title="">The itemset Element</a> (for selection controls) and <a href="#The_copy_Element" title="">The copy Element</a> (for selection controls).
</p><p>The following attributes are common to many user-interface related XForms elements, here called the <code>UI Common</code> attribute group.
</p>
<table border="1" id="attrs-ui-common" summary="listing of XForms Common UI attributes">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Attributes and Their Content (after AVT evaluation)
</th></tr>
<tr>
<td colspan="1" rowspan="1"> (various)
</td><td colspan="1" rowspan="1">
<p>appearance ("full"|"compact"|"minimal" | <a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a>)
</p>
</td></tr></tbody></table>
<dl><dt> appearance
</dt><dd> Author-optional attribute to define an appearance hint. If absent, the user agent may freely choose any suitable rendering.
</dd></dl>
<div class="note">
<p><b>Note:</b>
</p><p>A host language is expected to add attributes such as <code>xml:lang</code> as well as an attribute, named <code>class</code>, that holds a list of strings that can be matched by CSS class selectors.
</p><p>Further, a host language must provide a way to indicate overall navigation order among form controls and other elements included in the host language, as well as keyboard or direct access navigation to specific elements. One such proposal is to uses a pair of attributes named <code>navindex</code> and <code>accesskey</code>, defined as follows:
</p>
<dl><dt> navindex
</dt><dd> This author-optional attribute is a non-negative integer in the range of 0-32767 used to define the navigation sequence. This gives the author control over the sequence in which <a href="#def-form-control" title="">form controls</a> are traversed. The default navigation order is specified in the chapter <a href="#Processing_Model" title="">Processing Model</a>.
</dd><dt> accesskey
</dt><dd> This author-optional attribute defines a shortcut for moving the input focus directly to a particular <a href="#def-form-control" title="">form control</a>. The value of this is a single character which when pressed together with a platform specific modifier key (e.g., the <i>alt</i> key) results in the focus being set to this <a href="#def-form-control" title="">form control</a>.The user agent must provide a means of identifying the accesskeys that can be used in a presentation. This may be accomplished in different ways by different implementations, for example through direct interaction with the application or via the user's guide. The accesskey requested by the author might not be made available by the player (for example it may not exist on the device used, or it may be used by the player itself). Therefore the user agent should make the specified key available, but may map the accesskey to a different interaction behavior.
</dd></dl>
</div>
<p>Additionally, this module defines the following content sets:
</p>
<table border="1" summary="listing of XForms Core elements, attributes, and content models">
<tbody><tr>
<th colspan="1" rowspan="1"> Content Set
</th><th colspan="1" rowspan="1"> Minimal Content Model
</th></tr>
<tr>
<td colspan="1" id="elems-ui-common" rowspan="1"> <b>UI Common</b>
</td><td colspan="1" rowspan="1">
<p>(help|hint|alert|<a href="#action-content-set" title="">Action</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" id="elems-list-ui-common" rowspan="1"> <b>List UI Common</b>
</td><td colspan="1" rowspan="1"> (choices|item|itemset)+
</td></tr>
<tr>
<td colspan="1" id="elems-form-controls" rowspan="1"> <b>Core Form Controls</b>
</td><td colspan="1" rowspan="1"> (input|secret|textarea|output|upload|range|trigger|submit|select|select1)*
</td></tr>
<tr>
<td colspan="1" id="elems-inline" rowspan="1"> <b>UI Content</b>
</td><td colspan="1" rowspan="1"> (output)*
</td></tr></tbody></table>
<p>As shown above, the XML Events module adds the Actions content set into the UI Common content set. A host language may add markup to the <a href="#elems-inline" title="">UI Content</a> set. When the XForms Extension module is present, it too should be included in the UI Common content set.
</p>
<div class="div3">
<a id="Implementation_Requirements_Common_to_All_Form_Controls" name="Implementation_Requirements_Common_to_All_Form_Controls"></a><h4> <span class="mw-headline">8.1.1 <span id="ui-processing">Implementation Requirements Common to All Form Controls</span></span></h4>
<p>XForms user interface controls are bound to the underlying instance data using <a href="#def-binding" title="">binding</a> attributes as defined in the chapter <a href="#Model_Item_Properties" title="">Model Item Properties</a>.
</p><p>Form controls enable accessibility by taking a uniform approach to such features as labels, help text, navigation, and keyboard shortcuts. Internationalization issues are addressed by following the same design principles as in XHTML. All form controls are suitable for styling as aural or visual media.
</p><p>Form controls encapsulate high-level semantics without sacrificing the ability to deliver real implementations. For instance, the form control <code>select</code> enables the user to <i>select items from a set</i>. These form controls distinguish the functional aspects of the underlying control from the presentational and behavioral aspects. This separation enables the expression of the intent underlying a particular form control &mdash; see [<a href="#ref-AUI97" title="">AUI97</a>] for a definition of such high-level user interaction primitives.
</p><p>Form controls when rendered display the underlying data values to which they are bound. While the data presented to the user through a form control must directly correspond to the bound instance data, the display representation is not required to match the lexical space value of the bound instance data. For example, user agents should apply appropriate conventions to the display of dates, times, durations and numeric values including separator characters.
</p><p>All form controls must meet the following implementation requirements:
</p>
<ul><li> All form controls, including <a href="#Container_Form_Controls" title="">container form controls</a>, should have an inline layout by default (e.g. for a host language that supports <a href="#ref-css2" title="">CSS</a>, the default styling should be <code>display:inline</code>). By default, <a href="#def-repeat-item" title="">repeat items</a> should have a block layout (e.g. a default styling of <code>display:block</code> for host languages that support CSS).
</li><li> If a form control violates its data binding restriction, an <code>xforms-binding-exception</code> must occur.<div class="note"><b>Note: </b>Form controls that read or write simpleContent produce this exception whenever and as soon as they are bound to an element node that has an element child node.</div>
</li><li> Form controls that write simpleContent to instance data must do so exactly as defined by the XForms Action <code>setvalue</code> (<a href="#The_setvalue_Element" title="">The setvalue Element</a>).<div class="note"><b>Note: </b>If a form control binds to an element node, then regardless of how many child nodes the element has, the result of the form control writing to the bound element node is that it has either a single non-empty text node child, or no children if the simpleContent written is the empty string (which is in accord with the data model of [<a href="#ref-xpath-1.0" title="">XPath 1.0</a>]).</div>
</li><li> All form controls that read simpleContent instance data must do so as follows:
<ul><li> Element nodes: If element child nodes are present, then an <code>xforms-binding-exception</code> occurs. Otherwise, return the string value of the node.
</li><li> Attribute nodes: returns the string-value of the node.
</li><li> Text nodes: returns the string-value of the node.
</li><li> Namespace, processing instruction, and comment nodes: behavior is undefined (implementation-dependent).
</li><li> the XPath root node: an <code>xforms-binding-exception</code> occurs. <div class="note"><b>Note: </b>The simpleContent binding restriction is intended to allow controls to bind to attribute and element nodes. This specification does not prevent binding controls directly to text nodes, however doing so can yield undesirable behavior, such as a form control becoming non-relevant if a user enters empty data. This specification also does not prevent implementers supporting binding controls directly to comment or processing instruction nodes, however the resulting behavior is implementation-dependent and may also yield undesirable behavior.</div>
</li></ul>
</li><li> Form controls are considered to be <span id="form-control-non-relevance-conditions"><b>relevant</b></span> if none of the following apply and <b>non-relevant</b> if any of the following apply:
<ul><li> the Single Item Binding is expressed and resolves to empty sequence,
</li><li> the Single Item Binding is expressed and resolves to a non-relevant instance node,
</li><li> the form control is contained by a non-relevant <code>switch</code> or <code>group</code> (which includes a non-relevant <code>repeat</code> item), or
</li><li> the form control is contained by a non-selected <code>case</code> element of a <code>switch</code>.<p>When a form control becomes non-relevant, it must receive event <code>xforms-disabled</code> and then the XForms action handlers that are listening for events on the non-relevant form control must be disabled.</p><p>When a non-relevant form control changes to being relevant, the XForms action handlers that listen for events on the form control must become enabled and then the form control must be updated to represent the current value(s) and model item properties of the instance node(s) to which it is bound or to which it refers. The following events must be dispatched to the form control: <code>xforms-enabled</code>, <code>xforms-value-changed</code>, one of <code>xforms-valid</code> or <code>xforms-invalid</code>, one of <code>xforms-readonly</code> or <code>xforms-readwrite</code>, one of <code>xforms-required</code> or <code>xforms-optional</code>, and one of <code>xforms-in-range</code> or <code>xforms-out-of-range</code>.</p>
</li></ul>
</li><li> Except as noted, relevant form controls must distinguish rendering between being bound to a required node versus a non-required node. Exceptions are form controls that do not directly render the string value of the bound node (including <code>trigger</code> and the <a href="#Container_Form_Controls" title="">container form controls</a>). Control of this behavior should be made available to stylesheets.
</li><li> Relevant form controls must distinguish rendering between valid and invalid states. Control of this behavior should be made available to stylesheets.
</li><li> Relevant form controls must indicate when the bound instance data contains a value or content that the form control is not capable of rendering. Control of this behavior should be made available to stylesheets.
</li><li> If a form control binds to a readonly node or an atomic value, then the form control must not allow the user to modify the node value. The relevant form control that is bound to a readonly node or an atomic value should render in a way which indicates that entering or changing the value is not allowed. Control of the render behavior should be made available to stylesheets.
</li></ul>
<p>Sections in this chapter define the various form controls by specifying the following:
</p>
<blockquote>

Description<br />Common Attributes<br />Special Attributes<br />Examples<br />Data Binding Restrictions<br />Implementation Requirements

</blockquote></div><div class="div3">
<a id="The_input_Element" name="The_input_Element"></a><h4> <span class="mw-headline">8.1.2 <span id="ui-input">The input Element</span></span></h4>
<p>Description: This form control enables free-form data entry or a user interface component appropriate to the datatype of the bound node..
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> inputmode
</dt><dd> Author-optional. This form control accepts an input mode hint. <a href="#Input_Modes_.28Non-Normative.29" title="">Input Modes</a>.
</dd><dt> incremental
</dt><dd> Author-optional. When <code>true</code>, this form control will generate additional <code>xforms-value-changed</code> events. The default value for this attribute is <code>false</code>.
</dd></dl>
<p>Data Binding Restrictions: Binds to any simpleContent (except <code>xsd:base64Binary</code>, <code>xsd:hexBinary</code> or any datatype derived from these) or an atomic value.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This control cannot bind to element nodes that have element children. See <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a> for user interface processing rules common to all form controls.
</p>
</div>
<p>Implementation Requirements: Must allow entry of a lexical value for the bound datatype. Implementations should provide a convenient means for entry of datatypes and take into account localization and internationalization issues such as representation of numbers. For example, an <code>input</code> bound to an instance data node of type <code>xsd:date</code> might provide a calendar control to enter dates; similarly, an input control bound to of type <code>boolean</code> might be rendered as a checkbox.
</p><p>Examples:
</p>
<div class="exampleOuter"><div class="exampleHead">Simple Free-Form Data Entry</div><div class="exampleInner">
<pre>&lt;input ref="order/shipTo/street" class="streetAddress"&gt;
  &lt;label&gt;Street&lt;/label&gt;
  &lt;hint&gt;Please enter the number and street name&lt;/hint&gt;
&lt;/input&gt;
</pre>
</div>
<p>In the above, the <code>class</code> attribute can be used by a style sheet to specify the display size of the form control. Note that the constraints on how much text can be input are obtained from the underlying XForms Model definition and not from these display properties.
</p><p>A graphical browser might render the above example as follows:
</p><p><img alt="An average-looking text entry form control. The label, 'Street' has been aligned to the left" border="0" height="60" src="images/ui-input.png" width="307" />
</p>
</div><div class="exampleOuter"><div class="exampleHead">Datatype-sensitive Data Entry</div><div class="exampleInner">
<pre>&lt;input ref="order/shipDate"&gt;
  &lt;label&gt;Ship By&lt;/label&gt;
  &lt;hint&gt;Please specify the ship date for this order.&lt;/hint&gt;
&lt;/input&gt;
</pre>
</div>
<p>A graphical browser might render the above example as follows:
</p><p><img alt="A text box for a date control, with a button to open into a calendar." border="0" height="37" src="images/calendar-picker-closed.png" width="297" />
</p><p>The user can type a date into the text edit box, or press the button to open a calendar:
</p><p><img alt="A calendar picker graphical widget." border="0" height="183" src="images/calendar-picker-open.png" width="297" />
</p>
</div><div class="exampleOuter"><div class="exampleHead">Data Entry with Activation Behavior</div><div class="exampleInner">
<pre>&lt;input ref="/search/expr"&gt;
  &lt;label&gt;Search term(s):&lt;/label&gt;
  &lt;send ev:event="DOMActivate" submission="doSearch" /&gt;
&lt;/input&gt;

&lt;submit submission="doSearch"&gt;
  &lt;label&gt;Search&lt;/label&gt;
&lt;/submit&gt;
</pre>
</div>
<p>This example shows the <code>input</code> and <code>submit</code> form controls working together to provide the common user experience of a simple search. The <code>input</code> collects the search term(s) and then automatically initiates the <code>submission</code> identified by <code>doSearch</code> if the user activates the <code>input</code> control. Alternatively, the user initiate the <code>doSearch</code> <code>submission</code> by activating the <code>submit</code> control.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>A graphical browser on a desktop device might activate form controls such as <code>input</code> in response to a special user action such as pressing the Enter key or either clicking or double-clicking with the mouse (depending on the type of form control).
</p>
</div></div><div class="div3">
<a id="The_secret_Element" name="The_secret_Element"></a><h4> <span class="mw-headline">8.1.3 <span id="ui-secret">The secret Element</span></span></h4>
<p>Description: This form control is used to provide the user with the ability to supply information to the system in a manner that makes it difficult for someone, other than the user, who may be observing the process to discern the value that is being supplied. A common use is for password entry.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> inputmode
</dt><dd> Author-optional. This form control accepts an input mode hint. <a href="#Input_Modes_.28Non-Normative.29" title="">Input Modes</a>.
</dd><dt> incremental
</dt><dd> Author-optional. When <code>true</code>, this form control will generate additional <code>xforms-value-changed</code> events. The default value for this attribute is <code>false</code>.
</dd></dl>
<p>Data Binding Restrictions: Binds to any simpleContent (except <code>xsd:base64Binary</code>, <code>xsd:hexBinary</code> or any datatype derived from these) or an atomic value.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This control cannot bind to element nodes that have element children. See <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a> for user interface processing rules common to all form controls.
</p>
</div>
<p>Implementation Requirements: Implementations, including accessibility aids, must obscure the value being entered into this form control. One possible approach would be to render a "*" or similar character instead of the actual characters entered. Note that this provides only a casual level of security; truly sensitive information will require additional security measures outside the scope of XForms.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Password Entry</div><div class="exampleInner">
<pre>&lt;secret ref="/login/password"&gt;
  &lt;label&gt;Password&lt;/label&gt;
  &lt;hint&gt;The password you enter will not be displayed.&lt;/hint&gt;
&lt;/secret&gt;
</pre>
</div>
<p>A graphical browser might render this form control as follows:
</p><p><img alt="A password entry form control, with '*' characters where the text would be expected and a hint box displaying hint text." border="0" height="66" src="images/ui-secret-with-hint.png" width="315" />
</p>
</div></div><div class="div3">
<a id="The_textarea_Element" name="The_textarea_Element"></a><h4> <span class="mw-headline">8.1.4 <span id="ui-textarea">The textarea Element</span></span></h4>
<p>Description: This form control enables free-form data entry and is intended for use in entering multiline content, e.g., the body of an email message.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> inputmode
</dt><dd> Author-optional. This form control accepts an input mode hint. <a href="#Input_Modes_.28Non-Normative.29" title="">Input Modes</a>.
</dd><dt> incremental
</dt><dd> Author-optional. When <code>true</code>, this form control will generate additional <code>xforms-value-changed</code> events. The default value for this attribute is <code>false</code>.
</dd></dl>
<p>Data Binding Restrictions: Binds to any simpleContent (except <code>xsd:base64Binary</code>, <code>xsd:hexBinary</code> or any datatype derived from these) or an atomic value.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This control cannot bind to element nodes that have element children. See <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a> for user interface processing rules common to all form controls.
</p>
</div>
<p>Implementation Requirements: Must allow entry of a lexical value for the bound datatype, including multiple lines of text.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Email Message Body</div><div class="exampleInner">
<pre>&lt;textarea ref="message/body" class="messageBody"&gt;
  &lt;label&gt;Message Body&lt;/label&gt;
  &lt;hint&gt;Enter the text of your message here&lt;/hint&gt;
&lt;/textarea&gt;
</pre>
</div>
<p>In the above, the <code>class</code> attribute can be used by a style sheet to specify the display size of the form control. Note that the constraints on how much text can be input are obtained from the underlying XForms Model definition and not from these display properties.
</p><p>A graphical browser might render the above example as follows:
</p><p><img alt="A larger-than-average text entry form control. The title, 'Message Body:' provides an additional hint that large amounts of text are allowed here." border="0" height="200" src="images/ui-textarea.png" width="300" />
</p>
</div></div><div class="div3">
<a id="The_output_Element" name="The_output_Element"></a><h4> <span class="mw-headline">8.1.5 <span id="ui-output">The output Element</span></span></h4>
<p>Description: This form control renders content based in part on instance data, but it provides no means for entering or changing data.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes:
</p>
<dl><dt> appearance
</dt><dd> This form control does not use the UI Common attribute group, but nevertheless still contains an author-optional <code>appearance</code> attribute, as defined above.
</dd><dt> value
</dt><dd> Author-optional. An expression to be evaluated. The string result of the evaluation is rendered by the form control. If binding attributes are present to select a node, this attribute has no effect. The evaluation context is the same as would be applied to the evaluation of the Single Item Binding. This expression is re-evaluated whenever there is a change in any node to which the expression refers. An empty string is used if the evaluation fails.
</dd><dt> <span id="ui-output-mediatype-attr">mediatype</span>
</dt><dd> Author-optional attribute used to indicate that data obtained from the Single Item Binding should be rendered (after decoding, if needed) according to a desired media type indicated by the attribute value string, such as <code>image/*</code> for image rendition. If the <a href="#ui-output-mediatype" title="">mediatype</a> element appears as a child of the <code>output</code>, then it overrides this attribute. If the media type is not specified by this attribute or by the <code>mediatype</code> element, then the the default is to present the indicated data as plain text (with no decoding according to datatype).
</dd></dl>
<p>Data Binding Restrictions: Binds to any simpleContent or an atomic value.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This control cannot bind to element nodes that have element children. See <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a> for user interface processing rules common to all form controls.
</p>
</div>
<p>Implementation Requirements: Must allow display of a value for the bound datatype. Implementations should provide a convenient means for display of datatypes and take into account localization and internationalization issues such as representation of numbers and dates.
</p><p>Element <code>output</code> can be used to display the value of a particular instance node by using a Single Item Binding; it can also be used to display the result of evaluating an expression by specifying the expression to be evaluated via attribute <code>value</code>. Note that the Single Item Binding attributes and <code>value</code> on element <code>output</code> are mutually exclusive.
</p><p>By default, the <code>output</code> element simply renders the plain text of the <code>value</code> attribute or the item indicated by the Single Item Binding. However, if the Single Item Binding indicates a non-empty value, and the media type is specified based on the <a href="#ui-output-mediatype-attr" title="">mediatype attribute</a> or <a href="#ui-output-mediatype" title="">mediatype child element</a>, then the string value of the item <a href="#intro-reading" title="">must</a> be decoded or dereferenced according to its datatype, and the result <a href="#intro-reading" title="">should</a> be rendered according to the indicated media type if it is possible to do so (e.g. a voice-only device cannot render a digital image).
</p>
<div class="note">
<p><b>Note:</b>
</p><p>When the media type is specified, implementations <a href="#intro-reading" title="">may</a> handle the output content as presentation-only or as interactive content, and interactive content <a href="#intro-reading" title="">may</a> be isolated from or capable of accessing the enclosing document that contains the <code>output</code>. Further implementation experience and user feedback is required. For example, if the output content includes XForms user interface elements, it may be desirable for them to access a default XForms model in the output content or from the enclosing document.
</p>
</div>
<p>If the Single Item Binding is absent or if it does not indicate a non-empty value, then the media type specification is ignored if given. Otherwise, if the Single Item Binding produces a non-empty value, and the media type is specified, then decoding or dereferencing of the item prior to rendition is performed by datatype as follows:
</p>
<ul><li> If the item either is of type or is derived from type <code>xsd:base64Binary</code>, then the data is base-64 decoded.
</li><li> If the item either is of type or is derived from type <code>xsd:hexBinary</code>, then the data is hex-binary decoded.
</li><li> If the item either is of type or is derived from type <code>xsd:anyURI</code>, then the data is treated as a URI and dereferenced.
</li><li> If the item is of any other type, then the data is used without modification.
</li></ul>
<p>If the <code>output</code> rendition is based on the <code>value</code> attribute, then the rendition is updated if the nodes referenced by the <code>value</code> expression change or if the content of any of the referenced nodes changes. Otherwise, the rendition of an <code>output</code> is updated if the item referenced by the Single Item Binding changes, if the content of the referenced item changes, or if the media type changes. The media type can change by a change to the <code>mediatype</code> element's referenced item or its content (a host language may also allow DOM mutation of the content of the <code>mediatype</code> attribute or element). A change to the label associated with the <code>output</code> causes an update to the rendition of the label (which may affect the layout position of the main output content).
</p><p>Failure to render the content indicated by the <code>output</code> element <a href="#intro-reading" title="">should</a> result in an <a href="#evt-output-error" title="">xforms-output-error</a>, a non-fatal error that does not halt XForms processing. Failures can occur on initial creation of the <code>output</code> or during user interface refresh (see Section <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a>). Failures can occur for many reasons, including
</p>
<ul><li> Data to be decoded does not conform to the format of <code>xsd:base64Binary</code> or <code>xsd:hexBinary</code>
</li><li> An error dereferencing the URI in a item of or derived from type <code>xsd:anyURI</code>
</li><li> A data format error (e.g. invalid or unsupported image format)
</li><li> An unrecognized media type identifier string
</li></ul>
<p>The content model for the <code>output</code> element includes <a href="#elems-ui-common" title="">UI Common</a> in order to allow action handlers for the <a href="#evt-output-error" title="">xforms-output-error</a> as well as to allow more comprehensive behavior and information to be provided for the <code>output</code>, e.g. via the <code>hint</code> element.
</p><p>Examples:
</p>
<div class="exampleOuter"><div class="exampleHead">Explanatory Message</div><div class="exampleInner">
<pre>I charged you -
&lt;output ref="order/totalPrice"/&gt;
- and here is why:
</pre>
</div>
<p>A graphical browser might render an output form control as follows:
</p><p><img alt="Average-looking text, reading 'I charged you 100.0 - and here is why:'" border="0" height="79" src="images/ui-output.png" width="409" />
</p>
</div><div class="exampleOuter"><div class="exampleHead">Displaying an image uploaded to instance data</div><div class="exampleInner">
<pre>&lt;model&gt;
	&lt;instance&gt;
		&lt;data xmlns=""/&gt;
	&lt;/instance&gt;
	&lt;bind ref="/data" type="xsd:base64Binary"/&gt;
&lt;/model&gt;
</pre>
</div>
<p>Given the <code>model</code> above, the following controls can upload an image to instance data and display it:
</p>
<div class="exampleInner">
<pre>&lt;upload ref="/data" mediatype="image/*"&gt;
	&lt;label&gt;Press me to attach a picture&lt;/label&gt;
&lt;/upload&gt;

&lt;output ref="/data" mediatype="image/*"&gt;
   &lt;hint&gt;This is the image you attached to the form.&lt;/hint&gt;
   &lt;message ev:event="xforms-output-error"&gt;Error attaching image data.&lt;/message&gt;
&lt;/output&gt;
</pre>
</div></div><div class="exampleOuter"><div class="exampleHead">Output of node bound to xsd:date</div><div class="exampleInner">
<pre>&lt;bind ref="birthdate"
type="xsd:date" /&gt;
...
&lt;output ref="birthdate"&gt;
   &lt;label&gt;Lexical: &lt;/label&gt;
&lt;/output&gt;
&lt;output ref="birthdate" appearance="full"&gt;
   &lt;label&gt;Full: &lt;/label&gt;
&lt;/output&gt;
&lt;output ref="birthdate" appearance="minimal"&gt;
   &lt;label&gt;Minimal: &lt;/label&gt;
&lt;/output&gt;
</pre>
</div></div>
<p>A graphical browser may take into account the <code>appearance</code> and the localization information from the host language and present the above output form controls as follows:
</p><p>Lexical: 1998-01-19 Full: 19 janvier 1998 Minimal: 19/01/1998
</p>
<div class="div4">
<a id="The_mediatype_Element_.28for_output.29" name="The_mediatype_Element_.28for_output.29"></a><h5> <span class="mw-headline">8.1.5.1 <span id="ui-output-mediatype">The mediatype Element (for output)</span></span></h5>
<p>Binding attributes on author-optional element <code>mediatype</code>  (deprecated in favor of using an AVT in the mediatype attribute) specify the location in the instance of the string that indicates the desired media type rendition for the parent <code>output</code>. If the binding attributes are not used, the <code>value</code> attribute must be used instead to specify the desired media type rendition.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> An expression to be evaluated. The string result of the evaluation is used to specify the desired media type for output rendition. If a Single Item Binding is expressed, then this attribute has no effect. The evaluation context is the same as would be applied to the evaluation of the Single Item Binding. An empty string is used if the evaluation fails.
</dd></dl>
</div></div><div class="div3">
<a id="The_upload_Element" name="The_upload_Element"></a><h4> <span class="mw-headline">8.1.6 <span id="ui-upload">The upload Element</span></span></h4>
<p>Description: This form control enables the common feature found on Web sites to upload a file from the local file system, as well as accepting input from various devices including microphones, pens, and digital cameras.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> mediatype
</dt><dd> Author-optional. Space-separated list of suggested media types, used by the XForms Processor to determine the possible sources of data to upload.
</dd><dt> incremental
</dt><dd> Author-optional. When <code>true</code>, this form control will generate additional <code>xforms-value-changed</code> events. The default for this form control is <code>false</code>.
</dd></dl>
<p>Data Binding Restrictions: This form control can only be bound to datatypes <code>xsd:anyURI</code>, <code>xsd:base64Binary</code> or <code>xsd:hexBinary</code>, or types derived by restriction from these.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This control cannot bind to element nodes that have element children. See <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a> for user interface processing rules common to all form controls.
</p>
</div>
<p>Implementation Requirements: For base64Binary or hexBinary data binding:
</p>
<ul><li> When bound to an instance data node of type <code>xsd:base64binary</code>, <code>xsd:hexBinary</code>, or a type derived by restriction thereof, on activation <code>upload</code> places the binary content in the content of the node with the indicated encoding.
</li></ul>
<p>Implementation Requirements: For anyURI data binding:
</p>
<ul><li> When bound to an instance data node of type <code>xsd:anyURI</code> (or a type derived by restriction thereof), on activation <code>upload</code> places a URI in the content of the node.<br /><br />For security reasons, the XForms Processor must not dereference the URI bound to this form control without explicit user permission.<div class="note"><b>Note: </b>Implementors note that <code>upload</code> must associate the binary content, mediatype, and filename with that URI for <a href="#Serialization_as_multipart.2Frelated" title="">Serialization as multipart/related</a> and <a href="#Serialization_as_multipart.2Fform-data" title="">Serialization as multipart/form-data</a> serialization.</div>
</li></ul>
<ul><li> Implementations with a file system should support <i>file upload</i> &mdash; selecting a specific file. The types of files presented by default should reflect the mediatype specified by attribute <code>mediatype</code>, for example defaulting to only audio file types in the file dialog when the mediatype is "audio/*".
</li></ul>
<p>Implementation Requirements: For all data bindings:
</p>
<ul><li> Implementations with specific pen/digitizer hardware should (and implementations with other pointing devices may) support <i>scribble</i> &mdash; allowing in-place creation of pen-based data.
</li><li> Implementations with specific audio recording capabilities should support <i>record audio</i> &mdash; in-place recording of an audio clip.
</li><li> Implementations with a digital camera, scanner interface or screen capture should support <i>acquire image</i> &mdash; in-place upload of images from an attached device.
</li><li> Implementations with video recording capability should provide a <i>record video</i> option.
</li><li> Implementations with 3d capabilities should provide a 3d interface option.
</li><li> Implementations may provide proprietary implementations (for example, a mediatype of <code>text/rtf</code> could invoke an edit window with a proprietary word processing application)
</li><li> Implementations are encouraged to support other input devices not mentioned here.
</li><li> Implementations which cannot support upload for the given mediatype must make this apparent to the user.
</li></ul>
<p>See the child elements <code>filename</code> (<a href="#The_filename_Element" title="">The filename Element</a>) and <code>mediatype</code> (<a href="#The_mediatype_Element_.28for_upload.29" title="">The mediatype Element (for upload)</a>).
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Uploading An Image</div><div class="exampleInner">
<pre>&lt;upload ref="mail/attachment" mediatype="image/*"&gt;
  &lt;label&gt;Select image:&lt;/label&gt;
  &lt;filename ref="@filename" /&gt;
  &lt;mediatype ref="@mediatype" /&gt;
&lt;/upload&gt;
</pre>
</div>
<p>A graphical browser might render this form control as follows:
</p><p><img alt="A drop-down box; main display reads 'Select Image:' with a cute icon. The drop-down itself has three items: (icon)-From Scanner or Camera...; (icon)-Scribble...; Browse..." border="0" height="75" src="images/ui-upload.png" width="191" />
</p><p>Implementation Requirements:
</p>
<ul><li> On activation, if child element <code>filename</code> is present and a filename is available, <code>upload</code> places the filename of the data to upload in the instance at the node indicated by the binding attributes on child element <code>filename</code>.
</li><li> On activation, if child element <code>mediatype</code> is present and a mediatype is available, <code>upload</code> places the mediatype of the data to upload in the instance at the node indicated by the binding attributes on child element <code>mediatype</code>.
</li></ul>
</div><div class="div4">
<a id="The_filename_Element" name="The_filename_Element"></a><h5> <span class="mw-headline">8.1.6.1 <span id="ui-upload-filename">The filename Element</span></span></h5>
<p>Binding attributes on author-optional element <code>filename</code> specify the location in the instance for the parent element <code>upload</code>, when activated, to place the filename for the chosen binary resource. For security reasons, <code>upload</code> must not take action due to any existing value of the node.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Content: EMPTY
</p><p>In the following example, the user is prompted to select an image. When activated, <code>upload</code> places in <code>mail/attachment</code> either the binary data of the image or a URI for it, depending on the type declared for the <code>mail/attachment</code>. The filename, perhaps "<code>me.jpg</code>", is placed in the attribute node <code>mail/attachment/@filename</code>, and the mediatype, perhaps "<code>image/jpeg</code>" in the attribute node <code>mail/attachment/@mediatype</code>.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleInner">
<pre>&lt;upload ref="mail/attachment" mediatype="image/*"&gt;
   &lt;label&gt;Select an image to attach&lt;/label&gt;
   &lt;filename ref="@filename"/&gt;
   &lt;mediatype ref="@mediatype"/&gt;
&lt;/upload&gt;
</pre>
</div></div></div><div class="div4">
<a id="The_mediatype_Element_.28for_upload.29" name="The_mediatype_Element_.28for_upload.29"></a><h5> <span class="mw-headline">8.1.6.2 <span id="ui-upload-mediatype">The mediatype Element (for upload)</span></span></h5>
<p>Binding attributes on author-optional element <code>mediatype</code>  (deprecated in favor of using an AVT in the mediatype attribute) specify the location in the instance for the parent element <code>upload</code>, when activated, to place the mediatype of the chosen binary resource, if available.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Content: EMPTY
</p>
</div></div><div class="div3">
<a id="The_range_Element" name="The_range_Element"></a><h4> <span class="mw-headline">8.1.7 <span id="ui-range">The range Element</span></span></h4>
<p>Description: This form control allows selection from a sequential range of values.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> start
</dt><dd> Author-optional attribute containing a hint for the lexical starting bound for the range &mdash; a legal value for the underlying data. If provided, this value is used to further refine the constraints specified by the underlying model.
</dd><dt> end
</dt><dd> Author-optional attribute containing a hint for the ending bound for the range &mdash; a legal value for the underlying data. If provided, this value is used to further refine the constraints specified by the underlying model.
</dd><dt> step
</dt><dd> Author-optional attribute containing a delta-value to use for incrementing or decrementing the value. Must be of a type capable of expressing the difference between two legal values of the underlying data.
</dd><dt> incremental
</dt><dd> Author-optional. When <code>true</code>, this form control will generate additional <code>xforms-value-changed</code> events. The default for this form control is <code>false</code>.
</dd></dl>
<p>Data Binding Restrictions: Binds only the following list of datatypes, or datatypes derived by restriction from those in the list: <code>xsd:duration</code>, <code>xsd:date</code>, <code>xsd:time</code>, <code>xsd:dateTime</code>, <code>xsd:gYearMonth</code>, <code>xsd:gYear</code>, <code>xsd:gMonthDay</code>, <code>xsd:gDay</code>, <code>xsd:gMonth</code>, <code>xsd:float</code>, <code>xsd:double</code>, and <code>xsd:decimal</code>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The above list of datatypes includes by derivation all of the integer datatypes (), all of the XForms datatypes defined in Section <a href="#XForms_Datatypes" title="">XForms Datatypes</a> that correspond to the allowed XML schema datatypes, and the datatypes defined in <a href="#xforms:dayTimeDuration" title="">xforms:dayTimeDuration</a> and <a href="#xforms:yearMonthDuration" title="">xforms:yearMonthDuration</a>.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>This control cannot bind to element nodes that have element children. See <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a> for user interface processing rules common to all form controls.
</p>
</div>
<p>Implementation Requirements: Must allow input of a value corresponding to the bound datatype. Implementations should inform the user of the upper and lower bounds, as well as the step size, if any. If the instance data value is outside the upper or lower bounds, this form control must indicate an out-of-range condition. In graphical environments, this form control may be rendered as a "slider" or "rotary control".
</p><p>In the event of overlapping restrictions between the underlying datatype and the <code>start</code> and <code>end</code> hints, the most restrictive range should be used.
</p><p>Notice that the attributes of this element encapsulate sufficient metadata that in conjunction with the type information available from the XForms Model proves sufficient to produce meaningful prompts when using modalities such as speech, e.g., when using an accessibility aid. Thus, in the example below, an aural user agent might speak a prompt of the form <i>Please pick a date in the range January 1, 2001 through December 31, 2001.</i>
</p><p>Examples:
</p>
<div class="exampleOuter"><div class="exampleHead">Picking From A Range</div><div class="exampleInner">
<pre>&lt;range ref="/stats/balance" start="-2.0" end="2.0" step="0.5"&gt;
  &lt;label&gt;Balance&lt;/label&gt;
&lt;/range&gt;
</pre>
</div>
<p>A graphical browser might render this as follows:
</p><p><img alt="a slider control, from -2 to +2" border="0" height="64" src="images/ui-range.png" width="113" />
</p>
</div><div class="exampleOuter"><div class="exampleHead">Picking a date from a range</div><div class="exampleInner">
<pre>&lt;range ref="/order/shipDate" start="2001-01-01" end="2001-12-31"&gt;
  &lt;label&gt;Ship Date&lt;/label&gt;
&lt;/range&gt;
</pre>
</div></div></div><div class="div3">
<a id="The_trigger_Element" name="The_trigger_Element"></a><h4> <span class="mw-headline">8.1.8 <span id="ui-trigger">The trigger Element</span></span></h4>
<p>Description: This form control is similar to the HTML element <code>button</code> and allows for user-triggered actions. This form control may also be used to construct other custom form controls.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Data Binding Restrictions: Binds to any node or an atomic value. This form control does not directly interact with form data, but is affected by model item properties of the bound node, thus binding attributes are not required.
</p><p>Implementation Requirements: The user agent must provide a means to generate an <code>DOMActivate</code> event on the form control. Graphical implementations might render this form control as a push-button with the label on the button face. Style sheets can be used to style this form control as an image, hyperlink, or other presentation.
</p><p>Although a <code>trigger</code> element receives events associated with model item properties of a bound node, such as <code>xforms-readonly</code> and <code>xforms-invalid</code>, the XForms processor must not impart special behaviors on this control for model item properties other than the model item property <code>relevant</code> of a bound data node. For example, the <code>readonly</code> model item property of a bound data node does not affect whether or not the <code>trigger</code> can be activated.
</p><p>Typically, a style sheet would be used to determine the exact appearance of form controls, though a means is provided to suggest an appearance through attribute <code>appearance</code>. Suggested renditions for the pre-defined values of this attribute are as follows:
</p>
<blockquote>

"full": visually rendered as a standard button control with border.<br />"compact": visually rendered as a standard button control without border<br />"minimal": rendered with no border, a transparent background and underline font effect. This rendition hint is meant to be analogous to the typical visual rendition of an XHTML anchor element.

</blockquote>
<p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Simple Trigger</div><div class="exampleInner">
<pre>&lt;trigger&gt;
  &lt;label&gt;Click here&lt;/label&gt;
&lt;/trigger&gt;
</pre>
</div></div></div><div class="div3">
<a id="The_submit_Element" name="The_submit_Element"></a><h4> <span class="mw-headline">8.1.9 <span id="ui-submit">The submit Element</span></span></h4>
<p>Description: This form control initiates a submission .
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes:
</p>
<dl><dt> submission
</dt><dd> Author-optional attribute containing a reference to element <code>submission</code>. If this attribute is given but does not identify a <code>submission</code> element, then activating the <code>submit</code> does not result in the dispatch of an <code>xforms-submit</code> event. If this attribute is omitted, then the first <code>submission</code> in document order from the <code>model</code> associated with the in-scope evaluation context is used.
</dd></dl>
<p>Data Binding Restrictions: Binds to any node or an atomic value. This form control does not directly interact with form data, but is affected by model item properties of the bound node, thus binding attributes are not required.
</p><p>Implementation Requirements: The default action for event <code>DOMActivate</code> is to dispatch event <code>xforms-submit</code> to the <code>submission</code> element specified by attribute <code>submission</code> (or its default). Upon activation, this control must become unavailable for further activations until the submit process concludes with either an <code>xforms-submit-done</code> or <code>xforms-submit-error</code> event.
</p><p>Typically, a style sheet would be used to determine the exact appearance of form controls, though a means is provided to suggest an appearance through attribute <code>appearance</code>. Suggested renditions for the pre-defined values of this attribute are the same as for <a href="#ui-trigger" title="">trigger</a>.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Submit</div><div class="exampleInner">
<pre>&lt;submit submission="timecard"&gt;
  &lt;label&gt;Submit Timecard&lt;/label&gt;
&lt;/submit&gt;
</pre>
</div></div></div><div class="div3">
<a id="The_select_Element" name="The_select_Element"></a><h4> <span class="mw-headline">8.1.10 <span id="ui-selectMany">The select Element</span></span></h4>
<p>Description: This form control allows the user to make multiple selections from a set of choices.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> selection
</dt><dd> Author-optional attribute determining whether free entry is allowed in the list. Default is "closed".
</dd><dt> incremental
</dt><dd> Author-optional. When <code>true</code>, this form control will generate additional <code>xforms-value-changed</code> events. The default for this form control is <code>true</code>.
</dd></dl>
<p>Data Binding Restrictions: any simpleContent capable of holding a sequence  or a sequence of atomic values. The restriction to binding simpleContent exists when the choices are authored as part of the user interface control as shown in this section. Element <code>itemset</code> (described in <a href="#The_itemset_Element" title="">The itemset Element</a>) creates dynamic selection items and allows the available choices to be obtained from an XForms Model. When <code>itemset</code> uses the <code>value</code> element, the restriction to binding simpleContent remains in effect. However, the <code>itemset</code> also allows for the selection and deselection of subtrees of instance data using the <code>copy</code> element, and when using that construct, the data binding restriction to simpleContent is relaxed, but the form control must bind to an element with no mixed content or a sequence of atomic values.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Except in the case described above where the simpleContent data binding restriction is relaxed, this control cannot bind to element nodes that have element children. See <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a> for user interface processing rules common to all form controls.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>A limitation of the XML Schema list datatypes is that white space characters in the storage values (the <code>value</code> element) are always interpreted as separators between individual data values. Therefore, authors should avoid using white space characters within storage values with list simpleContent.
</p>
<div class="exampleOuter"><div class="exampleHead">Incorrect Type Declaration</div><div class="exampleInner">
<pre>&lt;item&gt;
  &lt;value&gt;United States of America&lt;/value&gt;
  ...
&lt;/item&gt;
</pre>
</div></div>
<p>When selected, this item would introduce not one but four additional selection values: "America", "of", "States", and "United".
</p>
</div>
<p>Implementation Requirements: The label for each choice must be presented, and the control must allow any number of selections, possibly none. When this form control uses the <code>value</code> element for selection, it stores the values corresponding to the selected choices in a space separated list in the location addressed by the binding attributes. The values to be stored for selected items are either directly specified as the contents of element <code>value</code>, or specified indirectly through binding attributes on element <code>value</code>. When this form control uses the <code>copy</code> element for selection, it stores copies of the subtrees corresponding to the selected choices in the location addressed by the binding attributes.
</p><p>The datatype bound to this form control may include a non-enumerated value space, e.g., <code>xsd:string</code>, or a union of a enumeration and a non-enumerated datatype (called an open enumeration). In this case, control <code>select</code> may have attribute <code>selection="open"</code>. The form control must then allow free data entry, as described in <a href="#The_input_Element" title="">The input Element</a>. The form control may permit multiple values to be entered through free entry.
</p><p><b>For closed selections:</b> If the instance data matches the storage data of one or more of the selection items, those items are selected. If there is no match, no items are initially selected. If any of the stored values or subtree copies do not correspond to an item with a matching storage value or subtree, the form control must indicate an out-of-range condition. If the form control switches to or from being out-of-range, then <code>xforms-out-of-range</code> or <code>xforms-in-range</code> must be dispatched to the form control.
</p><p><b>For open selections:</b> When using dynamic selections with the <code>itemset</code> and <code>copy</code> elements, open selection has no effect. If the instance data matches the storage values specified by one or more of the selection items, then all such matching items are selected. If any instance data list values do not match the storage value specified by one or more of the items, all such non-matching values are retained, as if entered through free entry. Free entry text is handled the same as form control <code>input</code> (<a href="#The_input_Element" title="">The input Element</a>), possibly in multiplicity.
</p><p>For both closed and open selections, any selection item with an empty storage data subtree or a storage value that is either empty or contains only white space characters must remain deselected.
</p><p>For both closed and open selections, the above rules describe which items are considered to be selected and deselected by the control. The <code>select</code> form control changes the states of selected and deselected items on creation, refresh, and user selection or deselection of an item. Newly selected items receive the event <code>xforms-select</code> immediately after all newly deselected items receive the event <code>xforms-deselect</code>. The content of the instance node bound to the selection control must only be changed by the addition or deletion of storage data associated with items that have been selected or deselected. Content not associated with selection items is preserved. For selection controls that use the <code>value</code> element, the net effect of newly selected and deselected items is computed into a string, preserving content not associated with selection items, and the result is then committed to the bound instance node by using the XForms Action <a href="#The_setvalue_Element" title="">The setvalue Element</a>. For selection controls that use the <code>copy</code> element, the individual subtrees associated with the newly selected and deselected items are added or removed individually by using <a href="#The_insert_Element" title="">The insert Element</a> and <a href="#The_delete_Element" title="">The delete Element</a>.
</p><p><b>Implementation Hints:</b>
</p><p>For closed selections, when the form control is created or refreshed to reflect bound instance data, behavior equivalent to the following steps occurs:
</p>
<ol><li> The content parts (space-separated values or subtree copies) in the bound instance data node are compared with the form control items' storage data (values or subtree copies).
</li><li> Each item with storage data (value or subtree copy) equal to an instance data content part becomes selected if it was not already selected.
</li><li> Each item with storage data missing from the instance data content becomes deselected if it was not already deselected.
</li><li> If there are instance data content parts for which there is no corresponding selection item, the form control indicates an out-of-range condition.
</li></ol>
<p>When the user selects an item which was previously deselected, behavior equivalent to the following steps occurs:
</p>
<ol><li> If the item's storage data (value or subtree copy) was not present in the bound instance data, the item's storage data is inserted into the instance data content list. The exact location of the insertion is implementation-dependent. Any other item having the same storage data becomes selected as well.
</li><li> If the item's storage data was already present in the bound instance data, the bound instance data is left unchanged.
</li></ol>
<p>When the user deselects an item which was previously selected, behavior equivalent to the following steps occurs:
</p>
<ol><li> If the item's storage data was present in the bound instance data, the item's storage data is removed from the instance data content list. Any other item having the same storage data becomes deselected as well.
</li><li> If the item's storage data was already absent from the bound instance data, the bound instance data is left unchanged.
</li></ol>
<p>For open selections: when the form control is created or refreshed to reflect bound instance data, the behavior is the same as with closed selection, except the form control never indicates an out-of-range condition.
</p><p>An accessibility aid might allow the user to browse through the available choices and leverage the grouping of choices in the markup to provide enhanced navigation through long lists of choices.
</p><p>Typically, a style sheet would be used to determine the exact appearance of form controls, though a means is provided to suggest an appearance through attribute <code>appearance</code>. The value of the attribute consists of one of the following values:
</p>
<blockquote>

"full": all choices should be rendered at all times.<br />"compact": a fixed number of choices should be rendered, with scrolling facilities as needed<br />"minimal": a minimum number of choices should be rendered, with a facility to temporarily render additional choices

</blockquote>
<p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Selecting Ice Cream Flavor</div><div class="exampleInner">
<pre>&lt;select ref="my:flavors"&gt;
  &lt;label&gt;Flavors&lt;/label&gt;
  &lt;choices&gt;
    &lt;item&gt;
      &lt;label&gt;Vanilla&lt;/label&gt;
      &lt;value&gt;v&lt;/value&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;label&gt;Strawberry&lt;/label&gt;
      &lt;value&gt;s&lt;/value&gt;
    &lt;/item&gt;
    &lt;item&gt;
      &lt;label&gt;Chocolate&lt;/label&gt;
      &lt;value&gt;c&lt;/value&gt;
    &lt;/item&gt;
  &lt;/choices&gt;
&lt;/select&gt;
</pre>
</div>
<p>In the above example, more than one flavor can be selected.
</p><p>A graphical browser might render form control <code>select</code> as any of the following:
</p>
<table border="1" summary="Selection controls">
<tbody><tr>
<th colspan="1" rowspan="1"> <code>appearance="full"</code>
</th><th colspan="1" rowspan="1"> <code>appearance="compact"</code>
</th><th colspan="1" rowspan="1"> <code>appearance="minimal"</code>
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><img alt="Check boxes for three choices: Vanilla, Strawberry, and Chocolate. Strawberry and Chocolate are selected." border="0" height="88" src="images/ui-selectmany-checkbox.png" width="239" />
</p>
</td><td colspan="1" rowspan="1">
<p><img alt="A list box with three choices: Vanilla, Strawberry, and Chocolate visible. Strawberry and Chocolate are selected." border="0" height="107" src="images/ui-selectmany-listbox.png" width="189" />
</p>
</td><td colspan="1" rowspan="1">
<p><img alt="A popup menu with three choices: Strawberry, Vanilla, and Chocolate. Strawberry and Chocolate are selected." border="0" height="83" src="images/menu.png" width="130" />
</p>
</td></tr></tbody></table>
</div></div><div class="div3">
<a id="The_select1_Element" name="The_select1_Element"></a><h4> <span class="mw-headline">8.1.11 <span id="ui-selectOne">The select1 Element</span></span></h4>
<p>Description: This form control allows the user to make a single selection from multiple choices.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> selection
</dt><dd> Author-optional attribute determining whether free entry is allowed in the list. Default is "closed".
</dd><dt> incremental
</dt><dd> Author-optional. When <code>true</code>, this form control will generate additional <code>xforms-value-changed</code> events. The default for this form control is <code>true</code>.
</dd></dl>
<p>Data Binding Restrictions: Binds to any simpleContent or an atomic value. The restriction to binding simpleContent exists when the choices are authored as part of the user interface control as shown in this section. Element <code>itemset</code> (described in <a href="#The_itemset_Element" title="">The itemset Element</a>) creates dynamic selection items and allows the available choices to be obtained from an XForms Model. When <code>itemset</code> uses the <code>value</code> element, the restriction to binding simpleContent remains in effect. However, the <code>itemset</code> also allows for the selection and deselection of subtrees of instance data using the <code>copy</code> element, and when using that construct, the data binding restriction to simpleContent is relaxed, but the form control must bind to an element with no mixed content or an atomic value.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Except in the case described above where the simpleContent data binding restriction is relaxed, this control cannot bind to element nodes that have element children. See <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a> for user interface processing rules common to all form controls.
</p>
</div>
<p>Implementation Requirements: The label for each choice must be presented, and the control must allow at all times exactly one selection. When this form control uses the <code>value</code> element for selection, it stores the value corresponding to the selected choice in the location addressed by the binding attributes. The value to be stored is either directly specified as the contents of element <code>value</code>, or specified indirectly through binding attributes on element <code>value</code>. When this form control uses the <code>copy</code> element for selection, it stores a copy of the subtree corresponding to the selected choice in the location addressed by the binding attributes.
</p><p>The datatype bound to this form control may include a non-enumerated value space, e.g., <code>xsd:string</code>, or a union of a enumeration and a non-enumerated datatype (called an open enumeration). In this case, control <code>select1</code> may have attribute <code>selection="open"</code>. The form control must then allow free-form data entry, as described in <a href="#The_input_Element" title="">The input Element</a>.
</p><p><b>For closed selections:</b> If the instance data matches the storage data of one of the selection items, that item is selected. If there is no match, no items are initially selected. If there is no match and the storage data is non-empty, the form control must indicate an out-of-range condition. If the form control switches to or from being out-of-range, then <code>xforms-out-of-range</code> or <code>xforms-in-range</code> must be dispatched to the form control.
</p><p><b>For open selections:</b> When using dynamic selections with the <code>itemset</code> and <code>copy</code> elements, open selection has no effect. If the instance data matches the storage value specified by one of the selection items, then the first such matching item is selected. Otherwise, no items are selected and the instance data value is retained, as if entered through free text entry. Free entry text is handled the same as form control <code>input</code> (<a href="#The_input_Element" title="">The input Element</a>).
</p><p>For both closed and open selections, any selection item with a storage value which is empty or which contains only white space characters is deemed to be selected if the bound data node value exactly matches the storage value of the selection item. Furthermore, selecting a selection item with a storage value which is empty or which contains only white space characters places the storage value into the bound data node value.
</p><p>For both closed and open selections, the above rules describe which items are considered to be selected by the control. Items that are not selected are considered to be deselected. The <code>select1</code> form control changes the states of selected and deselected items on creation, refresh, and user selection or deselection of an item. A newly selected item receives the event <code>xforms-select</code> immediately after all other items receive the event <code>xforms-deselect</code>. The content of the instance node bound to the selection control must only be changed by the addition or deletion of storage data associated with items that have been selected or deselected. Content not associated with selection items is preserved. For selection controls that use the <code>value</code> element, the net effect of newly selected and deselected items is computed into a string, preserving content not associated with selection items, and the result is then committed to the bound instance node by using the XForms Action <a href="#The_setvalue_Element" title="">The setvalue Element</a>. For selection controls that use the <code>copy</code> element, the individual subtrees associated with the newly selected and deselected items are added or removed individually by using <a href="#The_insert_Element" title="">The insert Element</a> and <a href="#The_delete_Element" title="">The delete Element</a>.
</p><p><b>Implementation Hints:</b>
</p><p>For closed selections, when the form control is created or refreshed to reflect bound instance data, behavior equivalent to the following steps occurs:
</p>
<ol><li> The bound instance data is compared with the items' storage data (values or subtree copies).
</li><li> If no item with storage data (value or subtree copy) in the bound instance data node is selected, then the first item with storage data in the instance data content, if any, becomes selected. Otherwise, if an item with storage data in the bound instance data node is selected, then the first selected item remains selected, and any other items with storage data matching the selected item are deselected.
</li><li> If there is a selected item, then all items with storage data not equal to the selected item are deselected, and their representative storage data is removed from the bound instance node content.
</li><li> If no item has storage data in the bound instance data node content and the instance data node content is not empty, then the form control indicates an out-of-range condition.
</li></ol>
<p>When the user selects an item which was previously deselected, behavior equivalent to the following steps occurs:
</p>
<ol><li> All selected items other than the newly selected item are deselected, if any, and the storage data of any deselected items whose storage data does not match the newly selected item are removed from the bound instance node data.
</li><li> The newly selected item becomes selected. If its storage data (value or subtree copy) is not present in the bound instance data, then the item's storage data is inserted into the instance data. The exact location of the insertion is implementation-dependent, but the newly inserted data is not accompanied by any other data unless the data does not match any items for the selection control.
</li></ol>
<p>When the user deselects an item which was previously selected, behavior equivalent to the following steps occurs:
</p>
<ol><li> The item is deselected and its storage data is removed from the bound instance node data.
</li><li> If the bound instance data node is not empty, then the form control indicates an out-of-range condition.
</li></ol>
<p>For open selections: when the form control is created or refreshed to reflect bound instance data, the behavior is the same as with closed selection, except the form control never indicates an out-of-range condition.
</p><p>An accessibility aid might allow the user to browse through the available choices and leverage the grouping of choices in the markup to provide enhanced navigation through long lists of choices.
</p><p>User interfaces may choose to render this form control as a pulldown list or group of radio buttons, among other options. The <code>appearance</code> attribute offers a hint as to which rendering might be most appropriate, although any styling information (such as CSS) should take precedence.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Pick A Flavor</div><div class="exampleInner">
<pre>&lt;select1 ref="my:flavor"&gt;
  &lt;label&gt;Flavor&lt;/label&gt;
  &lt;item&gt;
    &lt;label&gt;Vanilla&lt;/label&gt;
    &lt;value&gt;v&lt;/value&gt;
  &lt;/item&gt;
  &lt;item&gt;
    &lt;label&gt;Strawberry&lt;/label&gt;
    &lt;value&gt;s&lt;/value&gt;
  &lt;/item&gt;
  &lt;item&gt;
    &lt;label&gt;Chocolate&lt;/label&gt;
    &lt;value&gt;c&lt;/value&gt;
  &lt;/item&gt;
&lt;/select1&gt;
</pre>
</div>
<p>In the above example, selecting one of the choices will result in the associated value given by element <code>value</code> on the selected item being set in the underlying instance data at the location <code>icecream/flavor</code>.
</p><p>A graphical browser might render this form control as any of the following:
</p>
<table summary="Selection controls">
<tbody><tr>
<th colspan="1" rowspan="1"> appearance="full"
</th><th colspan="1" rowspan="1"> appearance="compact"
</th><th colspan="1" rowspan="1"> appearance="minimal"
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><img alt="Radio buttons for three choices: Vanilla, Strawberry, Chocolate. Strawberry is selected." border="0" height="81" src="images/ui-selectone-radio.png" width="227" />
</p>
</td><td colspan="1" rowspan="1">
<p><img alt="A list boxwith three choices: Vanilla, Strawberry, and Chocolate visible. Strawberry is selected." border="0" height="74" src="images/ui-selectone-listbox.png" width="174" />
</p>
</td><td colspan="1" rowspan="1">
<p><img alt="A collapsible pull-down list with the three choices. The list is collapsd, and Vanilla is selected." border="0" height="81" src="images/ui-selectone-pulldown.png" width="229" />
</p>
</td></tr></tbody></table>
</div></div></div><div class="div2">
<a id="Common_Support_Elements" name="Common_Support_Elements"></a><h3> <span class="mw-headline">8.2 <span id="ui-commonelems">Common Support Elements</span></span></h3>
<p>The child elements detailed below provide the ability to attach metadata to many form controls and other elements.
</p>
<ul><li> Factoring all human readable messages to a separate resource XML file.
</li><li> Using URIs into this XML resource bundle within individual <code>label</code> elements
</li><li> Finally, an XForms implementation could use content negotiation to obtain the appropriate XML resource bundle, e.g., based on the <code>accept-language</code> headers from the client, to serve up the user interface with messages localized to the client's locale.
</li></ul>
<div class="div3">
<a id="The_label_Element" name="The_label_Element"></a><h4> <span class="mw-headline">8.2.1 <span id="ui-commonelems-label">The label Element</span></span></h4>
<p>This element provides a descriptive label for the containing form control. The descriptive label can be presented visually and made available to accessibility software so the visually-impaired user can obtain a short description of form controls while navigating among them.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes: None
</p><p>The label specified can exist in instance data or as inline text. If more than one source of label is specified in this element, the order of precedence is: Single Item Binding attributes, inline text.
</p><p>An accessibility aid might speak the metadata encapsulated here when the containing form control gets focus.
</p>
</div><div class="div3">
<a id="The_help_Element" name="The_help_Element"></a><h4> <span class="mw-headline">8.2.2 <span id="ui-commonelems-help">The help Element</span></span></h4>
<p>The author-optional element <code>help</code> provides a convenient way to attach help information to a form control.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-link" title="">Linking</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes: None
</p><p>The message specified can exist in instance data or as inline text. If more than one source of message is specified in this element, the order of precedence is: Single Item Binding attributes, inline text.
</p><p>XForms processors should choose an appropriate presentation for the help content, and should allow styling if the host language integration supports it, for example with CSS.  
</p><p>If the host language integration supports <a href="#structure-attrs-link" title="">Linking</a>, the help link should be made available through an appropriate presentation mechanism.  With <code>appearance="minimal"</code>, the help link should be associated with the label.
</p><p>With no host-language styling and no <code>appearance</code> specified, a graphical browser should present help as an ephemeral <a href="#The_message_Element" title="">message</a>.  The following example shows how such help might be presented in a graphical browser:
</p>
<div class="exampleInner">
<pre>&lt;secret ref="/login/password"&gt;
  &lt;label&gt;Password&lt;/label&gt;
  &lt;help&gt;Have you forgotten your password? Simply call 1-900-555-1212 and have
        a major credit card handy.&lt;/help&gt;
&lt;/secret&gt;
</pre>
</div>
<p><img alt="A password entry form control, with a popup window below, displaying instructions for retrieving a forgotten password" border="0" height="143" src="images/ui-password-with-help.png" width="455" />
</p><p><br />
</p>
</div><div class="div3">
<a id="The_hint_Element" name="The_hint_Element"></a><h4> <span class="mw-headline">8.2.3 <span id="ui-commonelems-hint">The hint Element</span></span></h4>
<p>The author-optional element <code>hint</code> provides a convenient way to attach hint information to a form control.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes: None
</p><p>The message specified can exist in instance data or as inline text. If more than one source of message is specified in this element, the order of precedence is: Single Item Binding attributes, inline text.
</p><p>XForms processors should choose an appropriate presentation for the hint, and should allow styling if the host-language integration supports it, for example with CSS.  With no attribute <code>appearance</code> and no host-language styling, a presentation should be the same as an ephemeral message associated with the label, which a graphical browser might render as follows:
</p>
<div class="exampleInner">
<pre>&lt;input ref="po/address/street1"&gt;
  &lt;label&gt;Street&lt;/label&gt;
  &lt;hint&gt;Please enter the number and street name&lt;/hint&gt;
&lt;/input&gt;
</pre>
</div>
<p><img alt="An average-looking text entry form control, with a mouse pointer visible and a tooltip below, reading 'Please enter the number and street name'" border="0" height="81" src="images/ui-input-with-hint.png" width="315" />
</p><p>With <code>appearance="minimal"</code>, a hint should be associated with the value yet distinguished from actual values.
</p>
<div class="exampleInner">
<pre>&lt;group ref="registration"&gt;
  &lt;input ref="name"&gt;
    &lt;label&gt;Name: &lt;/label&gt;
    &lt;hint appearance="minimal"&gt;Last, First&lt;/hint&gt;
  &lt;/input&gt;
  &lt;input ref="website"&gt;
    &lt;label&gt;Website: &lt;/label&gt;
    &lt;hint appearance="minimal"&gt;http://&lt;/hint&gt;
  &lt;/input&gt;
&lt;/group&gt;
</pre>
</div>
<p>A graphical browser might render such a a hint as follows:
</p><p><img alt="Two text entry form controls, one for name and another for website, with grayed-out hints 'Last, First' and 'http://' appearing in the input value text boxes." border="0" height="87" src="images/ui-input-with-minimal-hint.png" width="279" />
</p><p><br />
</p>
</div><div class="div3">
<a id="The_alert_Element" name="The_alert_Element"></a><h4> <span class="mw-headline">8.2.4 <span id="ui-commonelems-alert">The alert Element</span></span></h4>
<p>The author-optional element <code>alert</code> provides a convenient way to attach alert or error information to a form control. Rendering of this element is implementation-defined, and there is no default <code>level</code> such as <code>modal</code> or <code>ephemeral</code> for the displayed message.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes: None
</p><p>The message specified can exist in instance data or as inline text. If more than one source of message is specified in this element, the order of precedence is: Single Item Binding attributes, inline text. See <a href="#XForms_and_Styling_.28Non-Normative.29" title="">XForms and Styling</a> for examples to see how this might be presented to the user.
</p>
</div></div><div class="div2">
<a id="Common_Markup_for_Selection_Controls" name="Common_Markup_for_Selection_Controls"></a><h3> <span class="mw-headline">8.3 <span id="ui-selection-commonelems">Common Markup for Selection Controls</span></span></h3>
<div class="div3">
<a id="The_choices_Element" name="The_choices_Element"></a><h4> <span class="mw-headline">8.3.1 <span id="ui-selection-commonelems-choices">The choices Element</span></span></h4>
<p>This element is used within selection form controls to group available choices. This provides the same functionality as element <code>optgroup</code> in HTML.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p>
</div><div class="div3">
<a id="The_item_Element" name="The_item_Element"></a><h4> <span class="mw-headline">8.3.2 <span id="ui-selection-commonelems-item">The item Element</span></span></h4>
<p>This element specifies the storage value and label to represent an item in a list. It is found within elements <code>select1</code> and <code>select</code>, or grouped in element <code>choices</code>.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p>
</div><div class="div3">
<a id="The_value_Element_2" name="The_value_Element_2"></a><h4> <span class="mw-headline">8.3.3 <span id="ui-selection-commonelems-value">The value Element</span></span></h4>
<p>This element provides a storage value to be used when an <code>item</code> is selected. The storage value is determined by one of three methods, in order of precedence:
</p>
<ol><li> the value of a node indicated by a Single Item Binding expression, if specified
</li><li> the result of evaluating an expression appearing in attribute <code>value</code>, if specified
</li><li> the inline content of the <code>value</code> element (when neither the Single Item Binding nor the <code>value</code> attribute are expressed).
</li></ol>
<p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional. An expression to be evaluated. The string result of the evaluation is used as the storage value of the <code>item</code> when it is selected. If a Single Item Binding is expressed, then this attribute has no effect. The evaluation context is the same as would be applied to the evaluation of the Single Item Binding. An empty string is used if the evaluation fails.
</dd></dl>
<p>Data Binding Restriction: All lexical values must be valid according to the datatype bound to the selection control. If the Single Item Binding attributes are used and indicate a node in a model other than the bound node of the containing selection control, then an <code>xforms-binding-exception</code> must occur.
</p>
</div></div></div>
<div class="div1">
<a id="Container_Form_Controls" name="Container_Form_Controls"></a><h2> <span class="mw-headline">9 <span id="ui">Container Form Controls</span></span></h2>
<p>This chapter covers XForms view layer features for combining <a href="#Core_Form_Controls" title="">core form controls</a> into user interfaces using <a href="#Container_Form_Controls" title="">container form controls</a>. All core form controls defined in <a href="#Core_Form_Controls" title="">Core Form Controls</a> are treated as individual units for purposes of visual layout e.g., in XHTML processing. A <b>container form control</b> is a form control that provides the ability to combine other form controls in its content into user interfaces.
</p><p>Aggregation of form controls with markup defined in this chapter provides semantics about the relationship among user interface controls; such knowledge can be useful in delivering a coherent UI to small devices. For example, if the user interface needs to be split up over several screens, controls appearing inside the same aggregation would typically be rendered on the same screen or page.
</p>
<div class="div2">
<a id="The_XForms_Group_Module" name="The_XForms_Group_Module"></a><h3> <span class="mw-headline">9.1 <span id="ui-group-module">The XForms Group Module</span></span></h3>
<p>A <code>group</code> element is a <a href="#Container_Form_Controls" title="">container form control</a> that allows a form author to aggregate other form controls into a single, aggregate user interface component. The elements and attributes included in this module are:
</p>
<table border="1" summary="listing of XForms Group element and its attribute and content model">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Attributes and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Minimal Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-group" title="">group</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p>
</td><td colspan="1" rowspan="1">
<p>label?, ((<a href="#elems-form-controls" title=""> Core Form Controls</a>)|group|switch|repeat|<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr></tbody></table>
<div class="div3">
<a id="The_group_Element" name="The_group_Element"></a><h4> <span class="mw-headline">9.1.1 <span id="ui-group">The group Element</span></span></h4>
<p>The <code>group</code> element is used as a container for defining a hierarchy of form controls. Groups can be nested to create complex hierarchies. The author-optional <code>label</code> element has special significance when it appears as the first element child of <code>group</code>, representing a label for the entire group.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Although a <code>group</code> element receives events associated with model item properties of a bound node, such as <code>xforms-readonly</code> and <code>xforms-invalid</code>, no special behavior is imparted by the <code>group</code> onto the content elements in the group as a direct result of any model item property. The model item property <code>relevant</code> of a bound data node can indirectly affect the content of the group via its contribution to deciding whether the <code>group</code> is relevant or non-relevant. A group is considered to be non-relevant if and only if:
</p>
<ul><li> the Single Item Binding is expressed and resolves to empty sequence,
</li><li> the Single Item Binding is expressed and resolves to a non-relevant instance node,
</li><li> the <code>group</code> is contained by a non-relevant <code>switch</code> or <code>group</code> (which includes a non-relevant <code>repeat</code> object), or
</li><li> the <code>group</code> is contained by a non-selected <code>case</code> element of a <code>switch</code>.
</li></ul>
<p>All content elements (e.g. core form controls, groups, switches, repeats and host language content) within a non-relevant group are handled as non-relevant. When a <code>group</code> becomes non-relevant, it must receive event <code>xforms-disabled</code> and then the XForms action handlers that are listening for events on the non-relevant <code>group</code> must be disabled. When a non-relevant <code>group</code> changes to being relevant, the XForms action handlers that listen for events on the <code>group</code> must become enabled and then the <code>group</code> must receive the event <code>xforms-enabled</code>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>If a group is non-relevant, then the rendering approach used to signify non-relevance is applied to the entire content of the group.
</p>
</div>
<p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Grouping Related Controls</div><div class="exampleInner">
<pre>&lt;group ref="address"&gt;
  &lt;label&gt;Shipping Address&lt;/label&gt;
  &lt;input ref="line_1"&gt;
    &lt;label&gt;Address line 1&lt;/label&gt;
  &lt;/input&gt;
  &lt;input ref="line_2"&gt;
    &lt;label&gt;Address line 2&lt;/label&gt;
  &lt;/input&gt;
  &lt;input ref="postcode"&gt;
    &lt;label&gt;Postcode&lt;/label&gt;
  &lt;/input&gt;
&lt;/group&gt;
</pre>
</div></div>
<p>Setting the input focus on a group results in the focus being set to the first form control in the navigation order within that group.
</p>
</div></div><div class="div2">
<a id="The_XForms_Switch_Module" name="The_XForms_Switch_Module"></a><h3> <span class="mw-headline">9.2 <span id="ui-switch-module">The XForms Switch Module</span></span></h3>
<p>A <code>switch</code> element is a <a href="#Container_Form_Controls" title="">container form control</a> that allows the creation of user interfaces where the user interface can be varied based on user actions and events. The elements and attributes included in this module are:
</p>
<table border="1" summary="listing of XForms Switch elements, attributes, and content models">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Attributes and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Minimal Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-switch" title="">switch</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional), caseref (node Expression)
</p>
</td><td colspan="1" rowspan="1"> <a href="#ui-case" title="">case</a>+
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-case" title="">case</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, selected (xsd:boolean)
</p>
</td><td colspan="1" rowspan="1">
<p>label?, ((<a href="#elems-form-controls" title=""> Core Form Controls</a>)|group|switch|repeat|<a href="#action-content-set" title="">Action</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-toggle" title="">toggle</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, case (xsd:IDREF)
</p>
</td><td colspan="1" rowspan="1"> <a href="#action-toggle-case" title="">case</a>?
</td></tr></tbody></table>
<div class="div3">
<a id="The_switch_Element" name="The_switch_Element"></a><h4> <span class="mw-headline">9.2.1 <span id="ui-switch">The switch Element</span></span></h4>
<p>This element contains one or more <code>case</code> elements, any one of which is rendered at a given time. When the <code>switch</code> is created, the initially selected <code>case</code> is governed by the <code>caseref</code> attribute if specified, and otherwise by the <code>selected</code> attributes of the <code>case</code>s.  The selected <code>case</code> can then be changed by the <a href="#action-toggle" title="">toggle</a> action or by any change of the data node indicated by the <code>caseref</code> attribute, if specified.  When a new <code>case</code> becomes selected, any previously selected <code>case</code> becomes deselected.  The selected and deselected <code>case</code> elements receive events <code>xforms-select</code> and <code>xforms-deselect</code> regardless of how they are selected and deselected. 
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The selection of a case and deselection of all other cases is separate from XForms <code>relevant</code> processing (see <a href="#The_relevant_Property" title="">The relevant Property</a>), which is based on the current state of the XForms Model. As an example, portions of a questionnaire pertaining to the user's automobile may become relevant only if the user has answered in the affirmative to the question 'Do you own a car?'.  By comparison, one use of the <code>case</code>s of a <code>switch</code> is to guide a user through a sequence of user interfaces that collect data, all of which is relevant.
</p>
</div>
<p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes:
</p>
<dl><dt> caseref
</dt><dd> Author-optional XPath expression indicating an instance node with which the identity of the selected <code>case</code> is synchronized.
</dd></dl>
<p>If the <code>caseref</code> attribute is specified, then it takes precedence over the <code>selected</code> attributes of the <code>case</code> elements, whether or not it indicates an existing instance node and whether or not the instance node contains a value that matches the ID of a <code>case</code>.  The <code>caseref</code> attribute is evaluated relative to the Single Item Binding, if specified, or the in-scope evaluation context otherwise. The result is interpreted as a node-sequence, and the first node is obtained, if any.  It is an <code>xforms-binding-exception</code> if the first node obtained has a child element. The <code>caseref</code> value is considered to be the string value of the first node if the expression result is a non-empty nodeset, and empty string if the result is not a node-sequence or an empty sequence. 
</p><p>The result of the <code>caseref</code> expression is kept up to date in a manner consistent with user interface bindings.  It is an <code>xforms-binding-exception</code> if the expression changes to indicating a node-sequence whose first node has a child element. The <code>caseref</code> value can change due to a change of the value of the node indicated by the <code>caseref</code> expression, or by the expression binding changing, either from one node to another, from not indicating a node to indicating a node, or from indicating a node to not indicating a node.  If the <code>caseref</code> value changes, then the selected <code>case</code> of the <code>switch</code> is changed to reflect the new <code>caseref</code> value. 
</p><p>Whether initially selecting a <code>case</code> or selecting a case due to a <code>caseref</code> value change, the <code>case</code> that is selected is based on ID matching. If the <code>caseref</code> value is a non-empty string that matches the ID of a <code>case</code> in the <code>switch</code>, then the matched <code>case</code> is selected.  If the <code>caseref</code> value is empty string or is not equal to the ID of a <code>case</code> in the <code>switch</code>, then the selected <code>case</code> is the first <code>case</code> child element of the <code>switch</code>. In this latter circumstance, if <code>caseref</code> refers to a node, the value of the node is not changed.
</p><p>If the <code>caseref</code> attribute is not specified, then the initially selected <code>case</code> is governed by the <code>selected</code> attributes of the <code>case</code> elements, and changes to the selected <code>case</code> can only be made by the <a href="#action-toggle" title="">toggle</a> action.
</p><p>If the <code>caseref</code> attribute is specified, then changes to the selected <code>case</code> can be made by changes to the <code>caseref</code> value as described above, such as by the <a href="#action-setvalue" title="">setvalue</a> action.  Changes to the selected <code>case</code> can also be performed by the <a href="#action-toggle" title="">toggle</a> action, but these are performed by performing a <a href="#action-setvalue" title="">setvalue</a> action if the <code>caseref</code> attribute is specified and indicates a node.  If the node is readonly or if the <code>toggle</code> action does not indicate a <code>case</code> in the <code>switch</code>, then no value change occurs and therefore no change of the selected <code>case</code> occurs.
</p><p>If the <code>switch</code> element contains a Single Item Binding, then it receives events associated with model item properties of a bound node, such as <code>xforms-readonly</code> and <code>xforms-invalid</code>. No special behavior is imparted by the <code>switch</code> onto the content elements in the selected <code>case</code> as a direct result of any model item property. The model item property <code>relevant</code> of a bound data node can indirectly affect the content of the selected <code>case</code> via its contribution to deciding whether the containing <code>switch</code> is relevant or non-relevant. The non-relevance of a <code>switch</code> is determined in the same way as it is for <code>group</code> and similarly applies to the entire content. Also, as with <code>group</code>, when a <code>switch</code> becomes non-relevant, it must receive event <code>xforms-disabled</code> and then the XForms action handlers that are listening for events on the non-relevant <code>switch</code> must be disabled. As well, when a non-relevant <code>switch</code> changes to being relevant, the XForms action handlers that listen for events on the <code>switch</code> must become enabled and then the <code>switch</code> must receive the event <code>xforms-enabled</code>.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Simple switch</div><div class="exampleInner">
<pre>&lt;switch&gt;
  &lt;case id="in" selected="true"&gt;
    &lt;input ref="yourname"&gt;
      &lt;label&gt;Please tell me your name&lt;/label&gt;
      &lt;toggle ev:event="DOMActivate" case="out"/&gt;
    &lt;/input&gt;
  &lt;/case&gt;
  &lt;case id="out" selected="false"&gt;
    &lt;html:p&gt;Hello &lt;output ref="yourname" /&gt;
      &lt;trigger id="editButton"&gt;
        &lt;label&gt;Edit&lt;/label&gt;
        &lt;toggle ev:event="DOMActivate" case="in"/&gt;
      &lt;/trigger&gt;
    &lt;/html:p&gt;
  &lt;/case&gt;
&lt;/switch&gt;
</pre>
</div></div>
<p>The above results in the portion of the user interface contained in the first <code>case</code> being displayed initially. This prompts for the user's name; filling in a value and <i>activating</i> the control e.g., by pressing <code>enter</code> results switches to the alternate case, with a read-only <code>output</code> rendering. Activating the trigger labeled "Edit" in turn switches back to the original case.
</p><p>Example:
</p>
<div class="exampleOuter"><div class="exampleHead">Switch with caseref</div><div class="exampleInner">
<p>&lt;select1 ref="/payment/details/@method"&gt;
</p>
<pre>  &lt;label&gt;Select Payment Method&lt;/label&gt;
  &lt;item&gt;&lt;label&gt;Credit Card&lt;/label&gt;&lt;value&gt;creditCard&lt;/value&gt;&lt;/item&gt;
  &lt;item&gt;&lt;label&gt;Bank Account Card&lt;/label&gt;&lt;value&gt;cashCard&lt;/value&gt;&lt;/item&gt;
  &lt;item&gt;&lt;label&gt;Cash on delivery&lt;/label&gt;&lt;value&gt;COD&lt;/value&gt;&lt;/item&gt;
</pre>
<p>&lt;/select1&gt;
</p><p>&lt;switch ref="/payment/details" caseref="@method"&gt;
</p>
<pre>   &lt;case id="creditCard"&gt;
       &lt;label&gt;Credit Card Details&lt;/label&gt;
       ...
   &lt;/case&gt;
</pre>
<pre>   &lt;case id="cashCard"&gt;
       &lt;label&gt;Bank Account Card&lt;/label&gt;
        ...
   &lt;/case&gt;
</pre>
<pre>   &lt;case id="COD"&gt;
       &lt;label&gt;Cash-on-delivery Account Information&lt;/label&gt;
       ... 
   &lt;/case&gt;
</pre>
<p>&lt;/switch&gt;
</p>
</div></div>
<p>In this example, if the payment method is initially empty, then initially the credit card details <code>case</code> will be selected. Once the user chooses a payment method with the <code>select1</code>, then the <code>case</code> is selected whose ID matches the selected <code>item</code> value.
</p>
</div><div class="div3">
<a id="The_case_Element" name="The_case_Element"></a><h4> <span class="mw-headline">9.2.2 <span id="ui-case">The case Element</span></span></h4>
<p>This element encloses markup to be conditionally rendered. When a <code>case</code> is selected, it receives the event <code>xforms-select</code>, and its content is rendered.  When a <code>case</code> is deselected, it receives the event <code>xforms-deselect</code>. The content elements (e.g. form controls, groups, switches, repeats and host language elements) within a non-selected <code>case</code> behave as if they were in a non-relevant <code>group</code> (see <a href="#The_group_Element" title="">The group Element</a>). Similarly, content elements in a <code>case</code> that becomes selected behave as if they were in a <code>group</code> that has become relevant. If the containing <code>switch</code> does not specify the <code>caseref</code> attribute, then the attribute <code>selected</code> determines the initial selected state of the <code>case</code>, and the <a href="#action-toggle" title="">toggle</a> action is used to change the selected <a href="#ui-case" title="">case</a>. The <a href="#action-toggle" title="">toggle</a> action uses a <code>case</code> attribute or a <a href="#action-toggle-case" title="">case</a> child element to make an ID reference to the <a href="#ui-case" title="">case</a> of the <a href="#ui-switch" title="">switch</a> to select.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> selected
</dt><dd> Author-optional initial selection status for the case. The default value is <code>"false"</code>. This attribute is ignored if the <code>switch</code> specifies the <code>caseref</code> attribute.
</dd></dl>
<p>If the containing <code>switch</code> does not specify the <code>caseref</code> attribute, then the initially selected <code>case</code> within a <code>switch</code> is the one marked as <code>selected="true"</code>.  If multiple <code>case</code>s within a <code>switch</code> are marked as <code>selected="true"</code>, the first selected <code>case</code> in document order is initially selected and all others are deselected. If none of the <code>case</code>s within a <code>switch</code> are marked as <code>selected="true"</code>, the first <code>case</code> in document order becomes initially selected.
</p>
</div></div><div class="div2">
<a id="The_XForms_Repeat_Module" name="The_XForms_Repeat_Module"></a><h3> <span class="mw-headline">9.3 <span id="ui-repeat-module">The XForms Repeat Module</span></span></h3>
<p>The XForms specification allows the definition of repeating structures such as multiple items within a purchase order. When defining the XForms Model, such higher-level collections are constructed out of basic building blocks; similarly, this section defines a <a href="#Container_Form_Controls" title="">container form control</a> called <code>repeat</code> that can bind to data structures such as lists and collections and provide a user interface for each item of the list or collection. The elements and attributes included in this module are:
</p>
<table border="1" summary="listing of XForms Repeat elements, attributes, and content models">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Attributes and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Minimal Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-repeat" title="">repeat</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-nodeset" title="">Sequence Binding</a>, indexref (node Expression), startindex (xsd:positiveInteger), number (xsd:nonNegativeInteger)
</p>
</td><td colspan="1" rowspan="1">
<p>((<a href="#elems-form-controls" title=""> Core Form Controls</a>)|group|switch|repeat|<a href="#action-content-set" title="">Action</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-setindex" title="">setindex</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, repeat (xsd:IDREF), index (number Expression)
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-selection-commonelems-itemset" title="">itemset</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-nodeset" title="">Sequence Binding</a>
</p>
</td><td colspan="1" rowspan="1">
<p>label, (value|copy), (<a href="#elems-ui-common" title="">UI Common</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#ui-selection-commonelems-copy" title="">copy</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1"> Various (global attributes)
</td><td colspan="1" rowspan="1"> [xforms:repeat-ref, xforms:repeat-nodeset (deprecated), xforms:repeat-bind, xforms:repeat-model] (Sequence Binding attributes), xforms:repeat-indexref (node Expression), xforms:repeat-startindex (xsd:positiveInteger), xforms:repeat-number (xsd:nonNegativeInteger)
</td><td colspan="1" rowspan="1"> N/A
</td></tr></tbody></table>
<div class="div3">
<a id="The_repeat_Element" name="The_repeat_Element"></a><h4> <span class="mw-headline">9.3.1 <span id="ui-repeat">The repeat Element</span></span></h4>
<p>This element defines a UI mapping over a sequence selected by Sequence Binding Attributes. This sequence is called a <span id="defn-repeat-collection"><b>repeat collection</b></span>. The markup contained within the body of element <code>repeat</code> specifies the <span id="defn-repeat-template"><b>template</b></span> of the user interface to be generated for each item of the repeat collection. For each item of the repeat collection, a <span id="def-repeat-item"><b>repeat item</b></span> is defined to be the aggregation of the item, its position, the size of the repeat collection, and a <a href="#def-repeat-object" title="">repeat object</a>.  A <span id="def-repeat-object"><b>repeat object</b></span> is an implicitly generated <code>group</code> element that contains the set of run-time objects generated to represent the repeat template content for a single repeat item of the repeat collection. These run-time objects are form controls, XForms actions and other host language elements that correspond to markup content in the repeat template. If an item of the repeat collection is non-relevant, then the rendering approach used to signify non-relevance is applied to the user interface controls of the associated repeat object. 
</p><p>The XForms processor associates with each repeat collection an integer value, called a <span id="defn-repeat-index"><b>repeat index</b></span>, that is between 0 and the size of the repeat collection to indicate a repeat object that may be the focus of certain XForms processor operations.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#attrs-ui-common" title="">UI Common</a>, <a href="#structure-attrs-nodeset" title="">Sequence Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> indexref
</dt><dd> Author-optional XPath expression indicating an instance node with which the repeat index is synchronized. 
</dd><dt> startindex
</dt><dd> Author-optional 1-based initial value of the repeat index. The default value is 1. This attribute is ignored if the <code>indexref</code> is specified.
</dd><dt> number
</dt><dd> Author-optional hint to the XForms Processor as to how many elements from the collection to display.
</dd></dl>
<p>Example: 
</p>
<div class="exampleOuter"><div class="exampleHead">Shopping Cart</div><div class="exampleInner">
<pre>&lt;repeat ref="/cart/products/product"&gt;
  &lt;input ref="." ...&gt;
     &lt;label&gt;...&lt;/label&gt;
  &lt;/input&gt;
  &lt;html:br/&gt;
&lt;/repeat&gt;
</pre>
</div></div>
<p>The <code>repeat</code> element operates over a repeat collection by creating repeat objects and binding them to the items of the collection. Another way to conceptually grasp repeat processing (disregarding special user interface interactions) is to consider "unrolling" the repeat. The above example is similar to the following (given four <code>product</code> elements in the returned sequence):
</p>
<div class="exampleOuter"><div class="exampleHead">Repeat Unrolled</div><div class="exampleInner">
<pre>  &lt;input ref="/cart/products/product[1]"&gt;&lt;label&gt;...&lt;/label&gt;&lt;/input&gt;&lt;html:br/&gt;
  &lt;input ref="/cart/products/product[2]"&gt;&lt;label&gt;...&lt;/label&gt;&lt;/input&gt;&lt;html:br/&gt;
  &lt;input ref="/cart/products/product[3]"&gt;&lt;label&gt;...&lt;/label&gt;&lt;/input&gt;&lt;html:br/&gt;
  &lt;input ref="/cart/products/product[4]"&gt;&lt;label&gt;...&lt;/label&gt;&lt;/input&gt;&lt;html:br/&gt;
</pre>
</div></div>
<p>The repeat collection can be an arbitrary sequence of items. The items in the repeat collection can be either nodes, atomic values or a mix of them. The nodes in the repeat collection don't have to be in document order, and the same node can occur multiple times in the repeat collection. 
</p>
<div class="exampleOuter"><div class="exampleHead">Repeat over atomic values</div><div class="exampleInner">
<pre>&lt;repeat ref="1 to 10"&gt;
  &lt;output value="." ...&gt;
     &lt;label&gt;...&lt;/label&gt;
  &lt;/input&gt;
  &lt;html:br/&gt;
&lt;/repeat&gt;
</pre>
</div></div>
<p><br />
The capture and bubble phases of events dispatched to the run-time objects behave as if the repeat object were a child of element <code>repeat</code>. The repeat template content, including action handlers, is made unavailable to the host language processor. Copies of the repeat template content, including Action handlers, are made available via the repeat objects.  Thus, to handle an event targeted at a <code>repeat</code> element, it is necessary to place the action handler outside of the repeat template, as in this example:
</p>
<div class="exampleOuter">
<div class="exampleHead">Handling an Event Dispatched to a <code>repeat</code> Element</div><div class="exampleInner">
<pre>&lt;repeat id="X" ... &gt;
        ...
&lt;/repeat&gt;

&lt;action ev:event="xforms-scroll-first" ev:target="X" ev:observer="X"&gt;
   ...
&lt;/action&gt;
</pre>
</div></div>
<p>XForms Actions <code>insert</code> and <code>delete</code> (see <a href="#XForms_Actions" title="">XForms Actions</a>) can be used to directly operate on a repeat collection sequence, and the XPath function  <code>index</code> can be used to help focus the behavior of the actions at a point of interest to the user. For example:
</p>
<div class="exampleOuter"><div class="exampleHead">Repeat Collection</div><div class="exampleInner">
<pre>&lt;model&gt;
  &lt;instance&gt;
    &lt;my:lines&gt;
      &lt;my:line name="a"&gt;
        &lt;my:price&gt;3.00&lt;/my:price&gt;
      &lt;/my:line&gt;
      &lt;my:line name="b"&gt;
        &lt;my:price&gt;32.25&lt;/my:price&gt;
      &lt;/my:line&gt;
      &lt;my:line name="c"&gt;
        &lt;my:price&gt;132.99&lt;/my:price&gt;
      &lt;/my:line&gt;
    &lt;/my:lines&gt;
  &lt;/instance&gt;
&lt;/model&gt;
  ...
&lt;repeat id="lineset" ref="my:line"&gt;
  &lt;input ref="my:price"&gt;
    &lt;label&gt;Line Item&lt;/label&gt;
  &lt;/input&gt;
  &lt;input ref="@name"&gt;
    &lt;label&gt;Name&lt;/label&gt;
  &lt;/input&gt;
&lt;/repeat&gt;

&lt;trigger&gt;
  &lt;label&gt;Insert a new Line Item after the current one&lt;/label&gt;
  &lt;action ev:event="DOMActivate"&gt;
    &lt;insert ref="my:line" at="index('lineset')" position="after"/&gt;
    &lt;setvalue ref="my:line[index('lineset')]/@name"/&gt;
    &lt;setvalue ref="my:line[index('lineset')]/price"&gt;0.00&lt;/setvalue&gt;
  &lt;/action&gt;
&lt;/trigger&gt;

&lt;trigger&gt;
  &lt;label&gt;remove current item&lt;/label&gt;
  &lt;delete ev:event="DOMActivate" ref="my:line" at="index('lineset')"/&gt;
&lt;/trigger&gt;
</pre>
</div></div></div><div class="div3">
<p>If the <code>indexref</code> attribute is specified, then it takes precedence over the <code>startindex</code> attribute, whether or not the <code>indexref</code> expression indicates an existing instance node and whether or not the instance node contains an integer value between 0 and the size of the repeat collection.  The <code>indexref</code> attribute is evaluated relative to the in-scope evaluation context of the <code>repeat</code> element. The result is interpreted as a node-sequence, and the first node is obtained, if any.  It is an <code>xforms-binding-exception</code> if the first node obtained has a child element. A numeric result is calculated. If the <code>indexref</code> evaluation does not produce a first node, then the numeric result is <code>NaN</code>. Otherwise, the content of the first node is converted to a number (possibly <code>NaN</code>).  If the numeric result is <code>NaN</code>, then the <code>indexref</code> value is 0 if the repeat collection is empty and 1 otherwise.  If the numeric result is not <code>NaN</code>, then the numeric result is rounded to the nearest integer, and the <code>indexref</code> value is the closest integer to the numeric result that is in the range 0 to the size of the repeat collection.  
</p><p>The result of the <code>indexref</code> expression is kept up to date in a manner consistent with user interface bindings.  It is an <code>xforms-binding-exception</code> if the expression changes to indicating a node-sequence whose first node has a child element. The <code>indexref</code> value can change due to a change of the value of the node indicated by the <code>indexref</code> expression, or by the expression binding changing, either from one node to another, from not indicating a node to indicating a node, or from indicating a node to not indicating a node.  If the <code>indexref</code> value changes, then the repeat index associated with the repeat collection is changed. 
</p><p>Whether during initialization or in response to a change of the <code>indexref</code> value, the new setting for the repeat index may not be equal to the data value in the node indicated by <code>indexref</code>.  This can occur if the data value was rounded or if it was coerced to be in the range 0 to the size of the repeat collection.  In this circumstance, if the <code>indexref</code> expression indicates a node, the value of the node is not changed.
</p><p>If the <code>indexref</code> attribute is not specified, then the repeat index is initialized to the closest integer to the value in the <code>startindex</code> attribute, or its default, that is in the range 0 to the size of the repeat collection, and changes to the repeat index can only be made by the <a href="#action-setindex" title="">setindex</a> action.  
</p><p>If the <code>indexref</code> attribute is specified, then changes to the repeat index can be made by changes to the <code>indexref</code> value as described above, such as by the <a href="#action-setvalue" title="">setvalue</a> action.  Changes to the repeat index can also be performed directly by the <a href="#action-setindex" title="">setindex</a> action, but these are performed by performing a <a href="#action-setvalue" title="">setvalue</a> action if the <code>indexref</code> attribute is specified and indicates a node.  If the node is readonly, then no value change occurs and therefore no change of repeat index occurs.
</p><p>Regardless of how the repeat index value is changed, if the new value was greater than the size of the non-empty repeat collection, then the event <code>xforms-scroll-last</code> is dispatched to the repeating element to indicate that the repeat index value was coerced to the size of the repeat collection.  Similarly, if the new value was increased to 1, then <code>xforms-scroll-first</code> is dispatched to the <code>repeat</code> element.
</p>
<a id="Nested_Repeats" name="Nested_Repeats"></a><h4> <span class="mw-headline">9.3.2 <span id="ui-nested-repeats">Nested Repeats</span></span></h4>
<p>The form controls appearing inside <code>repeat</code> need to be suitable for populating individual items of the collection. A simple but powerful consequence of the above is that if the XForms Model specifies nested collections, then a corresponding user interface can nest <code>repeat</code> elements.
</p><p>It is possible to nest repeat elements to create more powerful user interface for editing structured data. <a href="#Editing_Hierarchical_Bookmarks_Using_XForms" title="">Editing Hierarchical Bookmarks Using XForms</a> is an example of a form using nested repeats to edit hierarchical data consisting of bookmarks within multiple sections. Consider the following <code>insert</code> statement that appears as part of that example.
</p>
<div class="exampleOuter"><div class="exampleHead">Repeat Index and Nested Repeats</div><div class="exampleInner">
<pre>&lt;insert ref="section[index('repeatSections')]/bookmark"
        at="index('repeatBookmarks')"
        position="after"/&gt;
</pre>
</div></div>
<p>The above <code>insert</code> statement is used in that example to add new bookmark entries into the <i>currently selected</i> section. The inner (nested) repeat operates on bookmarks in this selected section; The index &mdash; as returned by XForms function <code>index</code> &mdash; for this inner repeat starts at <code>1</code>. Hence, after a new empty section of bookmarks is created and becomes <i>current</i>, the first <i>insert bookmark</i> operation adds the newly created bookmark at the front of the list.
</p>
</div><div class="div3">
<a id="Repeat_Processing" name="Repeat_Processing"></a><h4> <span class="mw-headline">9.3.3 <span id="ui-repeat-processing">Repeat Processing</span></span></h4>
<p>During user interface initialization (see <a href="#The_xforms-model-construct-done_Event" title="">The xforms-model-construct-done Event</a>), the following steps are performed for <code>repeat</code>:
</p>
<ol><li> The Sequence Binding is evaluated to locate the <a href="#defn-repeat-collection" title="">repeat collection</a> to be operated on by this <code>repeat</code>.
</li><li> The repeat index is initialized.
</li><li> Repeat items are generated with repeat objects each having a user interface as specified by the repeat template for the requisite number of members of the repeat collection as specified by attributes on element <code>repeat</code>.
</li></ol>
<p>A new repeat item is created dynamically at any time in the lifecycle of the form (i.e. any time after <code>xforms-model-construct-done</code>) whenever a new item is added to the <a href="#defn-repeat-collection" title="">repeat collection</a>. There are many ways to add new items to a <a href="#defn-repeat-collection" title="">repeat collection</a>, including but not limited to the following:
</p>
<ul><li> An <code>insert</code> action can add one or more nodes that match the repeat sequence;
</li><li> The new instance data subtree created by a <code>submission</code> instance replacement may contain nodes that match the repeat sequence;
</li><li> A <code>setvalue</code> action or a <code>calculate</code> may change a value that causes one or more items to match the repeat sequence.
</li></ul>
<p>Any time a new repeat item is created, XML Event handlers declared within the corresponding repeat object are initialized, and the user interface form controls generated for the repeat object are initialized in the same manner as the user interface initialization that is performed during default processing of <code>xforms-model-construct-done</code>. For example, if the repeat object contains an inner <code>repeat</code> run-time object, then it is initialized according to the list of steps at the beginning of this section (<a href="#Repeat_Processing" title="">Repeat Processing</a>).
</p><p>If one or more items have been added to the repeat collection by for example an <code>insert</code> action, then the repeat items corresponding to the new items must be created and initialized, and the repeat index must be updated to indicate the repeat item corresponding to the last item added by the <code>insert</code>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The change of index on a <code>repeat</code> does not cause the index of any <code>repeat</code> nested within it to be re-initialized.
</p>
</div>
<p>The repeat item generation and repeat index update on insertion must behave as if it occurs in response to the <code>xforms-insert</code> event dispatched by the <code>insert</code> action. The index update must behave as if it occurs when the <code>xforms-insert</code> event reaches the parent of the target <code>instance</code> element in the capture phase.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>An event handler that listens for <code>xforms-insert</code> on <code>instance</code> in the default phase has access to the updated index value via function <code>index()</code>.
</p>
</div>
<p>A repeat item can also be destroyed dynamically at any time in the lifecycle of the form whenever an item is removed from the <a href="#defn-repeat-collection" title="">repeat collection</a>. When a repeat item is destroyed, the repeat object and all of its inner form controls are eliminated, including inner repeats, switches and groups, and all XML Event handlers created by the repeat object are eliminated. There are many ways to remove repeat items from a <a href="#defn-repeat-collection" title="">repeat collection</a>, including but not limited to the following:
</p>
<ul><li> A <code>delete</code> action can remove items that matched the repeat sequence;
</li><li> The new instance data subtree created by a <code>submission</code> instance replacement may replace items that matched the repeat sequence;
</li><li> A <code>setvalue</code> action or a <code>calculate</code> may change a value that causes one or more items to stop matching the repeat sequence.
</li></ul>
<p>If one or more items have been removed from the repeat collection by a <code>delete</code> action, then the repeat items corresponding to the deleted items must be destroyed and the repeat index must be updated based on the rules below.
</p>
<ol><li> If, prior to item deletion, the repeat index indicated a repeat item that is still contained in the repeat collection after item deletion, then the index is adjusted, if necessary, to indicate that same repeat item.
</li><li> Otherwise, if all repeat items in the collection have been destroyed, the repeat index is set to 0.
</li><li> Otherwise, if the repeat index was pointing to one of the deleted repeat items, and if the new size of the collection is smaller than the index, the index is changed to the new size of the collection.
</li><li> Otherwise, if the repeat index was pointing to one of the deleted repeat items, and if the new size of the collection is equal to or greater than the index, the index is not changed.
</li></ol>
<div class="note">
<p><b>Note:</b>
</p><p>The change of index on a <code>repeat</code> does not cause the index of any <code>repeat</code> nested within it to be re-initialized.
</p>
</div>
<p>The repeat index update on deletion behaves as if it occurs in response to the <code>xforms-delete</code> event dispatched by the <code>delete</code> action. Specifically, the index update behaves as if it occurs when the <code>xforms-delete</code> event reaches the parent of the target <code>instance</code> element in the capture phase.
</p>
</div><div class="div3">
<a id="User_Interface_Interaction" name="User_Interface_Interaction"></a><h4> <span class="mw-headline">9.3.4 <span id="ui-repeat-ui">User Interface Interaction</span></span></h4>
<p>Element <code>repeat</code> enables the binding of user interaction to a sequence, referred to as <a href="#defn-repeat-collection" title="">repeat collection</a>. The number of displayed items might be less than the total number available in the collection. In this case, the presentation would render only a portion of the repeat objects at a given time. For example, a graphical user interface might present a scrolling table. The current item indicated by the repeat index should be made available to the user at all times, for example, not allowed to scroll out of view. The XForms Actions enumerated at <a href="#XForms_Actions" title="">XForms Actions</a> may be used within event listeners to manipulate the <a href="#defn-repeat-collection" title="">repeat collection</a> being populated by scrolling, inserting, and deleting entries.
</p><p>Notice that the markup encapsulated by element <code>repeat</code> acts as the template for the user interface that is presented to the user. As a consequence, statically authored <code>IDREF</code> attributes must be interpreted based on a combination of repeat indexes and where the IDREF attributes appear relative to the element bearing the matching ID. Based on the IDREF resolution rules given in <a href="#Resolving_ID_References_in_XForms" title="">Resolving ID References in XForms</a>, it is possible to toggle the <code>case</code> of a <code>switch</code> even when it is within one or more <code>repeat</code> elements. Similarly, it is possible to set the focus to controls and dispatch events to elements that are within one or more <code>repeat</code> elements.
</p><p>If the focus is transferred to a form control within a <code>repeat</code> by any means, such as by an XForms action or by user interaction, the index of the <code>repeat</code> is updated to indicate the item of the <a href="#defn-repeat-collection" title="">repeat collection</a> that contains the control. If the repeat item containing the focused control contains any inner repeat objects, their indexes are not changed. However, the repeat index update is recursive for all outer repeats that contain the focused control; the index of each outer containing <code>repeat</code> is adjusted appropriately. These changes of repeat index occurs as if by invoking the <code>setindex</code> action.
</p>
</div><div class="div3">
<a id="Creating_Repeating_Structures_Via_Attributes" name="Creating_Repeating_Structures_Via_Attributes"></a><h4> <span class="mw-headline">9.3.5 <span id="ui.repeat.via.attrs">Creating Repeating Structures Via Attributes</span></span></h4>
<p>Element <code>repeat</code> enables the creation of user interfaces for populating repeating structures. When using XForms within host languages like XHTML, it is often necessary to create repeating structures within constructs such as <code>table</code>. Thus, one might wish to use element <code>repeat</code> within a <code>table</code> to create the rows of a table, where each row of the table binds to a distinct member of a <a href="#defn-repeat-collection" title="">repeat collection</a>. Since <code>html:table</code> doesn't (and perhaps never will) allow <code>xforms:repeat</code> elements as children, another syntax is needed.
</p>
<div class="exampleOuter"><div class="exampleHead">Tables And Repeating Structures</div><div class="exampleInner">
<pre> &lt;table&gt;
   &lt;repeat ref="..."&gt;
     &lt;tr&gt;
       &lt;td&gt;...&lt;/td&gt;
       ...
     &lt;/tr&gt;
   &lt;/repeat&gt;
 &lt;/table&gt;
</pre>
</div></div>
<p>More generally, there is a need to integrate repeat behavior into host languages at points where the content model of the host language does not or cannot provide the appropriate extension hooks via modularization. To accommodate this, XForms defines an alternative syntax that is functionally equivalent to the <code>repeat</code> element, using the following global attributes:
</p>
<blockquote>

<code>xforms:repeat-model</code><br />
<code>xforms:repeat-bind</code><br />
<code>xforms:repeat-ref</code><br />
<code>xforms:repeat-nodeset</code> (deprecated)<br />
<code>xforms:repeat-startindex</code><br />
<code>xforms:repeat-number</code><br />
<code>xforms:repeat-indexref</code>

</blockquote>
<p>The above attributes are equivalent to the local <code>repeat</code> attributes of the same name, except for the namespace qualifications and the prefix <code>repeat-</code>. A host language can include these attributes in the appropriate places to enable repeating constructs. For example, a version of XHTML might use:
</p>
<div class="exampleOuter"><div class="exampleHead">HTML Tables And Repeating Structures</div><div class="exampleInner">
<pre> &lt;table xforms:repeat-ref="..."&gt;
   &lt;tr&gt;
     &lt;td&gt;&lt;xforms:output ref="..."/&gt;&lt;/td&gt;
   &lt;/tr&gt;
 &lt;/table&gt;
</pre>
</div>
<p>This example could be validated against an appropriately configured XHTML Schema that includes the XForms Repeat module. Note that what gets repeated is the child and descendant content of the element with the global <code>repeat-</code> attributes, i.e. the <code>tr</code> is repeated, not the <code>table</code>.  Also note that if the table must contain a <code>thead</code>, then the <code>repeat-</code> attributes could instead be attached to a <code>tbody</code> to repeat its contained <code>tr</code>.
</p>
</div>
<p>Additionally, when using XForms Action <code>setindex</code>, attribute <code>repeat</code> of type <code>idref</code> can point to any element carrying these global repeat attributes. Similarly, when using function <code>index</code> against a repeating structure created via the <code>repeat-</code> attributes, the <code>id</code> of that element can be used as the argument to function <code>index</code>.
</p>
</div><div class="div3">
<a id="The_itemset_Element" name="The_itemset_Element"></a><h4> <span class="mw-headline">9.3.6 <span id="ui-selection-commonelems-itemset">The itemset Element</span></span></h4>
<p>This element allows the creation of dynamic selections within controls <code>select</code> and <code>select1</code>, where the available choices are determined at run-time. The sequence that holds the available choices is specified via the Sequence Binding. Child elements <code>label</code> and <code>value</code> indirectly specify the label and storage values. Notice that the run-time effect of <code>itemset</code> is the same as using element <code>choices</code> with child <code>item</code> elements to statically author the available choices.
</p><p>For each item of the Sequence Binding, an associated <code>item</code> element is created. XForms Actions appearing in the content of an <code>itemset</code> are created within each <code>item</code> element, and the in-scope evaluation context for these XForms Actions is based on the data item for which the <code>item</code> was generated as described in Section <a href="#Evaluation_Context" title="">Evaluation Context</a>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>As with the <code>repeat</code> element, the <code>itemset</code> template content, including XForms Actions, is made unavailable. Copies of the <code>itemset</code> template content, including XForms Actions, are made available via repeated <code>item</code> objects.
</p>
</div>
<p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-nodeset" title="">Sequence Binding</a>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Whenever a <code>refresh</code> event is dispatched the <code>ref</code> is re-evaluated to update the list of available choices.
</p>
</div>
<p>The following example shows element <code>itemset</code> within control <code>select</code> to specify a dynamic list of ice cream flavors:
</p>
<div class="exampleOuter"><div class="exampleHead">Dynamic Choice Of Ice Cream Flavors</div><div class="exampleInner">
<pre>&lt;model id="cone"&gt;
  &lt;instance&gt;
    &lt;my:icecream&gt;
      &lt;my:order/&gt;
    &lt;/my:icecream&gt;
  &lt;/instance&gt;
&lt;/model&gt;
&lt;model id="flavors"&gt;
  &lt;instance&gt;
    &lt;my:flavors&gt;
      &lt;my:flavor type="v"&gt;
        &lt;my:description&gt;Vanilla&lt;/my:description&gt;
      &lt;/my:flavor&gt;
      &lt;my:flavor type="s"&gt;
        &lt;my:description&gt;Strawberry&lt;/my:description&gt;
      &lt;/my:flavor&gt;
      &lt;my:flavor type="c"&gt;
        &lt;my:description&gt;Chocolate&lt;/my:description&gt;
      &lt;/my:flavor&gt;
    &lt;/my:flavors&gt;
  &lt;/instance&gt;
&lt;/model&gt;
&lt;select model="cone" ref="my:order"&gt;
  &lt;label&gt;Flavors&lt;/label&gt;
  &lt;itemset model="flavors" ref="my:flavor"&gt;
    &lt;label ref="my:description"/&gt;
    &lt;copy ref="my:description"/&gt;
  &lt;/itemset&gt;
&lt;/select&gt;

</pre>
</div></div></div><div class="div3">
<a id="The_copy_Element" name="The_copy_Element"></a><h4> <span class="mw-headline">9.3.7 <span id="ui-selection-commonelems-copy">The copy Element</span></span></h4>
<p>Structurally, this element is similar to <a href="#The_value_Element" title="">The value Element</a>. It differs in that it can only be used within <code>itemset</code>, and that it works with subtrees of instance data rather than simple values.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>If the Single Item Binding attributes indicate a node in a model other than the bound item of the containing selection control, then an <code>xforms-binding-exception</code> must occur. When a <code>copy</code> node is selected, the following rules apply:
</p>
<ul><li> The target node, selected by the binding attributes on the list form control, must be an element node, otherwise an exception results (<a href="#The_xforms-binding-exception_Event" title="">The xforms-binding-exception Event</a>).
</li><li> The element node associated with the <code>item</code>, selected by the binding attributes on <code>copy</code>, is deep copied as a child of the target node by using an <code>insert</code> action (<a href="#The_insert_Element" title="">The insert Element</a>).
</li><li> A full computational dependency rebuild is done, followed by recalculate, revalidate, and refresh.
</li></ul>
<p>When a <code>copy</code> item is deselected, the following rules apply:
</p>
<ul><li> The target node, selected by the binding attributes on the list form control, must be an element node, otherwise an exception results (<a href="#The_xforms-binding-exception_Event" title="">The xforms-binding-exception Event</a>).
</li><li> The child element node associated with the <code>item</code>, selected by the binding attributes on <code>copy</code>, is deleted by using a <code>delete</code> action (<a href="#The_delete_Element" title="">The delete Element</a>).
</li><li> A full computational dependency rebuild, followed by recalculate, revalidate, and refresh.
</li></ul>
<div class="note">
<p><b>Note:</b>
</p><p>If the target node of the <code>select</code> or <code>select1</code> is readonly, then the insertion or deletion associated with the copy operation is not performed.
</p>
</div></div></div></div>
<a id="Processing_Model" name="Processing_Model"></a><h2> <span class="mw-headline">10 <span id="rpm">Processing Model</span></span></h2>
<p>This chapter defines the XForms Processing Model declaratively by enumerating the various states attained by an XForms Processor and the possible state transitions that exist in each of these states. The chapter enumerates the pre-conditions and post-conditions that must be satisfied in each of these states. XForms Processors may be implemented in any manner, so long as the end results are identical to that described in this chapter.
</p><p>State transitions are in general initiated by sending events to parts of the XForms tree. The XForms Processing Model consists of events in the following categories:
</p>
<ul><li> Initialization
</li><li> Interaction
</li><li> Notification
</li><li> Error Conditions
</li></ul>
<div class="div2">
<a id="Events_Overview" name="Events_Overview"></a><h3> <span class="mw-headline">10.1 <span id="rpm-events">Events Overview</span></span></h3>
<p>XForms processing is defined in terms of events, event handlers, and event responses. XForms uses the events system defined in [<a href="#ref-dom2-events" title="">DOM2 Events</a>][<a href="#ref-xml-events" title="">XML Events</a>], with an event capture phase, arrival of the event at its Target, and finally the event bubbling phase.
</p>
<table border="1" frame="box" summary="list of all events, with cancelable, bubbleable, and target node info">
<tbody><tr>
<th colspan="1" rowspan="1"> Event name
</th><th colspan="1" rowspan="1"> Cancelable?
</th><th colspan="1" rowspan="1"> Bubbles?
</th><th colspan="1" rowspan="1"> Target element
</th></tr>
<tr>
<td colspan="4" rowspan="1">
<p><a href="#Initialization_Events" title="">Initialization Events</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-model-construct
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-model-construct-done
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-ready
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-model-destruct
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="4" rowspan="1">
<p><a href="#Interaction_Events" title="">Interaction Events</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-rebuild
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-recalculate
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-revalidate
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-refresh
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-reset
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-previous
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-next
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-focus
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>|<code>repeat</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-help
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-hint
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-submit
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>submission</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-submit-serialize
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>submission</code>
</td></tr>
<tr>
<td colspan="4" rowspan="1">
<p><a href="#Notification_Events" title="">Notification Events</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-insert
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>instance</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-delete
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>instance</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-value-changed
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-valid
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-invalid
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-readonly
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-readwrite
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-required
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-optional
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-enabled
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-disabled
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> DOMActivate
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> DOMFocusIn
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>|<code>repeat</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> DOMFocusOut
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>|<code>repeat</code>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-select
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>item</code> or <code>case</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-deselect
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>item</code> or <code>case</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-in-range
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-out-of-range
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1">
<p><a href="#elems-form-controls" title=""> Core Form Controls</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-scroll-first
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>repeat</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-scroll-last
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>repeat</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-submit-done
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>submission</code>
</td></tr>
<tr>
<td colspan="4" rowspan="1">
<p><a href="#Error_Indications" title="">Error Indications</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-binding-exception
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> any element that can contain a binding expression
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-compute-exception
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-version-exception
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> The default <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-link-exception
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>model</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-output-error
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>output</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xforms-submit-error
</td><td colspan="1" rowspan="1"> No
</td><td colspan="1" rowspan="1"> Yes
</td><td colspan="1" rowspan="1"> <code>submission</code>
</td></tr></tbody></table>
</div><div class="div2">
<a id="Initialization_Events" name="Initialization_Events"></a><h3> <span class="mw-headline">10.2 <span id="rpm-init">Initialization Events</span></span></h3>
<p>This section defines the various stages of the <i>initialization</i> phase. The processor begins initialization by dispatching an event <code>xforms-model-construct</code> to each XForms Model in the containing document. How the XForms Processor itself is requested to initialize is implementation dependent.
</p>
<div class="div3">
<a id="The_xforms-model-construct_Event" name="The_xforms-model-construct_Event"></a><h4> <span class="mw-headline">10.2.1 <span id="evt-modelConstruct">The xforms-model-construct Event</span></span></h4>
<p>Dispatched to each XForms model by the XForms processor.
</p><p>Target: <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following:
</p>
<ol><li> All XML Schemas are loaded. If an error occurs while attempting to access or process a remote document, processing halts with an exception (<a href="#The_xforms-link-exception_Event" title="">The xforms-link-exception Event</a>).
</li><li> For each <code>instance</code> element, an XPath data model is constructed from it as described in Section <a href="#The_instance_Element" title="">The instance Element</a>. If there are no <code>instance</code> elements, the data model is not constructed in this phase, but during user interface construction (<a href="#The_xforms-model-construct-done_Event" title="">The xforms-model-construct-done Event</a>).
</li><li> If applicable, P3P initialization occurs. [<a href="#ref-p3p-1.0" title="">P3P 1.0</a>]
</li><li> Perform the behaviors of <code>xforms-rebuild</code>, <code>xforms-recalculate</code>, and <code>xforms-revalidate</code> in sequence on this <code>model</code> element without dispatching events to invoke the behaviors. The notification event markings for these operations are discarded, and the <code>xforms-refresh</code> behavior is not performed since the user interface has not yet been initialized.
</li></ol>
<p>After all XForms Models have been initialized, an <code>xforms-model-construct-done</code> event is dispatched to each <code>model</code> element.
</p>
</div><div class="div3">
<a id="The_xforms-model-construct-done_Event" name="The_xforms-model-construct-done_Event"></a><h4> <span class="mw-headline">10.2.2 <span id="evt-modelConstructDone">The xforms-model-construct-done Event</span></span></h4>
<p>Dispatched after the completion of <code>xforms-model-construct</code> processing.
</p><p>Target: <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event happens once, no matter how many XForms Models are present in the containing document, and results in the following, for each <a href="#def-form-control" title="">form control</a>:
</p><p>Processing can proceed in one of two different ways depending on whether an <code>instance</code> in a <code>model</code> exists when the first form control is processed.
</p><p>If the <code>instance</code> referenced on the form control existed when the first form control was processed:
</p>
<ol><li> The Single Item Binding expression is evaluated, if it exists on the form control, to ensure that it points to an item. If this is not the case (result of the expression is the empty sequence) then the form control should behave in the same manner as if it had bound to a model item with the <code>relevant</code> model item property resolved to <code>false</code>.
</li><li> Otherwise, the user interface for the form control is created and initialized.
</li></ol>
<p>If the <code>instance</code> referenced on the form control did not exist when the first form control for the same <code>instance</code> was processed:
</p>
<ol><li> For the first reference to an <code>instance</code> a default <code>instance</code> is created by following the rules described below.
<ol><li> A root <code>instanceData</code> element is created.
</li><li> An instance data element node will be created using the binding expression from the user interface control as the <code>name</code>. If the <code>name</code> is not a valid QName, processing halts with an exception (<a href="#The_xforms-binding-exception_Event" title="">The xforms-binding-exception Event</a>).
</li></ol>
</li><li> For the second and subsequent references to an <code>instance</code> which was automatically created the following processing is performed:
<ol><li> If a matching instance data node is found, the user interface control will be connected to that element.
</li><li> If a matching instance data node is not found, an instance data node will be created using the binding expression from the user interface control as the <code>name</code>. If the <code>name</code> is not a valid QName, processing halts with an exception (<a href="#The_xforms-binding-exception_Event" title="">The xforms-binding-exception Event</a>).
</li></ol>
</li></ol>
<div class="note">
<p><b>Note:</b>
</p><p>No nodes are created when the first item of the result sequence is an atomic value. And the form control is read-only in this case.
</p>
</div>
<p>The above steps comprise the default processing of <code>xforms-model-construct-done</code>.
</p><p>After all form controls have been initialized and all <code>xforms-model-construct-done</code> events have been processed, an <code>xforms-ready</code> event is dispatched to each <code>model</code> element.
</p>
</div><div class="div3">
<a id="The_xforms-ready_Event" name="The_xforms-ready_Event"></a><h4> <span class="mw-headline">10.2.3 <span id="evt-ready">The xforms-ready Event</span></span></h4>
<p>Dispatched as part of <code>xforms-model-construct-done</code> processing.
</p><p>Target: <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p>
</div><div class="div3">
<a id="The_xforms-model-destruct_Event" name="The_xforms-model-destruct_Event"></a><h4> <span class="mw-headline">10.2.4 <span id="evt-modelDestruct">The xforms-model-destruct Event</span></span></h4>
<p>Dispatched by the processor to advise of imminent shutdown of the XForms Processor, which can occur from user action, or from the <code>load</code> XForms Action, or as a result of form submission.
</p><p>Target: <code>model</code>
</p><p>Bubbles: No
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p>
</div></div><div class="div2">
<a id="Interaction_Events" name="Interaction_Events"></a><h3> <span class="mw-headline">10.3 <span id="rpm-interaction">Interaction Events</span></span></h3>
<div class="div3">
<a id="The_xforms-rebuild_Event" name="The_xforms-rebuild_Event"></a><h4> <span class="mw-headline">10.3.1 <span id="evt-rebuild">The xforms-rebuild Event</span></span></h4>
<p>Dispatched in response to: a request to rebuild the internal data structures that track computational dependencies within a particular XForms Model.
</p><p>Target: <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>The default action for this event results in the following:
</p><p>All model item properties are initialized by processing all <code>bind</code> elements in document order. For each <code>bind</code>:
</p>
<ol><li> If the attribute <code>ref</code> is attached to the bind, it is evaluated to select a sequence of items. Otherwise, if the <code>bind</code> does not have a <code>ref</code> attribute, then the selected sequence of items consists of the in-scope evaluation context.
</li><li> For each item in the selected sequence of items, model item properties are applied according to the remaining attributes on the <code>bind</code> element (for details on the model item properties, see <a href="#Model_Item_Properties" title="">Model Item Properties</a>).
</li><li> For each item in the selected sequence of items, any child <code>bind</code> elements are recursively processed as described in the three points of this list.
</li></ol>
<p>After initial processing of the <code>bind</code> elements, the computational dependency data structures are rebuilt, and then the change list <i>L</i> is set to contain references to all instance nodes that have an associated computational expression so that a <i>full</i> recalculation is performed the next time the behavior of <code>xforms-recalculate</code> is invoked.
</p>
</div><div class="div3">
<a id="The_xforms-recalculate_Event" name="The_xforms-recalculate_Event"></a><h4> <span class="mw-headline">10.3.2 <span id="evt-recalculate">The xforms-recalculate Event</span></span></h4>
<p>Dispatched in response to: a request to recalculate all calculations associated with a particular XForms Model.
</p><p>Target: <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>The default action for this event results in the following:
</p><p>The values of all instance data items match their associated 'calculate' constraints, if any. All model item properties that can contain computed expressions are resolved. In addition to contributing further node value changes that will cause xforms-value-changed notifications in xforms-refresh, the model item properties that change are marked to help xforms-refresh to determine the notification events to dispatch.
</p>
<ul><li> If the required model item property changes, then either the xforms-required event must be marked for dispatch if required is true or the xforms-optional event must be marked for dispatch if required is false. Marking one of these events for dispatch unmarks the other.
</li><li> If the readonly model item property changes, then either the xforms-readonly event must be marked for dispatch if readonly is true or the xforms-readwrite event must be marked for dispatch if readonly is false. Marking one of these events for dispatch unmarks the other.
</li><li> If the relevant model item property changes, then either the xforms-enabled event must be marked for dispatch if relevant is true or the xforms-disabled event must be marked for dispatch if relevant is false. Marking one of these events for dispatch unmarks the other.
</li></ul>
<p>An expression is bound either to the value or to a model item property (e.g., <code>required</code>, <code>relevant</code>) of one or more instance nodes. The combination of an expression with a single instance node's value or model item property is considered as a single computational unit, a <b>compute</b>, for the purposes of recalculation.
</p><p>When it is time to recalculate a model item property, the expression is evaluated. The evaluation context is determined from the model binding expression that applied the model item property, as defined for computed expressions in <a href="#Evaluation_Context" title="">Evaluation Context</a>. The expression may <b>reference</b> or <b>refer to</b> another instance node, in which case the value of the instance node is <b>referenced</b>. Each referenced instance node has as <b>dependents</b> those computes which directly refer to the instance node. References to the current node's value in <code>calculate</code> expressions are explicitly ignored, i.e., if an expression associated with a compute refers to the instance node associated with the compute, then the instance node does not take itself as a dependent. A compute is <b>computationally dependent</b> on an instance node (whose value may or may not be computed) if there is a path of dependents leading from the instance node through zero or more other instance nodes to the compute. A compute is part of a <b>circular dependency</b> if it is computationally dependent on itself.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Referring to a node's value in a <code>calculate</code> on the node, as in the following example, may have effects that vary by implementation: <code>&lt;bind ref="x" calculate=".+1"/&gt;</code>. Model item properties other than <code>calculate</code>, such as <code>required</code> or <code>readonly</code> are well-defined in the presence of self-references.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>An example of a calculate formula that contains a self-reference (i.e. that refers to the node it calculates) appears in Section <a href="#The_readonly_Property" title="">The readonly Property</a>. The example enforces a default value for a node and, as mentioned above, does not create a circular dependency. An example of a circular dependency is <code>&lt;bind ref="A|B" calculate="../A + ../B"/&gt;</code>. In this example, node <code>A</code> depends in part on <code>B</code>, and node <code>B</code> depends in part on <code>A</code>.
</p>
</div>
<p>When a recalculation event begins, there will be a list <i>L</i> of one or more instance nodes whose values may have been changed, e.g., by user input being propagated to the instance or by a <code>setvalue</code> action.
</p>
<ol><li> An XForms Processor must recalculate computes for nodes in <i>L</i>, if any, and nodes that are computationally dependent on nodes in <i>L</i>.
</li><li> An XForms Processor must perform only a single recalculation of each compute that is computationally dependent on one or more of the elements in <i>L</i>.
</li><li> An XForms Processor must recalculate a compute <i>C</i> after recalculating all computes of instance nodes on which <i>C</i> is computationally dependent. (Equivalently, an XForms Processor must recalculate a compute <i>C</i> before recalculating any compute that is computationally dependent on the instance node associated with <i>C</i>.)
</li><li> Finally, if a compute is part of a circular dependency and also computationally dependent on an element in <i>L</i>, then an XForms processor must report an exception (<a href="#The_xforms-compute-exception_Event" title="">The xforms-compute-exception Event</a>).
</li></ol>
<p><a href="#Recalculation_Sequence_Algorithm" title="">Recalculation Sequence Algorithm</a> describes one possible method for achieving the required recalculation behavior.
</p>
</div><div class="div3">
<a id="The_xforms-revalidate_Event" name="The_xforms-revalidate_Event"></a><h4> <span class="mw-headline">10.3.3 <span id="evt-revalidate">The xforms-revalidate Event</span></span></h4>
<p>Dispatched in response to: a request to revalidate a particular XForms Model.
</p><p>Target: <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>An instance node is <a href="#def-valid" title="">valid</a> if and only if the following conditions hold:
</p>
<ul><li> the constraint model item property is true
</li><li> the value is non-empty if the required model item property is true
</li><li> the node satisfies all applicable XML schema definitions (including those associated by the type model item property, by an external or an inline schema, or by <code>xsi:type</code>)
</li></ul>
<div class="note">
<p><b>Note:</b>
</p><p><code>xsi:type</code> attributes on instance data elements are processed even in the absence of external or inline schema.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>The applicable XML schema definitions are determined as defined in Section <a href="#The_model_Element" title="">The model Element</a>.
</p>
</div>
<p>The default action for this event results in the following:
</p><p>All instance data nodes in all <code>instance</code> elements in the <code>model</code> are checked for validity according to the above definition. If the validity of a node changes, then either the xforms-valid event must be marked for dispatch if the node changes from invalid to valid or the xforms-invalid event must be marked for dispatch if the node changes from valid to invalid. Marking one of these events for dispatch unmarks the other.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Since the event sequence for <code>xforms-model-construct</code> excludes <code>xforms-refresh</code> and discards event notification marks, form controls bound to invalid nodes do not receive an initial <code>xforms-invalid</code> event.
</p>
</div></div><div class="div3">
<a id="The_xforms-refresh_Event" name="The_xforms-refresh_Event"></a><h4> <span class="mw-headline">10.3.4 <span id="evt-refresh">The xforms-refresh Event</span></span></h4>
<p>Dispatched in response to: a request to update all form controls associated with a particular XForms Model.
</p><p>Target: <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>The default action for this event results in the following:
</p>
<ol><li> All <a href="#UI_Expressions" title="">UI Expressions</a> are reevaluated (implementations may optimize this operation but must behave as if all UI Expressions are reevaluated).
</li><li> A node can be changed by a number of mechanisms in XForms, including confirmed user input to a form control, an <code>xforms-recalculate</code> (<a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a>), and the <code>setvalue</code> action (<a href="#The_setvalue_Element" title="">The setvalue Element</a>). If the value of an instance data node was changed, then the node must be marked for dispatching the xforms-value-changed event.
</li><li> If the xforms-value-changed event is marked for dispatching, then all of the appropriate model item property notification events must also be marked for dispatching (xforms-optional or xforms-required, xforms-readwrite or xforms-readonly, and xforms-enabled or xforms-disabled).
</li><li> The user interface reflects the state of the model, which means that all forms controls and related UI elements reflect their corresponding instance data, including:
<ul><li> current values (for the appropriate form controls and related UI elements)
</li><li> <a href="#def-valid" title="">validity</a>
</li><li> other model item properties (<code>required</code>, <code>readonly</code> and <code>relevant</code>).
</li><li> the proper number of and content for repeat objects.
</li></ul>
</li></ol>
<p>This process includes sending the notification events to the form controls. For each form control, each notification event for which the form control is a legitimate target and that is marked for dispatching on the bound node must be dispatched (xforms-value-changed, xforms-valid, xforms-invalid, xforms-optional, xforms-required, xforms-readwrite, xforms-readonly, and xforms-enabled, xforms-disabled). The notification events xforms-out-of-range or xforms-in-range must also be dispatched as appropriate. This specification does not specify an ordering for the events.
</p>
</div><div class="div3">
<a id="The_xforms-reset_Event" name="The_xforms-reset_Event"></a><h4> <span class="mw-headline">10.3.5 <span id="evt-reset">The xforms-reset Event</span></span></h4>
<p>Dispatched in response to: a user request to reset the model.
</p><p>Target: <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>The default action for this event results in the following:
</p><p>The instance data is reset to the tree structure and values it had immediately after having processed the <code>xforms-ready</code> event. Then, the events <code>xforms-rebuild</code>, <code>xforms-recalculate</code>, <code>xforms-revalidate</code> and <code>xforms-refresh</code> are dispatched to the <code>model</code> element in sequence.
</p>
</div><div class="div3">
<a id="The_xforms-next_and_xforms-previous_Events" name="The_xforms-next_and_xforms-previous_Events"></a><h4> <span class="mw-headline">10.3.6 <span id="evt-next">The xforms-next and xforms-previous Events</span></span></h4>
<p>Dispatched in response to: user request to navigate to the next or previous <a href="#elems-form-controls" title="">Core Form Control</a>.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>
</p><p>Bubbles: No
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>The default action for these events results in the following: Navigation according to the default navigation order. For example, on a keyboard interface, "tab" might generate an <code>xforms-next</code> event, while "shift+tab" might generate an <code>xforms-previous</code> event.
</p><p>Navigation is determined on a containing document-wide basis. The host language is responsible for defining overall navigation order. The following describes a possible technique based on a <code>navindex</code> attribute, using individual form controls as a navigation unit: The &lt;<code>group</code>&gt;, &lt;<code>repeat</code>&gt;, and &lt;<code>switch</code>&gt; structures serve as container navigation units that, instead of providing a single navigation point, create a local navigation context for child form controls (and possibly other substructures). The navigation sequence is determined as follows:
</p>
<ol><li> Form controls that have a <code>navindex</code> specified and assign a positive value to it are navigated first.
<ol><li> Outermost form controls are navigated in increasing order of the <code>navindex</code> value. Values need not be sequential nor must they begin with any particular value. Form controls that have identical <code>navindex</code> values are to be navigated in document order.
</li><li> Ancestor form controls (&lt;<code>group</code>&gt;, &lt;<code>repeat</code>&gt;, and &lt;<code>switch</code>&gt;) establish a local navigation sequence. All form controls within a local sequence are navigated, in increasing order of the <code>navindex</code> value, before any outside the local sequence are navigated. Form controls that have identical <code>navindex</code> values are navigated in document order.
</li></ol>
</li><li> Those form controls that do not specify <code>navindex</code> or supply a value of "0" are navigated next. These form controls are navigated in document order.
</li><li> Those form controls that are disabled, hidden, or not <code>relevant</code> are assigned a relative order in the overall sequence but do not participate as navigable controls.
</li><li> The navigation sequence past the last form control (or before the first) is undefined. XForms Processors may cycle back to the first/last control, remove focus from the form, or other possibilities.
</li></ol>
</div><div class="div3">
<a id="The_xforms-focus_Event" name="The_xforms-focus_Event"></a><h4> <span class="mw-headline">10.3.7 <span id="evt-focus">The xforms-focus Event</span></span></h4>
<p>Dispatched in response to: set focus to a form control.
</p><p>Target: <a href="#elems-form-controls" title="">Core Form Control</a>|<code>group</code>|<code>switch</code>|<code>repeat</code>
</p><p>Bubbles: No
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>The default action for these events results in the following:
</p><p>Focus is given to the target form control if the form control is able to accept focus. Changing the focus to a form control within a repeat object may cause one or more repeat index values to be changed as described in Section <a href="#User_Interface_Interaction" title="">User Interface Interaction</a>. Setting focus to a <code>repeat</code> container form control sets the focus to the <a href="#def-repeat-object" title="">repeat object</a> associated with the repeat index. Setting the focus to a <code>group</code> or <code>switch</code> container form control set the focus to the first form control in the container that is able to accept focus. Any form control is able to accept the focus if it is relevant.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This event is implicitly invoked to implement XForms accessibility features such as <code>accesskey</code> and when the user changes the focus.
</p>
</div></div><div class="div3">
<a id="The_xforms-help_and_xforms-hint_Events" name="The_xforms-help_and_xforms-hint_Events"></a><h4> <span class="mw-headline">10.3.8 <span id="evt-help">The xforms-help and xforms-hint Events</span></span></h4>
<p>Dispatched in response to: a user request for help or hint information.
</p><p>Target: <a href="#elems-form-controls" title="">Core Form Control</a>
</p><p>Bubbles: Yes
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>The default action for these events results in the following: If the form control has help/hint elements supplied, these are used to construct a message that is displayed to the user. Otherwise, user agents may provide default help or hint messages, but are not required to.
</p>
</div><div class="div3">
<a id="The_xforms-submit_Event_2" name="The_xforms-submit_Event_2"></a><h4> <span class="mw-headline">10.3.9 <span id="evt-submit">The xforms-submit Event</span></span></h4>
<p>See chapter <a href="#The_xforms-submit_Event" title="">The xforms-submit Event</a>.
</p>
</div><div class="div3">
<a id="The_xforms-submit-serialize_Event_2" name="The_xforms-submit-serialize_Event_2"></a><h4> <span class="mw-headline">10.3.10 <span id="evt-submit-serialize">The xforms-submit-serialize Event</span></span></h4>
<p>See chapter <a href="#The_xforms-submit-serialize_Event" title="">The xforms-submit-serialize Event</a>.
</p>
</div></div><div class="div2">
<a id="Notification_Events" name="Notification_Events"></a><h3> <span class="mw-headline">10.4 <span id="evt-notify">Notification Events</span></span></h3>
<div class="div3">
<a id="The_xforms-insert_Event" name="The_xforms-insert_Event"></a><h4> <span class="mw-headline">10.4.1 <span id="evt-insert">The xforms-insert Event</span></span></h4>
<p>Dispatched in response to: Successful insertion of one or more nodes by an XForms <code>insert</code> action.
</p><p>Target: <code>instance</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-insert event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> inserted-nodes
</td><td colspan="1" rowspan="1"> node-sequence
</td><td colspan="1" rowspan="1"> The instance data node or nodes inserted.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> origin-nodes
</td><td colspan="1" rowspan="1"> node-sequence
</td><td colspan="1" rowspan="1"> The instance data nodes referenced by the <code>insert</code> action's <code>origin</code> attribute if present, or the empty nodeset if not present.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> insert-location-node
</td><td colspan="1" rowspan="1"> node-sequence
</td><td colspan="1" rowspan="1"> The <code>insert location node</code> as defined by the <code>insert</code> action.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> position
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> The insert position, <code>before</code> or <code>after</code>.
</td></tr></tbody></table>
<p>Default Action: None; notification event only.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Notification events are those with no default processing defined. Although this event is dispatched by <code>insert</code> processing as a notification, <code>repeat</code> processing associates behavior with the capture phase of this event.
</p>
</div></div><div class="div3">
<a id="The_xforms-delete_Event" name="The_xforms-delete_Event"></a><h4> <span class="mw-headline">10.4.2 <span id="evt-delete">The xforms-delete Event</span></span></h4>
<p>Dispatched in response to: Successful deletion of one or more nodes by an XForms <code>delete</code> action.
</p><p>Target: <code>instance</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-delete event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> deleted-nodes
</td><td colspan="1" rowspan="1"> node-sequence
</td><td colspan="1" rowspan="1"> The instance data node or nodes deleted. Note that these nodes are no longer referenced by their parents.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> delete-location
</td><td colspan="1" rowspan="1"> number
</td><td colspan="1" rowspan="1"> The <code>delete location</code> as defined by the <code>delete</code> action, or NaN if there is no delete location.
</td></tr></tbody></table>
<p>Default Action: None; notification event only.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Notification events are those with no default processing defined. Although this event is dispatched by <code>delete</code> processing as a notification, <code>repeat</code> processing associates behavior with the capture phase of this event.
</p>
</div></div><div class="div3">
<a id="The_xforms-value-changed_Event" name="The_xforms-value-changed_Event"></a><h4> <span class="mw-headline">10.4.3 <span id="evt-valueChanged">The xforms-value-changed Event</span></span></h4>
<p>Dispatched in response to: a change to an instance data node bound to a core form control.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched during <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a> if the bound instance data node has been marked for dispatching this event due to a change.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>For incremental processing, this specification does not define how often XForms Processors fire these events. Implementations are expected to optimize processing (for instance not flashing the entire screen for each character entered, etc.).
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>The change to the instance data associated with this event happens before the event is dispatched.
</p>
</div></div><div class="div3">
<a id="The_xforms-valid_Event" name="The_xforms-valid_Event"></a><h4> <span class="mw-headline">10.4.4 <span id="evt-valid">The xforms-valid Event</span></span></h4>
<p>Dispatched in response to: an instance data node either changing and being or becoming <a href="#def-valid" title="">valid</a>.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched during <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a> if the bound instance data node has been marked for dispatching this event in <a href="#The_xforms-revalidate_Event" title="">The xforms-revalidate Event</a>.
</p>
</div><div class="div3">
<a id="The_xforms-invalid_Event" name="The_xforms-invalid_Event"></a><h4> <span class="mw-headline">10.4.5 <span id="evt-invalid">The xforms-invalid Event</span></span></h4>
<p>Dispatched in response to: an instance data node either changing and being or becoming invalid (not <a href="#def-valid" title="">valid</a>).
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched during <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a> if the bound instance data node has been marked for dispatching this event in <a href="#The_xforms-revalidate_Event" title="">The xforms-revalidate Event</a>.
</p>
</div><div class="div3">
<a id="The_xforms-readonly_Event" name="The_xforms-readonly_Event"></a><h4> <span class="mw-headline">10.4.6 <span id="evt-readonly">The xforms-readonly Event</span></span></h4>
<p>Dispatched in response to: an instance data node either changing and being or becoming readonly.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched during <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a> if the bound instance data node has been marked for dispatching this event in <a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a> or <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a>.
</p>
</div><div class="div3">
<a id="The_xforms-readwrite_Event" name="The_xforms-readwrite_Event"></a><h4> <span class="mw-headline">10.4.7 <span id="evt-readwrite">The xforms-readwrite Event</span></span></h4>
<p>Dispatched in response to: an instance data node either changing and being or becoming read-write.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched during <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a> if the bound instance data node has been marked for dispatching this event in <a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a> or <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a>.
</p>
</div><div class="div3">
<a id="The_xforms-required_Event" name="The_xforms-required_Event"></a><h4> <span class="mw-headline">10.4.8 <span id="evt-required">The xforms-required Event</span></span></h4>
<p>Dispatched in response to: an instance data node either changing and being or becoming required.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched during <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a> if the bound instance data node has been marked for dispatching this event in <a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a> or <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a>.
</p>
</div><div class="div3">
<a id="The_xforms-optional_Event" name="The_xforms-optional_Event"></a><h4> <span class="mw-headline">10.4.9 <span id="evt-optional">The xforms-optional Event</span></span></h4>
<p>Dispatched in response to: an instance data node either changing and being or becoming optional.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched during <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a> if the bound instance data node has been marked for dispatching this event in <a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a> or <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a>.
</p>
</div><div class="div3">
<a id="The_xforms-enabled_Event" name="The_xforms-enabled_Event"></a><h4> <span class="mw-headline">10.4.10 <span id="evt-enabled">The xforms-enabled Event</span></span></h4>
<p>Dispatched in response to: an instance data node either changing and being or becoming enabled.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched during <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a> if the bound instance data node has been marked for dispatching this event in <a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a> or <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a>.
</p>
</div><div class="div3">
<a id="The_xforms-disabled_Event" name="The_xforms-disabled_Event"></a><h4> <span class="mw-headline">10.4.11 <span id="evt-disabled">The xforms-disabled Event</span></span></h4>
<p>Dispatched in response to: an instance data node either changing and being or becoming disabled.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched during <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a> if the bound instance data node has been marked for dispatching this event in <a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a> or <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a>.
</p>
</div><div class="div3">
<a id="The_DOMActivate_Event" name="The_DOMActivate_Event"></a><h4> <span class="mw-headline">10.4.12 <span id="evt-activate">The DOMActivate Event</span></span></h4>
<p>Dispatched in response to: the "default action request" for a core form control, for instance pressing a button or hitting enter.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>
</p><p>Bubbles: Yes
</p><p>Cancelable: Yes
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p>
</div><div class="div3">
<a id="The_DOMFocusIn_Event" name="The_DOMFocusIn_Event"></a><h4> <span class="mw-headline">10.4.13 <span id="evt-DOMFocusIn">The DOMFocusIn Event</span></span></h4>
<p>Dispatched in response to: a form control receiving focus.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>|<code>repeat</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p>
</div><div class="div3">
<a id="The_DOMFocusOut_Event" name="The_DOMFocusOut_Event"></a><h4> <span class="mw-headline">10.4.14 <span id="evt-DOMFocusOut">The DOMFocusOut Event</span></span></h4>
<p>Dispatched in response to: a form control losing focus.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>|<code>group</code>|<code>switch</code>|<code>repeat</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p>
</div><div class="div3">
<a id="The_xforms-select_and_xforms-deselect_Events" name="The_xforms-select_and_xforms-deselect_Events"></a><h4> <span class="mw-headline">10.4.15 <span id="evt-select">The xforms-select and xforms-deselect Events</span></span></h4>
<p>Dispatched in response to: an <code>item</code> in a <code>select</code>, <code>select1</code>, or a <code>case</code> in a <code>switch</code> becoming selected or deselected.
</p><p>Target: <code>item</code> or <code>case</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p>
</div><div class="div3">
<a id="The_xforms-in-range_Event" name="The_xforms-in-range_Event"></a><h4> <span class="mw-headline">10.4.16 <span id="evt-in-range">The xforms-in-range Event</span></span></h4>
<p>Dispatched in response to: the value has changed such that the value can now be represented by the form control.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched whenever the value was not possible to represent given the constraints specified on a form control has changed such that the value can now be represented by the form control.
</p>
</div><div class="div3">
<a id="The_xforms-out-of-range_Event" name="The_xforms-out-of-range_Event"></a><h4> <span class="mw-headline">10.4.17 <span id="evt-out-of-range">The xforms-out-of-range Event</span></span></h4>
<p>Dispatched in response to: the value has changed such that the value can not be represented by the form control.
</p><p>Target: <a href="#elems-form-controls" title=""> Core Form Controls</a>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p><p>This event is dispatched whenever the value can not be represented given the constraints specified on a form control.
</p>
</div><div class="div3">
<a id="The_xforms-scroll-first_and_xforms-scroll-last_Events" name="The_xforms-scroll-first_and_xforms-scroll-last_Events"></a><h4> <span class="mw-headline">10.4.18 <span id="evt-scroll">The xforms-scroll-first and xforms-scroll-last Events</span></span></h4>
<p>Dispatched in response to: attempting to set a repeat index outside the range of a <code>repeat</code>.
</p><p>Target: <code>repeat</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>The default action for this event results in the following: None; notification event only.
</p>
</div><div class="div3">
<a id="The_xforms-submit-done_Event_2" name="The_xforms-submit-done_Event_2"></a><h4> <span class="mw-headline">10.4.19 <span id="evt-submit-done">The xforms-submit-done Event</span></span></h4>
<p>See chapter <a href="#The_xforms-submit-done_Event" title="">The xforms-submit-done Event</a>.
</p>
</div></div><div class="div2">
<a id="Error_Indications" name="Error_Indications"></a><h3> <span class="mw-headline">10.5 <span id="rpm-errors">Error Indications</span></span></h3>
<p>Error indications happen as a result of unusual conditions in the XForms Processor. Some of these are "fatal" errors, which halt processing, and bear the suffix "exception". Others are simply for notification, and bear the suffix "error". For all events in this section, it is permissible for the XForms Processor to perform some kind of default handling, for example logging error messages to a file.
</p>
<div class="div3">
<a id="The_xforms-binding-exception_Event" name="The_xforms-binding-exception_Event"></a><h4> <span class="mw-headline">10.5.1 <span id="evt-bindingException">The xforms-binding-exception Event</span></span></h4>
<p>Dispatched as an indication of: an illegal binding expression, or a <code>model</code> attribute that fails to point to the ID of a <code>model</code> element, or a <code>bind</code> attribute that fails to point to the ID of a <code>bind</code> element, or a <code>submission</code> attribute that fails to point to the ID of a <code>submission</code> element, or an <code>instance</code> attribute on the <code>submission</code> element that fails to point to an <code>instance</code> element in the same <code>model</code> element as the <code>submission</code>.
</p><p>Target: any element that can contain a binding expression
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None
</p><p>Default Action: Fatal error (halts processing).
</p>
</div><div class="div3">
<a id="The_xforms-compute-exception_Event" name="The_xforms-compute-exception_Event"></a><h4> <span class="mw-headline">10.5.2 <span id="evt-computeException">The xforms-compute-exception Event</span></span></h4>
<p>Dispatched as an indication of: an error occurring during evaluation for a model item property (see <a href="#Model_Item_Properties" title="">Model Item Properties</a>).
</p><p>Target: <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-compute-exception event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> error-message
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> An implementation-specific string that should contain the expression being processed when the exception was detected.
</td></tr></tbody></table>
<p>Default Action: Fatal error (halts processing).
</p>
</div><div class="div3">
<a id="The_xforms-version-exception_Event" name="The_xforms-version-exception_Event"></a><h4> <span class="mw-headline">10.5.3 <span id="evt-versionException">The xforms-version-exception Event</span></span></h4>
<p>Dispatched as an indication of failure of the version checks defined in the description of the <code>version</code> attribute in Section <a href="#The_model_Element" title="">The model Element</a>.
</p><p>Target: the default <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-version-exception event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> error-information
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> An implementation-specific error string
</td></tr></tbody></table>
<p>Default Action: Fatal error (halts processing).
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This exception occurs early in processing. XForms processors are not expected to product XForms user interface elements nor even execute XForms action handlers (such as a <code>message</code> action) in response to this event. This exception is dispatched for the benefit of implementation-specific processing code that may be monitoring the behavior of an XForms processor.
</p>
</div></div><div class="div3">
<a id="The_xforms-link-exception_Event" name="The_xforms-link-exception_Event"></a><h4> <span class="mw-headline">10.5.4 <span id="evt-linkException">The xforms-link-exception Event</span></span></h4>
<p>Dispatched as an indication of: a failure to traverse or process the result of a link in a situation critical to form processing, such as schema or instance initialization.
</p><p>Target: <code>model</code> associated with the in-scope evaluation context node of the element performing the link
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-link-exception event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> resource-uri
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> The URI associated with the failed link (xsd:anyURI)
</td></tr></tbody></table>
<p>Default Action: Fatal error (halts processing).
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This exception occurs early in processing. XForms processors are not expected to produce XForms user interface elements nor even execute XForms action handlers (such as a <code>message</code> action) in response to this event. This exception is dispatched for the benefit of implementation-specific processing code that may be monitoring the behavior of an XForms processor.
</p>
</div></div><div class="div3">
<a id="The_xforms-script-language-not-supported-exception_Event" name="The_xforms-script-language-not-supported-exception_Event"></a><h4> <span class="mw-headline">10.5.5 <span id="evt-scriptLanguageNotSupportedException">The xforms-script-language-not-supported-exception Event</span></span></h4>
<p>Dispatched as an indication of a script language that is not supported.
</p><p>Target: <code>script</code> element
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-link-exception event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> language
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> The value of the script type attribute
</td></tr></tbody></table>
<p>Default Action: Fatal error (halts processing).
</p>
</div><div class="div3">
<a id="The_xforms-script-exception_Event" name="The_xforms-script-exception_Event"></a><h4> <span class="mw-headline">10.5.6 <span id="evt-scriptException">The xforms-script-exception Event</span></span></h4>
<p>Dispatched as an indication of an error during the execution of a  script implementation.
</p><p>Target: <code>script</code> element 
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-link-exception event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> error
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> The description of the error that occurred while executing the script implementation.
</td></tr></tbody></table>
<p>Default Action: Fatal error (halts processing).
</p>
</div><div class="div3">
<a id="The_xforms-output-error_Event" name="The_xforms-output-error_Event"></a><h4> <span class="mw-headline">10.5.7 <span id="evt-output-error">The xforms-output-error Event</span></span></h4>
<p>Dispatched by the processor immediately after the failure of an <code>output</code> to render or update the rendition of content.
</p><p>Target: <code>output</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info: None.
</p><p>Default Action: None; notification event only.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>output</code> element content can include XForms actions, so an <code>output</code> element can contain an event handler for the <code>xforms-output-error</code> event. See Section <a href="#The_output_Element" title="">The output Element</a>.
</p>
</div></div><div class="div3">
<a id="The_xforms-submit-error_Event_2" name="The_xforms-submit-error_Event_2"></a><h4> <span class="mw-headline">10.5.8 <span id="evt-submit-error">The xforms-submit-error Event</span></span></h4>
<p>See chapter <a href="#The_xforms-submit-error_Event" title="">The xforms-submit-error Event</a>.
</p>
</div></div><div class="div2">
<a id="Event_Sequencing" name="Event_Sequencing"></a><h3> <span class="mw-headline">10.6 <span id="rpm-event-sequences">Event Sequencing</span></span></h3>
<p>The previous sections describe processing associated with individual events. This section gives the overall sequence of related events that must occur in several common situations. In the following lists, events that may be fired more than once are prefixed with [n].
</p>
<div class="div3">
<a id="For_input.2C_secret.2C_textarea.2C_range.2C_or_upload_Controls" name="For_input.2C_secret.2C_textarea.2C_range.2C_or_upload_Controls"></a><h4> <span class="mw-headline">10.6.1 <span id="sequence-for-input">For <code>input</code>, <code>secret</code>, <code>textarea</code>, <code>range</code>, or <code>upload</code> Controls</span></span></h4>
<ul><li> When the form control is interactively changed, and has the <code>incremental="true"</code> setting, the event sequence described at <a href="#Sequence:_Value_Change" title="">Sequence: Value Change</a> may be initiated at implementation dependent intervals.
</li><li> When the form control is interactively changed and does not have the <code>incremental="true"</code> setting, no events are required to be dispatched, and thus no order is defined.
</li><li> When the user activates the control and the value has changed, then, after the new value is placed into the bound instance node, the event sequence consists of the events described at <a href="#Sequence:_Value_Change" title="">Sequence: Value Change</a> followed by dispatching the DOMActivate event. See <a href="#The_input_Element" title="">The input Element</a> for an example.
</li><li> When focus changes from the form control and the value has changed, then, after the new value is placed into the bound instance node, the event sequence is as described at <a href="#Sequence:_Value_Change" title="">Sequence: Value Change</a>.
</li></ul>
</div><div class="div3">
<a id="For_output_Controls" name="For_output_Controls"></a><h4> <span class="mw-headline">10.6.2 <span id="sequence-for-output">For output Controls</span></span></h4>
<ul><li> The implementation of an <code>output</code> dispatches <code>xforms-output-error</code> if it unable to process the output data (such as corrupt image data when the output mediatype indicates it is image data). This event may occur each time the <code>output</code> is given new data (such as a change of data in the bound data node or a change of the bound data node).
</li></ul>
</div><div class="div3">
<a id="For_select_or_select1_Controls" name="For_select_or_select1_Controls"></a><h4> <span class="mw-headline">10.6.3 <span id="sequence-for-select">For select or select1 Controls</span></span></h4>
<ul><li> When a selection is interactively changed, and the form control has the <code>incremental="true"</code> setting (which is the default for the <code>select</code> or <code>select1</code> elements), the event sequence is described at <a href="#Sequence:_Selection_Without_Value_Change" title="">Sequence: Selection Without Value Change</a>, which may be followed immediately by the sequence described at <a href="#Sequence:_Value_Change" title="">Sequence: Value Change</a>.
</li><li> When a selection is interactively changed, and the <code>select</code> or <code>select1</code> form control has the <code>incremental="false"</code> setting, the event sequence is described at <a href="#Sequence:_Selection_Without_Value_Change" title="">Sequence: Selection Without Value Change</a>.
</li><li> When the user activates the control and the selection has changed, then, after the new value is placed into the bound instance node, the event sequence consists of the events described at <a href="#Sequence:_Value_Change" title="">Sequence: Value Change</a> followed by dispatching the DOMActivate event. Note that this event sequence will have been preceded by the event sequence described at <a href="#Sequence:_Selection_Without_Value_Change" title="">Sequence: Selection Without Value Change</a> at the moment the selection was changed.
</li><li> When focus changes from the form control and the selection has changed, then, after the new value is placed into the bound instance node, the event sequence is as described at <a href="#Sequence:_Value_Change" title="">Sequence: Value Change</a>. Note that this event sequence will have been preceded by the event sequence described at <a href="#Sequence:_Selection_Without_Value_Change" title="">Sequence: Selection Without Value Change</a> at the moment the selection was changed.
</li></ul>
</div><div class="div3">
<a id="For_trigger_Controls" name="For_trigger_Controls"></a><h4> <span class="mw-headline">10.6.4 <span id="sequence-for-trigger">For trigger Controls</span></span></h4>
<ul><li> Activating the form control causes the event sequence defined at <a href="#Sequence:_Activating_a_Trigger" title="">Sequence: Activating a Trigger</a>.
</li></ul>
</div><div class="div3">
<a id="For_submit_Controls" name="For_submit_Controls"></a><h4> <span class="mw-headline">10.6.5 <span id="sequence-for-submit">For submit Controls</span></span></h4>
<ul><li> Activating the form control causes the event sequence defined at <a href="#Sequence:_Activating_a_Trigger" title="">Sequence: Activating a Trigger</a>, followed immediately by the event sequence defined at <a href="#Sequence:_Submission" title="">Sequence: Submission</a>.
</li></ul>
</div><div class="div3">
<a id="Sequence:_Selection_Without_Value_Change" name="Sequence:_Selection_Without_Value_Change"></a><h4> <span class="mw-headline">10.6.6 <span id="rpm-event-seq-swovc">Sequence: Selection Without Value Change</span></span></h4>
<ol><li> xforms-deselect (for each <code>item</code> deselected by the change, if any)
</li><li> xforms-select (for each <code>item</code> selected by the change, if any)
</li></ol>
</div><div class="div3">
<a id="Sequence:_Value_Change" name="Sequence:_Value_Change"></a><h4> <span class="mw-headline">10.6.7 <span id="rpm-event-seq-vc">Sequence: Value Change</span></span></h4>
<ol><li> xforms-recalculate
</li><li> xforms-revalidate
</li><li> xforms-refresh performs reevaluation of UI binding expressions then dispatches these events according to value changes, model item property changes and validity changes:
<ul><li> [n] xforms-value-changed
</li><li> [n] xforms-valid or xforms-invalid
</li><li> [n] xforms-enabled or xforms-disabled
</li><li> [n] xforms-optional or xforms-required
</li><li> [n] xforms-readonly or xforms-readwrite
</li><li> [n] xforms-out-of-range or xforms-in-range<br /><br />(The order in which these events are dispatched is not defined).
</li></ul>
</li><li> Perform further deferred updates as necessary
</li></ol>
</div><div class="div3">
<a id="Sequence:_Activating_a_Trigger" name="Sequence:_Activating_a_Trigger"></a><h4> <span class="mw-headline">10.6.8 <span id="rpm-event-seq-aat">Sequence: Activating a Trigger</span></span></h4>
<ol><li> DOMActivate
</li></ol>
</div><div class="div3">
<a id="Sequence:_Submission" name="Sequence:_Submission"></a><h4> <span class="mw-headline">10.6.9 <span id="rpm-event-seq-s">Sequence: Submission</span></span></h4>
<ol><li> xforms-submit
</li><li> xforms-submit-serialize
</li><li> xforms-submit-done or xforms-submit-error
</li></ol>
</div></div><div class="div2">
<a id="Resolving_ID_References_in_XForms" name="Resolving_ID_References_in_XForms"></a><h3> <span class="mw-headline">10.7 <span id="idref-resolve">Resolving ID References in XForms</span></span></h3>
<p>The element of a document for which an IDREF must be resolved is called the <b>source element</b>, and the element bearing the matching ID, if there is one, is called the <b>target element</b>. Due to the run-time expansion of repeated content in XForms, it is possible that there will be more than one occurrence of both the source and target elements. This section describes how XForms IDREF resolution works to accommodate such repetition of the originating document's content.
</p><p>Each run-time occurrence of the source element is called a <b>source object</b>, and each run-time occurrence of the target element is called a <b>target object</b>. It is the source object that performs the IDREF resolution, and the result of the search is either null or a target object.
</p><p>Whether or not repeated content is involved, a null search result for an IDREF resolution is handled differently depending on the source object. If there is a null search result for the target object and the source object is an XForms action such as <code>dispatch</code>, <code>send</code>, <code>setfocus</code>, <code>setindex</code> or <code>toggle</code>, then the action is terminated with no effect. Similarly, a <code>submit</code> form control does not dispatch <code>xforms-submit</code> if its <code>submission</code> attribute does not indicate an existing <code>submission</code> element. Likewise, when a function associated with the source object performs the IDREF search and a null result is obtained, the function returns an empty result such as <code>NaN</code> for the <code>index()</code> function or empty sequence for the <code>instance()</code> function. However, an <code>xforms-binding-exception</code> occurs if there is a null search result for the target object indicated by attributes <code>bind</code>, <code>model</code> and <code>instance</code>.
</p><p>If the target element is not repeated, then the search for the target object is trivial since there is only one associated with the target element that bears the matching ID. This is true regardless of whether or not the source object is repeated. However, if the target element is repeated, then additional information must be used to help select a target object from among those associated with the identified target element.
</p>
<div class="div3">
<a id="References_to_Elements_within_a_repeat_Element" name="References_to_Elements_within_a_repeat_Element"></a><h4> <span class="mw-headline">10.7.1 <span id="idref-resolve-repeat">References to Elements within a repeat Element</span></span></h4>
<p>When the target element that is identified by the IDREF of a source object has one or more <code>repeat</code> elements as ancestors, then the set of ancestor repeats are partitioned into two subsets, those in common with the source element and those that are not in common. Any ancestor <code>repeat</code> elements of the target element not in common with the source element are descendants of the <code>repeat</code> elements that the source and target element have in common, if any.
</p><p>For the <code>repeat</code> elements that are in common, the desired target object exists in the same set of run-time objects that contains the source object. Then, for each ancestor <code>repeat</code> of the target element that is not in common with the source element, the current index of the <code>repeat</code> determines the set of run-time objects that contains the desired target object.
</p>
</div><div class="div3">
<a id="References_to_Elements_within_a_bind_Element" name="References_to_Elements_within_a_bind_Element"></a><h4> <span class="mw-headline">10.7.2 <span id="idref-resolve-bind">References to Elements within a bind Element</span></span></h4>
<p>When a source object expresses a Single Item Binding or Sequence Binding with a <code>bind</code> attribute, the IDREF of the <code>bind</code> attribute is resolved to a target bind object whose associated sequence is used by the Single Item Binding or Sequence Binding. However, if the target <code>bind</code> element has one or more <code>bind</code> element ancestors, then the identified <code>bind</code> may be a target element that is associated with more than one target bind object.
</p><p>If a target <code>bind</code> element is outermost, or if all of its ancestor <code>bind</code> elements have <code>ref</code> (or deprecated <code>nodeset</code>) attributes that select only one node, then the target <code>bind</code> only has one associated bind object, so this is the desired target bind object whose sequence is used in the Single Item Binding or Sequence Binding. Otherwise, the in-scope evaluation context item of the source object containing the <code>bind</code> attribute is used to help select the appropriate target bind object from among those associated with the target <code>bind</code> element.
</p><p>From among the bind objects associated with the target <code>bind</code> element, if there exists a bind object created with the same in-scope evaluation context item as the source object, then that bind object is the desired target bind object. Otherwise, the IDREF resolution produced a null search result.
</p>
</div></div><div class="div2">
<a id="DOM_Interface_for_Access_to_Instance_Data" name="DOM_Interface_for_Access_to_Instance_Data"></a><h3> <span class="mw-headline">10.8 <span id="expr-instance">DOM Interface for Access to Instance Data</span></span></h3>
<p>XForms Processors that implement DOM must provide DOM access to instance data via the interface defined below.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Instance data always has a single root element, and thus corresponds to a DOM Document.
</p>
</div>
<p>The IDL for this interface follows:
</p>
<div class="exampleInner">
<pre>#include "dom.idl"
 
    pragma prefix "w3c.org"
 
    module xforms {
       interface XFormsModelElement : dom::Element {
          dom::Document getInstanceDocument(in dom::DOMString instanceID)
             raises(dom::DOMException);
          void rebuild();
          void recalculate();
          void revalidate();
          void refresh();
       };
    };
</pre>
</div><div class="div3">
<a id="The_getInstanceDocument.28.29_Method" name="The_getInstanceDocument.28.29_Method"></a><h4> <span class="mw-headline">10.8.1 <span id="idl-getInstanceDocument">The getInstanceDocument() Method</span></span></h4>
<p>If the <code>instance-id</code> parameter is the empty string, then the document element of the default instance is returned. Otherwise, this method returns a DOM Document that corresponds to the instance data associated with the <code>instance</code> element containing an <code>ID</code> matching the <code>instance-id</code> parameter. If there is no matching instance data, a <code>DOMException</code> is thrown.
</p><p>The implementation of the DOM interface for the instance document must not permit direct mutations of readonly instance nodes. Specifically, the implementation must not allow insertion of a node whose parent is readonly, direct deletion of a readonly node, nor setting the content of a readonly node. A node that is not readonly can be deleted, including all descendants, even if it has readonly descendants.
</p>
</div><div class="div3">
<a id="The_rebuild.28.29_Method" name="The_rebuild.28.29_Method"></a><h4> <span class="mw-headline">10.8.2 <span id="idl-rebuild">The rebuild() Method</span></span></h4>
<p>This method signals the XForms Processor to rebuild any internal data structures used to track computational dependencies within this XForms Model. This method takes no parameters and raises no exceptions.
</p>
</div><div class="div3">
<a id="The_recalculate.28.29_Method" name="The_recalculate.28.29_Method"></a><h4> <span class="mw-headline">10.8.3 <span id="idl-recalculate">The recalculate() Method</span></span></h4>
<p>This method signals the XForms Processor to perform a full recalculation of this XForms Model. This method takes no parameters and raises no exceptions.
</p>
</div><div class="div3">
<a id="The_revalidate.28.29_Method" name="The_revalidate.28.29_Method"></a><h4> <span class="mw-headline">10.8.4 <span id="idl-revalidate">The revalidate() Method</span></span></h4>
<p>This method signals the XForms Processor to perform a full revalidation of this XForms Model. This method takes no parameters and raises no exceptions.
</p>
</div><div class="div3">
<a id="The_refresh.28.29_Method" name="The_refresh.28.29_Method"></a><h4> <span class="mw-headline">10.8.5 <span id="idl-refresh">The refresh() Method</span></span></h4>
<p>This method signals the XForms Processor to perform a full refresh of form controls based on instance nodes within this XForms Model. This method takes no parameters and raises no exceptions.
</p>
</div></div><div class="div2">
<a id="Feature_string_for_the_hasFeature_method_call" name="Feature_string_for_the_hasFeature_method_call"></a><h3> <span class="mw-headline">10.9 <span id="expr-hasfeature">Feature string for the hasFeature method call</span></span></h3>
<p>For this version of the XForms specification, the feature string for the [<a href="#ref-dom2-core" title="">DOM2 Core</a>] <code>DOMImplementation</code> interface <code>hasFeature</code> method call is <code>"org.w3c.xforms.dom"</code> and the version string is <code>"1.0"</code>.
</p>
</div></div>
<p><br />
</p>
<div class="div1">
<a id="XForms_Actions" name="XForms_Actions"></a><h2> <span class="mw-headline">11 <span id="action">XForms Actions</span></span></h2>
<p>This chapter defines the controller layer of XForms, an XML Events-based [<a href="#ref-xml-events" title="">XML Events</a>] common set of actions that can be invoked in response to events.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>XForms itself defines no method for script-based event handling. The definition of such facilities is a responsibility of the hosting language.
</p>
</div>
<p>All form controls as well as other elements defined in this specification have a set of common <i>behaviors</i> that encourage consistent authoring and look and feel for XForms-based applications. This consistency comes from attaching a common set of behaviors to the various form controls. In conjunction with the event binding mechanism provided by XML Events, these handlers provide a flexible means for forms authors to specify event processing at appropriate points within the XForms user interface. XForms Actions are declarative XML event handlers that capture high-level semantics. As a consequence, they significantly enhance the accessibility of XForms-based applications in comparison to previous Web technologies that relied exclusively on scripting.
</p><p>The elements and attributes included in this module are:
</p>
<table border="1" summary="listing of XForms action elements, attributes, and content models">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Attributes and Their Content (after AVT evaluation)
</th><th colspan="1" rowspan="1"> Minimal Content Model
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#The_action_Element" title="">action</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
</td><td colspan="1" rowspan="1">
<p>(<a href="#action-content-set" title="">Action</a>|<a href="#structure-var-element" title="">var</a>)*
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-setvalue" title="">setvalue</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>, value (string Expression)
</p>
</td><td colspan="1" rowspan="1"> PCDATA
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#The_insert_Element" title="">insert</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-nodeset" title="">Sequence Binding</a>, context (node Expression), at (number Expression), position ("before"|"after"), origin (node-sequence Expression)
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#The_delete_Element" title="">delete</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-nodeset" title="">Sequence Binding</a>, context (node Expression), at (number Expression)
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-setindex" title="">setindex</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, repeat (xsd:IDREF), index (number Expression)
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-toggle" title="">toggle</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, case (xsd:IDREF)
</p>
</td><td colspan="1" rowspan="1"> case? [deprecated]
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-setfocus" title="">setfocus</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, control (xsd:IDREF)
</p>
</td><td colspan="1" rowspan="1"> control? [deprecated]
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#The_dispatch_Element" title="">dispatch</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, name (xsd:NMTOKEN), targetid (xsd:IDREF), delay (xsd:nonNegativeInteger), bubbles (xsd:boolean), cancelable (xsd:boolean)
</p>
</td><td colspan="1" rowspan="1"> name? [deprecated], targetid? [deprecated], delay?  [deprecated] [in any order]
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-rebuild" title="">rebuild</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-recalculate" title="">recalculate</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-revalidate" title="">revalidate</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-refresh" title="">refresh</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-reset" title="">reset</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#The_load_Element" title="">load</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional), resource (xsd:anyURI), show ("new" | "replace" | "embed"), targetid (xsd:IDREF)
</p>
</td><td colspan="1" rowspan="1"> resource? [deprecated]
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#The_unload_Element" title="">unload</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, targetid (xsd:IDREF)
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-send" title="">send</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, submission (xsd:IDREF)
</p>
</td><td colspan="1" rowspan="1"> EMPTY
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-message" title="">message</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional), level ("ephemeral" | "modeless" | "modal"|<a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a>)
</p>
</td><td colspan="1" rowspan="1">
<p>(PCDATA|<a href="#elems-inline" title="">UI Inline</a>)*
</p>
</td></tr></tbody></table>
<p>This module also defines the content set <span id="action-content-set"><b>"Action"</b></span>, which includes the following elements:
</p>
<div class="exampleInner">
<pre>(action|setvalue|insert|delete|setindex|toggle|setfocus|dispatch|rebuild|recalculate|revalidate|refresh|reset|
load|unload|send|message)*
</pre>
</div>
<p>The following group of attributes, here called <b>Action Common</b>, are available to all <a href="#action-content-set" title="">Action</a> elements:
</p>
<table border="1" id="attrs-action-common" summary="listing of XForms Common Action attributes">
<tbody><tr>
<th colspan="1" rowspan="1"> Element
</th><th colspan="1" rowspan="1"> Attributes and Their Content (after AVT evaluation)
</th></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#action-content-set" title="">Action</a>
</p>
</td><td colspan="1" rowspan="1"> if (boolean Expression), while (boolean Expression)
</td></tr></tbody></table>
<dl><dt> if
</dt><dd> Author-optional attribute defined in Section <a href="#Conditional_Execution_of_XForms_Actions" title="">Conditional Execution of XForms Actions</a>.
</dd><dt> while
</dt><dd> Author-optional attribute defined in Section <a href="#The_while_attribute" title="">The While Attribute</a>.
</dd><dt> iterate
</dt><dd> Author-optional attribute defined in Section <a href="#The_iterate_attribute" title="">The Iterate Attribute</a>.
</dd></dl>
<p>Additionally, this module defines the attribute group <span id="action-xmlevents"><b>"XML Events"</b></span>, which includes all of the "global" attributes defined in the [<a href="#ref-xml-events" title="">XML Events</a>] specification.
</p><p>The following example shows how events can be used:
</p>
<div class="exampleOuter"><div class="exampleHead">Action Syntax</div><div class="exampleInner">
<pre>&lt;trigger&gt;
  &lt;label&gt;Reset&lt;/label&gt;
  &lt;reset ev:event="DOMActivate" model="thismodel"/&gt;
&lt;/trigger&gt;
</pre>
</div></div>
<p>This example recreates the behavior of the HTML <i>reset</i> control, which this specification does not define as an independent form control.
</p><p>For each built-in XForms Action, this chapter lists the following:
</p>
<blockquote>

Name<br />Common Attributes<br />Special Attributes<br />Description of behavior

</blockquote>
<p>All elements defined in this chapter explicitly allow global attributes from the XML Events namespace, and apply the processing defined in that specification in section 2.3 [<a href="#ref-xml-events" title="">XML Events</a>].
</p><p>An <span id="action-outermost-action"><b>outermost action handler</b></span> is an action that is activated when the XForms processor is not executing any other action handlers.
</p><p>An <span id="action-inner-action"><b>inner action handler</b></span> is an action that is activated when the XForms processor is executing the declared actions of an <a href="#action-outermost-action" title="">outermost action handler</a>. An inner action handler may be within the content of the outermost action handler, or it may be executed as the response to an event dispatched while performing all of the actions initiated by the <a href="#action-outermost-action" title="">outermost action handler</a>.
</p><p><span id="action-deferred-updates"><b>Deferred Updates</b></span>: Sequences of one or more XForms Actions have a deferred effect on XForms model and user interface processing. Implementations are free to use any strategy to accomplish deferred updates, but the end result must be as follows: Instance data changes performed by a set of actions do not result in immediate computation dependency rebuilding, recalculation, revalidate and form control refreshing until the termination of the <a href="#action-outermost-action" title="">outermost action handler</a>, as described here. Each XForms model can be thought of as having a set of deferred update Boolean flags, initially <code>false</code> at the start of an <a href="#action-outermost-action" title="">outermost action handler</a>, to indicate whether each of the actions <code>rebuild</code>, <code>recalculate</code>, <code>revalidate</code>, and <code>refresh</code> are required for that model upon termination of the <a href="#action-outermost-action" title="">outermost action handler</a>.
</p><p>By default, the behavior of an action handler is performed one time when the action is encountered in the execution sequence. However, execution of an action handler may be conditional or iterated, as described in <a href="#Conditional_Execution_of_XForms_Actions" title="">Conditional Execution of XForms Actions</a>, <a href="#The_while_attribute" title="">The While Attribute</a>, and <a href="#The_iterate_attribute" title="">The Iterate Attribute</a>.
</p><p>Execution of an <a href="#action-outermost-action" title="">outermost action handler</a> begins by setting the XForms processor into the state of executing an <a href="#action-outermost-action" title="">outermost action handler</a>. The <a href="#action-outermost-action" title="">outermost action handler</a> is then performed, which may include the execution of <a href="#action-inner-action" title="">inner action handlers</a>. Finally, the XForms processor is set into the state of not executing an <a href="#action-outermost-action" title="">outermost action handler</a> and then the deferred update is performed for each model.
</p><p>The <span id="action-deferred-update-behavior"><b>deferred update behavior</b></span> for a model consists of examining each deferred update Boolean flag in the order of <code>rebuild</code>, <code>recalculate</code>, <code>revalidate</code>, and <code>refresh</code>, and for each <code>true</code> flag, set the flag to <code>false</code> and then dispatch the proper event to the model for that deferred update flag (i.e. dispatch <code>xforms-rebuild</code> for a true <code>rebuild</code> flag, <code>xforms-recalculate</code> for a true <code>recalculate</code> flag, <code>xforms-revalidate</code> for a true <code>revalidate</code> flag, and <code>xforms-refresh</code> for a true <code>refresh</code> flag).
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The XForms processor is not considered to be executing an <a href="#action-outermost-action" title="">outermost action handler</a> at the time that it performs deferred update behavior for XForms models. Therefore, event handlers for events dispatched to the user interface during the deferred refresh behavior are considered to be new <a href="#action-outermost-action" title="">outermost action handler</a>.
</p>
</div>
<p>Actions that manipulate properties of the XForms view layer begin by invoking the <a href="#action-deferred-update-behavior" title="">deferred update behavior</a> so that the model and all data are up to date prior to performing the action. The XForms Actions in this category are:
</p>
<blockquote>

<code>setfocus</code><br /><code>toggle</code><br /><code>setindex</code>

</blockquote>
<p>Actions that directly invoke rebuild, recalculate, revalidate, or refresh always have an immediate effect, and clear the corresponding deferred update flag. The XForms Actions in this category are:
</p>
<blockquote>

<code>rebuild</code><br /><code>recalculate</code><br /><code>revalidate</code><br /><code>refresh</code>

</blockquote>
<p>Similarly, if the default processing of any of the events <code>xforms-rebuild</code>, <code>xforms-recalculate</code>, <code>xforms-revalidate</code>, or <code>xforms-refresh</code> are performed, then the corresponding deferred update flag is cleared. The XForms Actions that can dispatch these events are:
</p>
<blockquote>

<code>reset</code><br /><code>dispatch</code>

</blockquote>
<p>XForms Actions that change the tree structure of instance data result in setting all four deferred update flags to <code>true</code> for the model over which they operate. The XForms Actions in this category are:
</p>
<blockquote>

<code>insert</code><br /><code>delete</code>

</blockquote>
<p>XForms Actions that change only the value of an instance node results in setting the deferred update flags for <code>recalculate</code>, <code>revalidate</code>, and <code>refresh</code> to <code>true</code> and making no change to the deferred update flag for <code>rebuild</code> for the model over which they operate. The XForms Actions in this category are:
</p>
<blockquote>

setvalue<br />setindex

</blockquote>
<p>Finally, the XForms <code>submission</code> process can affect deferred update behavior. See Section <a href="#The_xforms-submit_Event" title="">The xforms-submit Event</a> for details. XForms actions that are capable of initiating an XForms submission are:
</p>
<blockquote>

send<br />dispatch

</blockquote><div class="div2">
<a id="The_action_Element" name="The_action_Element"></a><h3> <span class="mw-headline">11.1 <span id="action-action">The action Element</span></span></h3>
<p>This action causes its child actions to be invoked in the order that they are specified in the document.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
<div class="exampleOuter"><div class="exampleHead">Grouping Actions</div><div class="exampleInner">
<pre>&lt;trigger&gt;
  &lt;label&gt;Click me&lt;/label&gt;
  &lt;action ev:event="DOMActivate"&gt;
    &lt;reset model="thismodel"/&gt;
    &lt;setvalue ref="."/&gt;
  &lt;/action&gt;
&lt;/trigger&gt;
</pre>
</div></div></div><div class="div2">
<a id="The_setvalue_Element" name="The_setvalue_Element"></a><h3> <span class="mw-headline">11.2 <span id="action-setvalue">The setvalue Element</span></span></h3>
<p>This action explicitly sets the value of the specified instance data node. This action has no effect if the Single Item Binding does not select an instance data node or if a readonly instance data node is selected. An <code>xforms-binding-exception</code> occurs if the Single Item Binding indicates a node whose content is not simpleContent (i.e., a node that has element children).
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate, with the result stored in the selected instance data node. The evaluation context for this expression is the result from the Single Item Binding. To obtain the value, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>The element content of <code>setvalue</code> specifies the literal value to set; this is an alternative to specifying a computed value via attribute <code>value</code>. If neither a <code>value</code> attribute nor text content are present, the effect is to set the value of the selected node to the empty string (""). If both are present, the <code>value</code> attribute is used. The following examples contrast these approaches:
</p>
<div class="exampleOuter"><div class="exampleHead">setvalue with Expression</div><div class="exampleInner">
<pre>&lt;setvalue bind="put-here" value="a/b/c"/&gt;
</pre>
</div>
<p>This causes the string value at <code>a/b/c</code> in the instance data to be placed on the single node selected by the bind element with <code>id="put-here"</code>.
</p>
</div><div class="exampleOuter"><div class="exampleHead">setvalue with Literal</div><div class="exampleInner">
<pre>&lt;setvalue bind="put-here"&gt;literal string&lt;/setvalue&gt;
</pre>
</div>
<p>This causes the value "literal string" to be placed on the single node selected by the bind element with <code>id="put-here"</code>.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>Expression language modules are encouraged to add a <code>context()</code> function that returns the in-scope evaluation context item, which can be used to provide the same initial evaluation context node to both the <code>ref</code> and <code>value</code> attributes. See Appendix <a href="#Patterns_for_Data_Mutations" title="">Patterns for Data Mutations</a> for numerous further usage patterns for <code>sevalue</code>, <code>insert</code> and <code>delete</code>.
</p>
</div>
<p>All strings are inserted into the instance data as follows:
</p>
<ul><li> Element nodes: If element child nodes are present, then an <code>xforms-binding-exception</code> occurs. Otherwise, regardless of how many child nodes the element has, the result is that the string becomes the new content of the element. In accord with the data model of [<a href="#ref-xpath-1.0" title="">XPath 1.0</a>], the element will have either a single non-empty text node child, or no children string was empty.
</li><li> Attribute nodes: The string-value of the attribute is replaced with a string corresponding to the new value.
</li><li> Text nodes: The text node is replaced with a new one corresponding to the new value, or the text node is eliminated if the new value is the empty string.
</li><li> Namespace, processing instruction, and comment nodes: behavior is undefined (implementation-dependent).
</li><li> the XPath root node: an <code>xforms-binding-exception</code> occurs.
</li></ul>
<div class="note">
<p><b>Note:</b>
</p><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a> by setting the deferred update flags for recalculate, revalidate and refresh.
</p>
</div></div><div class="div2">
<a id="The_insert_Element" name="The_insert_Element"></a><h3> <span class="mw-headline">11.3 <span id="action-insert">The insert Element</span></span></h3>
<p>The <code>insert</code> action is used to create one or more nodes of instance data by cloning one or more existing instance nodes. Attributes of the <code>insert</code> action specify the node or nodes to be cloned and the location within instance data where the clones will appear. The clones are deep copies of the original nodes except the contents of nodes of type <code>xsd:ID</code> are modified to remain as unique values in the instance data after the clones are inserted.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-nodeset" title="">Sequence Binding</a> (author-optional)
</p><p>Special Attributes:
</p>
<dl><dt> origin
</dt><dd> Author-optional attribute containing an expression evaluated using the in-scope evaluation context , which may have been amended by the <code>context</code> attribute. The <code>origin node-sequence</code> is the sequence of one or more nodes to be cloned by the <code>insert</code> action. If this attribute is present and resolves to a non-empty sequence, then the result overrides the default setting of the <code>origin node-sequence</code> as described below in the processing of the <code>insert</code> action.
</dd><dt> at
</dt><dd> Author-optional attribute containing an expression evaluated using the Sequence Binding node-sequence to help determine the <code>insert location node</code>. This attribute is ignored if the Sequence Binding is not specified or specifies an empty sequence. The <code>insert location node</code> is a node within the Sequence Binding node-sequence that is used to help determine where in the instance to insert each node cloned by the <code>insert</code>. If this attribute is present, then its result is used to override the default setting of the <code>insert location node</code> as described below in the processing of the <code>insert</code> action.
</dd><dt> position
</dt><dd> Author-optional selector that indicates where to put the cloned node or nodes relative to the <code>insert location node</code>. Valid values are <code>before</code> and <code>after</code>, and the latter is the default. This attribute is ignored if the Sequence Binding node-sequence is not specified or empty. If the node at the <code>insert location node</code> within the Sequence Binding node-sequence is the document element of an instance, then this attribute is ignored.
</dd></dl>
<p>Processing for the <code>insert</code> action is as follows:
</p>
<ol><li> The <code>insert context</code> is determined. If the <code>context</code> attribute is not given, the <code>insert context</code> is the in-scope evaluation context. Otherwise, the expression provided by the <code>context</code> attribute is evaluated using the in-scope evaluation context, and the <a href="#def-first-node-rule" title="">first-item rule</a> is applied to obtain the <code>insert context</code>. The <code>insert</code> action is terminated with no effect if the <code>insert context</code> is the empty sequence.
</li><li> The Sequence Binding node-sequence is determined. If a <code>bind</code> attribute is present, it directly determines the Sequence Binding node-sequence. If a <code>ref</code> (or deprecated <code>nodeset</code>) attribute is present, it is evaluated within the <code>insert context</code> to determine the Sequence Binding node-sequence. If the Sequence Binding attributes are not present, then the Sequence Binding node-sequence is the empty sequence. The <code>insert</code> action is terminated with no effect if any of the following conditions is true:
<ol><li> The <code>context</code> attribute is not given and the Sequence Binding node-sequence is the empty sequence.
</li><li> The <code>context</code> attribute is given, the <code>insert context</code> does not evaluate to an element node and the Sequence Binding node-sequence is the empty sequence.
</li></ol>
</li><li> The <code>origin node-sequence</code> is determined. If the <code>origin</code> attribute is not given and the Sequence Binding sequence is empty, then the <code>origin node-sequence</code> is the empty sequence. Otherwise, if the <code>origin</code> attribute is not given, then the <code>origin node-sequence</code> consists of the last node of the Sequence Binding node-sequence. If the <code>origin</code> attribute is given, the <code>origin node-sequence</code> is the result of the evaluation of the <code>origin</code> attribute in the <code>insert context</code>. Namespace nodes and root nodes (parents of document elements) are removed from the <code>origin node-sequence</code>. The <code>insert</code> action is terminated with no effect if the <code>origin node-sequence</code> is the empty sequence.
</li><li> The <code>insert location node</code> is determined. If the Sequence Binding node-sequence is not specified or empty, the <code>insert location node</code> is the <code>insert context</code> node. Otherwise, if the <code>at</code> attribute is not given, then the <code>insert location node</code> is the last node of the Sequence Binding sequence. Otherwise, an <code>insert location node</code> is determined from the <code>at</code> attribute as follows:
<ol><li> The evaluation context node is the first node in document order from the Sequence Binding node-sequence, the context size is the size of the Sequence Binding node-sequence, and the context position is <code>1</code>.
</li><li> The return value is processed according to the rules of the XPath function <code>round()</code>. For example, the literal <code>1.5</code> becomes <code>2</code>, and the literal <code>'string'</code> becomes <code>NaN</code>.
</li><li> If the result is in the range 1 to the Sequence Binding node-sequence size, then the <code>insert location</code> is equal to the result. If the result is non-positive, then the <code>insert location</code> is <code>1</code>. Otherwise, the result is <code>NaN</code> or exceeds the Sequence Binding sequence size, so the <code>insert location</code> is the Sequence Binding sequence size.
</li><li> The <code>insert location node</code> is the node in the Sequence Binding sequence at the position given by the <code>insert location</code>.
</li></ol>
</li><li> The <code>insert</code> action is terminated with no effect if the insertion will create nodes whose parent is readonly. This occurs if the <code>insert location node</code> is readonly and the Sequence Binding sequence is not specified or empty, or otherwise if the parent of the <code>insert location node</code> is readonly.
</li><li> Each node in the <code>origin node-sequence</code> is cloned in the order it appears in the <code>origin node-sequence</code>.
</li><li> The <code>target location</code> of each of the cloned nodes is determined as follows:
<ol><li> If the Sequence Binding node-sequence is not specified or empty, then the <code>insert location node</code> provided by the <code>context</code> attribute is intended to be the parent of the cloned node. The <code>target location</code> is dependent on the types of the cloned node and the <code>insert location node</code> as follows:
<ul><li> If the <code>insert location node</code> is not an element node or root node, then it cannot be the parent of the cloned node, so the <code>target location</code> is undefined.
</li><li> If the <code>insert location node</code> is the root node of an instance (which is the parent of the root element), and the cloned node is an element, then the <code>target location</code> is the root element of the instance.
</li><li> If the <code>insert location node</code> is the root node of an instance (which is the parent of the root element), and the cloned node is not an element, then the <code>target location</code> is before the first child of the <code>insert location node</code>.
</li><li> If the <code>insert location node</code> is an element, and the cloned node is an attribute, then the <code>target location</code> is the attribute list of the <code>insert location node</code>.
</li><li> If the <code>insert location node</code> is an element, and the cloned node is not an attribute, then the <code>target location</code> is before the first child of the <code>insert location node</code>, or the child list of the <code>insert location node</code> if it is empty.
</li></ul>
</li><li> Otherwise, the Sequence Binding node-sequence is specified and non-empty, so the <code>insert location node</code> provided by the Sequence Binding and author-optional <code>at</code> attribute is intended to be the sibling of the cloned node. If the <code>insert location node</code> is an attribute or root node, then the <code>target location</code> is undefined. If the <code>insert location node</code> is not an attribute or root node, then the <code>target location</code> is immediately before or after the <code>insert location node</code>, based on the <code>position</code> attribute setting or its default.
</li></ol>
</li><li> The cloned node or nodes are inserted in the order they were cloned into their <code>target locations</code> depending on their node type. If the parent node of the target location is the instance root node (which is the parent of the root document element of the instance), and if the cloned node is an element, then the instance root element is deleted before the cloned node is inserted at the target location. If the cloned node is a duplicate of another attribute in its parent element, then either the duplicate attribute is first removed or the existing attribute value is updated. If a cloned node cannot be placed at the <code>target location</code> due to a node type conflict or because the <code>target location</code> is undefined, then the insertion for that particular cloned node is ignored. Each cloned node that is inserted is added to the <code>inserted-nodes</code> list that will be provided in the <code>xforms-insert</code> event context information. For each cloned node used to update an existing attribute node, the existing attribute node is added to the list of <code>inserted-nodes</code>.<div class="note"><b>Note:</b>A node type conflict is a mismatch between the XPath node type and the <code>target location</code>. For example, an attribute cannot be inserted as a sibling before or after an element.</div>
</li><li> If the list of <code>inserted-nodes</code> is empty, then the <code>insert</code> action is terminated with no effect.
</li><li> The XForms action system's deferred update flags for rebuild, recalculate, revalidate and refresh are set.
</li><li> The <code>insert</code> action is successfully completed by dispatching the <code>xforms-insert</code> event with appropriate context information.<div class="note"><b>Note:</b>A <code>repeat</code> updates its index in response to this event if its repeat collection changes size as a result of the insertion. See Section <a href="#Repeat_Processing" title="">Repeat Processing</a> for details.</div>
</li></ol>
<div class="note">
<p><b>Note:</b>
</p><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a> by setting the deferred update flags for rebuild, recalculate, revalidate and refresh.
</p>
</div>
<p>Examples:
</p>
<div class="exampleOuter"><div class="exampleHead">Inserting into a <code>repeat</code>, whether or not it is empty</div>
<p>When the <code>repeat</code> is empty, the <code>at</code> index is zero so a new <code>item</code> is prepended to the child elements of <code>purchaseOrder</code>. When the <code>repeat</code> is non-empty, the new <code>item</code> is added after the node currently indexed by repeat <code>R</code>.
</p>
<div class="exampleInner">
<pre>...
&lt;instance&gt;
   &lt;purchaseOrder xmlns=""&gt;
        &lt;subtotal/&gt;
        &lt;tax/&gt;
        &lt;total/&gt;
   &lt;/purchaseOrder&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
       ...
       &lt;item&gt;
           &lt;product/&gt;
           &lt;quantity/&gt;
           &lt;unitcost/&gt;
           &lt;price/&gt;
       &lt;/item&gt;
       ...
    &lt;/prototypes&gt;
&lt;/instance&gt;
...
&lt;repeat ref="/purchaseOrder/item" id="R"&gt;
   ...
&lt;/repeat&gt;
...
&lt;trigger&gt;
  &lt;label&gt;Add to purchase order&lt;/label&gt;
  &lt;action ev:event="DOMActivate"&gt;
    &lt;insert context="/purchaseOrder" ref="item" at="index('R')" origin="instance('prototypes')/item"/&gt;
    &lt;setfocus control="R"/&gt;
  &lt;/action&gt;
&lt;/trigger&gt;

</pre>
</div></div><div class="exampleOuter"><div class="exampleHead">Insert and Read-Only Content</div><div class="exampleInner">
<pre>&lt;model xmlns:my="http://example.org"&gt;
  &lt;instance&gt;
    &lt;my:data&gt;
      &lt;my:name&gt;
        &lt;my:first-name&gt;John&lt;/my:first-name&gt;
        &lt;my:last-name&gt;Doe&lt;/my:last-name&gt;
      &lt;/my:name&gt;
      &lt;my:address&gt;
        &lt;my:street&gt;123 Main St.&lt;/my:street&gt;
        &lt;my:city&gt;Smallville&lt;/my:city&gt;
      &lt;/my:address&gt;
    &lt;/my:data&gt;
  &lt;/instance&gt;

  &lt;bind ref="my:name" readonly="true()"/&gt;
  &lt;bind ref="my:address/my:street" readonly="true()"/&gt;

  &lt;action ev:event="xforms-model-construct-done"&gt;
      &lt;insert id="I1" ref="my:name/*" ... /&gt;
      &lt;insert id="I2" ref="my:address/my:street" at="1" &gt;
  &lt;/action&gt;
&lt;/model&gt;
</pre>
</div>
<p>Insert I1 fails because it attempts to insert into the content of a readonly node (<code>my:name</code>). Insert I2 succeeds even though the insert location is a readonly node because the new node is placed as a sibling into the content of the parent, which is not readonly.
</p>
</div>
<p>See <a href="#The_delete_Element" title="">The delete Element</a> for an example that uses <code>insert</code> and <code>delete</code> to make a <code>repeat</code> that always shows at least one repeat item. See Appendix <a href="#Patterns_for_Data_Mutations" title="">Patterns for Data Mutations</a> for numerous further usage patterns for <code>sevalue</code>, <code>insert</code> and <code>delete</code>.
</p>
</div><div class="div2">
<a id="The_delete_Element" name="The_delete_Element"></a><h3> <span class="mw-headline">11.4 <span id="action-delete">The delete Element</span></span></h3>
<p>This action deletes one or more nodes from instance data.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-nodeset" title="">Sequence Binding</a>
</p><p>Special Attributes:
</p>
<dl><dt> at
</dt><dd> Author-optional attribute containing an expression evaluated using the Sequence Binding node-sequence to determine the <code>delete location</code>. If the Sequence Binding node-sequence is empty, then this attribute is ignored.
</dd></dl>
<p>Processing for the <code>delete</code> action is as follows:
</p>
<ol><li> The <code>delete context</code> is determined. It is set to the in-scope evaluation context, possibly overridden by the <code>context</code> attribute if that attribute is present. The <code>delete</code> action is terminated with no effect if the <code>delete context</code> is the empty sequence.
</li><li> The Sequence Binding node-sequence is determined. If a <code>bind</code> attribute is present, it directly determines the Sequence Binding node-sequence. If a <code>ref</code> (or deprecated <code>nodeset</code>) attribute is present, it is evaluated within the <code>delete context</code> to determine the Sequence Binding node-sequence. The behavior of the <code>delete</code> action is undefined if the Sequence Binding node-sequence contains nodes from more than one <code>instance</code>. The <code>delete</code> action is terminated with no effect if the Sequence Binding is expressed and the Sequence Binding node-sequence is the empty sequence. Otherwise, the Sequence Binding is not expressed, so the Sequence Binding node-sequence is set equal to the delete context node with a position and size of 1.
</li><li> The <code>delete location</code> is determined. If the <code>at</code> attribute is not specified, there is no <code>delete location</code>. Otherwise, the <code>delete location</code> is determined by evaluating the expression specified by the <code>at</code> attribute as follows:
<ol><li> The evaluation context node is the first node in document order from the Sequence Binding node-sequence, the context size is the size of the Sequence Binding node-sequence, and the context position is <code>1</code>.
</li><li> The return value is processed according to the rules of the XPath function <code>round()</code>. For example, the literal <code>1.5</code> becomes <code>2</code>, and the literal <code>'string'</code> becomes <code>NaN</code>.
</li><li> If the result is in the range 1 to the Sequence Binding node-sequence size, then the <code>delete location</code> is equal to the result. If the result is non-positive, then the <code>delete location</code> is <code>1</code>. Otherwise, if the result is <code>NaN</code> or exceeds the Sequence Binding node-sequence size, the <code>delete location</code> is the Sequence Binding node-sequence size.
</li></ol>
</li><li> If there is no <code>delete location</code>, each node in the Sequence Binding node-sequence is deleted, except if the node is a readonly node, a namespace node, a root node, or the root document element of an instance, then that particular node is not deleted. Otherwise, if there is a <code>delete location</code>, the node at the <code>delete location</code> in the Sequence Binding node-sequence is deleted, except if the node is the root document element of an instance or has a readonly parent node, then that node is not deleted. The delete action is terminated with no effect if no node is deleted.
</li><li> The XForms action system's deferred update flags for rebuild, recalculate, revalidate and refresh are set.
</li><li> The <code>delete</code> action is successfully completed by dispatching the <code>xforms-delete</code> event with appropriate context information.
</li></ol>
<div class="note"><div class="prefix"><b>Note:</b></div><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a> by setting the deferred update flags for rebuild, recalculate, revalidate and refresh.</p></div>
<div class="note"><div class="prefix"><b>Note:</b></div><p>When a node is deleted from an instance it will no longer have a parent (if you are using XPath as an expression language the parent aces of the delete node will return the empty sequence)</p></div>
<div class="note"><div class="prefix"><b>Note:</b></div><p>When a deleted node provides the evaluation context for an action, it will keep providing that context as long as the action is running.</p></div>
<p><br />
Examples:
</p>
<div class="exampleOuter"><div class="exampleHead">Using <code>delete</code> and <code>insert</code> to Maintain a Non-empty repeat <code>repeat</code></div>
<p>In this example, the <code>trigger</code> is not in the <code>repeat</code>. When it is activated, the indexed <code>item</code> in the repeat is first deleted. Next, if that was the last <code>item</code>, then a new prototypical <code>item</code> is inserted so that the <code>repeat</code> does not become empty. The focus is then sent back to the <code>repeat</code> from the <code>trigger</code>.
</p>
<div class="exampleInner">
<pre>...
&lt;trigger&gt;
  &lt;label&gt;Delete from purchase order&lt;/label&gt;
  &lt;action ev:event="DOMActivate"&gt;
    &lt;delete context="/purchaseOrder" ref="item" at="index('R')"/&gt;
    &lt;insert context="/purchaseOrder" if="not(item)"
                   ref="item" origin="instance('prototypes')/item"/&gt;
    &lt;setfocus control="R"/&gt;
  &lt;/action&gt;
&lt;/trigger&gt;

</pre>
</div><div class="note"><div class="prefix"><b>Note:</b></div><div>The form author could have written <code>ref="/purchaseOrder/item"</code> in the <code>delete</code> action, but the <code>context</code> attribute was added for consistency with the <code>insert</code> action.</div></div>
<div class="exampleOuter"><div class="exampleHead">Delete and Read-Only Content</div><div class="exampleInner">
<pre>&lt;model xmlns:my="http://example.org"&gt;
  &lt;instance&gt;
    &lt;my:data&gt;
      &lt;my:name&gt;
        &lt;my:first-name&gt;John&lt;/my:first-name&gt;
        &lt;my:last-name&gt;Doe&lt;/my:last-name&gt;
      &lt;/my:name&gt;
      &lt;my:address&gt;
        &lt;my:street&gt;123 Main St.&lt;/my:street&gt;
        &lt;my:city&gt;Smallville&lt;/my:city&gt;
      &lt;/my:address&gt;
    &lt;/my:data&gt;
  &lt;/instance&gt;

  &lt;bind ref="my:name" readonly="true()"/&gt;
  &lt;bind ref="my:address/my:street" readonly="true()"/&gt;

  &lt;action ev:event="xforms-model-construct-done"&gt;
      &lt;delete id="D1" ref="my:name/*" ... /&gt;
      &lt;delete id="D2" ref="my:address/my:street" at="1" &gt;
      &lt;delete id="D3" ref="my:address" at="1" &gt;
  &lt;/action&gt;
&lt;/model&gt;
</pre>
</div>
<p>Delete D1 fails because it attempts to delete from the content of a readonly node (<code>my:name</code>). Delete D2 succeeds even though the node to delete is readonly because the node is not being changed, but rather removed from the content of the parent, which is not readonly. Delete D3 succeeds even though it contains a readonly node because a node can be deleted if its parent is not readonly, and node deletion includes deletion of its attributes and content, regardless of whether or not the attributes or content nodes are readonly.
</p>
</div>
<p>See Appendix <a href="#Patterns_for_Data_Mutations" title="">Patterns for Data Mutations</a> for numerous further usage patterns for <code>sevalue</code>, <code>insert</code> and <code>delete</code>.
</p>
</div><div class="div2">
<a id="The_setindex_Element" name="The_setindex_Element"></a><h3> <span class="mw-headline">11.5 <span id="action-setindex">The setindex Element</span></span></h3>
<p>This XForms Action begins by invoking the <a href="#action-deferred-update-behavior" title="">deferred update behavior</a>. This action then marks a specific item as current in a repeating sequence (within <a href="#The_repeat_Element" title="">The repeat Element</a>).
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> repeat
</dt><dd> Required reference to a repeating element.
</dd><dt> index
</dt><dd> Required expression that evaluates to a 1-based offset into the sequence. The evaluation context is determined in the same manner as the evaluation context for a Single Item Binding (see <a href="#Evaluation_Context" title="">Evaluation Context</a>).
</dd></dl>
<p>If the selected index value evaluates to <code>NaN</code>, this action has no effect. Otherwise, the selected index is adjusted by rounding to the nearest integer. If the repeat collection is non-empty and the selected index less than 1, then the new index will be 1.  If the selected index is greater than the size of the repeat collection, then the new index will be the size of the repeat index.  
</p><p>If the repeating element has an <code>indexref</code> expression that indicates an instance node, then the new index is placed into the node by a <code>setvalue</code> action.  If the node is readonly, then the <code>setvalue</code> is not performed and this action has no effect.
</p><p>The repeat index for the repeat collection is changed to the new index. If the rounded selected index is 0 or less and the repeat collection is non-empty, an <code>xforms-scroll-first</code> event is dispatched and the index is set to 1. If the rounded selected index is greater than the index of the last repeat item and the repeat collection is non-empty, an <code>xforms-scroll-last</code> event is dispatched.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The IDREF from the <code>repeat</code> attribute may not uniquely identify the desired <a href="#ui-repeat" title="">repeat</a> if the <code>repeat</code> element bearing the matching ID resides within the content of another <code>repeat</code>. The general method described in <a href="#Resolving_ID_References_in_XForms" title="">Resolving ID References in XForms</a> is used to determine the desired run-time repeat object.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a> by performing deferred update in its initialization and by setting the deferred update flags for recalculate, revalidate and refresh (because the implicit instance node for the repeat index is modified).
</p>
</div></div><div class="div2">
<a id="The_toggle_Element" name="The_toggle_Element"></a><h3> <span class="mw-headline">11.6 <span id="action-toggle">The toggle Element</span></span></h3>
<p>This XForms Action begins by invoking the <a href="#action-deferred-update-behavior" title="">deferred update behavior</a>. This action then selects one possible case from an exclusive list of alternatives in a <code>switch</code>.
</p><p>This action performs the following:
</p>
<ol><li> Dispatches an <code>xforms-deselect</code> event to the currently selected <code>case</code> in the <code>switch</code> containing the identified <code>case</code>.
</li><li> Adjusts the <code>selected</code> states (not the attribute values) on the affected cases to reflect the new state of the <code>switch</code> containing the identified <code>case</code>.
</li><li> Dispatches an <code>xform-select</code> event to the <code>case</code> just selected.
</li></ol>
<p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> case
</dt><dd> Author-optional reference to a <code>case</code> element. The <a href="#ui-case" title="">case</a> to select is specified by this attribute or by the child element <a href="#action-toggle-case" title="">case</a>.
</dd></dl>
<p>The <code>case</code> to be selected by the <code>switch</code> is identified by IDREF either by the attribute <code>case</code> or by a child <a href="#action-toggle-case" title="">case</a> element. If no <code>case</code> element contains the given identifier, then this action has no effect.  
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Whether the IDREF is obtained from the <code>case</code> attribute or element, the IDREF may not uniquely identify the desired <a href="#ui-case" title="">case</a> if the <code>case</code> element bearing the matching ID resides in a repeating construct such as element <code>repeat</code>. The general method described in <a href="#Resolving_ID_References_in_XForms" title="">Resolving ID References in XForms</a> is used to determine the desired run-time case object.
</p><p>If the <code>switch</code> that contains the identified <code>case</code> specifies the <code>caseref</code> attribute, then the behavior of this action is associated with the ability to successfully perform a <code>setvalue</code> on the node indicated by the <code>caseref</code>.  If the <code>caseref</code> does not indicate a node or if the node is readonly, then this action has no effect.  Otherwise, the node value is changed to the IDREF value obtained above, which then results in the three toggle steps described above.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a>. If this action has an effect, then deferred update is performed in its initialization.  Also, if this action performs a <code>setvalue</code>, then this action sets the deferred update flags for recalculate, revalidate and refresh.
</p>
</div><div class="div3">
<a id="The_case_Element_Child_of_the_toggle_Element" name="The_case_Element_Child_of_the_toggle_Element"></a><h4> <span class="mw-headline">11.6.1 <span id="action-toggle-case">The case Element Child of the toggle Element</span></span></h4>
<p>This section defines a child element of <code>toggle</code> named <code>case</code> (deprecated in favor of using an AVT in the case attribute) that is an alternate means of providing the identity of a <a href="#ui-case" title="">case</a> element to select with a <a href="#ui-switch" title="">switch</a>.
</p><p>Element: <code>case</code>
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the <a href="#ui-case" title="">case</a> identity, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>Content: PCDATA
</p><p>The <a href="#ui-case" title="">case</a> to be selected by the <code>toggle</code> action is given by the <code>case</code> attribute or the <code>case</code> element. If both are given, the element takes precedence. Due to the addition of the element, the <code>case</code> attribute is no longer required, but either the <code>case</code> attribute or the <code>case</code> element must appear. The <code>case</code> element can provide the identity of a <a href="#ui-case" title="">case</a> with either its string content or the <code>value</code> attribute. If both are given, then the <code>value</code> attribute takes precedence.
</p>
<div class="exampleOuter"><div class="exampleInner">
<pre>&lt;toggle&gt;
   &lt;case value="concat('case_', ../addressBlockType)"/&gt;
&lt;/toggle&gt;
</pre>
</div></div></div></div><div class="div2">
<a id="The_setfocus_Element" name="The_setfocus_Element"></a><h3> <span class="mw-headline">11.7 <span id="action-setfocus">The setfocus Element</span></span></h3>
<p>This XForms Action begins by invoking the <a href="#action-deferred-update-behavior" title="">deferred update behavior</a>. This action then dispatches an <code>xforms-focus</code> event (<a href="#The_xforms-focus_Event" title="">The xforms-focus Event</a>) to the element identified by attribute <code>control</code> or child element <code>control</code>.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> control
</dt><dd> Author-optional reference to a <a href="#def-form-control" title="">form control</a>. The form control is specified by this attribute or by the child element <a href="#action-setfocus-control" title="">control</a>.
</dd></dl>
<p>The identity of the element to which the <code>setfocus</code> action dispatches <code>xforms-focus</code> is given by the <code>control</code> attribute or the <a href="#action-setfocus-control" title="">control</a> element. If no such element contains the given identifier, then this action has no effect.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Whether the IDREF is obtained from the <code>control</code> attribute or element, the IDREF may not uniquely identify the desired form control if the element bearing the matching ID resides in a repeating construct such as element <code>repeat</code>. The general method described in <a href="#Resolving_ID_References_in_XForms" title="">Resolving ID References in XForms</a> is used to determine the desired form control.
</p>
</div><div class="note">
<p><b>Note:</b>
</p><p>Changing the focus to a form control within a repeat object may cause one or more repeat index values to be changed as described in Section <a href="#User_Interface_Interaction" title="">User Interface Interaction</a>.
</p>
</div><div class="div3">
<a id="The_control_Element_Child_of_the_setfocus_Element" name="The_control_Element_Child_of_the_setfocus_Element"></a><h4> <span class="mw-headline">11.7.1 <span id="action-setfocus-control">The control Element Child of the setfocus Element</span></span></h4>
<p>This section defines a child element of <code>setfocus</code> named <code>control</code> (deprecated in favor of using an AVT in the control attribute) that is an alternate means of providing the element that receives the <code>xforms-focus</code> event.
</p><p>Element: <code>control</code>
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the desired element identifier, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>Content: PCDATA
</p><p>The identity of the element to which the <code>setfocus</code> action dispatches <code>xforms-focus</code> is given by the <code>control</code> attribute or the <code>control</code> element. If both are given, the element takes precedence. Due to the addition of the element, the <code>control</code> attribute is no longer required, but either the <code>control</code> attribute or the <code>control</code> element must appear. The <code>control</code> element can provide the desired element identifier with either its string content or the <code>value</code> attribute. If both are given, then the <code>value</code> attribute takes precedence.
</p>
<div class="exampleOuter"><div class="exampleInner">
<pre>&lt;setfocus&gt;
	&lt;control value="concat('input_', ../paymentType)"/&gt;
&lt;/setfocus&gt;
</pre>
</div></div></div></div><div class="div2">
<a id="The_dispatch_Element" name="The_dispatch_Element"></a><h3> <span class="mw-headline">11.8 <span id="action-dispatch">The dispatch Element</span></span></h3>
<p>This action dispatches an XML Event to a specific target element. Two kinds of event can be dispatched:
</p>
<ol><li> Predefined XForms events (i.e., xforms-<i>event-name</i>), in which case the <code>bubbles</code> and <code>cancelable</code> attributes are ignored and the standard semantics as defined in <a href="#Processing_Model" title="">Processing Model</a> apply.
</li><li> An event created by the XForms author with no predefined XForms semantics and as such not handled by default by the XForms Processor.
</li></ol>
<p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> name
</dt><dd> Author-optional attribute for specifying the name of the event to dispatch.
</dd><dt> targetid
</dt><dd> Author-optional attribute for specifying the reference to the event target.
</dd><dt> delay
</dt><dd> Author-optional attribute that indicates the minimum number of milliseconds to delay dispatching of the event to the target. The default is the empty string, which indicates no delay.
</dd><dt> bubbles
</dt><dd> Author-optional attribute containing a boolean indicating if this event bubbles &mdash; as defined in [<a href="#ref-dom2-events" title="">DOM2 Events</a>]. The default value is <code>true</code> for a custom event. For predefined events, this attribute has no effect.
</dd><dt> cancelable
</dt><dd> Author-optional attribute containing a boolean indicating if this event is cancelable &mdash; as defined in [<a href="#ref-dom2-events" title="">DOM2 Events</a>]. The default value is <code>true</code> for a custom event. For predefined events, this attribute has no effect.
</dd></dl>
<p>The event to be dispatched is given by the <code>name</code> attribute or the <a href="#The_name_Child_Element" title="">name</a> child element. Due to the addition of the <code>name</code> element, the <code>name</code> attribute is not required, but either the <code>name</code> attribute or the <code>name</code> element must appear. If the event name is not specified or empty string, then this action has no effect.
</p><p>The element to which the event is to be dispatched is identified by the <code>targetid</code> attribute or the <a href="#The_targetid_Child_Element" title="">targetid</a> child element. Due to the addition of the <code>targetid</code> element, the <code>targetid</code> attribute is not required, but this action has no effect unless the target identifier is specified by the element or attribute. For backwards compatibility with documents created for earlier versions of the specification, the processor of the <code>dispatch</code> element <a href="#intro-reading" title="">may</a> allow the attribute named <code>target</code> and the child element <code>target</code> to be used. The attribute and element named <code>target</code> provide exactly the same behaviors as the <code>targetid</code> attribute and element, except that the <code>target</code> attribute and element are ignored if the <code>dispatch</code> element also bears a <code>targetid</code> attribute or contains a <code>targetid</code> child element.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Whether the IDREF is obtained from the <code>targetid</code> attribute or <code>targetid</code> element, the IDREF may not uniquely identify the desired target object if the element bearing the matching ID resides in a repeating construct such as element <code>repeat</code>. The general method described in <a href="#Resolving_ID_References_in_XForms" title="">Resolving ID References in XForms</a> is used to determine the desired target object.
</p>
</div>
<p>The event may be dispatched immediately or after a specified non-negative number of milliseconds of delay. The event delay is specified the <code>delay</code> attribute or by the child element <a href="#The_delay_Child_Element" title="">delay</a>. If the delay is not specified or if the given value does not conform to <code>xsd:nonNegativeInteger</code>, then the event is dispatched immediately as the result of the <code>dispatch</code> action. Otherwise, the specified event is added to the delayed event queue unless an event with the same name and target element already exists on the delayed event queue. The <code>dispatch</code> action has no effect if the event delay is a non-negative integer and the specified event is already in the delayed event queue.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Since an element bearing a particular ID may be repeated, the delayed event queue may contain more than one event with the same name and target IDREF. It is the name and the target <b>run-time element</b> that must be unique.
</p>
</div>
<p>If a run-time element is destroyed, then any delayed events targeted at that element are removed from the delayed event queue. A run-time element may be destroyed for a number of reasons, including shutdown of the form or removal of form controls associated by a <code>repeat</code> with an instance data node that is destroyed.
</p><p>As soon as possible after the specified delay in milliseconds has elapsed, the event is removed from the delayed event queue and then dispatched. In the same manner used to handle user-generated events or the completion of an asynchronous submission, the dispatch and processing of delayed events is done without interrupting the processing of another event and its event handlers.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Because the delayed event is first removed from the delayed event queue and then dispatched, a handler for a given event may dispatch the event again with a delay. This can be used to perform simple polling and asynchronous looping operations. Moreover, the <a href="#action-conditional" title="">if</a> attribute can be applied to the <code>dispatch</code> action to decide when to discontinue the polling or looping based on a setting in instance data.
</p>
</div><div class="div3">
<a id="The_name_Child_Element" name="The_name_Child_Element"></a><h4> <span class="mw-headline">11.8.1 <span id="action-dispatch-name">The name Child Element</span></span></h4>
<p>This section defines a new child element of <code>dispatch</code> (deprecated in favor of using an AVT in the name attribute) that provides an alternate means of specifying the name of the event to dispatch.
</p><p>Element: <code>name</code>
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the event name, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>Content: PCDATA
</p><p>The event name of the <code>dispatch</code> action is given by the <code>name</code> attribute or the <code>name</code> element. If both are given, the element takes precedence. The <code>name</code> element can provide the event name with either its string content or the <code>value</code> attribute. If both are given, then the <code>value</code> attribute takes precedence.
</p>
</div><div class="div3">
<a id="The_targetid_Child_Element" name="The_targetid_Child_Element"></a><h4> <span class="mw-headline">11.8.2 <span id="action-dispatch-targetid">The targetid Child Element</span></span></h4>
<p>This section defines a new child element of <code>dispatch</code> (deprecated in favor of using an AVT in the targetid attribute) that provides an alternate means of specifying the target of the event to be dispatched.
</p><p>Element: <code>targetid</code>
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the event target, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>Content: PCDATA
</p><p>The event target of the <code>dispatch</code> action is given by the <code>targetid</code> attribute or the <code>targetid</code> element. If both are given, the element takes precedence. The <code>targetid</code> element can provide an IDREF for the event target with either its string content or the <code>value</code> attribute. If both are given, then the <code>value</code> attribute takes precedence.
</p>
</div><div class="div3">
<a id="The_delay_Child_Element" name="The_delay_Child_Element"></a><h4> <span class="mw-headline">11.8.3 <span id="action-dispatch-delay">The delay Child Element</span></span></h4>
<p>This section defines a new child element of <code>dispatch</code> (deprecated in favor of using an AVT in the delay attribute) that provides an alternate means of specifying the delay imposed on the event to be dispatched.
</p><p>Element: <code>delay</code>
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the event delay, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. If the result does not conform lexically to <code>xsd:nonNegativeInteger</code>, then the result of empty string is used. An empty string is used if the evaluation fails.
</dd></dl>
<p>Content: PCDATA
</p><p>The event delay of the <code>dispatch</code> action is given by the <code>delay</code> attribute or the <code>delay</code> element. If both are given, the element takes precedence. The <code>delay</code> element can provide the delay with either its string content or the <code>value</code> attribute. If both are given, then the <code>value</code> attribute takes precedence.
</p>
</div><div class="div3">
<a id="The_property_Child_Element" name="The_property_Child_Element"></a><h4> <span class="mw-headline">11.8.4  The property Child Element </span></h4>
<p>An event can have extra context information. The <code>property</code> element offers the ability to add extra context information to a newly dispatched event.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt>name
</dt><dd>The name attribute specifies the name of the context information to pass.
</dd></dl>
<dl><dt>value
</dt><dd>The optional <code>value</code> attribute specifies an XPath expression returning the context information to pass. The value can be any sequence of items.
</dd></dl>
<p>The value of the extra context information can either be specified by the <code>value</code> attribute or as inline text. The <code>value</code> attribute has precedence over the inline context (i.e.: if the value attribute is specified, the result of evaluating the expression specified by the value, is used as the value for the variable).
</p>
<div class="exampleOuter"><div class="exampleHead">Example: Adding extra context information when dispatching an event</div><div class="exampleInner">
<pre>&lt;dispatch name="update-person" target="my-model"&gt;
  &lt;property name="person" value="instance('person')"/&gt;
  &lt;property name="min-age" value="21"/&gt;
  &lt;property name="new-first-name"&gt;Michelle&lt;/property&gt;
&lt;/dispatch&gt;
</pre>
</div>
<p>Using the information:
</p>
<div class="exampleInner">
<pre>&lt;action ev:event="update-person"&gt;
  &lt;insert context="..." origin="event('person')"/&gt;
  &lt;setvalue ref="..." value="event('min-age')"/&gt;
  &lt;setvalue ref="..." value="event('new-first-name')"/&gt;
&lt;/action&gt;
</pre>
</div></div>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Property child element">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Property child element</b>
</td><td align="right" valign="top" width="50%"> 2012-03-15
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> The property child element is still under debate, the syntax will probably change in the future.
</td></tr></tbody></table>
</div></div><div class="div2">
<a id="The_rebuild_Element" name="The_rebuild_Element"></a><h3> <span class="mw-headline">11.9 <span id="action-rebuild">The rebuild Element</span></span></h3>
<p>This action causes the default processing of <code>xforms-rebuild</code> to occur on the model associated with the in-scope evaluation context node of the <code>rebuild</code> element. This action bypasses the normal event flow, i.e. the behavior occurs without dispatching the <code>xforms-rebuild</code> event. This action results in the XForms Processor rebuilding any internal data structures used to track computational dependencies among instance data nodes &mdash; see <a href="#The_xforms-rebuild_Event" title="">The xforms-rebuild Event</a>.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a>.
</p><p><b>Note:</b>
</p><p>To rebuild a model other than the one associated with the in-scope evaluation context node, the <code>model</code> attribute from the <a href="#structure-attrs-common" title="">Common</a> group can be used since it changes the in-scope evaluation context node.
</p>
</div></div><div class="div2">
<a id="The_recalculate_Element" name="The_recalculate_Element"></a><h3> <span class="mw-headline">11.10 <span id="action-recalculate">The recalculate Element</span></span></h3>
<p>This action causes the default processing of <code>xforms-recalculate</code> to occur on the model associated with the in-scope evaluation context node of the <code>recalculate</code> element. This action bypasses the normal event flow, i.e. the behavior occurs without dispatching the <code>xforms-recalculate</code> event. As a result, instance data nodes whose values need to be recalculated are updated as specified in the processing model &mdash; see <a href="#The_xforms-recalculate_Event" title="">The xforms-recalculate Event</a>.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a>.
</p><p><b>Note:</b>
</p><p>To recalculate a model other than the one associated with the in-scope evaluation context node, the <code>model</code> attribute from the <a href="#structure-attrs-common" title="">Common</a> group can be used since it changes the in-scope evaluation context node.
</p>
</div></div><div class="div2">
<a id="The_revalidate_Element" name="The_revalidate_Element"></a><h3> <span class="mw-headline">11.11 <span id="action-revalidate">The revalidate Element</span></span></h3>
<p>This action causes the default processing of <code>xforms-revalidate</code> to occur on the model associated with the in-scope evaluation context node of the <code>revalidate</code> element. This action bypasses the normal event flow, i.e. the behavior occurs without dispatching the <code>xforms-revalidate</code> event. This results in the instance data being revalidated as specified by the processing model &mdash; see <a href="#The_xforms-revalidate_Event" title="">The xforms-revalidate Event</a>.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a>.
</p><p><b>Note:</b>
</p><p>To revalidate a model other than the one associated with the in-scope evaluation context node, the <code>model</code> attribute from the <a href="#structure-attrs-common" title="">Common</a> group can be used since it changes the in-scope evaluation context node.
</p>
</div></div><div class="div2">
<a id="The_refresh_Element" name="The_refresh_Element"></a><h3> <span class="mw-headline">11.12 <span id="action-refresh">The refresh Element</span></span></h3>
<p>This action causes the default processing of <code>xforms-refresh</code> to occur on the model associated with the in-scope evaluation context node of the <code>refresh</code> element. This action bypasses the normal event flow, i.e. the behavior occurs without dispatching the <code>xforms-refresh</code> event. This action results in the XForms user interface being <i>refreshed</i>, and the presentation of user interface controls being updated to reflect the state of the underlying instance data &mdash; see <a href="#The_xforms-refresh_Event" title="">The xforms-refresh Event</a>.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a>.
</p><p><b>Note:</b>
</p><p>To refresh a model other than the one associated with the in-scope evaluation context node, the <code>model</code> attribute from the <a href="#structure-attrs-common" title="">Common</a> group can be used since it changes the in-scope evaluation context node.
</p>
</div></div><div class="div2">
<a id="The_reset_Element" name="The_reset_Element"></a><h3> <span class="mw-headline">11.13 <span id="action-reset">The reset Element</span></span></h3>
<p>This action initiates reset processing by dispatching an <code>xforms-reset</code> event to the model associated with the in-scope evaluation context node of the <code>reset</code> element. Processing of event <code>xforms-reset</code> is defined in the processing model &mdash; see <a href="#The_xforms-reset_Event" title="">The xforms-reset Event</a>.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This action affects <a href="#action-deferred-updates" title="">deferred updates</a>.
</p><p><b>Note:</b>
</p><p>To reset a model other than the one associated with the in-scope evaluation context node, the <code>model</code> attribute from the <a href="#structure-attrs-common" title="">Common</a> group can be used since it changes the in-scope evaluation context node.
</p>
</div></div><div class="div2">
<a id="The_load_Element" name="The_load_Element"></a><h3> <span class="mw-headline">11.14 <span id="action-load">The load Element</span></span></h3>
<p>This action traverses the specified link.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes:
</p>
<dl><dt> resource
</dt><dd> Author-optional attribute. Link to an external resource to load.
</dd><dt> show
</dt><dd> Author-optional link behavior specifier. The allowed values are "replace", "new" and "embed". If this attribute is missing, a default value of "replace" is assumed.
</dd><dt> targetid
</dt><dd> Author-optional attribute for specifying the reference to the <code>group</code> element to be loaded if <code>show="embed"</code>.  This attribute is required and must indicate a <code>group</code> element if <code>show="embed"</code>.
</dd></dl>
<p>The URI specifying the link to traverse may be pointed to by the Single Item Binding attributes, if given, or by the <code>resource</code> attribute or the <a href="#The_resource_Element_child_of_load" title="">resource</a> child element. Individually, the Single Item Binding, <code>resource</code> element and <code>resource</code> attribute are not required. If none are given, the action has no effect. If the Single Item Binding is present and does not select an instance data node, then this action has no effect. If the Single Item Binding is given in addition to one of the <code>resource</code> attribute or <code>resource</code> element, then the action has no effect.
</p><p>The URI obtained in this manner is treated as a link to an external resource, defined as an [<a href="#ref-xlink-1.0" title="">XLink 1.0</a>] link between the <code>load</code> element and the remote resource indicated. No XLink <code>actuate</code> value is defined, since control of actuation is defined by XML Events. The XLink <code>show</code> value depends on the <code>show</code> attribute.
</p><p>The link indicated by the URI obtained above is traversed. If the link traversal fails, then an implementation-specific means of conveying the link traversal failure occurs. Otherwise, processing for the document (or portion of the document) reached by traversing the link is specified by the <code>show</code> attribute. The following are the possible values for the <code>show</code> attribute and the corresponding processing behaviors:
</p>
<dl><dt> new
</dt><dd> The document is loaded into a new presentation context, e.g., a new window. Form processing in the original window continues.
</dd><dt> replace
</dt><dd> The document is loaded into the current window. Form processing is interrupted, exactly as if the user had manually requested navigating to a new document.
</dd><dt> embed
</dt><dd> The <code>group</code> and <code>model</code> elements from the document resulting from the link traversal are embedded in the current page, with the <code>group</code> set as content of the <code>group</code> indicated by attribute <code>targetid</code> and as new <code>model</code> elements.
</dd></dl>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: load embedding events">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: load embedding events</b>
</td><td align="right" valign="top" width="50%"> 2012-02-09
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> Need to specify embed event sequence
</td></tr></tbody></table>
<p>In the case of <code>show="embed"</code>, all <code>model</code> elements in the traversed document are added to the current page and are given the xforms-model-construct event sequence (TBD).  The content of the <code>group</code> element indicated by attribute <code>targetid</code> is replaced with the content of the sole top-level <code>group</code> element in the traversed document; xforms-refresh is dispatched.  The loaded <code>group</code> may specify a model <code>id</code> of any model in the resulting page.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Note that the load action performs no special processing of <code>id</code> attributes; therefore authors should pay careful attention to avoid <code>id</code> conflicts.
</p>
</div>
<p><br />
</p>
<div class="div3">
<a id="The_resource_Element_child_of_load" name="The_resource_Element_child_of_load"></a><h4> <span class="mw-headline">11.14.1 <span id="action-load-resource">The resource Element child of load</span></span></h4>
<p>The <code>resource</code> child element of <code>load</code> is deprecated in favor of using an AVT in the resource attribute.
</p><p>When it appears as the first child element of <code>load</code>, the <code>resource</code> element provides the URI of the link, overriding the <code>resource</code> attribute. As stated above, the <code>load</code> action has no effect if both a <code>resource</code> and a Single Item Binding are given. This element allows the URI used by the <code>load</code> to be dynamically calculated based on instance data.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> value
</dt><dd> Author-optional attribute containing an expression to evaluate using the in-scope evaluation context. To obtain the URI, the result of the expression is processed as if by call to the <code>string</code> conversion function as described in the <a href="#def-expression-module" title="">expression module</a>. An empty string is used if the evaluation fails.
</dd></dl>
<p>Content: PCDATA
</p><p>The URI to be used by the <code>load</code> can be specified with either the <code>value</code> attribute or the string content of the <code>resource</code> element. If both are specified, then the <code>value</code> attribute takes precedence. If the <code>load</code> does not have a <code>resource</code> element as its first child, then the URI is obtained from the <code>resource</code> attribute or the Single Item Binding, if given.
</p>
<a id="The_unload_Element" name="The_unload_Element"></a><h3> <span class="mw-headline">11.15 <span id="action-unload">The unload Element</span></span></h3>
<p>This action reverses the effect of the <code>load</code> action with attribute <code>show="embed"</code> on the same <code>targetid</code>.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> targetid
</dt><dd> Author-optional attribute for specifying the reference to the <code>group</code> element to be unloaded.
</dd></dl>
<p>If the <code>group</code> contains content that was previously loaded by the <code>load</code> element with <code>show="embed"</code>, that content and associated model content is removed.  If not, the <code>unload</code> action has no effect.
</p>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: unload event sequence">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: unload event sequence</b>
</td><td align="right" valign="top" width="50%"> 2012-02-09
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> Need to specify event sequence
</td></tr></tbody></table>
</div></div><div class="div2">
<a id="The_send_Element" name="The_send_Element"></a><h3> <span class="mw-headline">11.16 <span id="action-send">The send Element</span></span></h3>
<p>This action initiates submit processing by dispatching an <code>xforms-submit</code> event. Processing of event <code>xforms-submit</code> is defined in the processing model &mdash; see <a href="#The_xforms-submit_Event" title="">The xforms-submit Event</a>.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> submission
</dt><dd> Author-optional attribute containing a reference to a <code>submission</code> element. If this attribute is given but does not identify a <code>submission</code> element, then the <code>send</code> action has no effect. If this attribute is omitted, then the first <code>submission</code> in document order from the <code>model</code> associated with the in-scope evaluation context is used.
</dd></dl>
</div><div class="div2">
<a id="The_message_Element" name="The_message_Element"></a><h3> <span class="mw-headline">11.17 <span id="action-message">The message Element</span></span></h3>
<p>This action encapsulates a message to be displayed to the to the user.
</p><p>Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>, <a href="#structure-attrs-single-node" title="">Single Item Binding</a> (author-optional)
</p><p>Special Attributes:
</p>
<dl><dt> level
</dt><dd> Author-optional attribute containing a message level identifier, one of ("ephemeral"|"modeless"|"modal"|<a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a>). The default is "modal" if the attribute is not specified. This specification does not define behavior for <a href="#def-QNameButNotNCName" title="">QNameButNotNCName</a> values.
</dd></dl>
<p>The message specified can exist in instance data or as inline text. If more than one source of message is specified in this element, the order of precedence is: Single Item Binding attributes, inline text.
</p><p>The user interface for the <code>message</code> action is considered to be created at the time the action occurs. If the message is obtained from the inline content of the <code>message</code> action, then the output of any <code>output</code> controls in the <code>message</code> content is determined based on the instance data available when the <code>message</code> action occurs. For example, the following example displays the message <code>Hello, world!</code> as the form starts up:
</p>
<div class="exampleInner">
<pre>&lt;model&gt;
     &lt;instance&gt;
         &lt;data xmlns=""&gt;
             &lt;name&gt;John&lt;/name&gt;
         &lt;/data&gt;
     &lt;/instance&gt;

     &lt;action ev:event="xforms-ready"&gt;
         &lt;setvalue ref="name"&gt;world&lt;/setvalue&gt;
         &lt;message level="modal"&gt;Hello, &lt;output ref="name"/&gt;!&lt;/message&gt;
  ...&lt;/action&gt;
&lt;/model&gt;
</pre>
</div>
<p>In this example, the message includes the latest user input even though other form controls not in the <code>message</code> action are not guaranteed to be updated until the end of the <code>xforms-refresh</code> event processing:
</p>
<div class="exampleInner">
<pre>&lt;input ref="birthday"&gt;
     &lt;label&gt;Enter birthday:&lt;/label&gt;
     &lt;message ev:event="xforms-invalid"&gt;&lt;output ref="."/&gt; isn't a valid birthday&lt;/message&gt;
&lt;/input&gt;
</pre>
</div><div class="note">
<p><b>Note:</b>
</p><p>Due to deferred update behavior, if a <code>message</code> action is preceded in an action sequence by other actions that change instance nodes, and the message references nodes that are computationally dependent on the changed nodes, then the form author should invoke the <code>recalculate</code> action before the <code>message</code> action. Moreover, if the computational dependencies involved nodes that were inserted or deleted, then the form author should invoke <code>rebuild</code> prior to the <code>recalculate</code>.
</p>
</div>
<a id="Modal_messages" name="Modal_messages"></a><h4> <span class="mw-headline">11.17.1 <span id="action-message-modal">Modal messages</span></span></h4>
<p>With <code>level="modal"</code>, further user interface operations are blocked until the message is explicitly dismissed by the user.
</p><p>An XForms processor should support styling of modal messages in the host language integration. 
</p><p>A graphical browser might render a modal message as follows:
</p>
<div class="exampleInner">
<pre>&lt;model&gt;
  &lt;message level="modal" ev:event="xforms-ready"&gt;This is not a drill!&lt;/message&gt;
  ...
&lt;/model&gt;
</pre>
</div>
<p><img alt="An alert popup, with a warning message." border="0" height="100" src="images/ui-input-with-alert.png" width="300" />
</p>
<a id="Modeless_messages" name="Modeless_messages"></a><h4> <span class="mw-headline">11.17.2 <span id="action-message-modeless">Modeless messages</span></span></h4>
<p>A modeless message is presented until explicitly dismissed, but does not inhibit other user interface operations. An XForms processor should support styling of ephemeral messages in the host language integration.
</p><p>In this example, the message suggests user action, but does not require it, so interrupting other user interface operations would be obtrusive.
</p><p>A graphical browser might render a modeless message as follows:
</p>
<div class="exampleInner">
<pre>&lt;secret ref="/login/password"&gt;
  &lt;label&gt;Password:&lt;/label&gt;
  &lt;message level="modeless" ev:event="xforms-value-changed" if="length(.) &gt; 3 
                                                                and matches(., '[A-Z]+$') 
                                                                and not(matches(., '[a-z]+'))"&gt;
     Is your caps-lock key on?
  &lt;/message&gt;
&lt;/secret&gt;
</pre>
</div>
<p><img alt="A password text entry form controls, with a tooltip below, reading 'Is your caps-lock key on?'" border="0" height="64" src="images/ui-message-modeless.png" width="275" />
</p>
<a id="Ephemeral_messages" name="Ephemeral_messages"></a><h4> <span class="mw-headline">11.17.3 <span id="action-message-ephemeral">Ephemeral messages</span></span></h4>
<p>An ephemeral message is presented only briefly, and need not be explicitly dismissed.  An XForms processor should support styling of ephemeral messages in the host language integration. 
</p><p>In this example, the message appears briefly when a submit control is activated, offering an encouraging message.
</p>
<div class="exampleInner">
<pre>&lt;group&gt;
  &lt;label&gt;Change of Address:&lt;/label&gt;
    &lt;input ref="name"&gt;
      &lt;label&gt;Name: &lt;/label&gt;
      &lt;hint appearance="minimal"&gt;Last, First&lt;/hint&gt;
    &lt;/input&gt;
    &lt;input ref="website"&gt;
      &lt;label&gt;Website: &lt;/label&gt;
      &lt;hint appearance="minimal"&gt;http://&lt;/hint&gt;
    &lt;/input&gt;
    &lt;submit submission="apply"&gt;
      &lt;label&gt;Apple&lt;/label&gt;
      &lt;message level="ephemeral" ev:event="DOMActivate"&gt;Don't forget to write!&lt;/message&gt;
    &lt;/submit&gt;
&lt;/group&gt;
</pre>
</div>
<p>A graphical browser might render an ephemeral message as follows:
</p><p><img alt="A group of text entry form controls, with a mouse pointer visible on a submit button, and a tooltip below, reading 'Dont' forget to write!'" border="0" height="166" src="images/ui-message-ephemeral.png" width="292" />
</p>
</div><div class="div2">
<a id="The_script_Element" name="The_script_Element"></a><h3> <span class="mw-headline">11.18 <span id="action-script">The script Element</span></span></h3>
<p>This action is used to execute a script, the script implementation may either be embedded inline or may be imported from an external file using the <code>src</code> attribute.
</p><p><br />
Common Attributes: <a href="#structure-attrs-common" title="">Common</a>, <a href="#action-xmlevents" title="">Events</a>, <a href="#attrs-action-common" title="">Action Common</a>
</p><p>Special Attributes:
</p>
<dl><dt> type
</dt><dd> The attribute <code>type</code> gives the language of the script, its value must be a valid MIME type. The supported languages depend on the XForms processor (an implementation may choose to support no languages at all). It is an <a href="#The_xforms-script-language-not-supported-exception_Event" title="">xforms-script-language-not-supported-exception</a>, if the action is executed and the languages is not supported.
</dd></dl>
<dl><dt> src
</dt><dd> Author-optional attribute <code>src</code> identifies an external resource that provides the script implementation. If the link traversal fails, it is treated as an exception (<a href="#The_xforms-link-exception_Event" title="">The xforms-link-exception Event</a>).
</dd></dl>
<dl><dt>charset
</dt><dd> Author-optional attribute <code>charset</code> specifies the encoding of the remote resource identified by the <code>src</code> attribute.
</dd></dl>
<p>If the <code>src</code> attribute is given, then it takes precedence over inline content, and the script implementation for the script is obtained from the link. If the <code>src</code> attribute is omitted, then the script implementation for the script is obtained from inline content.
</p><p>It is an <a href="#The_xforms-script-exception_Event" title="">xforms-script-exception</a>, if the action is executed and the script implementation is not confirm the language specification or an exception occurs during the execution of the script.
</p>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: parameters">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: parameters</b>
</td><td align="right" valign="top" width="50%"> 2012-03-08
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> We need a way to access defined variables, the current context item, position and size. Proposal make them available as name spaced variables, for javascript: XForms.var.{variable-name}, XForms.context.item, XForms.context.position, XForms.context.size
</td></tr></tbody></table>
<div class="exampleOuter"><div class="exampleHead">Script action</div><div class="exampleInner">
<pre>&lt;script type="text/javascript"&gt;
  foo();
&lt;/script&gt;
</pre>
</div></div></div><div class="div2">
<a id="Conditional_Execution_of_XForms_Actions" name="Conditional_Execution_of_XForms_Actions"></a><h3> <span class="mw-headline">11.19 <span id="action-conditional">Conditional Execution of XForms Actions</span></span></h3>
<p>The <code>if</code> attribute can be added to any XForms action. It contains an expression that is evaluated using the in-scope evaluation context before the action is executed. The result of the expression is converted to a <code>boolean</code> as described in the the <a href="#def-expression-module" title="">expression module</a>. If the converted result of the expression evaluates to <code>false</code>, then the action is not performed. If the converted result is <code>true</code>, then the action is performed.
</p><p>If this attribute is applied to an XForms <code>action</code> element and the converted result of evaluation is <code>false</code>, then all of the actions within the <code>action</code> element are omitted from the execution of the XForms action sequence that invoked the <code>action</code> element. If the result is <code>true</code>, then the contained actions are performed according to the normal processing rules such as deferred update behavior and applicability of conditional and iterative attributes.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>In actions <code>insert</code> and <code>delete</code>, the attribute <code>context</code> is evaluated before the <code>if</code> attribute.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Automatic Focus Advancement</div>
<p>The <code>setfocus</code> action in each input control is executed only if the node bound to the control is a number of a particular length. The exacting form author could perform further validity tests.
</p>
<div class="exampleInner">
<p><br /> 
</p>
<pre>...
&lt;input ref="areaCode" id="AreaCodeControl" incremental="true"&gt;
	&lt;label&gt;Area Code&lt;/label&gt;
	&lt;setfocus ev:event="xforms-value-changed" control="ExchangeControl" 
	 	if="string-length(.)=3 and . &gt; 0"/&gt;
&lt;/input&gt;
&lt;input ref="exchange" id="ExchangeControl" incremental="true"&gt;
	&lt;label&gt;Exchange&lt;/label&gt;
	&lt;setfocus ev:event="xforms-value-changed" control="LocalControl" 
	 	if="string-length(.)=3 and . &gt; 0"/&gt;
&lt;/input&gt;
&lt;input ref="local" id="LocalControl" incremental="true"&gt;
	&lt;label&gt;Local&lt;/label&gt;
	&lt;setfocus ev:event="xforms-value-changed" control="ExtensionControl" 
	 	if="string-length(.)=4 and . &gt; 0"/&gt;
&lt;/input&gt;
...
</pre>
</div></div><div class="exampleOuter"><div class="exampleHead">Handling Focus for Empty Repeats</div>
<p>The trigger that performs a delete conditionally sets the focus to a control outside of the repeat if the repeat becomes empty due to the deletion. The <code>setfocus</code> is called first because the <code>delete</code> removes the context node.
</p>
<div class="exampleInner">
<p><br /> 
</p>
<pre>...
&lt;trigger id="InsertControl"&gt;
	&lt;label&gt;Insert Row&lt;/label&gt;
	&lt;action ev:event="DOMActivate"&gt;
		&lt;insert context="purchaseOrder/lines" ref="line"
				at="index('PurchaseOrderRepeat')" origin="instance('prototype')"/&gt;
		&lt;setfocus control="PurchaseOrderRepeat"/&gt;
	&lt;/action&gt;
&lt;/trigger&gt;
&lt;repeat ref="purchaseOrder/lines/line" id="PurchaseOrderRepeat"&gt;
	...
	&lt;trigger&gt;
		&lt;label&gt;Delete Row&lt;/label&gt;
		&lt;action ev:event="DOMActivate"&gt;
			&lt;setfocus control="InsertControl" if="last()=1"/&gt;
			&lt;delete ref="../line" at="index('PurchaseOrderRepeat')"/&gt;
		&lt;/action&gt;
	&lt;/trigger&gt;
	...
&lt;/repeat&gt;
</pre>
</div></div></div><div class="div2">
<a id="The_while_attribute" name="The_while_attribute"></a><h3> <span class="mw-headline">11.20 <span id="action-iterated">The <code>while</code> attribute</span></span></h3>
<p>The <code>while</code> attribute can be added to any XForms action. It contains an expression that is evaluated using the in-scope evaluation context before the action is executed. The result of the expression is converted to a <code>boolean</code> as described in the <a href="#def-expression-module" title="">expression module</a>. If the converted result of the expression is <code>true</code>, then the XForms action is performed and then the expression is re-evaluated. The XForms action is executed repeatedly until the converted result of the expression evaluates to <code>false</code>.
</p><p>If this attribute is applied to an XForms <code>action</code> element, then the sequence of XForms actions in its content are executed repeatedly once for each time the immediately preceding evaluation of the expression yields a result of <code>true</code>.
</p><p>When XForms actions are iteratively executed, they are still subject to the normal action processing rules such as deferred update and applicability of conditional and iterative attributes.
</p><p>An XForms action may be executed zero times due to this attribute. Furthermore, if an action bears this attribute and the <code>if</code> attribute, then the expressions of both attributes must evaluate to <code>true</code> before each iterative execution of the action.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>In actions <code>insert</code> and <code>delete</code>, the attribute <code>context</code> is evaluated before the <code>while</code> attribute. Therefore, <code>context</code> is re-evaluated before each iteration of the actions controlled by the <code>while</code> attribute.
</p>
</div><div class="exampleOuter"><div class="exampleHead">Summing Selected Results</div>
<p>Counter and accumlator variables are created in instance data to sum a selection of values chosen by the user
</p>
<div class="exampleInner">
<pre>&lt;trigger&gt;
   &lt;label&gt;Get Sum&lt;/label&gt;
   &lt;action ev:event="DOMActivate"&gt;
      &lt;setvalue ref="instance('temps')/counter" value="1"/&gt;
      &lt;setvalue ref="instance('temps')/accumulator" value="0"/&gt;
      &lt;action while="instance('temps')/counter &lt;= count(/some/nodes)"&gt;
         &lt;setvalue ref="instance('temps')/accumulator"
                   value=". + instance('default')/some/nodes[number(instance('temps')/counter)]"
                   if="boolean-from-string(/some/nodes[number(instance('temps')/counter)]/@selected)"/&gt;
         &lt;setvalue ref="instance('temps')/counter" value=". + 1"/&gt;
      &lt;/action&gt;
   &lt;/action&gt;
&lt;/trigger&gt;
</pre>
</div></div></div><div class="div2">
<a id="The_iterate_attribute" name="The_iterate_attribute"></a><h3> <span class="mw-headline">11.21 <span id="action-iterate-attribute">The <code>iterate</code> attribute</span></span></h3>
<p>The <code>iterate</code> attribute can be added to any XForms action. It contains an expression that is evaluated once using the in-scope evaluation context before the action is executed, which will result in a sequence of items. The action will be executed with each item in the sequence as its context. This context replaces the default in scope evaluation context.
</p><p><br />
</p>
<div class="exampleOuter"><div class="exampleHead">Delete all selected nodes</div><div class="exampleInner">
<pre> &lt;xforms:delete nodeset="." at="1" iterate="node[@selected='true']"/&gt;
</pre>
</div></div>
<p><br />
</p>
<div class="note"><div class="prefix"><b>Note:</b></div><p>Notice that the iterate changes the evaluation context for <code>if</code> and <code>while</code> attributes. Also notice the <code>iterate</code> attribute is evaluated before any of the two.</p></div>
<div class="note"><div class="prefix"><b>Note:</b></div><p>Because the iterate expression is evaluated once using the in-scope evaluation context, before the action is executed, the action will be executed for nodes that are deleted, from their instance, by the action or its descendent actions. A deleted node no longer belongs to a document, you can use this characteristic in the if attribute to skip deleted nodes if you want to skip deleted nodes.</p></div>
</div>
<a id="Actions_from_Other_Modules" name="Actions_from_Other_Modules"></a><h3> <span class="mw-headline">11.22 <span id="action-other">Actions from Other Modules</span></span></h3>
<p>Of the action handlers detailed in this chapter, XForms defines some to be part of the XForms Switch and Repeat modules: <a href="#The_toggle_Element" title="">The toggle Element</a> and <a href="#The_setindex_Element" title="">The setindex Element</a>.
</p>
</div></div>
<div class="div1">
<a id="Conformance" name="Conformance"></a><h2> <span class="mw-headline">12 <span id="conform">Conformance</span></span></h2>
<div class="div2">
<a id="Conforming_XForms_Documents" name="Conforming_XForms_Documents"></a><h3> <span class="mw-headline">12.1 <span id="conform-desc-documents">Conforming XForms Documents</span></span></h3>
<p>All XForms Containing Documents <a href="#intro-reading" title="">must</a> conform to the following specifications, except as qualified below:
</p>
<ul><li> [<a href="#ref-xml-1.0" title="">XML 1.0</a>]
</li><li> [<a href="#ref-xml-names" title="">XML Names</a>]
</li><li> [<a href="#ref-xpath-1.0" title="">XPath 1.0</a>]
</li><li> [<a href="#ref-xml-events" title="">XML Events</a>]
</li><li> [<a href="#ref-xschema-2" title="">XML Schema part 2</a>]
</li></ul>
<p>XForms elements are typically inserted into a containing document in multiple places. The root element for each individual fragment of XForms <a href="#intro-reading" title="">must</a> be <code>model</code>, a <a href="#elems-form-controls" title="">core form control</a>, <code>group</code>, <code>repeat</code>, or <code>switch</code>. Individual XForms fragments are expected to be schema-valid according to the Schema for XForms (<a href="#Schema_for_XForms_.28Non-Normative.29" title="">Schema for XForms</a>), except that the host language <a href="#intro-reading" title="">may</a> add elements of its own namespace to the content models of the following elements: <code>group</code>, <code>repeat</code>, <code>case</code>, <code>label</code>, <code>help</code>, <code>hint</code>, <code>alert</code> and <code>message</code>. .
</p><p>A <a href="#def-host-language" title="">host language</a> <a href="#intro-reading" title="">may</a> introduce additional conformance requirements.
</p>
</div><div class="div2">
<a id="Conforming_XForms_Generators" name="Conforming_XForms_Generators"></a><h3> <span class="mw-headline">12.2 <span id="conform-desc-generators">Conforming XForms Generators</span></span></h3>
<p>XForms generators <a href="#intro-reading" title="">should</a> generate conforming XForms documents.
</p>
</div><div class="div2">
<a id="Base_Technologies_for_XForms_Processors" name="Base_Technologies_for_XForms_Processors"></a><h3> <span class="mw-headline">12.3 <span id="xforms-base-tech">Base Technologies for XForms Processors</span></span></h3>
<p>The following are base technologies for XForms. An <a href="#def-xforms-processor" title="">XForms Processor</a> therefore <a href="#intro-reading" title="">must</a> conform to the following specifications, except as qualified below:
</p>
<ul><li> [<a href="#ref-xml-1.0" title="">XML 1.0</a>]
</li><li> [<a href="#ref-xml-names" title="">XML Names</a>]
</li><li> [<a href="#ref-xpath-1.0" title="">XPath 1.0</a>]
</li><li> [<a href="#ref-xml-events" title="">XML Events</a>] (not all aspects are <a href="#intro-reading" title="">required</a>)
</li><li> [<a href="#ref-xschema-2" title="">XML Schema part 2</a>]
</li></ul>
</div><div class="div2">
<a id="Conformance_Levels" name="Conformance_Levels"></a><h3> <span class="mw-headline">12.4 <span id="conform-levels">Conformance Levels</span></span></h3>
<p>XForms is a generalized XML processing language. Therefore, the XForms specification is intended for implementation on hardware platforms of all sizes, from tiny hand-held devices to high-powered servers. This section describes two main levels of conformance that are useful in varied scenarios.
</p>
<div class="div3">
<a id="XForms_Model" name="XForms_Model"></a><h4> <span class="mw-headline">12.4.1 <span id="conform-levels-model">XForms Model</span></span></h4>
<p>This conformance level is distinguished by the processor's <code>property()</code> function returning a string beginning with <code>"model"</code> for the <code>conformance-level</code> property.
</p><p>An XForms <code>model</code> can contain or reference XML schemas, XForms <code>instance</code> elements, XForms <code>bind</code> elements, XForms <code>submission</code> elements, and XForms actions. XForms <code>submission</code> elements can also contain XForms actions.
</p><p>An <span id="conform-model-processor"><b>XForms Model Processor</b></span> is a reduced functionality <a href="#def-xforms-processor" title="">XForms Processor</a> with required, recommended and optional features described in this section.
</p><p>An <a href="#conform-model-processor" title="">XForms Model Processor</a> <a href="#intro-reading" title="">must</a> support all attributes of the <code>model</code> element. The processor <a href="#intro-reading" title="">must</a> support the valid attributes and content of the <code>instance</code> element, and it <a href="#intro-reading" title="">should</a> support the notification events <code>xforms-insert</code> and <code>xforms-delete</code>. The processor <a href="#intro-reading" title="">must</a> support all attributes, content and other aspects of <code>bind</code> elements, except <code>p3ptype</code> support is <a href="#intro-reading" title="">optional</a>. The processor <a href="#intro-reading" title="">must</a> fully support [<a href="#ref-xpath-1.0" title="">XPath 1.0</a>], including all XForms extension functions (though the <code>index()</code> function <a href="#intro-reading" title="">may</a> return <code>1</code> if the processor has no information about the identified <code>repeat</code> element). The processor <a href="#intro-reading" title="">must</a> make available the automatic schema datatype information defined by XForms. The processor <a href="#intro-reading" title="">must</a> be able to parse inline and external declared XML schema and consume their schema datatype information [<a href="#ref-xschema-2" title="">XML Schema part 2</a>], and the processor <a href="#intro-reading" title="">should</a> consume all schema information available where appropriate in the XForms processing model. An <a href="#conform-model-processor" title="">XForms Model Processor</a> <a href="#intro-reading" title="">may</a> (and hence may not) support user interface creation and refresh behaviors described for <code>model</code> processing. An <a href="#conform-model-processor" title="">XForms Model Processor</a> <a href="#intro-reading" title="">must</a> support action handlers for the events <code>xforms-model-construct-done</code>, <code>xforms-ready</code>, <code>xforms-link-exception</code> and <code>xforms-version-exception</code>. The processor <a href="#intro-reading" title="">may</a> support action handlers for the <code>xforms-refresh</code> event, and it <a href="#intro-reading" title="">should</a> support all other events targetted at <code>model</code> elements. The support for attributes and elements of [<a href="#ref-xml-events" title="">XML Events</a>] is described below in the description of the support for XForms Actions.
</p><p>An <a href="#conform-model-processor" title="">XForms Model Processor</a> <a href="#intro-reading" title="">should</a> support the <a href="#The_XForms_Submission_Module" title="">XForms Submission module</a>. If it does, then all attributes, child elements, behaviors and events <a href="#intro-reading" title="">must</a> be supported except as follows. The support for attributes and elements of [<a href="#ref-xml-events" title="">XML Events</a>] on action handlers for submission events is described below in the description of the support for XForms Actions. All <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a> submission methods <a href="#intro-reading" title="">should</a> be supported, and the following methods <a href="#intro-reading" title="">must</a> be supported: <code>get</code>, <code>post</code>, <code>put</code>, <code>delete</code>, and <code>urlencoded-post</code>. The <code>mode</code> attribute <a href="#intro-reading" title="">should</a> be supported; at least one of asynchronous or synchronous submission <a href="#intro-reading" title="">must</a> be supported. The <code>http</code> submission scheme <a href="#intro-reading" title="">must</a> be supported. The <code>https</code> and <code>file</code> schemes <a href="#intro-reading" title="">should</a> be supported. Other schemes <a href="#intro-reading" title="">may</a> be supported such as <code>mailto</code> or <code>ftp</code>. XForms-defined submission headers <a href="#intro-reading" title="">may</a> be combined with those from the user agent in the manner specified by the <code>combine</code> attribute.
</p><p>An <a href="#conform-model-processor" title="">XForms Model Processor</a> <a href="#intro-reading" title="">must</a> support the following actions: <code>action</code>, <code>insert</code>, <code>delete</code>, <code>setvalue</code>, <code>reset</code>, <code>rebuild</code>, <code>recalculate</code>, <code>revalidate</code>, and <code>dispatch</code>. The processor <a href="#intro-reading" title="">should</a> support <code>send</code> and <code>load</code>. The processor <a href="#intro-reading" title="">may</a> support <code>refresh</code>, <code>setindex</code>, <code>setfocus</code>, <code>toggle</code>, and <code>message</code>. For every supported action, the processor <a href="#intro-reading" title="">must</a> support all local attributes defined for the action, including conditional and iteration attributes. An <a href="#conform-model-processor" title="">XForms Model Processor</a> <a href="#intro-reading" title="">must</a> support the attribute <code>ev:event</code> so that XForms action handlers can appear as children of either the target elements of the events they handle or ancestors of those elements. The processor <a href="#intro-reading" title="">should</a> support the attribute <code>ev:target</code> so action handlers can identify the events targetted at a particular descendant of the action handler's parent element (e.g. the <code>xforms-insert</code> or <code>xforms-delete</code> event on a particular <code>instance</code> of the <code>model</code>). The processor <a href="#intro-reading" title="">may</a> support all other features of [<a href="#ref-xml-events" title="">XML Events</a>].
</p>
</div><div class="div3">
<a id="XForms_Full" name="XForms_Full"></a><h4> <span class="mw-headline">12.4.2 <span id="conform-levels-full">XForms Full</span></span></h4>
<p>This conformance level is distinguished by the processor's <code>property()</code> function returning a string beginning with <code>"full"</code> for the <code>conformance-level</code> property.
</p><p>An <b>XForms Full Processor</b> is an <a href="#def-xforms-processor" title="">XForms Processor</a> consisting of a conforming <a href="#conform-model-processor" title="">XForms Model Processor</a> along with the following additional required, recommended and optional features:
</p>
<ul><li> The processor <a href="#intro-reading" title="">must</a> support user interface creation and refresh behaviors described for <code>model</code> processing.
</li><li> The processor <a href="#intro-reading" title="">must</a> support all <a href="#elems-form-controls" title="">core form controls</a>, including all of their attributes and child elements.
</li><li> The processor <a href="#intro-reading" title="">must</a> support the actions <code>refresh</code>, <code>setfocus</code>, and <code>message</code>.
</li><li> The processor <a href="#intro-reading" title="">should</a> support the <a href="#ui-group-module" title="">XForms Group Module</a>. If the processor does not support this module and a <code>group</code> element is encountered during user interface initialization, then the processor <a href="#intro-reading" title="">must</a> terminate processing after dispatching <a href="#evt-bindingException" title="">xforms-binding-exception</a>.
</li><li> The processor <a href="#intro-reading" title="">should</a> support the <code>toggle</code> action and the <a href="#ui-switch-module" title="">XForms Switch Module</a>. If the processor does not support this module and a <code>switch</code> element is encountered during user interface initialization, then the processor <a href="#intro-reading" title="">must</a> terminate processing after dispatching <a href="#evt-bindingException" title="">xforms-binding-exception</a>.
</li><li> The processor <a href="#intro-reading" title="">should</a> support the <code>setindex</code> action and the <a href="#ui-repeat-module" title="">XForms Repeat Module</a>, except that support of the <code>repeat-*</code> attributes is <a href="#intro-reading" title="">optional</a>. If the processor does not support this module and a <code>repeat</code> element is encountered during user interface initialization, then the processor <a href="#intro-reading" title="">must</a> terminate processing after dispatching <a href="#evt-bindingException" title="">xforms-binding-exception</a>.
</li><li> The processor <a href="#intro-reading" title="">should</a> support all interaction and notification events targetted at basic form controls, <code>group</code>, <code>switch</code>, <code>repeat</code>, and their descendant elements (e.g. <code>case</code> and <code>item</code>).
</li><li> The processor <a href="#intro-reading" title="">may</a> support the Extension module.
</li></ul>
</div></div></div>
<div class="div1">
<a id="Glossary_Of_Terms" name="Glossary_Of_Terms"></a><h2> <span class="mw-headline">13 <span id="terms">Glossary Of Terms</span></span></h2>
<dl><dt> <span id="def-item">Item</span>
</dt><dd> [Definition: An item is either a node or an atomic value (such as an integer, date, or string).] 
</dd><dt> <span id="def-binding">Binding</span>
</dt><dd> [Definition: A "binding" connects an item (either a node or an atomic value (such as an integer, date, or string)) to a form control or to a model item property by using a binding expression as a locator.] 
</dd><dt> <span id="def-binding-expression">Binding expression</span>
</dt><dd> [Definition: An expression used in a binding. The language used for the expression is defined by the <a href="#def-expression-module" title="">expression module</a>] 
</dd><dt> <span id="def-compound-document">Compound Document</span>
</dt><dd> A [<a href="#ref-cdrf-1.0" title="">CDRF 1.0</a>] Compound Document is a document that combines multiple document formats either by reference, by inclusion or both.
</dd><dt> <span id="def-computed-expression">Computed expression</span>
</dt><dd> [Definition: An expression used by model item properties such as relevant and calculate to include dynamic functionality in XForms.]
</dd><dt> <span id="def-containing-document">Containing document</span>
</dt><dd> [Definition: A specific document, for example an XHTML document, in which one or more &lt;model&gt; elements are found.] 
</dd><dt> <span id="def-datatype">Datatype</span>
</dt><dd> [Definition: From XML Schema [<a href="#ref-xschema-2" title="">XML Schema part 2</a>]: A 3-tuple, consisting of a) a set of distinct values, called its value space, b) a set of lexical representations, called its lexical space, and c) a set of facets that characterize properties of the value space, individual values or lexical items.] 
</dd><dt> <span id="def-expression-module">Expression module</span>
</dt><dd> [Definition: A separate specification that defines an expression language that can be used for addressing instance data nodes in binding expressions, to express constraints, and to specify calculations in XForms.] 
</dd><dt> <span id="def-facet">Facet</span>
</dt><dd> [Definition: From XML Schema [<a href="#ref-xschema-2" title="">XML Schema part 2</a>]: A single defining aspect of a value space. Generally speaking, each facet characterizes a value space along independent axes or dimensions.] 
</dd><dt> <span id="def-first-node-rule">First-item rule</span>
</dt><dd> [Definition: When a UI Single Item Binding selects a sequence of size &gt; 1, the first item in the sequence is used.]
</dd><dt> <span id="def-form-control">Form control</span>
</dt><dd> [Definition: An XForms user interface control that serves as a point of user interaction (a <a href="#Core_Form_Controls" title="">core form control</a>) or as a container for other form controls (a <a href="#Container_Form_Controls" title="">container form control</a>).]
</dd><dt> <span id="def-host-language">Host language</span>
</dt><dd> [Definition: An XML vocabulary, such as XHTML, into which XForms is embedded.] 
</dd><dt> <span id="def-instance-data">Instance data</span>
</dt><dd> [Definition: An internal tree representation of the values and state of all the instance data nodes associated with a particular form.] 
</dd><dt> <span id="def-instance-data-node">Instance data node</span>
</dt><dd> [Definition: An [<a href="#ref-xpath-1.0" title="">XPath 1.0</a>] node from the instance data.]
</dd><dt> <span id="def-lax-schema-processing">Lax schema processing</span>
</dt><dd> [Definition: From XML Schema [<a href="#ref-xschema-1" title="">XML Schema part 1</a>]: For an element or attributes Schema validity to be assessed, then the applicable schema must provide a definition of the item. If not, Schema validation makes no contribution to the validity test for the item.]
</dd><dt> <span id="def-lexical-space">Lexical space</span>
</dt><dd> [Definition: From XML Schema [<a href="#ref-xschema-2" title="">XML Schema part 2</a>]: A lexical space is the set of valid literals for a datatype.] The XML serialization that may occur during submission expresses the instance data using lexical space literals.
</dd><dt> <span id="def-model-binding-expression">Model Binding expression</span>
</dt><dd> [Definition: An expression used in the <code>ref</code> (or deprecated <code>nodeset</code>) attribute of a <code>bind</code> element in an XForms model. Often, a <code>bind</code> also declares <a href="#def-computed-expression" title="">computed expressions</a> for model item properties of the nodes. ]
</dd><dt> <span id="def-model-item">Model item</span>
</dt><dd> [Definition: An instance data node with associated constraints.] 
</dd><dt> <span id="def-model-item-property">Model item property</span>
</dt><dd> [Definition: An XForms-specific annotation to an instance data node.] 
</dd><dt> <span id="def-non-relevant-form-control">Non-relevant Form Control</span>
</dt><dd> [Definition: A form control satisfying at least one of the <a href="#form-control-non-relevance-conditions" title="">form control non-relevance conditions</a>.]
</dd><dt> <span id="def-QNameButNotNCName">QNameButNotNCName</span>
</dt><dd> [Definition: A <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-QName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-QName">QName</a> that is not an <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>. In 2006, the W3C named this a <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-PrefixedName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-PrefixedName">PrefixedName</a>. ]
</dd><dt> <span id="def-relevant-form-control">Relevant Form Control</span>
</dt><dd> [Definition: A form control satisfying none of the <a href="#form-control-non-relevance-conditions" title="">form control non-relevance conditions</a>.]
</dd><dt> <span id="def-schema-constraint">Schema constraint</span>
</dt><dd> [Definition: A restriction, applied to form data, based on XML Schema datatypes.] 
</dd><dt> <span id="def-strict-schema-processing">Strict schema processing</span>
</dt><dd> [Definition: From XML Schema [<a href="#ref-xschema-1" title="">XML Schema part 1</a>]: If the applicable schema does not provide a definition for an element or attribute, then Schema validation marks the item as invalid.]
</dd><dt> <span id="def-ui-binding-expression">UI Binding Expression</span>
</dt><dd> [Definition: An expression used in binding a <a href="#def-form-control" title="">form control</a> to the instance.]
</dd><dt> <span id="def-valid">Valid node</span>
</dt><dd> [Definition: An instance data node is valid if and only if the constraint model item property is true, the value is non-empty if the required model item property is true, and the node satisfies all applicable XML Schema definitions (including those associated by the type model item property, by <code>xsi:type</code> or by an external or inline schema).]
</dd><dt> <span id="def-value-space">Value space</span>
</dt><dd> [Definition: From XML Schema [<a href="#ref-xschema-2" title="">XML Schema part 2</a>]: A set of values for a given datatype. Each value in the value space of a datatype is denoted by one or more literals in its lexical space.] 
</dd><dt> <span id="def-versionList">versionList</span>
</dt><dd> [Definition: A list ([<a href="#ref-xschema-2" title="">XML Schema part 2</a>]) with an atomic datatype ([<a href="#ref-xschema-2" title="">XML Schema part 2</a>]) of <a href="#def-versionNumber" title="">versionNumber</a>.]
</dd><dt> <span id="def-versionNumber">versionNumber</span>
</dt><dd> [Definition: A string consisting of a non-zero digit (1 to 9) followed by zero or more digits (0 to 9), then a period character (.), and then one or more digits (0-9). A version number is derived from string by restriction based on the following pattern value (excluding the quote marks): <code>"[1-9]\d*\.\d+"</code>.]
</dd><dt> <span id="def-xforms-model">XForms Model</span>
</dt><dd> [Definition: The non-visible definition of an XML form as specified by XForms. The XForms Model defines the individual model items and constraints and other run-time aspects of XForms.] 
</dd><dt> <span id="def-xforms-processor">XForms Processor</span>
</dt><dd> [Definition: A software application or program that implements and conforms to the XForms specification.] 
</dd></dl>
</div><div class="back">
<div class="div1">
<a id="References" name="References"></a><h2> <span class="mw-headline">14 References</span></h2>
<div class="div2">
<a id="Normative_References" name="Normative_References"></a><h3> <span class="mw-headline">14.1 Normative References</span></h3>
<dl><dt> <a name="ref-Exc-C14N" id="ref-Exc-C14N"></a>Exc-C14N
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2002/REC-xml-exc-c14n-20020718/" rel="nofollow" title="http://www.w3.org/TR/2002/REC-xml-exc-c14n-20020718/"><cite id="Exc-C14N">Exclusive XML Canonicalization Version 1.0</cite></a>, J. Boyer, D. Eastlake 3rd, J. Reagle, 2002. W3C Recommendation available at <a class="external free" href="http://www.w3.org/TR/2002/REC-xml-exc-c14n-20020718/" rel="nofollow" title="http://www.w3.org/TR/2002/REC-xml-exc-c14n-20020718/">http://www.w3.org/TR/2002/REC-xml-exc-c14n-20020718/</a>.
</dd><dt> HMAC
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2104.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2104.txt"><cite id="ref-hmac">RFC 2104 - HMAC: Keyed-Hashing for Message Authentication</cite></a>, H. Krawczyk, M. Bellare, R. Canetti, 1997. Available at <a class="external free" href="http://www.ietf.org/rfc/rfc2104.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2104.txt">http://www.ietf.org/rfc/rfc2104.txt</a>
</dd><dt> Luhn Patent
</dt><dd> <cite id="ref-luhn">Computer for Verifying Numbers</cite>, H. P. Luhn, U.S. Patent 2,950,048, 1960.
</dd><dt> MD5
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc1321.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc1321.txt"><cite id="ref-md5">RFC 1321: The MD5 Message-Digest Algorithm</cite></a>, R. Rivest, 1992. Available at <a class="external free" href="http://www.ietf.org/rfc/rfc1321.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc1321.txt">http://www.ietf.org/rfc/rfc1321.txt</a>
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc2046" title="http://tools.ietf.org/html/rfc2046">RFC 2046</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2046.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2046.txt"><cite id="ref-rfc-2046">RFC 2046: Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</cite></a>, N. Freed, N. Borenstein, 1996. Available at <a class="external free" href="http://www.ietf.org/rfc/rfc2046.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2046.txt">http://www.ietf.org/rfc/rfc2046.txt</a>.
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc2119" title="http://tools.ietf.org/html/rfc2119">RFC 2119</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2119.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2119.txt"><cite id="ref-rfc-2119">RFC 2119: Key words for use in RFCs to Indicate Requirement Levels</cite></a>, S. Bradner, 1997. Available at <a class="external free" href="http://www.ietf.org/rfc/rfc2119.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>.
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc2387" title="http://tools.ietf.org/html/rfc2387" name="ref-rfc-2387" id="ref-rfc-2387">RFC 2387</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2387.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2387.txt"><cite id="ref-rf-2387">RFC 2387: The MIME Multipart/Related Content-type</cite></a>, E. Levinson, 1998. Available at: <a class="external free" href="http://www.ietf.org/rfc/rfc2387.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2387.txt">http://www.ietf.org/rfc/rfc2387.txt</a>.
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc2388" title="http://tools.ietf.org/html/rfc2388">RFC 2388</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2388.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2388.txt"><cite id="ref-rfc-2388">RFC 2388: Returning Values from Forms: multipart/form-data</cite></a>, L. Masinter, 1998. Available at: <a class="external free" href="http://www.ietf.org/rfc/rfc2388.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2388.txt">http://www.ietf.org/rfc/rfc2388.txt</a>.
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc2396" title="http://tools.ietf.org/html/rfc2396">RFC 2396</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2396.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2396.txt"><cite id="ref-rfc-2396">RFC 2396: Uniform Resource Identifiers (URI): Generic Syntax</cite></a>, T. Berners-Lee, R. Fielding, L. Masinter, 1998. Available at: <a class="external free" href="http://www.ietf.org/rfc/rfc2396.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2396.txt">http://www.ietf.org/rfc/rfc2396.txt</a>.
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc2616" title="http://tools.ietf.org/html/rfc2616">RFC 2616</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2616.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2616.txt"><cite id="ref-rfc-2616">RFC 2616: Hypertext Transfer Protocol -- HTTP/1.1</cite></a>, R. Fielding, J. Gettys, J. Mogul, H. Frystyk, L. Masinter, P. Leach, T. Berners-Lee,1999. Available at: <a class="external free" href="http://www.ietf.org/rfc/rfc2616.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2616.txt">http://www.ietf.org/rfc/rfc2616.txt</a>.
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc2822" title="http://tools.ietf.org/html/rfc2822">RFC 2822</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2822.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2822.txt"><cite id="ref-rfc-2822">RFC 2822: Internet Message Format</cite></a>, P. Resnick, 2001. Available at: <a class="external free" href="http://www.ietf.org/rfc/rfc2822.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2822.txt">http://www.ietf.org/rfc/rfc2822.txt</a>.
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc2818" title="http://tools.ietf.org/html/rfc2818">RFC 2818</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2818.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2818.txt"><cite id="ref-rfc-2818">RFC 2818: HTTP Over TLS</cite></a>, E. Rescorla, 2000. vailable at: <a class="external free" href="http://www.ietf.org/rfc/rfc2818.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2818.txt">http://www.ietf.org/rfc/rfc2818.txt</a>.
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc3023" title="http://tools.ietf.org/html/rfc3023">RFC 3023</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc3023.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc3023.txt"><cite id="ref-rfc-3023">RFC 3023: XML Media Types</cite></a>, M Murata, S. St. Laurent, D. Kohn, 2001. Available at: <a class="external free" href="http://www.ietf.org/rfc/rfc3023.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc3023.txt">http://www.ietf.org/rfc/rfc3023.txt</a>.
</dd><dt> SHA2
</dt><dd> <a class="external text" href="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf" rel="nofollow" title="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf"><cite id="ref-sha2">SECURE HASH STANDARD. FIPS PUB 180-2</cite></a>, August 2002. Available at <a class="external free" href="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf" rel="nofollow" title="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf">http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf</a>
</dd><dt> SOAP 1.1
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2000/NOTE-SOAP-20000508/" rel="nofollow" title="http://www.w3.org/TR/2000/NOTE-SOAP-20000508/"><cite id="ref-soap-11">Simple Object Access Protocol (SOAP) 1.1 </cite></a>, D. Box, D. Ehnebuske, G. Kakivaya, A. Layman, N. Mendelsohn, H. F. Nielsen, S. Thatte, D. Winer, 2000. Available at: <a class="external free" href="http://www.w3.org/TR/2000/NOTE-SOAP-20000508/" rel="nofollow" title="http://www.w3.org/TR/2000/NOTE-SOAP-20000508/">http://www.w3.org/TR/2000/NOTE-SOAP-20000508/</a>.
</dd><dt> SOAP 1.2
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2007/REC-soap12-part1-20070427/" rel="nofollow" title="http://www.w3.org/TR/2007/REC-soap12-part1-20070427/"><cite id="ref-soap-12">SOAP Version 1.2 Part 1: Messaging Framework</cite></a>, M. Gudgin, M. Hadley, N. Mendelsohn, J.-J. Moreau, H. F. Nielsen, A. Karmarkar, Y. Lafon, 2007. Available at: <a class="external free" href="http://www.w3.org/TR/2007/REC-soap12-part1-20070427/" rel="nofollow" title="http://www.w3.org/TR/2007/REC-soap12-part1-20070427/">http://www.w3.org/TR/2007/REC-soap12-part1-20070427/</a>.
</dd><dt> Unicode Collation Algorithm
</dt><dd> <a class="external text" href="http://www.unicode.org/unicode/reports/tr10/" rel="nofollow" title="http://www.unicode.org/unicode/reports/tr10/"><cite id="ref-unicode-collation">Unicode Technical Standard #10, Unicode Collation Algorithm</cite></a>, Available at: <a class="external free" href="http://www.unicode.org/unicode/reports/tr10/" rel="nofollow" title="http://www.unicode.org/unicode/reports/tr10/">http://www.unicode.org/unicode/reports/tr10/</a>.
</dd><dt> XHTML Modularization
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008" rel="nofollow" title="http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008"><cite id="ref-xhtml-mod">XHTML Modularization 1.1</cite></a>, D. Austin, S. Peruvemba, S. McCarron, M. Ishikawa, M. Birbeck, 2008. W3C Recommendation available at <a class="external free" href="http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008" rel="nofollow" title="http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008">http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008</a>.
</dd><dt> XML Base
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2009/REC-xmlbase-20090128/" rel="nofollow" title="http://www.w3.org/TR/2009/REC-xmlbase-20090128/"><cite id="ref-xml-base">XML Base (Second Edition)</cite></a>, J. Marsh, R. Tobin, 2009. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2009/REC-xmlbase-20090128/" rel="nofollow" title="http://www.w3.org/TR/2009/REC-xmlbase-20090128/">http://www.w3.org/TR/2009/REC-xmlbase-20090128/</a>.
</dd><dt> XML Events
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2003/REC-xml-events-20031014/" rel="nofollow" title="http://www.w3.org/TR/2003/REC-xml-events-20031014/"><cite id="ref-xml-events">XML Events - An events syntax for XML</cite></a>, Steven Pemberton, T. V. Raman, Shane P. McCarron, 2003. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2003/REC-xml-events-20031014/" rel="nofollow" title="http://www.w3.org/TR/2003/REC-xml-events-20031014/">http://www.w3.org/TR/2003/REC-xml-events-20031014/</a>.
</dd><dt> XHTML 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2002/REC-xhtml1-20020801/" rel="nofollow" title="http://www.w3.org/TR/2002/REC-xhtml1-20020801/"><cite id="ref-xhtml-1.0">XHTML 1.0: The Extensible HyperText Markup Language - A Reformulation of HTML 4 in XML 1.0</cite></a>, Steven Pemberton, et al., 2002. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2002/REC-xhtml1-20020801/" rel="nofollow" title="http://www.w3.org/TR/2002/REC-xhtml1-20020801/">http://www.w3.org/TR/2002/REC-xhtml1-20020801/</a>.
</dd><dt> XML 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2006/REC-xml-20060816/" rel="nofollow" title="http://www.w3.org/TR/2006/REC-xml-20060816/"><cite id="ref-xml-1.0">Extensible Markup Language (XML) 1.0 (Fourth Edition)</cite></a>, Tim Bray, Jean Paoli, C. M. Sperberg-McQueen, Eve Maler, 2006. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2006/REC-xml-20060816/" rel="nofollow" title="http://www.w3.org/TR/2006/REC-xml-20060816/">http://www.w3.org/TR/2006/REC-xml-20060816/</a>
</dd><dt> XML Names
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2006/REC-xml-names-20060816/" rel="nofollow" title="http://www.w3.org/TR/2006/REC-xml-names-20060816/"><cite id="ref-xml-names">Namespaces in XML (Second Edition)</cite></a>, Tim Bray, Dave Hollander, Andrew Layman, and Richard Tobin, 2006. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2006/REC-xml-names-20060816/" rel="nofollow" title="http://www.w3.org/TR/2006/REC-xml-names-20060816/">http://www.w3.org/TR/2006/REC-xml-names-20060816/</a>.
</dd><dt> XPath 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/1999/REC-xpath-19991116" rel="nofollow" title="http://www.w3.org/TR/1999/REC-xpath-19991116"><cite id="ref-xpath-1.0">XML Path Language (XPath) Version 1.0</cite></a>, James Clark, Steve DeRose, 1999. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/1999/REC-xpath-19991116" rel="nofollow" title="http://www.w3.org/TR/1999/REC-xpath-19991116">http://www.w3.org/TR/1999/REC-xpath-19991116</a>.
</dd><dt> XPath 2.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2010/REC-xpath20-20101214/" rel="nofollow" title="http://www.w3.org/TR/2010/REC-xpath20-20101214/"><cite id="ref-xpath-2.0">XML Path Language (XPath) 2.0</cite></a>, Anders Berglund <em>et al.</em>, 2010. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2010/REC-xpath20-20101214/" rel="nofollow" title="http://www.w3.org/TR/2010/REC-xpath20-20101214/">http://www.w3.org/TR/2010/REC-xpath20-20101214/</a>.
</dd><dt> XPath Data Model
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2010/REC-xpath-datamodel-20101214/" rel="nofollow" title="http://www.w3.org/TR/2010/REC-xpath-datamodel-20101214/"><cite id="ref-xpath-data-model">XQuery 1.0 and XPath 2.0 Data Model</cite></a>, Anders Berglund <em>et al.</em>, 2010. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2010/REC-xpath-datamodel-20101214/" rel="nofollow" title="http://www.w3.org/TR/2010/REC-xpath-datamodel-20101214/">http://www.w3.org/TR/2010/REC-xpath-datamodel-20101214/</a> .
</dd><dt> XML Schema part 1
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/"><cite id="ref-xschema-1">XML Schema Part 1: Structures</cite></a>, Henry S. Thompson, David Beech, Murray Maloney, Noah Mendelsohn, 2004. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/</a>.
</dd><dt> XML Schema part 2
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/"><cite id="ref-xschema-2">XML Schema Part 2: Datatypes</cite></a>, Paul V. Biron, Ashok Malhotra, 2004. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/</a>.
</dd><dt> XSLT 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/1999/REC-xslt-19991116" rel="nofollow" title="http://www.w3.org/TR/1999/REC-xslt-19991116"><cite id="ref-xslt">XSL Transformations (XSLT) Version 1.0</cite></a>, James Clark, 1999. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/1999/REC-xslt-19991116" rel="nofollow" title="http://www.w3.org/TR/1999/REC-xslt-19991116">http://www.w3.org/TR/1999/REC-xslt-19991116</a>.
</dd></dl>
</div><div class="div2">
<a id="Informative_References" name="Informative_References"></a><h3> <span class="mw-headline">14.2 Informative References</span></h3>
<dl><dt> Algorithms
</dt><dd> <cite id="ref-art">The Art of Computer Programming: Volume 1 Fundamental Algorithms</cite>, D. E. Knuth, Addison-Wesley, Reading, MA. 1968. Third edition, 1997. ISBN:0-2018-9683-4.
</dd><dt> AUI97
</dt><dd> <cite id="ref-AUI97">Auditory User Interfaces--Toward The Speaking Computer</cite>, T. V. Raman, Kluwer Academic Publishers, 1997. ISBN:0-7923-9984-6.
</dd><dt> CDRF 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2007/CR-CDR-20070718/" rel="nofollow" title="http://www.w3.org/TR/2007/CR-CDR-20070718/"><cite id="ref-cdrf-1.0">Compound Document by Reference Framework 1.0</cite></a>, Timur Mehrvarz, Lasse Pajunen, Julien Quint, and Daniel Applequist, 2007. W3C Candidate Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2007/CR-CDR-20070718/" rel="nofollow" title="http://www.w3.org/TR/2007/CR-CDR-20070718/">http://www.w3.org/TR/2007/CR-CDR-20070718/</a>.
</dd><dt> CSS2
</dt><dd> <a class="external text" href="http://www.w3.org/TR/1998/REC-CSS2-19980512/" rel="nofollow" title="http://www.w3.org/TR/1998/REC-CSS2-19980512/"><cite id="ref-css2">Cascading Style Sheets, level 2 (CSS2) Specification</cite></a>, Bert Bos, H&Atilde;&fnof;&Acirc;&yen;kon Wium Lie, Chris Lilley, Ian Jacobs, 1998. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/1998/REC-CSS2-19980512/" rel="nofollow" title="http://www.w3.org/TR/1998/REC-CSS2-19980512/">http://www.w3.org/TR/1998/REC-CSS2-19980512/</a>.
</dd><dt> DDJ-ArrayDoubling
</dt><dd> <cite id="ref-ddj">Resizable Arrays, Heaps and Hash Tables</cite>, John Boyer, Doctor Dobb's Journal, CMP Media LLC, January 1998 Issue.
</dd><dt> DOM2 Core
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/" rel="nofollow" title="http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/"><cite id="ref-dom2-core">Document Object Model (DOM) Level 2 Core Specification</cite></a>, Tom Pixley, 2000. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/" rel="nofollow" title="http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/">http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/</a>.
</dd><dt> DOM2 Events
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/" rel="nofollow" title="http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/"><cite id="ref-dom2-events">Document Object Model (DOM) Level 2 Events Specification</cite></a>, Tom Pixley, 2000. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/" rel="nofollow" title="http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/">http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/</a>.
</dd><dt> EXSLT
</dt><dd> <a class="external text" href="http://www.exslt.org" rel="nofollow" title="http://www.exslt.org"><cite id="ref-exslt">EXSLT Web site</cite></a>. Available at <a class="external free" href="http://www.exslt.org" rel="nofollow" title="http://www.exslt.org">http://www.exslt.org</a>.
</dd><dt> ODF 1.1
</dt><dd> <a class="external text" href="http://docs.oasis-open.org/office/v1.1/OS/OpenDocument-v1.1-html/OpenDocument-v1.1.html" rel="nofollow" title="http://docs.oasis-open.org/office/v1.1/OS/OpenDocument-v1.1-html/OpenDocument-v1.1.html"><cite id="ref-odf-1.1">NOTREF Open Document Format for Office Applications (OpenDocument) v1.1</cite></a>, Patrick Durusau, Michael Brauer, and Lars Oppermann (editors), 2007. OASIS Standard available at: <a class="external free" href="http://docs.oasis-open.org/office/v1.1/OS/OpenDocument-v1.1-html/OpenDocument-v1.1.html" rel="nofollow" title="http://docs.oasis-open.org/office/v1.1/OS/OpenDocument-v1.1-html/OpenDocument-v1.1.html">http://docs.oasis-open.org/office/v1.1/OS/OpenDocument-v1.1-html/OpenDocument-v1.1.html</a>.
</dd><dt> P3P 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2002/REC-P3P-20020416/" rel="nofollow" title="http://www.w3.org/TR/2002/REC-P3P-20020416/"><cite id="ref-p3p-1.0">The Platform for Privacy Preferences 1.0 (P3P1.0) Specification</cite></a>, Lorrie Cranor, Marc Langheinrich, Massimo Marchiori, Martin Presler-Marshall, Joseph Reagle, 2002. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2002/REC-P3P-20020416/" rel="nofollow" title="http://www.w3.org/TR/2002/REC-P3P-20020416/">http://www.w3.org/TR/2002/REC-P3P-20020416/</a>.
</dd><dt> RELAXNG
</dt><dd> <a class="external text" href="http://www.relaxng.org/spec-20011203.html" rel="nofollow" title="http://www.relaxng.org/spec-20011203.html"><cite id="ref-RELAXNG">RELAXNG Specification</cite></a>, James Clark, MURATO Makoto, 2001. OASIS Committee Specification available at: <a class="external free" href="http://www.relaxng.org/spec-20011203.html" rel="nofollow" title="http://www.relaxng.org/spec-20011203.html">http://www.relaxng.org/spec-20011203.html</a>.
</dd><dt> RELAXNG Compact
</dt><dd> <a class="external text" href="http://www.relaxng.org/compact-20021121.html" rel="nofollow" title="http://www.relaxng.org/compact-20021121.html"><cite id="ref-RELAXNG-Compact">RELAXNG Compact Syntax</cite></a>, James Clark, 2002. OASIS Committee Specification available at: <a class="external free" href="http://www.relaxng.org/compact-20021121.html" rel="nofollow" title="http://www.relaxng.org/compact-20021121.html">http://www.relaxng.org/compact-20021121.html</a>.
</dd><dt> SVG 1.1
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2003/REC-SVG11-20030114/" rel="nofollow" title="http://www.w3.org/TR/2003/REC-SVG11-20030114/"><cite id="ref-svg-1.1">SVG 1.1</cite></a>, Jon Ferraiolo, FUJISAWA Jun, Dean Jackson, 2003. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2003/REC-SVG11-20030114/" rel="nofollow" title="http://www.w3.org/TR/2003/REC-SVG11-20030114/">http://www.w3.org/TR/2003/REC-SVG11-20030114/</a>.
</dd><dt> TAG Finding 7
</dt><dd> <a class="external text" href="http://www.w3.org/2001/tag/doc/whenToUseGet-20040321" rel="nofollow" title="http://www.w3.org/2001/tag/doc/whenToUseGet-20040321"><cite id="ref-tag7">TAG Finding: URIs, Addressability, and the use of HTTP GET</cite></a>, Ian Jacobs, 2004. Available at: <a class="external free" href="http://www.w3.org/2001/tag/doc/whenToUseGet-20040321" rel="nofollow" title="http://www.w3.org/2001/tag/doc/whenToUseGet-20040321">http://www.w3.org/2001/tag/doc/whenToUseGet-20040321</a>
</dd><dt> Unicode Script Names
</dt><dd> <a class="external text" href="http://unicode.org/iso15924/iso15924-codes.html" rel="nofollow" title="http://unicode.org/iso15924/iso15924-codes.html"><cite id="ref-unicode-script-names">ISO 15924: Codes for the representation of names of scripts</cite></a>, Available at: <a class="external free" href="http://unicode.org/iso15924/iso15924-codes.html" rel="nofollow" title="http://unicode.org/iso15924/iso15924-codes.html">http://unicode.org/iso15924/iso15924-codes.html</a>.
</dd><dt> UAAG 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/UAAG10/" rel="nofollow" title="http://www.w3.org/TR/UAAG10/"><cite id="ref-uaag-1.0">User Agent Accessibility Guidelines 1.0</cite></a>, Ian Jacobs, Jon Gunderson, Eric Hansen, 2002. Working Draft available at <a class="external free" href="http://www.w3.org/TR/UAAG10/" rel="nofollow" title="http://www.w3.org/TR/UAAG10/">http://www.w3.org/TR/UAAG10/</a>.
</dd><dt> Unicode Scripts
</dt><dd> <a class="external text" href="http://www.unicode.org/unicode/reports/tr24/" rel="nofollow" title="http://www.unicode.org/unicode/reports/tr24/"><cite id="ref-unicode-scripts"> Script Names</cite></a>, Mark Davis, 2001. Unicode Technical Report #24 available at <a class="external free" href="http://www.unicode.org/unicode/reports/tr24/" rel="nofollow" title="http://www.unicode.org/unicode/reports/tr24/">http://www.unicode.org/unicode/reports/tr24/</a>.
</dd><dt> XForms 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2007/REC-xforms-20071029/" rel="nofollow" title="http://www.w3.org/TR/2007/REC-xforms-20071029/"><cite id="ref-xforms-1.0">XForms 1.0 Third Edition</cite></a>, John Boyer, 2007. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2007/REC-xforms-20071029/" rel="nofollow" title="http://www.w3.org/TR/2007/REC-xforms-20071029/">http://www.w3.org/TR/2007/REC-xforms-20071029/</a>.
</dd><dt> XLink 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2001/REC-xlink-20010627/" rel="nofollow" title="http://www.w3.org/TR/2001/REC-xlink-20010627/"><cite id="ref-xlink-1.0">XML Linking Language (XLink) Version 1.0</cite></a>, Steve DeRose, Eve Maler, David Orchard, 2001. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2001/REC-xlink-20010627/" rel="nofollow" title="http://www.w3.org/TR/2001/REC-xlink-20010627/">http://www.w3.org/TR/2001/REC-xlink-20010627/</a>.
</dd><dt> XML Schema part 0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2004/REC-xmlschema-0-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-0-20041028/"><cite id="ref-xschema-0">XML Schema Part 0: Primer Second Edition</cite></a>, David C. Fallside and Priscilla Walmsley, 2004. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2004/REC-xmlschema-0-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-0-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-0-20041028/</a>.
</dd></dl>
</div></div>
<div class="div1">
<a id="Patterns_for_Data_Mutations" name="Patterns_for_Data_Mutations"></a><h2> <span class="mw-headline">15 Patterns for Data Mutations</span></h2>
<p>This appendix provides several usage patterns for the <code>setvalue</code>, <code>insert</code> and <code>delete</code> actions that perform various kinds of mutations of instance data elements and attributes.
</p>
<div class="div2">
<a id="Prepend_Element_Copy" name="Prepend_Element_Copy"></a><h3> <span class="mw-headline">15.1 Prepend Element Copy</span></h3>
<p>Pattern: <b>&lt;insert context="</b><i>parent of new element</i><b>" origin="</b><i>element to copy</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is used so that this pattern will work whether or not the parent element is empty.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Prepend a new, empty <code>person</code> element into a list of <code>people</code>
</p>
<div class="exampleInner">
<pre>&lt;insert context="people" origin="instance('prototypes')/person"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
   &lt;data xmlns=""&gt;
       &lt;people&gt;
           &lt;person&gt;
               &lt;name&gt;Jane Doe&lt;/name&gt;
           &lt;/person&gt;
       &lt;/people&gt;
   &lt;/data&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;person&gt;
            &lt;name/&gt;
        &lt;/person&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
   &lt;data xmlns=""&gt;
       &lt;people&gt;
           <b>&lt;person&gt;</b>
               <b>&lt;name/</b>
           <b>&lt;/person&gt;</b>
           &lt;person&gt;
               &lt;name&gt;Jane Doe&lt;/name&gt;
           &lt;/person&gt;
       &lt;/people&gt;
   &lt;/data&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;person&gt;
            &lt;name/&gt;
        &lt;/person&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Append_Element_Copy" name="Append_Element_Copy"></a><h3> <span class="mw-headline">15.2 Append Element Copy</span></h3>
<p>Pattern: <b>&lt;insert context="</b><i>parent of new element</i><b>" ref="*" origin="</b><i>element to copy</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is used so that this pattern will work whether or not the parent element is empty.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Append a new, empty <code>person</code> element into a list of <code>people</code>
</p>
<div class="exampleInner">
<pre>&lt;insert context="people" ref="person" origin="instance('prototypes')/person"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
   &lt;data xmlns=""&gt;
       &lt;people&gt;
           &lt;person&gt;
               &lt;name&gt;Jane Doe&lt;/name&gt;
           &lt;/person&gt;
       &lt;/people&gt;
   &lt;/data&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;person&gt;
            &lt;name/&gt;
        &lt;/person&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
   &lt;data xmlns=""&gt;
       &lt;people&gt;
           &lt;person&gt;
               &lt;name&gt;Jane Doe&lt;/name&gt;
           &lt;/person&gt;
           <b>&lt;person&gt;</b>
               <b>&lt;name/&gt;</b>
           <b>&lt;/person&gt;</b>
       &lt;/people&gt;
   &lt;/data&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;person&gt;
            &lt;name/&gt;
        &lt;/person&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Duplicate_Element" name="Duplicate_Element"></a><h3> <span class="mw-headline">15.3 Duplicate Element</span></h3>
<p>Pattern: <b>&lt;insert ref="</b><i>exact element to duplicate</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is not used because this pattern assumes the ability to indicate an exact element to duplicate, so <code>ref</code> is used. If the element does not exist, the operation will have no effect.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Duplicate the selected element and place it as a following sibling
</p>
<div class="exampleInner">
<pre>&lt;insert ref="paragraph[2]"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;document xmlns=""&gt;
        &lt;header&gt;Lorem ipsum&lt;/header&gt;
        &lt;paragraph&gt;Lorem ipsum verterem voluptaria ...&lt;/paragraph&gt;
        &lt;paragraph&gt;Primis abhorreant delicatissimi ..&lt;/paragraph&gt;
        &lt;header&gt;Lorem ipsum&lt;/header&gt;
        &lt;header&gt;Lorem ipsum&lt;/header&gt;
    &lt;/document&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;document xmlns=""&gt;
        &lt;header&gt;Lorem ipsum&lt;/header&gt;
        &lt;paragraph&gt;Lorem ipsum verterem voluptaria ...&lt;/paragraph&gt;
        &lt;paragraph&gt;Primis abhorreant delicatissimi ...&lt;/paragraph&gt;
        <b>&lt;paragraph&gt;Primis abhorreant delicatissimi ...&lt;/paragraph&gt;</b>
        &lt;header&gt;Lorem ipsum&lt;/header&gt;
        &lt;header&gt;Lorem ipsum&lt;/header&gt;
    &lt;/document&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Set_Attribute" name="Set_Attribute"></a><h3> <span class="mw-headline">15.4 Set Attribute</span></h3>
<p>Pattern: <b>&lt;insert context="</b><i>container element receiving attribute</i><b>" origin="</b><i>attribute to copy</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>ref</code> attribute is not used because this pattern cannot indicate an exact attribute sibling of the attribute being inserted. This is true not only because attribute order is not guaranteed but also because the attribute being inserted may already exist, in which case the existing attribute is replaced. The <code>context</code> attribute is used when it is necessary to indicate the parent of the node being inserted.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Create or replace an attribute with a copy of a given attribute
</p>
<div class="exampleInner">
<pre>&lt;insert context="item[2]" origin="../item[1]/@rating"/&gt;
&lt;insert context="item[3]" origin="../item[1]/@rating"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;items xmlns=""&gt;
        &lt;item key="23" rating="classified"/&gt;
        &lt;item key="42"/&gt;
        &lt;item key="68" rating="unknown"/&gt;
    &lt;/items&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;items xmlns=""&gt;
        &lt;item key="23" rating="classified"/&gt;
        &lt;item key="42" <b>rating="classified"</b>/&gt;
        &lt;item key="68" rating="<b>classified</b>"/&gt;
    &lt;/items&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Remove_Element" name="Remove_Element"></a><h3> <span class="mw-headline">15.5 Remove Element</span></h3>
<p>Pattern: <b>&lt;delete ref="</b><i>exact element to remove</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is not used because this pattern assumes the ability to indicate an exact element to remove, so <code>ref</code> is used. If the element does not exist, the operation will have no effect.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Remove <code>item</code> element in case it exists
</p>
<div class="exampleInner">
<pre>&lt;delete ref="item[2]"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;shoppingcart xmlns=""&gt;
        &lt;item&gt;
            &lt;product&gt;SKU-0815&lt;/product&gt;
            &lt;quantity&gt;1&lt;/quantity&gt;
            &lt;unitcost&gt;29.99&lt;/unitcost&gt;
            &lt;price&gt;29.99&lt;/price&gt;
        &lt;/item&gt;
        <b>&lt;item&gt;</b>
            <b>&lt;product&gt;SKU-4711&lt;/product&gt;</b>
            <b>&lt;quantity&gt;3&lt;/quantity&gt;</b>
            <b>&lt;unitcost&gt;7.49&lt;/unitcost&gt;</b>
            <b>&lt;price&gt;22.47&lt;/price&gt;</b>
        <b>&lt;/item&gt;</b>
    &lt;/shoppingcart&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;shoppingcart xmlns=""&gt;
        &lt;item&gt;
            &lt;product&gt;SKU-0815&lt;/product&gt;
            &lt;quantity&gt;1&lt;/quantity&gt;
            &lt;unitcost&gt;29.99&lt;/unitcost&gt;
            &lt;price&gt;29.99&lt;/price&gt;
        &lt;/item&gt;
    &lt;/shoppingcart&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Remove_Attribute" name="Remove_Attribute"></a><h3> <span class="mw-headline">15.6 Remove Attribute</span></h3>
<p>Pattern: <b>&lt;delete ref="</b><i>exact attribute to remove</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is not used because this pattern assumes the ability to indicate an exact attribute to remove, so <code>ref</code> is used. If the attribute does not exist, the operation will have no effect.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Remove <code>rating</code> attribute in case it exists
</p>
<div class="exampleInner">
<pre>&lt;delete ref="item/@rating"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;items xmlns=""&gt;
        &lt;item key="23" <b>rating="classified"</b>/&gt;
    &lt;/items&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;items xmlns=""&gt;
        &lt;item key="23"/&gt;
    &lt;/items&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Remove_Nodeset" name="Remove_Nodeset"></a><h3> <span class="mw-headline">15.7 Remove Nodeset</span></h3>
<p>Pattern: <b>&lt;delete ref="</b><i>nodeset to remove</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is not used because this pattern assumes the ability to indicate a nodeset to remove, so <code>ref</code> is used. If the nodeset does not exist, the operation will have no effect.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Remove <code>track</code> nodeset in case it exists
</p>
<div class="exampleInner">
<pre>&lt;delete ref="track"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;playlist xmlns=""&gt;
        &lt;name&gt;Music for Airports&lt;/name&gt;
        <b>&lt;track id="382"/&gt;</b>
        <b>&lt;track id="461"/&gt;</b>
        <b>&lt;track id="629"/&gt;</b>
    &lt;/playlist&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;playlist xmlns=""&gt;
        &lt;name&gt;Music for Airports&lt;/name&gt;
    &lt;/playlist&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Copy_Nodeset" name="Copy_Nodeset"></a><h3> <span class="mw-headline">15.8 Copy Nodeset</span></h3>
<p>Pattern: <b>&lt;insert context="</b><i>parent of new nodeset</i><b>" ref="*" origin="</b><i>nodeset to copy</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is used so that this pattern will work whether or not the parent element is empty.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Append a <code>person</code> nodeset into a list of <code>people</code>
</p>
<div class="exampleInner">
<pre>&lt;insert context="people" ref="person" origin="instance('prototypes')/person"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;data xmlns=""&gt;
        &lt;people/&gt;
    &lt;/data&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;person&gt;
            &lt;name&gt;Jane Doe&lt;/name&gt;
        &lt;/person&gt;
        &lt;person&gt;
            &lt;name&gt;John Doe&lt;/name&gt;
        &lt;/person&gt;
        &lt;person&gt;
            &lt;name&gt;Joe Sixpack&lt;/name&gt;
        &lt;/person&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;data xmlns=""&gt;
        &lt;people&gt;
            <b>&lt;person&gt;</b>
                <b>&lt;name&gt;Jane Doe&lt;/name&gt;</b>
            <b>&lt;/person&gt;</b>
            <b>&lt;person&gt;</b>
                <b>&lt;name&gt;John Doe&lt;/name&gt;</b>
            <b>&lt;/person&gt;</b>
            <b>&lt;person&gt;</b>
                <b>&lt;name&gt;Joe Sixpack&lt;/name&gt;</b>
            <b>&lt;/person&gt;</b>
        &lt;/people&gt;
    &lt;/data&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;person&gt;
            &lt;name&gt;Jane Doe&lt;/name&gt;
        &lt;/person&gt;
        &lt;person&gt;
            &lt;name&gt;John Doe&lt;/name&gt;
        &lt;/person&gt;
        &lt;person&gt;
            &lt;name&gt;Joe Sixpack&lt;/name&gt;
        &lt;/person&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Copy_Attribute_List" name="Copy_Attribute_List"></a><h3> <span class="mw-headline">15.9 Copy Attribute List</span></h3>
<p>Pattern: <b>&lt;insert context="</b><i>exact element receiving attribute list</i><b>" origin="</b><i>attribute list to copy</i><b>"/&gt;</b>
</p>
<div class="exampleOuter">
<p><b>Operation</b>: Copy attribute list from one <code>item</code> to another
</p>
<div class="exampleInner">
<pre>&lt;insert context="item[2]" origin="../item[1]/@*"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;items xmlns=""&gt;
        &lt;item key="0" rating="classified"/&gt;
        &lt;item/&gt;
    &lt;/items&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;items xmlns=""&gt;
        &lt;item key="0" rating="classified"/&gt;
        &lt;item <b>key="0" rating="classified"</b>/&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Replace_Element" name="Replace_Element"></a><h3> <span class="mw-headline">15.10 Replace Element</span></h3>
<p>Pattern: <b>&lt;insert ref="</b><i>exact element to replace</i><b>" origin="</b><i>element to copy</i><b>"/&gt;</b> <b>&lt;delete ref="</b><i>exact element to replace</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is not used because this pattern assumes the ability to indicate an exact element to replace, so <code>ref</code> is used. If the element does not exist, both insert and delete operation will have no effect.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Replace a <code>person</code> element by copying a new one and removing the old one
</p>
<div class="exampleInner">
<pre>&lt;insert ref="person[1]" origin="instance('prototypes')/person"/&gt;
&lt;delete ref="person[1]"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;people xmlns=""&gt;
        &lt;person&gt;
            &lt;name&gt;John Doe&lt;/name&gt;
        &lt;/person&gt;
    &lt;/people&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;person&gt;
            &lt;name/&gt;
        &lt;/person&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;people xmlns=""&gt;
        &lt;person&gt;
            <b>&lt;name/&gt;</b>
        &lt;/person&gt;
    &lt;/people&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;person&gt;
            &lt;name/&gt;
        &lt;/person&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Replace_Attribute" name="Replace_Attribute"></a><h3> <span class="mw-headline">15.11 Replace Attribute</span></h3>
<p>Pattern: <b>&lt;setvalue ref="</b><i>exact attribute to replace</i><b>" value="</b><i>attribute to copy</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>If the attribute does not exist, the operation will have no effect.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Replace an attribute with the copy of a given attribute
</p>
<div class="exampleInner">
<pre>&lt;setvalue ref="item[2]/@key" value="../../item[1]/@key"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance &gt;
    &lt;items xmlns=""&gt;
        &lt;item key="0"/&gt;
        &lt;item key="4711"/&gt;
    &lt;/items&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance &gt;
    &lt;items xmlns=""&gt;
        &lt;item key="0"/&gt;
        &lt;item <b>key="0"</b>/&gt;
    &lt;/items&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Replace_Instance_with_Insert" name="Replace_Instance_with_Insert"></a><h3> <span class="mw-headline">15.12 Replace Instance with Insert</span></h3>
<p>Pattern: <b>&lt;insert ref="</b><i>root node of instance to replace</i><b>" origin="</b><i>element to copy</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is not used because this pattern assumes the ability to indicate an instance root node to replace, so <code>ref</code> is used. Since an instance cannot be empty, <code>ref</code> will always be non-empty. Insert implements special handling for instance root nodes, thus a delete operation is not necessary.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Replace instance root node with an empty <code>shoppingcart</code> element
</p>
<div class="exampleInner">
<pre>&lt;insert ref="." origin="instance('prototypes')/shoppingcart"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;shoppingcart xmlns=""&gt;
        <b>&lt;item&gt;</b>
            <b>&lt;product&gt;SKU-0815&lt;/product&gt;</b>
            <b>&lt;quantity&gt;1&lt;/quantity&gt;</b>
            <b>&lt;unitcost&gt;29.99&lt;/unitcost&gt;</b>
            <b>&lt;price&gt;29.99&lt;/price&gt;</b>
        <b>&lt;/item&gt;</b>
        <b>&lt;item&gt;</b>
            <b>&lt;product&gt;SKU-4711&lt;/product&gt;</b>
            <b>&lt;quantity&gt;3&lt;/quantity&gt;</b>
            <b>&lt;unitcost&gt;7.49&lt;/unitcost&gt;</b>
            <b>&lt;price&gt;22.47&lt;/price&gt;</b>
        <b>&lt;/item&gt;</b>
    &lt;/shoppingcart&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;shoppingcart/&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;shoppingcart xmlns=""/&gt;
&lt;/instance&gt;

&lt;instance&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;shoppingcart/&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Move_Element" name="Move_Element"></a><h3> <span class="mw-headline">15.13 Move Element</span></h3>
<p>Pattern: <b>&lt;insert context="</b><i>new parent of element</i><b>" ref="*" origin="</b><i>exact element to move</i><b>"/&gt;</b> <b>&lt;delete ref="</b><i>exact element to move</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is used for insert so that this pattern will work whether or not the new parent element is empty. For delete the <code>ref</code> attribute is used instead because this pattern assumes the ability to indicate an exact element to move. If the element to be moved does not exist, both insert and delete operation will have no effect.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Copy an existing element to a new parent and remove the original
</p>
<div class="exampleInner">
<pre>&lt;insert context="playlist[2]" ref="track" origin="../playlist[1]/track[2]"/&gt;
&lt;delete ref="playlist[1]/track[2]"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;library xmlns=""&gt;
        &lt;playlist&gt;
            &lt;name&gt;Music for Airports&lt;/name&gt;
            &lt;track id="382"/&gt;
            <b>&lt;track id="461"/&gt;</b>
            &lt;track id="629"/&gt;
        &lt;/playlist&gt;
        &lt;playlist&gt;
            &lt;name&gt;Lullabies&lt;/name&gt;
            &lt;track id="251"/&gt;
            &lt;track id="331"/&gt;
        &lt;/playlist&gt;
    &lt;/library&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;library xmlns=""&gt;
        &lt;playlist&gt;
            &lt;name&gt;Music for Airports&lt;/name&gt;
            &lt;track id="382"/&gt;
            &lt;track id="629"/&gt;
        &lt;/playlist&gt;
        &lt;playlist&gt;
            &lt;name&gt;Lullabies&lt;/name&gt;
            &lt;track id="251"/&gt;
            &lt;track id="331"/&gt;
            <b>&lt;track id="461"/&gt;</b>
        &lt;/playlist&gt;
    &lt;/library&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Move_Attribute" name="Move_Attribute"></a><h3> <span class="mw-headline">15.14 Move Attribute</span></h3>
<p>Pattern: <b>&lt;insert context="</b><i>exact element receiving attribute</i><b>" origin="</b><i>exact attribute to move</i><b>"/&gt;</b> <b>&lt;delete ref="</b><i>exact attribute to move</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>If the attribute to be moved does not exist, both insert and delete operation will have no effect.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Copy an existing attribute to a new element and remove the original
</p>
<div class="exampleInner">
<pre>&lt;insert context="item[2]" origin="../item[1]/@rating"/&gt;
&lt;delete ref="item[1]/@rating"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;items xmlns=""&gt;
        &lt;item key="23" <b>rating="classified"</b>/&gt;
        &lt;item key="42"/&gt;
    &lt;/items&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;items xmlns=""&gt;
        &lt;item key="23"/&gt;
        &lt;item key="42" <b>rating="classified"</b>/&gt;
    &lt;/items&gt;
&lt;/instance&gt;
</pre>
</div></div></div><div class="div2">
<a id="Insert_Element_into_Non-Contiguous.2C_Heterogeneous_Nodeset" name="Insert_Element_into_Non-Contiguous.2C_Heterogeneous_Nodeset"></a><h3> <span class="mw-headline">15.15 Insert Element into Non-Contiguous, Heterogeneous Nodeset</span></h3>
<p>Pattern: <b>&lt;insert ref="</b><i>non-contiguous, heterogeneous nodeset</i><b>" origin="</b><i>element to copy</i><b>" at="</b><i>insert location</i><b>"/&gt;</b>
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The <code>context</code> attribute is not used because it adheres to the <a href="#def-first-node-rule" title="">first-item rule</a> and therefore would not allow to select a non-contiguous nodeset. The <code>ref</code> attribute is used instead to select a nodeset consisting of nodes with different names and different parents. The parent of the new node is the same as the parent of the insert location node selected by the combination of <code>ref</code> and <code>at</code>.
</p>
</div><div class="exampleOuter">
<p><b>Operation</b>: Copy an existing element into a non-contiguous, heterogeneous nodeset at a specified position
</p>
<div class="exampleInner">
<pre>&lt;insert ref="chapter/*" origin="instance('prototypes')/paragraph" at="7" position="before"/&gt;
</pre>
</div>
<p><b>Data Before Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;document xmlns=""&gt;
        &lt;chapter&gt;
            &lt;header&gt;Lorem ipsum&lt;/header&gt;
            &lt;paragraph&gt;Lorem ipsum verterem voluptaria ...&lt;/paragraph&gt;
            &lt;diagram&gt;Exemplum 1&lt;/diagram&gt;
            &lt;diagram&gt;Exemplum 2&lt;/diagram&gt;
            &lt;paragraph&gt;Primis abhorreant delicatissimi ...&lt;/paragraph&gt;
        &lt;/chapter&gt;
        &lt;chapter&gt;
            &lt;header&gt;Lorem ipsum&lt;/header&gt;
            &lt;diagram&gt;Exemplum 3&lt;/diagram&gt;
        &lt;/chapter&gt;
    &lt;/document&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;chapter/&gt;
        &lt;header/&gt;
        &lt;paragraph/&gt;
        &lt;diagram/&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div>
<p><b>Data After Operation</b>
</p>
<div class="exampleInner">
<pre>&lt;instance&gt;
    &lt;document xmlns=""&gt;
        &lt;chapter&gt;
            &lt;header&gt;Lorem ipsum&lt;/header&gt;
            &lt;paragraph&gt;Lorem ipsum verterem voluptaria ...&lt;/paragraph&gt;
            &lt;diagram&gt;Exemplum 1&lt;/diagram&gt;
            &lt;diagram&gt;Exemplum 2&lt;/diagram&gt;
            &lt;paragraph&gt;Primis abhorreant delicatissimi ...&lt;/paragraph&gt;
        &lt;/chapter&gt;
        &lt;chapter&gt;
            &lt;header&gt;Lorem ipsum&lt;/header&gt;
            <b>&lt;paragraph/&gt;</b>
            &lt;diagram&gt;Exemplum 3&lt;/diagram&gt;
        &lt;/chapter&gt;
    &lt;/document&gt;
&lt;/instance&gt;

&lt;instance id="prototypes"&gt;
    &lt;prototypes xmlns=""&gt;
        &lt;chapter/&gt;
        &lt;paragraph/&gt;
        &lt;diagram/&gt;
    &lt;/prototypes&gt;
&lt;/instance&gt;
</pre>
</div></div></div></div>
<div class="div1">
<a id="Recalculation_Sequence_Algorithm" name="Recalculation_Sequence_Algorithm"></a><h2> <span class="mw-headline">16 Recalculation Sequence Algorithm</span></h2>
<p>XForms Processors are free (and encouraged) to skip or optimize any steps in this algorithm, as long as the end result is the same. The XForms recalculation algorithm considers model items and model item properties to be vertices in a directed graph. Edges between the vertices represent computational dependencies between vertices.
</p><p>Following is the default handling for a <code>recalculate</code> action. Action <code>recalculate</code> is defined in <a href="#The_recalculate_Element" title="">The recalculate Element</a>.
</p>
<ol><li> A master dependency directed graph is created as detailed in <a href="#Details_on_Creating_the_Master_Dependency_Directed_Graph" title="">Details on Creating the Master Dependency Directed Graph</a>.
</li><li> To provide consistent behavior, implementations must reduce the number of vertices to be processed by computing a pertinent dependency subgraph consisting only of vertices and edges that are reachable from nodes that require recomputation. This is detailed in <a href="#Details_on_Creating_the_Pertinent_Dependency_Subgraph" title="">Details on Creating the Pertinent Dependency Subgraph</a>. Note that on a first recomputation (such as on form load), the pertinent dependency subgraph will be the same as the master dependency directed graph.
</li><li> A topological sort is performed on the vertices of the pertinent dependency subgraph, resulting in an order of evaluation in which each vertex is evaluated only after those vertices on which it depends and before all vertices which depend on it. The topological sort algorithm is discussed at [<a href="#ref-art" title="">Algorithms</a>].
</li><li> The <code>recalculate</code> process completes.
</li></ol>
<div class="div2">
<a id="Details_on_Creating_the_Master_Dependency_Directed_Graph" name="Details_on_Creating_the_Master_Dependency_Directed_Graph"></a><h3> <span class="mw-headline">16.1 Details on Creating the Master Dependency Directed Graph</span></h3>
<p>The master dependency directed graph can be considered an array with one record for each vertex, each having the following fields:
</p>
<blockquote>

<b>InstanceNode</b>: a reference to the associated instance data node<br /><b>type</b>: indicates the aspect of the instance node represented by the vertex (the text content or a model item property such as readOnly or required)<br /><b>depList</b>: a list of vertices that refer to this vertex<br /><b>in-degree</b>: the number of vertices on which this vertex depends<br /><b>visited</b>: a flag used to ensure vertices are not added to a subgraph multiple times<br /><b>index</b>: an association between vertices in the master dependency directed graph and a subgraph

</blockquote>
<p>The <code>depList</code> for each vertex is assigned based on the referenced XML nodes of instance nodes, which are obtained by parsing the computed expression bound to the node (e.g., by calculate, relevant, readonly, or required). Any expression violating any Binding Expression Constraint causes an exception (<a href="#The_xforms-compute-exception_Event" title="">The xforms-compute-exception Event</a>), terminating the <code>recalculate</code> process.
</p><p>Specifically, the <code>depList</code> for a vertex <code>v</code> is assigned to be the vertices other than <code>v</code> whose computational expressions reference <code>v</code> (described below). Vertex <code>v</code> is excluded from its own <code>depList</code> to allow self-references to occur without causing a circular reference exception.
</p><p>A computational expression appearing in a <code>calculate</code> attribute controls the text content (value) of one or more instance nodes. A vertex exists for each instance node to represent the expression in the context of the node. Likewise, computational expressions for model item properties such as <code>readOnly</code> and <code>required</code> are applied to one or more instance nodes, and vertices are created to represent such expressions in the context of each applicable node. The computational expression of each vertex must be examined to determine the XML nodes to which it refers. Any expression violating any Binding Expression Constraint causes an exception (<a href="#The_xforms-compute-exception_Event" title="">The xforms-compute-exception Event</a>), terminating the <code>recalculate</code> process. A computation expression refers to a vertex <code>v</code> if a subexpression indicates the InstanceNode for <code>v</code> and <code>v</code> represents the instance node text content (its value). In this version of XForms, model item properties such as <code>readOnly</code> and <code>required</code> cannot be referenced in an expression.
</p>
</div><div class="div2">
<a id="Details_on_Creating_the_Pertinent_Dependency_Subgraph" name="Details_on_Creating_the_Pertinent_Dependency_Subgraph"></a><h3> <span class="mw-headline">16.2 Details on Creating the Pertinent Dependency Subgraph</span></h3>
<p>If all calculations must be performed, which is the case on form load, then the pertinent dependency subgraph is simply a duplicate of the master dependency directed graph. If the recalculation algorithm is invoked with a list of changed instance data nodes since the last recalculation, then the pertinent dependency subgraph is obtained by exploring the paths of edges and vertices in the computational dependency directed graph that are reachable from each vertex in the change list. The method of path exploration can be depth first search, a suitable version of which appears in the pseudo-code below.
</p>
<div class="exampleOuter"><div class="exampleHead">Sample Algorithm to Create the Pertinent Dependency Subgraph</div>
<p>This algorithm creates a pertinent dependency subgraph <code>S</code> from a list of changed instance data nodes <code>L<sub>c</sub></code>. Variables such as <code>v</code> and <code>w</code> represent vertices in the master dependency directed graph. The same variables ending with <code>S</code> indicate vertices in the pertinent dependency subgraph <code>S</code>.
</p>
<div class="exampleInner">
<pre> // Use depth-first search to explore master digraph subtrees rooted at
 // each changed vertex. A 'visited' flag is used to stop exploration
 // at the boundaries of previously explored subtrees (because subtrees
 // can overlap in directed graphs).
 for each vertex ''r'' in ''Lc''
   if ''r'' is not visited
   {
     Push the pair (NIL, ''r'') onto a stack
     while the stack is not empty
     {
       (''v'', ''w'') = pop dependency pair from stack
       if ''w'' is not visited
       {
         Set the visited flag of ''w'' to true
         Create a vertex ''wS'' in S to represent ''w''
         Set the index of ''w'' equal to the array location of ''wS''
         Set the index of ''wS'' equal to the array location of ''w''
         Set the InstanceNode of ''wS'' equal to the InstanceNode of ''w''
         Set the type of ''wS'' equal to the type of ''w''
         For each dependency node ''x'' of ''w''
           Push the pair (''w'', ''x'') onto the stack
       }
       else Obtain ''wS'' from index of ''w''
       if ''v'' is not NIL
       {
         Obtain ''vS'' from index of ''v''
         Add dependency node for ''wS'' to ''vS''
         Increment inDegree of ''wS''
       }
     }
   }
 
 // Now clear the visited flags set in the loop above
 for each vertex ''vS'' in S
 {
   Obtain ''v'' from index of ''vS''
   Assign false to the visited flag of ''v''
 }
</pre>
</div></div>
<p>Note that the number of vertices and dependency nodes in the pertinent dependency subgraph is not known beforehand, but a method such as array doubling (see [<a href="#ref-ddj" title="">DDJ-ArrayDoubling</a>]) can be used to ensure that building the subgraph is performed in time linear in the size of <code>S</code>.
</p>
</div><div class="div2">
<a id="Details_on_Computing_Individual_Vertices" name="Details_on_Computing_Individual_Vertices"></a><h3> <span class="mw-headline">16.3 Details on Computing Individual Vertices</span></h3>
<p>The following steps process vertices, resulting in a recalculated form:
</p>
<ol><li> A vertex with inDegree of 0 is selected for evaluation and removed from the pertinent dependency subgraph. In the case where more than one vertex has inDegree zero, no particular ordering is specified. If the pertinent dependency subgraph contains vertices, but none have an inDegree of 0, then the calculation structure of the form has a loop, and an exception (<a href="#The_xforms-compute-exception_Event" title="">The xforms-compute-exception Event</a>) must be thrown, terminating processing.
</li><li> If the vertex corresponds to a computed item, computed expressions are evaluated as follows:
<ol><li> <code>calculate</code>: If the value of the model item changes, the corresponding instance data is updated and the dirty flag is set.
</li><li> <code>relevant</code>, <code>readonly</code>, <code>required</code>, <code>constraint</code>: If any or all of these computed properties change, the new settings are placed into effect for associated form controls.
</li></ol>
</li><li> For each vertex in the <code>depList</code> of the removed vertex, decrement the inDegree by 1.
</li><li> If no vertices remain in the pertinent dependency subgraph, then the calculation has successfully completed. Otherwise, repeat this sequence from step 1.
</li></ol>
</div><div class="div2">
<a id="Example_of_Calculation_Processing" name="Example_of_Calculation_Processing"></a><h3> <span class="mw-headline">16.4 Example of Calculation Processing</span></h3>
<p>For example, consider six vertices <code>a</code>, <code>b</code>, <code>v</code>, <code>w</code>, <code>x</code>, and <code>y</code>. Let <code>a</code> and <code>b</code> represent the text content of instance nodes that will be set by a binding from user input controls. Let <code>v</code> and <code>w</code> be vertices representing the calculated value and the validity property of a third instance node <code>c</code>. These vertices would result from a <code>bind</code> element <code>B</code> with <code>calculate</code> and <code>constraint</code> attributes and a <code>nodeset</code> attribute that indicates <code>c</code>. Suppose that the value of <code>c</code> is the product of <code>a</code> and <code>b</code> and that the value is only valid if it does not exceed 100. Likewise, suppose <code>x</code> and <code>y</code> are vertices representing the calculated value and the validity property of a fourth instance node <code>d</code>. Let the value of <code>d</code> be the sum of <code>a</code> and <code>b</code>, and let <code>d</code> be valid if the value does not exceed 20. The figure below depicts the dependency digraph for this example.
</p><p><img alt="Dependency graph" border="0" height="250" src="images/depdigraph.gif" width="350" />
</p><p>Vertices <code>a</code> and <code>b</code> have edges leading to <code>v</code> and <code>x</code> because these vertices represent the calculate expressions of <code>c</code> and <code>d</code>, which reference <code>a</code> and <code>b</code> to compute their product and sum, respectively. Similarly, <code>v</code> and <code>x</code> have directed edges to <code>w</code> and <code>y</code>, respectively, because <code>w</code> and <code>y</code> represent the <code>constraint</code> expressions of <code>c</code> and <code>d</code>, which reference the values of <code>c</code> and <code>d</code> to compare them with boundary values.
</p><p>If <code>a</code> and <code>b</code> are initially equal to 10, and the user changes <code>a</code> to 11, then it is necessary to first recalculate <code>v</code> (the value of <code>c</code>) then recalculate <code>w</code> (the validity property of the value of <code>c</code>). Likewise, <code>x</code> (the value of <code>d</code>) must be recalculated before recalculating <code>y</code> (the validity property of the value of <code>d</code>). In both cases, the validity of the value does not change to <code>false</code> until after the new product and sum are computed based on the change to <code>a</code>. However, there are no interdependencies between <code>v</code> and <code>x</code>, so the product and sum could be computed in either order.
</p><p>The pertinent subgraph excludes <code>b</code> and only vertex <code>a</code> has in-degree of zero. The vertex <code>a</code> is processed first. It is not a computed vertex, so no recalculation occurs on <code>a</code>, but its removal causes <code>v</code> and <code>x</code> to have in-degree zero. Vertex <code>v</code> is processed second. Its value changes to 121, and its removal drops the in-degree of vertex <code>w</code> to zero. Vertex <code>x</code> is processed next, changing value to 21. When <code>x</code> is removed, its neighbor <code>y</code> drops to in-degree zero. The fourth and fifth iterations of this process recalculate the validity of <code>w</code> and <code>y</code>, both of which change to false.
</p>
</div></div>
<div class="div1">
<a id="Privacy_Considerations" name="Privacy_Considerations"></a><h2> <span class="mw-headline">17 Privacy Considerations</span></h2>
<div class="div2">
<a id="Using_P3P_with_XForms" name="Using_P3P_with_XForms"></a><h3> <span class="mw-headline">17.1 Using P3P with XForms</span></h3>
<p>P3P privacy policies may be associated with any forms transmitted over HTTP that have URIs associated with them. In the future, mechanisms may be specified for associating P3P policies with content transmitted over other protocols.
</p><p>P3P allows for policies to be associated with an individual URI or a set of URIs. By associating a separate policy with each URI a site can declare a very precise policy that addresses exactly what data is collected with a particular HTTP request and how that data will be used. However, site management is substantially easier for many sites if they declare a single policy that covers many URIs, or even their entire Web presence.
</p><p>The P3P specification specifies several methods for referencing a P3P policy reference file, which in turn associates P3P policies with URIs and cookies. XForms can be P3P enabled using any of the methods that are appropriate for the Web site in which they are embedded. Some special considerations regarding forms are addressed in the P3P Specification. [<a href="#ref-p3p-1.0" title="">P3P 1.0</a>]
</p><p>Different P3P policies may be applied to the representation of a form embedded in a containing document to that which is associated with the data submitted via that form. If the form representation is served from a different server than the form is submitted to, it is likely that separate P3P policy reference files and policies will be needed. Typically the form representation causes only <i>clickstream</i> data (as defined in [<a href="#ref-p3p-1.0" title="">P3P 1.0</a>] section 5.6.4) to be transferred, while a form submission causes much more data to be transferred.
</p>
</div></div>
<div class="div1">
<a id="Input_Modes_.28Non-Normative.29" name="Input_Modes_.28Non-Normative.29"></a><h2> <span class="mw-headline">18 Input Modes (Non-Normative)</span></h2>
<p>The attribute <code>inputmode</code> provides a <i>hint</i> to the user agent to select an appropriate input mode for the text input expected in an associated form control. The input mode may be a keyboard configuration, an input method editor (also called front end processor) or any other setting affecting input on the device(s) used.
</p><p>Using <code>inputmode</code>, the author can give hints to the agent that make form input easier for the user. Authors should provide <code>inputmode</code> attributes wherever possible, making sure that the values used cover a wide range of devices.
</p>
<div class="div2">
<a id="inputmode_Attribute_Value_Syntax" name="inputmode_Attribute_Value_Syntax"></a><h3> <span class="mw-headline">18.1 inputmode Attribute Value Syntax</span></h3>
<p>The value of the <code>inputmode</code> attribute is a white space separated list of tokens. Tokens are either sequences of alphabetic letters or absolute URIs. The later can be distinguished from the former by noting that absolute URIs contain a ':'. Tokens are case-insensitive. All the tokens consisting of alphabetic letters only are defined in this specification, in <a href="#List_of_Tokens" title="">List of Tokens</a> (or a successor of this specification).
</p><p>This specification does not define any URIs for use as tokens, but allows others to define such URIs for extensibility. This may become necessary for devices with input modes that cannot be covered by the tokens provided here. The URI should dereference to a human-readable description of the input mode associated with the use of the URI as a token. This description should describe the input mode indicated by this token, and whether and how this token modifies other tokens or is modified by other tokens.
</p>
</div><div class="div2">
<a id="User_Agent_Behavior" name="User_Agent_Behavior"></a><h3> <span class="mw-headline">18.2 User Agent Behavior</span></h3>
<p>Upon entering an empty form control with an <code>inputmode</code> attribute, the user agent should select the input mode indicated by the <code>inputmode</code> attribute value. User agents should not use the <code>inputmode</code> attribute to set the input mode when entering a form control with text already present. To set the appropriate input mode when entering a form control that already contains text, user agents should rely on platform-specific conventions.
</p><p>User agents should make available all the input modes which are supported by the (operating) system/device(s) they run on/have access to, and which are installed for regular use by the user. This is typically only a small subset of the input modes that can be described with the tokens defined here.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Additional guidelines for user agent implementation are found at [<a href="#ref-uaag-1.0" title="">UAAG 1.0</a>].
</p>
</div>
<p>The following simple algorithm is used to define how user agents match the values of an <code>inputmode</code> attribute to the input modes they can provide. This algorithm does not have to be implemented directly; user agents just have to behave as if they used it. The algorithm is not designed to produce "obvious" or "desirable" results for every possible combination of tokens, but to produce correct behavior for frequent token combinations and predictable behavior in all cases.
</p><p>First, each of the input modes available is represented by one or more lists of tokens. An input mode may correspond to more than one list of tokens; as an example, on a system set up for a Greek user, both "greek upperCase" and "user upperCase" would correspond to the same input mode. No two lists will be the same.
</p><p>Second, the <code>inputmode</code> attribute is scanned from front to back. For each token <var>t</var> in the <code>inputmode</code> attribute, if in the remaining list of tokens representing available input modes there is any list of tokens that contains <var>t</var>, then all lists of tokens representing available input modes that do not contain <var>t</var> are removed. If there is no remaining list of tokens that contains <var>t</var>, then <var>t</var> is ignored.
</p><p>Third, if one or more lists of tokens are left, and they all correspond to the same input mode, then this input mode is chosen. If no list is left (meaning that there was none at the start) or if the remaining lists correspond to more than one input mode, then no input mode is chosen.
</p>
<div class="exampleOuter">
<p>Example: Assume the list of lists of tokens representing the available input modes is: {"cyrillic upperCase", "cyrillic lowerCase", "cyrillic", "latin", "user upperCase", "user lowerCase"}, then the following <code>inputmode</code> values select the following input modes: "cyrillic title" selects "cyrillic", "cyrillic lowerCase" selects "cyrillic lowerCase", "lowerCase cyrillic" selects "cyrillic lowerCase", "latin upperCase" selects "latin", but "upperCase latin" does select "cyrillic upperCase" or "user upperCase" if they correspond to the same input mode, and does not select any input mode if "cyrillic upperCase" and "user upperCase" do not correspond to the same input mode.
</p>
</div></div><div class="div2">
<a id="List_of_Tokens" name="List_of_Tokens"></a><h3> <span class="mw-headline">18.3 List of Tokens</span></h3>
<p>Tokens defined in this specification are separated into two categories: <i>Script tokens</i> and <i>modifiers</i>. In <code>inputmode</code> attributes, script tokens should always be listed before modifiers.
</p>
<div class="div3">
<a id="Script_Tokens" name="Script_Tokens"></a><h4> <span class="mw-headline">18.3.1 Script Tokens</span></h4>
<p>Script tokens provide a general indication of the set of characters that is covered by an input mode. In most cases, script tokens correspond directly to [<a href="#ref-unicode-scripts" title="">Unicode Scripts</a>]. However, this neither means that an input mode has to allow input for all the characters in the script, nor that an input mode is limited to only characters from that specific script. As an example, a "latin" keyboard doesn't cover all the characters in the Latin script, and includes punctuation which is not assigned to the Latin script.
</p><p>The script tokens that are allowed are listed in [<a href="#ref-unicode-script-names" title="">Unicode Script Names</a>], "codes for the representations of scripts". The allowable values are those listed in the column "Property Value Alias" with the underscore character (_) removed, and excluding the two values "Common", and "Unknown". At the time of writing, these values are:
</p>
<ul><li> <code>Arabic</code>
</li><li> <code>Armenian</code>
</li><li> <code>Balinese</code>
</li><li> <code>Bengali</code>
</li><li> <code>Bopomofo</code>
</li><li> <code>Braille</code>
</li><li> <code>Buginese</code>
</li><li> <code>Buhid</code>
</li><li> <code>CanadianAboriginal</code>
</li><li> <code>Carian</code>
</li><li> <code>Cherokee</code>
</li><li> <code>Coptic</code>
</li><li> <code>Cuneiform</code>
</li><li> <code>Cypriot</code>
</li><li> <code>Cyrillic</code>
</li><li> <code>Deseret</code>
</li><li> <code>Devanagari</code>
</li><li> <code>Ethiopic</code>
</li><li> <code>Georgian</code>
</li><li> <code>Glagolitic</code>
</li><li> <code>Gothic</code>
</li><li> <code>Greek</code>
</li><li> <code>Gujarati</code>
</li><li> <code>Gurmukhi</code>
</li><li> <code>Han</code>
</li><li> <code>Hangul</code>
</li><li> <code>Hanunoo</code>
</li><li> <code>Hebrew</code>
</li><li> <code>Hiragana</code>
</li><li> <code>Kannada</code>
</li><li> <code>Katakana</code>
</li><li> <code>KatakanaOrHiragana</code>
</li><li> <code>KayahLi</code>
</li><li> <code>Kharoshthi</code>
</li><li> <code>Khmer</code>
</li><li> <code>Lao</code>
</li><li> <code>Latin</code>
</li><li> <code>Lepcha</code>
</li><li> <code>Limbu</code>
</li><li> <code>LinearB</code>
</li><li> <code>Lycian</code>
</li><li> <code>Lydian</code>
</li><li> <code>Malayalam</code>
</li><li> <code>Mongolian</code>
</li><li> <code>Myanmar</code>
</li><li> <code>NewTaiLue</code>
</li><li> <code>Nko</code>
</li><li> <code>Ogham</code>
</li><li> <code>OlChiki</code>
</li><li> <code>OldItalic</code>
</li><li> <code>OldPersian</code>
</li><li> <code>Oriya</code>
</li><li> <code>Osmanya</code>
</li><li> <code>PhagsPa</code>
</li><li> <code>Phoenician</code>
</li><li> <code>Rejang</code>
</li><li> <code>Runic</code>
</li><li> <code>Saurashtra</code>
</li><li> <code>Shavian</code>
</li><li> <code>Sinhala</code>
</li><li> <code>Sundanese</code>
</li><li> <code>SylotiNagri</code>
</li><li> <code>Syriac</code>
</li><li> <code>Tagalog</code>
</li><li> <code>Tagbanwa</code>
</li><li> <code>TaiLe</code>
</li><li> <code>Tamil</code>
</li><li> <code>Telugu</code>
</li><li> <code>Thaana</code>
</li><li> <code>Thai</code>
</li><li> <code>Tibetan</code>
</li><li> <code>Tifinagh</code>
</li><li> <code>Ugaritic</code>
</li><li> <code>Vai</code>
</li><li> <code>Yi</code>
</li></ul>
<p>Seven other values are allowed:
</p>
<table border="2" frame="border" summary="a list of additional allowed values for the inputmode attribute">
<tbody><tr>
<th colspan="1" rowspan="1"> Input Mode Token
</th><th colspan="1" rowspan="1"> Comments
</th></tr>
<tr>
<td colspan="1" rowspan="1"> <code>ipa</code>
</td><td colspan="1" rowspan="1"> International Phonetic Alphabet
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>hanja</code>
</td><td colspan="1" rowspan="1"> Subset of 'han' used in writing Korean
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>kanji</code>
</td><td colspan="1" rowspan="1"> subset of 'han' used in writing Japanese
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>math</code>
</td><td colspan="1" rowspan="1">
<p>mathematical symbols and related characters, representing the [<a href="#ref-unicode-script-names" title="">Unicode Script Names</a>] code "Zmth"
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>simplifiedHanzi</code>
</td><td colspan="1" rowspan="1">
<p>representing the [<a href="#ref-unicode-script-names" title="">Unicode Script Names</a>] code "Hans"
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>traditionalHanzi</code>
</td><td colspan="1" rowspan="1">
<p>representing the [<a href="#ref-unicode-script-names" title="">Unicode Script Names</a>] code "Hant"
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>user</code>
</td><td colspan="1" rowspan="1"> special value denoting the 'native' input of the user according to the system environment
</td></tr></tbody></table>
</div><div class="div3">
<a id="Modifier_Tokens" name="Modifier_Tokens"></a><h4> <span class="mw-headline">18.3.2 Modifier Tokens</span></h4>
<p>Modifier tokens can be added to the scripts they apply in order to more closely specify the kind of characters expected in the form control. Traditional PC keyboards do not need most modifier tokens (indeed, users on such devices would be quite confused if the software decided to change case on its own; CAPS lock for upperCase may be an exception). However, modifier tokens can be very helpful to set input modes for small devices.
</p>
<table border="2" frame="border" summary="list of modifier tokens for attribute inputmode">
<tbody><tr>
<th colspan="1" rowspan="1"> Input Mode Token
</th><th colspan="1" rowspan="1"> Comments
</th></tr>
<tr>
<td colspan="1" rowspan="1"> <code>lowerCase</code>
</td><td colspan="1" rowspan="1"> lowercase (for bicameral scripts)
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>upperCase</code>
</td><td colspan="1" rowspan="1"> uppercase (for bicameral scripts)
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>titleCase</code>
</td><td colspan="1" rowspan="1"> title case (for bicameral scripts): words start with an upper case letter
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>startUpper</code>
</td><td colspan="1" rowspan="1"> start input with one uppercase letter, then continue with lowercase letters
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>digits</code>
</td><td colspan="1" rowspan="1"> digits of a particular script (e.g. inputmode='thai digits')
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>symbols</code>
</td><td colspan="1" rowspan="1"> symbols, punctuation (suitable for a particular script)
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>predictOn</code>
</td><td colspan="1" rowspan="1"> text prediction switched on (e.g. for running text)
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>predictOff</code>
</td><td colspan="1" rowspan="1"> text prediction switched off (e.g. for passwords)
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>halfWidth</code>
</td><td colspan="1" rowspan="1"> half-width compatibility forms (e.g. Katakana; deprecated)
</td></tr></tbody></table>
</div></div><div class="div2">
<a id="Relationship_to_XML_Schema_pattern_facets" name="Relationship_to_XML_Schema_pattern_facets"></a><h3> <span class="mw-headline">18.4 Relationship to XML Schema pattern facets</span></h3>
<p>User agents may use information available in an XML Schema pattern facet to set the input mode. Note that a pattern facet is a hard restriction on the lexical value of an instance data node, and can specify different restrictions for different parts of the data item. Attribute <code>inputmode</code> is a soft hint about the kinds of characters that the user may most probably start to input into the form control. Attribute <code>inputmode</code> is provided in addition to pattern facets for the following reasons:
</p>
<ol><li> The set of allowable characters specified in a pattern may be so wide that it is not possible to deduce a reasonable input mode setting. Nevertheless, there frequently is a kind of characters that will be input by the user with high probability. In such a case, <code>inputmode</code> allows to set the input mode for the user's convenience.
</li><li> In some cases, it would be possible to derive the input mode setting from the pattern because the set of characters allowed in the pattern closely corresponds to a set of characters covered by an <code>inputmode</code> attribute value. However, such a derivation would require a lot of data and calculations on the user agent.
</li><li> Small devices may leave the checking of patterns to the server, but will easily be able to switch to those input modes that they support. Being able to make data entry for the user easier is of particular importance on small devices.
</li></ol>
</div><div class="div2">
<a id="Examples" name="Examples"></a><h3> <span class="mw-headline">18.5 Examples</span></h3>
<div class="exampleOuter">
<p>This is an example of  the user interface markup for  a form for user input in Japanese. .
</p>
<div class="exampleInner">
<pre> &lt;xf:input ref="name" inputmode="kanji"&gt;
    &lt;xf:label&gt;Family name:&lt;/xf:label&gt;
 &lt;/xf:input&gt;
 
 &lt;xf:input ref="nameKana" inputmode="katakana"&gt;
    &lt;xf:label&gt;Family name in kana:&lt;/xf:label&gt;
 &lt;/xf:input&gt;
 
 &lt;xf:input ref="given" inputmode="kanji"&gt;
    &lt;xf:label&gt;Given name:&lt;/xf:label&gt;
 &lt;/xf:input&gt;
 
 &lt;xf:input ref="givenKana" inputmode="katakana"&gt;
    &lt;xf:label&gt;Given name in kana:&lt;/xf:label&gt;
 &lt;/xf:input&gt;
 
 &lt;xf:input ref="email" inputmode="latin lowerCase"&gt;
    &lt;xf:label&gt;Email:&lt;/xf:label&gt;
 &lt;/xf:input&gt;
 
 &lt;xf:input ref="phone" inputmode="latin digits"&gt;
    &lt;xf:label&gt;Telephone:&lt;/xf:label&gt;
 &lt;/xf:input&gt;
 
 &lt;xf:textarea ref="comments" inputmode="user predictOn"&gt;
    &lt;xf:label&gt;Comments:&lt;/xf:label&gt;
 &lt;/xf:textarea&gt;
 
 &lt;xf:submit submission="sendit"&gt;
    &lt;xf:label&gt;Send It&lt;/xf:label&gt;
 &lt;/xf:submit&gt;
</pre>
</div></div></div></div>
<div class="div1">
<a id="Schema_for_XForms_.28Non-Normative.29" name="Schema_for_XForms_.28Non-Normative.29"></a><h2> <span class="mw-headline">19 Schema for XForms (Non-Normative)</span></h2>
<p>The XML Schema for XForms, which has a target namespace <code><a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a></code>, is located at <a class="external free" href="http://www.w3.org/MarkUp/Forms/2007/XForms-11-Schema.xsd" rel="nofollow" title="http://www.w3.org/MarkUp/Forms/2007/XForms-11-Schema.xsd">http://www.w3.org/MarkUp/Forms/2007/XForms-11-Schema.xsd</a>.
</p><p>The RELAXNG ([<a href="#ref-RELAXNG" title="">RELAXNG</a>], [<a href="#ref-RELAXNG-Compact" title="">RELAXNG Compact</a>]) Schema for XForms, which includes the target namespace <code><a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a></code> as well as the version suitable for import to a host language namespace, is located at <a class="external free" href="http://www.w3.org/MarkUp/Forms/2007/XForms-11-RELAXNG.zip" rel="nofollow" title="http://www.w3.org/MarkUp/Forms/2007/XForms-11-RELAXNG.zip">http://www.w3.org/MarkUp/Forms/2007/XForms-11-RELAXNG.zip</a>.
</p>
<div class="div2">
<a id="Schema_for_XML_Events" name="Schema_for_XML_Events"></a><h3> <span class="mw-headline">19.1 Schema for XML Events</span></h3>
<p>This XML Schema for XML Events is referenced by the XML Schema for XForms, and located at <a class="external free" href="http://www.w3.org/TR/2003/REC-xml-events-20031014/#a_schema_attribs" rel="nofollow" title="http://www.w3.org/TR/2003/REC-xml-events-20031014/#a_schema_attribs">http://www.w3.org/TR/2003/REC-xml-events-20031014/#a_schema_attribs</a>.
</p>
</div></div>
<div class="div1">
<a id="XForms_and_Styling_.28Non-Normative.29" name="XForms_and_Styling_.28Non-Normative.29"></a><h2> <span class="mw-headline">20 XForms and Styling (Non-Normative)</span></h2>
<p>This informative section provides a broad outline of new and existing CSS features needed to style XForms content. A future Recommendation from the CSS Working Group will fully develop the specification of these features.
</p>
<div class="div2">
<a id="Pseudo-classes" name="Pseudo-classes"></a><h3> <span class="mw-headline">20.1 Pseudo-classes</span></h3>
<p>A CSS pseudo-class is used to select elements for styling based on information that lies outside of the document tree or that cannot be expressed using the other selectors.
</p>
<table border="1" summary="suggested pseudo-classes for styling forms">
<tbody><tr>
<th colspan="1" rowspan="1"> Name
</th><th colspan="1" rowspan="1"> Defined in:
</th><th colspan="1" rowspan="1"> Relationship to XForms
</th></tr>
<tr>
<td colspan="1" rowspan="1"> <code>:enabled</code> &amp; <code>:disabled</code>
</td><td colspan="1" rowspan="1"> [CSS3]
</td><td colspan="1" rowspan="1">
<p>Selects any form control that is <a href="#def-relevant-form-control" title="">relevant</a> or <a href="#def-non-relevant-form-control" title="">non-relevant</a> (respectively).
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>:required</code> &amp; <code>:optional</code>
</td><td colspan="1" rowspan="1"> TBD
</td><td colspan="1" rowspan="1"> Selects any core form control bound to a node with the model item property <code>required</code> evaluating to true or false (respectively).
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>:valid</code> &amp; <code>:invalid</code>
</td><td colspan="1" rowspan="1"> TBD
</td><td colspan="1" rowspan="1"> Selects any core form control bound to a node that is currently valid or invalid (respectively), as defined by XForms.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>:read-only</code> &amp; <code>:read-write</code>
</td><td colspan="1" rowspan="1"> TBD
</td><td colspan="1" rowspan="1"> Selects any core form control bound to a node with the model item property <code>readonly</code> evaluating to true or false (respectively).
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>:out-of-range</code> &amp; <code>:in-range</code>
</td><td colspan="1" rowspan="1"> TBD
</td><td colspan="1" rowspan="1"> Selects any core form control bound to a node that contains a value the form control is not or is capable of rendering, (respectively).
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>:value-empty</code> &amp; <code>:value-non-empty</code>
</td><td colspan="1" rowspan="1"> TBD
</td><td colspan="1" rowspan="1"> Selects any core form control bound to a node whose content is the empty string or not the empty string (respectively).
</td></tr></tbody></table>
<p>This list is not exhaustive; other pseudo-classes may be defined.
</p>
</div><div class="div2">
<a id="Pseudo-elements" name="Pseudo-elements"></a><h3> <span class="mw-headline">20.2 Pseudo-elements</span></h3>
<p>Pseudo-elements are abstractions about the document tree beyond those specified by the document language. Pseudo-elements do not appear in the DOM; they are used only for purposes of styling.
</p>
<table border="1" summary="suggested pseudo-elements for styling forms">
<tbody><tr>
<th colspan="1" rowspan="1"> Name
</th><th colspan="1" rowspan="1"> Defined in:
</th><th colspan="1" rowspan="1"> Relationship to XForms
</th></tr>
<tr>
<td colspan="1" rowspan="1"> <code>::value</code>
</td><td colspan="1" rowspan="1"> TBD
</td><td colspan="1" rowspan="1"> Represents the "active" area of a form control excluding the label; this corresponds in HTML to <code>input</code> and other form control elements. This pseudo-element is a child of the form control element, and appears immediately after the required <code>label</code> element.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>::switch-case</code>
</td><td colspan="1" rowspan="1"> TBD
</td><td colspan="1" rowspan="1"> Represents the identity of the selected case of a <code>switch</code>.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>::repeat-item</code>
</td><td colspan="1" rowspan="1"> TBD
</td><td colspan="1" rowspan="1"> Represents a single item from a repeating sequence. Its position is as a parent to all the elements in a single repeating item. Each <code>::repeat-item</code> is associated with a particular item, and is affected by the model item properties (e.g. '<code>relevant</code>') found there, as the related style properties will cascade to the child elements.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>::repeat-index</code>
</td><td colspan="1" rowspan="1"> TBD
</td><td colspan="1" rowspan="1"> Represents the current item of a repeating sequence. Its position is as a parent of all the elements in the index repeating item (and as a child to the <code>::repeat-item</code> pseudo-element), thus any style declarations applying to this pseudo-element override those on the parent <code>::repeat-item</code>.
</td></tr></tbody></table>
<p>This list is not exhaustive; other pseudo-elements may be defined.
</p>
</div><div class="div2">
<a id="Examples_2" name="Examples_2"></a><h3> <span class="mw-headline">20.3 Examples</span></h3>
<p>The following examples collects together styling recommendations from this document, expressing them with a CSS notation. Throughout the examples, the following namespace declaration is assumed:
</p>
<div class="exampleInner">
<p><br /> 
</p>
<pre>@namespace xf url('http://www.w3.org/2002/xforms');

</pre>
</div>
<p>From <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a>: "All form controls, including <a href="#Container_Form_Controls" title="">container form controls</a>, should have an inline layout by default... By default, <a href="#def-repeat-item" title="">repeat items</a> should have a block layout." Hence, if the display property is not set via CSS, it should default to the following:
</p>
<div class="exampleInner">
<pre> xf|input:enabled, xf|secret:enabled, xf|textarea:enabled, xf|output:enabled,
 xf|upload:enabled, xf|range:enabled, xf|trigger:enabled, xf|submit:enabled,
 xf|select:enabled, xf|select1:enabled { display: inline; }
 xf|output:enabled { display: inline; }
 xf|group:enabled, xf|switch:enabled { display: inline; }
 xf|repeat:enabled { display: inline; }
 ::repeat-item:enabled { display:block; }
     
</pre>
</div>
<p>From <a href="#The_relevant_Property" title="">The relevant Property</a>: "Typically, non-relevant content is not presented, or it may be styled as disabled." If the display property is not set via CSS, it should default to the following:
</p>
<div class="exampleInner">
<pre> xf|input:disabled, xf|secret:disabled, xf|textarea:disabled,
 xf|output:disabled, xf|upload:disabled, xf|range:disabled,
 xf|trigger:disabled, xf|submit:disabled, xf|select:disabled,
 xf|select1:disabled
 {
   display: none;
 }
 
 xf|output:disabled { display: none; }
 xf|group:disabled, xf|switch:disabled { display: none; }
 ::repeat-item:disabled { display: none; }
     
</pre>
</div>
<p>Below is an example of how a form author can override the default display:none styling of&nbsp;:disabled. Note that the implementation must also implement the behavior of not accepting user input in the disabled control.
</p>
<div class="exampleInner">
<p><br /> 
</p>
<pre>xf|input.authorization:disabled {
   display: inline; background-color: #bbbbbb
}

</pre>
</div>
<p>From <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a>: "The readonly form control should render in a way which indicates that entering or changing the value is not allowed." Below is an example of one way to indicate this information. CSS does not have a way to provide readonly behavior, so this example merely changes the background color. An implementation could use this style by default, and an author would only need to use styling to override the default.
</p>
<div class="exampleInner">
<p><br /> 
</p>
<pre>xf|input:enabled:readonly::value
{
  display: inline; background-color: #888888
}

</pre>
</div>
<p>From <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a>: "Except as noted, relevant form controls must distinguish rendering between being bound to a required node versus a non-required node. Exceptions are form controls that do not directly render the string value of the bound node (including trigger and the container form controls)." Below is an example styling form controls bound to required nodes with a soft yellow background. An implementation could use this style by default, and an author would only need to use styling to override the default.
</p>
<div class="exampleInner">
<p><br /> 
</p>
<pre>xf|input:enabled:required, xf|secret:enabled:required,
xf|textarea:enabled:required, xf|output:enabled:required,
xf|upload:enabled:required, xf|range:enabled:required,
xf|trigger:enabled:required, xf|submit:enabled:required,
xf|select:enabled:required, xf|select1:enabled:required
{
   background-color: #FFFFD0
}

</pre>
</div>
<p>From <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a>: Relevant form controls must distinguish rendering between valid and "invalid states. Control of this behavior should be made available to stylesheets." Below is an example styling input controls bound to non-empty but invalid nodes with a reddish background. An implementation could use this style by default, and an author would only need to use styling to override the default.
</p>
<div class="exampleInner">
<p><br /> 
</p>
<pre>xf|input:enabled:invalid:value-non-empty {
   background-color: #ff8080;
}

</pre>
</div>
<p>From <a href="#Implementation_Requirements_Common_to_All_Form_Controls" title="">Implementation Requirements Common to All Form Controls</a>: "Relevant form controls must indicate when the bound instance data contains a value or content that the form control is not capable of rendering. Control of this behavior should be made available to stylesheets". In this example, select, select1, and range controls bound nodes whose values are not presentable by the controls are styled with in red. An implementation could use this style by default, and an author would only need to use styling to override the default.
</p>
<div class="exampleInner">
<p><br /> 
</p>
<pre>xf|select1:enabled:out-of-range, xf|select1:enabled:out-of-range,
xf|range:enabled:out-of-range {
  color: red;
}

</pre>
</div></div></div>
<div class="div1">
<a id="Complete_XForms_Examples_.28Non-Normative.29" name="Complete_XForms_Examples_.28Non-Normative.29"></a><h2> <span class="mw-headline">21 Complete XForms Examples (Non-Normative)</span></h2>
<p>This section presents complete XForms examples. These and additional examples are maintained at <a class="external text" href="http://www.w3.org/MarkUp/Forms/2002/Examples/" rel="nofollow" title="http://www.w3.org/MarkUp/Forms/2002/Examples/">http://www.w3.org/MarkUp/Forms/2002/Examples</a>.
</p>
<div class="div2">
<a id="XForms_in_XHTML" name="XForms_in_XHTML"></a><h3> <span class="mw-headline">21.1 XForms in XHTML</span></h3>
<div class="exampleInner">
<pre>&lt;html xmlns="<a class="external free" href="http://www.w3.org/1999/xhtml" rel="nofollow" title="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</a>" xmlns:ev="<a class="external free" href="http://www.w3.org/2001/xml-events" rel="nofollow" title="http://www.w3.org/2001/xml-events">http://www.w3.org/2001/xml-events</a>" xmlns:my="http://commerce.example.com/payment" xml:lang="en"&gt;
 &lt;head&gt;
   &lt;title&gt;XForms in XHTML&lt;/title&gt;
   &lt;model xmlns="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>" schema="payschema.xsd"&gt;
     &lt;instance&gt;
       &lt;my:payment as="credit"&gt;
         &lt;my:cc /&gt;
         &lt;my:exp /&gt;
       &lt;/my:payment&gt;
     &lt;/instance&gt;
     &lt;submission action="http://www.example.com/buy.rb" method="post" id="s00" /&gt;
     &lt;bind ref="my:cc" relevant="../@as='credit'" required="true()" /&gt;
     &lt;bind ref="my:exp" relevant="../@as='credit'" required="true()" /&gt;
   &lt;/model&gt;
 &lt;/head&gt;
 &lt;body&gt;
   ...
   &lt;group xmlns="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>"&gt;
       &lt;select1 ref="@as"&gt;
         &lt;label&gt;Select Payment Method&lt;/label&gt;
         &lt;item&gt;
             &lt;label&gt;Cash&lt;/label&gt;
             &lt;value&gt;cash&lt;/value&gt;
             &lt;message level="modeless" ev:event="xforms-select"&gt;
             Please do not mail cash.&lt;/message&gt;
         &lt;/item&gt;
         &lt;item&gt;
             &lt;label&gt;Credit&lt;/label&gt;
             &lt;value&gt;credit&lt;/value&gt;
         &lt;/item&gt;
       &lt;/select1&gt;
       
       &lt;input ref="my:cc"&gt;
         &lt;label&gt;Credit Card Number&lt;/label&gt;
         &lt;alert&gt;Please specify a valid credit card number
           (use spaces or hyphens between digit groups)&lt;/alert&gt;
       &lt;/input&gt;
       
       &lt;input ref="my:exp"&gt;
         &lt;label&gt;Expiration Date&lt;/label&gt;
       &lt;/input&gt;
       
       &lt;submit submission="s00"&gt;
         &lt;label&gt;Buy&lt;/label&gt;
       &lt;/submit&gt;
   &lt;/group&gt;
   ...
 &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
<p>Schema file <code>payschema.xsd</code>:
</p>
<div class="exampleInner">
<pre>&lt;xs:schema xmlns:my="http://commerce.example.com/payment" xmlns:xs="<a class="external free" href="http://www.w3.org/2001/XMLSchema" rel="nofollow" title="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>" xmlns:xsd="<a class="external free" href="http://www.w3.org/2001/XMLSchema" rel="nofollow" title="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>" targetNamespace="http://commerce.example.com/payment" elementFormDefault="qualified"&gt;

 &lt;xs:element name="payment"&gt;
   &lt;xs:complexType&gt;
     &lt;xs:sequence minOccurs="0" maxOccurs="unbounded"&gt;
       &lt;xs:choice&gt;    
         &lt;xs:element ref="my:cc" /&gt;
         &lt;xs:element ref="my:exp" /&gt;
       &lt;/xs:choice&gt;
     &lt;/xs:sequence&gt;
     &lt;xs:attribute name="as" type="my:paymentAs" /&gt;
   &lt;/xs:complexType&gt;
 &lt;/xs:element&gt;
 &lt;xs:element name="cc" type="my:cc" /&gt;
 &lt;xs:element name="exp" type="xsd:gYearMonth" /&gt;

 &lt;xs:simpleType name="cc"&gt;
    &lt;xs:restriction base="xsd:string"&gt; 
      &lt;xs:minLength value="12" /&gt; 
      &lt;xs:maxLength value="19" /&gt; 
      &lt;xs:pattern value="[0-9]+" /&gt; 
    &lt;/xs:restriction&gt; 
 &lt;/xs:simpleType&gt;

 &lt;xs:simpleType name="paymentAs"&gt;
   &lt;xs:restriction base="xsd:string"&gt;
     &lt;xs:enumeration value="cash" /&gt;
     &lt;xs:enumeration value="credit" /&gt;
   &lt;/xs:restriction&gt;
 &lt;/xs:simpleType&gt;
&lt;/xs:schema&gt;
</pre>
</div>
<a id="Editing_Hierarchical_Bookmarks_Using_XForms" name="Editing_Hierarchical_Bookmarks_Using_XForms"></a><h3> <span class="mw-headline">21.2 Editing Hierarchical Bookmarks Using XForms</span></h3>
<div class="exampleInner">
<pre>&lt;html xmlns="<a class="external free" href="http://www.w3.org/2002/06/xhtml2" rel="nofollow" title="http://www.w3.org/2002/06/xhtml2">http://www.w3.org/2002/06/xhtml2</a>" xmlns:xforms="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>" xmlns:xsd="<a class="external free" href="http://www.w3.org/2001/XMLSchema" rel="nofollow" title="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>" xmlns:my="http://commerce.example.com/payment" xmlns:ev="<a class="external free" href="http://www.w3.org/2001/xml-events" rel="nofollow" title="http://www.w3.org/2001/xml-events">http://www.w3.org/2001/xml-events</a>" xml:lang="en"&gt;
 &lt;head&gt;
   &lt;style type="text/css"&gt;
     xforms|input.editField {
      font-weight:bold; font-size:20px; width:500px
     }
     xforms|label.sectionLabel {
       font-weight:bold; color:white; background-color:blue
     }
     xforms|submit {
       font-family: Arial; font-size: 20px; font-style: bold; color: red
     }
   &lt;/style&gt;
   &lt;title&gt;Editing Hierarchical Bookmarks In X-Smiles &lt;/title&gt;
   &lt;model id="bookmarks" version="2.0" xmlns="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>"&gt;
     &lt;instance resource="bookmarks.xml" /&gt;
     &lt;submission id="s01" method="post" action="<a class="external free" href="http://examples.com/" rel="nofollow" title="http://examples.com/">http://examples.com/</a>" /&gt;
   &lt;/model&gt;
 &lt;/head&gt;
 &lt;body&gt;
   &lt;group xmlns="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>"&gt;
     &lt;repeat ref="section" id="repeatSections"&gt;
       &lt;input ref="@name" class="editField"&gt;
         &lt;label class="sectionLabel"&gt;Section&lt;/label&gt;
       &lt;/input&gt;
       &lt;repeat ref="bookmark" id="repeatBookmarks"&gt;
         &lt;input ref="@name"&gt;
           &lt;label&gt;Bookmark name&lt;/label&gt;
         &lt;/input&gt;
         &lt;input ref="@href"&gt;
           &lt;label&gt;URL&lt;/label&gt;
         &lt;/input&gt;
       &lt;/repeat&gt;
     &lt;/repeat&gt;
     &lt;p&gt;
       &lt;trigger id="insertbutton"&gt;
         &lt;label&gt;Insert bookmark&lt;/label&gt;
         &lt;insert ref="section[index('repeatSections')]/bookmark" at="index('repeatBookmarks')" position="after" ev:event="DOMActivate" /&gt;
       &lt;/trigger&gt;
       &lt;trigger id="delete"&gt;
         &lt;label&gt;Delete bookmark&lt;/label&gt;
         &lt;delete ref="section[index('repeatSections')]/bookmark" at="index('repeatBookmarks')" ev:event="DOMActivate" /&gt;
       &lt;/trigger&gt;
     &lt;/p&gt;
     &lt;p&gt;
       &lt;trigger id="insertsectionbutton"&gt;
         &lt;label&gt;Insert section&lt;/label&gt;
         &lt;insert ref="section" at="index('repeatSections')" position="after" ev:event="DOMActivate" /&gt;
       &lt;/trigger&gt;
       &lt;trigger id="deletesectionbutton"&gt;
         &lt;label&gt;Delete section&lt;/label&gt;
         &lt;delete ref="section" at="index('repeatSections')" ev:event="DOMActivate" /&gt;
       &lt;/trigger&gt;
     &lt;/p&gt;
     &lt;submit submission="s01"&gt;
       &lt;label&gt;Save&lt;/label&gt;
       &lt;hint&gt;Click to submit&lt;/hint&gt;
     &lt;/submit&gt;
   &lt;/group&gt;
 &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
<p>Initial instance file <code>bookmarks.xml</code>:
</p>
<div class="exampleInner">
<pre>&lt;bookmarks&gt;
 &lt;section name="main"&gt;
   &lt;bookmark href="http://www.example.com/xforms.xml" name="Main page" /&gt;
 &lt;/section&gt;
 &lt;section name="demos"&gt;
   &lt;bookmark href="http://www.example.com/demo/images.fo" name="images" /&gt;
   &lt;bookmark href="http://www.example.com/demo/xf-ecma.xml" name="ecma" /&gt;
   &lt;bookmark href="http://www.example.com/demo/sip.fo" name="sip" /&gt;
 &lt;/section&gt;
 &lt;section name="XForms"&gt;
   &lt;bookmark href="file:///C/source/xmlevents.xml" name="XML events" /&gt;
   &lt;bookmark href="file:///C/source/model3.xml" name="model3" /&gt;
   &lt;bookmark href="file:///C/source/repeat.fo" name="repeat" /&gt;
 &lt;/section&gt;
&lt;/bookmarks&gt;
</pre>
</div>
<a id="Survey_Using_XForms_and_SVG" name="Survey_Using_XForms_and_SVG"></a><h3> <span class="mw-headline">21.3 Survey Using XForms and SVG</span></h3>
<p>The following example shows one possible way of integrating XForms with [<a href="#ref-svg-1.1" title="">SVG 1.1</a>]. Note that the complete set of rules for integrating XForms and SVG are not fully specified at the time this specification was published. Future versions of the XForms, SVG, or other W3C specifications might define more complete rules for integrating XForms and SVG which might not be compatible with the example below.
</p><p>Note that the example below does not use SVG's <code>switch</code> and <code>requiredExtensions</code> features, which are commonly used in conjunction with <code>foreignObject</code>.
</p>
<div class="exampleInner">
<pre>&lt;svg xmlns="<a class="external free" href="http://www.w3.org/2000/svg" rel="nofollow" title="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</a>" xmlns:xlink="<a class="external free" href="http://www.w3.org/1999/xlink" rel="nofollow" title="http://www.w3.org/1999/xlink">http://www.w3.org/1999/xlink</a>" 
     xmlns:xforms="<a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a>" xmlns:ev="<a class="external free" href="http://www.w3.org/2001/xml-events" rel="nofollow" title="http://www.w3.org/2001/xml-events">http://www.w3.org/2001/xml-events</a>" 
     xmlns:s="http://example.com/survey" width="700px" height="600px" viewBox="0 0 700 600"&gt;
 &lt;defs&gt;
   &lt;polygon id="bullet" points="-30,-30, -10,-10, -20,10" fill="#007138" /&gt;
   &lt;xforms:model id="form1" schema="surveyschema.xsd"&gt;
     &lt;xforms:instance id="instance1"&gt;
       &lt;s:survey xmlns="http://example.com/survey"&gt;
         &lt;s:drink&gt;none&lt;/s:drink&gt;
         &lt;s:espressoPrefs&gt;
           &lt;s:numberPerWeek&gt;0&lt;/s:numberPerWeek&gt;
           &lt;s:sugar&gt;0&lt;/s:sugar&gt;
           &lt;s:lemon&gt;Always&lt;/s:lemon&gt;
         &lt;/s:espressoPrefs&gt;
       &lt;/s:survey&gt;
     &lt;/xforms:instance&gt;
     &lt;xforms:submission id="submit1" method="post" action="http://www.example.org/surveyhandler" /&gt;
   &lt;/xforms:model&gt;
 &lt;/defs&gt;
 &lt;title&gt;Espresso survey&lt;/title&gt;
 &lt;desc&gt;Sample SVG and XForms - espresso customer survey&lt;/desc&gt;
 &lt;g&gt;
   &lt;text x="50" y="70" font-size="40" font-family="Arial Black, sans-serif" font-weight="900"&gt;Customer Survey: Espresso&lt;/text&gt;
   &lt;g font-family="Arial, Helvetica, sans-serif" font-size="18"&gt;
     &lt;foreignObject x="80" y="150" width="250" height="40"&gt;
       &lt;xforms:select1 appearance="minimal" model="form1" ref="s:drink"&gt;
         &lt;xforms:label&gt;
           &lt;g transform="translate(80, 140)"&gt;
             &lt;use xlink:href="#bullet" /&gt;
             &lt;text&gt;Your usual coffee drink is:&lt;/text&gt;
           &lt;/g&gt;
         &lt;/xforms:label&gt;
         &lt;xforms:item&gt;
           &lt;xforms:label&gt;Rich, dark espresso&lt;/xforms:label&gt;
           &lt;xforms:value&gt;espresso&lt;/xforms:value&gt;
         &lt;/xforms:item&gt;
         &lt;xforms:item&gt;
           &lt;xforms:label&gt;Creamy cappuccino&lt;/xforms:label&gt;
           &lt;xforms:value&gt;cappuccino&lt;/xforms:value&gt;
         &lt;/xforms:item&gt;
         &lt;xforms:item&gt;
           &lt;xforms:label&gt;Long, milky latte&lt;/xforms:label&gt;
           &lt;xforms:value&gt;latte&lt;/xforms:value&gt;
         &lt;/xforms:item&gt;
         &lt;xforms:item&gt;
           &lt;xforms:label&gt;Don't like coffee!&lt;/xforms:label&gt;
           &lt;xforms:value&gt;none&lt;/xforms:value&gt;
         &lt;/xforms:item&gt;
       &lt;/xforms:select1&gt;
     &lt;/foreignObject&gt;
     &lt;foreignObject x="80" y="240" width="250" height="40"&gt;
       &lt;xforms:range model="form1" start="0" end="30" step="5" ref="s:espressoPrefs/s:numberPerWeek"&gt;
         &lt;xforms:label&gt;
           &lt;g transform="translate(80, 230)"&gt;
             &lt;use xlink:href="#bullet" /&gt;
             &lt;text&gt;Shots of espresso per week:&lt;/text&gt;
           &lt;/g&gt;
         &lt;/xforms:label&gt;
       &lt;/xforms:range&gt;
     &lt;/foreignObject&gt;
     &lt;foreignObject x="80" y="350" width="250" height="40"&gt;
       &lt;xforms:select model="form1" ref="s:espressoPrefs/s:sugar"&gt;
         &lt;xforms:label&gt;
           &lt;g transform="translate(80, 340)"&gt;
             &lt;use xlink:href="#bullet" /&gt;
             &lt;text&gt;Sugar?&lt;/text&gt;
           &lt;/g&gt;
         &lt;/xforms:label&gt;
         &lt;xforms:item&gt;
           &lt;xforms:label&gt;Yes&lt;/xforms:label&gt;
           &lt;xforms:value&gt;X&lt;/xforms:value&gt;
         &lt;/xforms:item&gt;
       &lt;/xforms:select&gt;
     &lt;/foreignObject&gt;
     &lt;foreignObject x="80" y="420" width="250" height="90"&gt;
       &lt;xforms:select1 appearance="full" model="form1" ref="s:espressoPrefs/s:lemon"&gt;
         &lt;xforms:label&gt;
           &lt;g transform="translate(80, 410)"&gt;
             &lt;use xlink:href="#bullet" /&gt;
             &lt;text&gt;Lemon?&lt;/text&gt;
           &lt;/g&gt;
         &lt;/xforms:label&gt;
         &lt;xforms:item&gt;
           &lt;xforms:label&gt;Required for the full experience&lt;/xforms:label&gt;
           &lt;xforms:value&gt;Always&lt;/xforms:value&gt;
         &lt;/xforms:item&gt;
         &lt;xforms:item&gt;
           &lt;xforms:label&gt;Whatever&lt;/xforms:label&gt;
           &lt;xforms:value&gt;Indifferent&lt;/xforms:value&gt;
         &lt;/xforms:item&gt;
         &lt;xforms:item&gt;
           &lt;xforms:label&gt;Keep that citrus to yourself&lt;/xforms:label&gt;
           &lt;xforms:value&gt;Never&lt;/xforms:value&gt;
         &lt;/xforms:item&gt;
       &lt;/xforms:select1&gt;
     &lt;/foreignObject&gt;
   &lt;/g&gt;
   &lt;use xlink:href="#bullet" x="101" y="64" transform="scale(7,3)" /&gt;
   &lt;foreignObject y="150" x="500" height="60" width="100"&gt;
     &lt;xforms:submit model="form1"&gt;
       &lt;xforms:label&gt;Send survey&lt;/xforms:label&gt;
     &lt;/xforms:submit&gt;
   &lt;/foreignObject&gt;
   &lt;image xlink:href="espresso.svg" x="400" y="230" width="280" height="270" /&gt;
 &lt;/g&gt;
&lt;/svg&gt;
</pre>
</div>
<div class="div1">
<p><br />
</p>
<a id="Acknowledgements_.28Non-Normative.29" name="Acknowledgements_.28Non-Normative.29"></a><h2> <span class="mw-headline">22 Acknowledgements (Non-Normative)</span></h2>
<p>This document was produced with the participation of Forms Working Group participants, including:
</p>
<ul><li> John M. Boyer, IBM (Editor, Chair until March 2010)
</li><li> Erik Bruchez, Orbeon
</li><li> Kurt Cagle, Invited expert
</li><li> Alain Couthures, Invited expert
</li><li> Philip Fennell, MarkLogic
</li><li> Leigh L. Klotz, Jr., Xerox Corporation (Editor until March 2012, Co-chair until March 2012)
</li><li> Ulrich Nicolas Liss&Atilde;&copy;, DreamLab
</li><li> Dan McCreary, Invited expert
</li><li> Steven Pemberton, CWI (Chair)
</li><li> T.V. Raman, Google
</li><li> Sebastian Schnitzenbaumer
</li><li> Nick Van den Bleeken, Inventive Designers n.v. (Editor)
</li><li> Alessandro Vernet, Orbeon
</li><li> Charles Wiecha, IBM
</li></ul>
<a id="Production_Notes_.28Non-Normative.29" name="Production_Notes_.28Non-Normative.29"></a><h2> <span class="mw-headline">23 Production Notes (Non-Normative)</span></h2>
<p>This document was created using an instance of MediaWiki. The sources were transformed to W3C format using a modified version of Sandro Hawke's revdoc.
</p>
</div></div>
</div></div>
</div>
</div>
</div>
</div>


</body>
</html>