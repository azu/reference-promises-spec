<!-- http://www.w3.org/TR/css-transforms-1/ -->
<!DOCTYPE html><html lang=en><head>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <title>CSS Transforms Module Level 1</title>
  <link href=default.css rel=stylesheet type=text/css>
  <link href=http://www.w3.org/StyleSheets/TR/W3C-WD rel=stylesheet type=text/css>
</head>
<body class=h-entry>
<style scoped type=text/css>
.example {
  clear:both
}

th {
  text-align:left
}

.pseudo-code {
  font-family:monospace
}
.pseudo-code > ol {
  list-style-type:decimal
}
.pseudo-code > ol > li > ol {
  list-style-type:lower-latin
}
.pseudo-code > ol > li > ol > li > ol {
  list-style-type:lower-roman
}
.pseudo-code ul {
  list-style-type:disc
}

dd > p:nth-child(1) {
  margin-top:0
}
</style>

<div class=head>
  <p data-fill-with=logo><a class=logo href=http://www.w3.org/>
    <img alt=W3C height=48 src=http://www.w3.org/Icons/w3c_home width=72>
</a>
</p>
  <h1 class="p-name no-ref" id=title>CSS Transforms Module Level 1</h1>
  <h2 class="no-num no-toc no-ref heading settled heading" id=subtitle><span class=content>W3C Working Draft,
    <span class=dt-updated><span class=value-title title=20131126>26 November 2013</span></span></span></h2>
  <div data-fill-with=spec-metadata><dl><dt>This version:<dd><a class=u-url href=http://www.w3.org/TR/2013/WD-css-transforms-1-20131126/>http://www.w3.org/TR/2013/WD-css-transforms-1-20131126/</a><dt>Latest version:<dd><a href=http://www.w3.org/TR/css-transforms-1/>http://www.w3.org/TR/css-transforms-1/</a><dt>Editor’s Draft:<dd><a href=http://dev.w3.org/csswg/css-transforms/>http://dev.w3.org/csswg/css-transforms/</a><dt>Previous Versions:<dd><a href=http://www.w3.org/TR/2012/WD-css3-transforms-20120911/ rel=previous>http://www.w3.org/TR/2012/WD-css3-transforms-20120911/</a><dd><a href=http://www.w3.org/TR/2012/WD-css3-transforms-20120403/ rel=previous>http://www.w3.org/TR/2012/WD-css3-transforms-20120403/</a>
    <dt>Feedback:</dt>
        <dd><a href="mailto:public-fx@w3.org?subject=%5Bcss-transforms%5D%20feedback">public-fx@w3.org</a>
            with subject line
            “<kbd>[css-transforms] <var>… message topic …</var></kbd>”(<a href=http://lists.w3.org/Archives/Public/public-fx/ rel=discussion>archives</a>)<dt>Test Suite:<dd><a href=http://test.csswg.org/suites/css3-transforms/nightly-unstable/>http://test.csswg.org/suites/css3-transforms/nightly-unstable/</a><dt>Editors:
<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:simon.fraser@apple.com>Simon Fraser</a> (<span class="p-org org"><a href=http://www.apple.com/>Apple Inc</a></span>)<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:dino@apple.com>Dean Jackson</a> (<span class="p-org org"><a href=http://www.apple.com/>Apple Inc</a></span>)<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:eoconnor@apple.com>Edward O’Connor</a> (<span class="p-org org"><a href=http://www.apple.com/>Apple Inc</a></span>)<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:dschulze@adobe.com>Dirk Schulze</a> (<span class="p-org org"><a href=http://www.adobe.com/>Adobe Systems Inc</a></span>)<dt>Former Editors:
<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:hyatt@apple.com>David Hyatt</a> (<span class="p-org org"><a href=http://www.apple.com/>Apple Inc</a></span>)<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:cmarrin@apple.com>Chris Marrin</a> (<span class="p-org org"><a href=http://www.apple.com/>Apple Inc</a></span>)<dd class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:ayg@aryeh.name>Aryeh Gregor</a> (<span class="p-org org"><a href=http://www.mozilla.org/>Mozilla</a></span>)<dt>Issues List:<dd><a href="https://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;product=CSS&amp;component=Transforms&amp;resolution=---&amp;cmdtype=doit">in Bugzilla</a></dl></div>
  <div data-fill-with=warning></div>
  <p class=copyright data-fill-with=copyright><a href=http://www.w3.org/Consortium/Legal/ipr-notice#Copyright>Copyright</a> © 2013 <a href=http://www.w3.org/><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href=http://www.csail.mit.edu/><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href=http://www.ercim.eu/><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href=http://www.keio.ac.jp/>Keio</a>, <a href=http://ev.buaa.edu.cn/>Beihang</a>), All Rights Reserved. W3C <a href=http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer>liability</a>, <a href=http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks>trademark</a> and <a href=http://www.w3.org/Consortium/Legal/copyright-documents>document use</a> rules apply.
</p>
  <hr title="Separator for header">
</div>

<h2 class="no-num no-toc no-ref heading settled heading" id=abstract><span class=content>Abstract</span></h2>
<p class=p-summary data-fill-with=abstract>CSS transforms allows elements styled with CSS to be transformed in two-dimensional or three-dimensional space. This specification is the convergence of the <a href=http://www.w3.org/TR/css3-2d-transforms/>CSS 2D transforms</a>, <a href=http://www.w3.org/TR/css3-3d-transforms/>CSS 3D transforms</a> and <a href=http://www.w3.org/TR/2009/WD-SVG-Transforms-20090320/>SVG transforms</a> specifications.
<a href=http://www.w3.org/TR/CSS/>CSS</a> is a language for describing the rendering of structured documents 
(such as HTML and XML) 
on screen, on paper, in speech, etc.</p>

<h2 class="no-num no-toc no-ref heading settled heading" id=status><span class=content>Status of this document</span></h2>
<div data-fill-with=status><p>
	<em>This section describes the status of this document at the time of
	its publication. Other documents may supersede this document. A list of
	current W3C publications and the latest revision of this technical report
	can be found in the <a href=http://www.w3.org/TR/>W3C technical reports
	index at http://www.w3.org/TR/.</a></em>

<p>
	Publication as a Working Draft does not imply endorsement by the W3C
	Membership. This is a draft document and may be updated, replaced or
	obsoleted by other documents at any time. It is inappropriate to cite this
	document as other than work in progress.

<p>
	The (<a href=http://lists.w3.org/Archives/Public/public-fx/>archived</a>) public mailing list
	<a href="mailto:public-fx@w3.org?Subject=%5Bcss-transforms%5D%20PUT%20SUBJECT%20HERE">public-fx@w3.org</a> 
	(see <a href=http://www.w3.org/Mail/Request>instructions</a>) 
	is preferred for discussion of this specification. 
	When sending e-mail, 
	please put the text “css-transforms” in the subject, 
	preferably like this:
	“[css-transforms] <em>…summary of comment…</em>”

<p>
	This document was produced by the <a href=http://www.w3.org/Style/CSS/members>CSS Working Group</a> 
	(part of the <a href=http://www.w3.org/Style/>Style Activity</a>) and the <a href=http://www.w3.org/Graphics/SVG/WG/>SVG Working Group</a> (part of the
	<a href=http://www.w3.org/Graphics/>Graphics Activity</a>).

<p>
	This document was produced by groups operating under 
	the <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/>5 February 2004 W3C Patent Policy</a>. 
	W3C maintains a <a href=http://www.w3.org/2004/01/pp-impl/32061/status rel=disclosure>public list of any patent disclosures (CSS)</a>
	and a <a href=http://www.w3.org/2004/01/pp-impl/19480/status rel=disclosure>public list of any patent disclosures (SVG)</a> 
	made in connection with the deliverables of each group; 
	these pages also includes instructions for disclosing a patent. 
	An individual who has actual knowledge of a patent which the individual believes contains
	<a href=http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential>Essential Claim(s)</a> 
	must disclose the information in accordance with <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure>section 6 of the W3C Patent Policy</a>.

<p>Compared to the previous version, this draft makes changes to the
syntax of 'transform-origin' and 'perspective-origin', adds some
definitions of keywords, adds pseudo-code to define the decomposing of
2D and 3D matrices and describes some known open issues. Several
editorial changes and some new notes increase clarity.
</div>
<div data-fill-with=at-risk></div>

<h2 class="no-num no-toc no-ref heading settled heading" id=contents><span class=content>Table of contents</span></h2>
<div data-fill-with=table-of-contents><ul class=toc><li><a href=#intro><span class=secno>1</span>Introduction</a><li><a href=#module-interactions><span class=secno>2</span>Module Interactions</a><li><a href=#css-values><span class=secno>3</span>CSS Values</a><li><a href=#terminology><span class=secno>4</span>Terminology</a><li><a href=#two-dimensional-subset><span class=secno>5</span>Two Dimensional Subset</a><li><a href=#transform-rendering><span class=secno>6</span>The Transform Rendering Model</a><ul class=toc><li><a href=#3d-transform-rendering><span class=secno>6.1</span>3D Transform Rendering</a><li><a href=#processing-of-perspective-transformed-boxes><span class=secno>6.2</span>
  Processing of Perspective-Transformed Boxes
</a></ul><li><a href=#transform-property><span class=secno>7</span>The <span class=property data-link-type=propdesc title=transform>transform</span> Property</a><li><a href=#transform-origin-property><span class=secno>8</span>The <span class=property data-link-type=propdesc title=transform-origin>transform-origin</span> Property</a><li><a href=#transform-style-property><span class=secno>9</span>The <span class=property data-link-type=propdesc title=transform-style>transform-style</span> Property</a><li><a href=#perspective-property><span class=secno>10</span>The <span class=property data-link-type=propdesc title=perspective>perspective</span> Property</a><li><a href=#perspective-origin-property><span class=secno>11</span>The <span class=property data-link-type=propdesc title=perspective-origin>perspective-origin</span> Property</a><li><a href=#backface-visibility-property><span class=secno>12</span>The <span class=property data-link-type=propdesc title=backface-visibility>backface-visibility</span> Property</a><li><a href=#svg-transform><span class=secno>13</span>The SVG <span class=property data-link-type=propdesc title=transform>transform</span> Attribute</a><ul class=toc><li><a href=#transform-attribute-specificity><span class=secno>13.1</span>
  SVG <span class=property data-link-type=propdesc title=transform>transform</span> attribute specificity
</a><li><a href=#svg-syntax><span class=secno>13.2</span>Syntax of the SVG <span class=property data-link-type=propdesc title=transform>transform</span> attribute</a><ul class=toc><li><a href=#svg-transform-list><span class=secno>13.2.1</span>Transform List</a><li><a href=#svg-functional-notation><span class=secno>13.2.2</span>Functional Notation</a><li><a href=#svg-data-types><span class=secno>13.2.3</span>SVG Data Types</a><ul class=toc><li><a href=#svg-transform-value><span class=secno>13.2.3.1</span>
  The <span class=production data-link-type=type title="<translation-value>">&lt;translation-value&gt;</span> and <span class=production data-link-type=type title="<length>">&lt;length&gt;</span> type
</a><li><a href=#svg-angle><span class=secno>13.2.3.2</span>The <span class=production data-link-type=type title="<angle>">&lt;angle&gt;</span> type</a><li><a href=#svg-number><span class=secno>13.2.3.3</span>The <span class=production data-link-type=type title="<number>">&lt;number&gt;</span> type</a></ul></ul><li><a href=#svg-gradient-transform-pattern-transform><span class=secno>13.3</span>
  The SVG <span class=attr-name data-link-type=maybe title=gradienttransform>gradientTransform</span> and <span class=attr-name data-link-type=maybe title=patterntransform>patternTransform</span> attributes
</a><li><a href=#svg-transform-functions><span class=secno>13.4</span>
  SVG transform functions
</a><li><a href=#svg-three-dimensional-functions><span class=secno>13.5</span>SVG and 3D transform functions</a><li><a href=#svg-user-coordinate-space><span class=secno>13.6</span>User coordinate space</a><li><a href=#transform-attribute-dom><span class=secno>13.7</span>
  SVG DOM interface for the <span class=property data-link-type=propdesc title=transform>transform</span> attribute
</a></ul><li><a href=#svg-animation><span class=secno>14</span>SVG Animation</a><ul class=toc><li><a href=#svg-animate-element><span class=secno>14.1</span>
  The <span><code class=element-name>&lt;animate&gt;</code></span> and <span><code class=element-name>&lt;set&gt;</code></span> element
</a><li><a href=#neutral-element><span class=secno>14.2</span>Neutral element for addition</a><li><a href=#svg-attribute-name><span class=secno>14.3</span>
  The SVG <span class=property data-link-type=propdesc title=attributename>attributeName</span> attribute
</a></ul><li><a href=#transform-functions><span class=secno>15</span>The Transform Functions</a><ul class=toc><li><a href=#two-d-transform-functions><span class=secno>15.1</span>2D Transform Functions</a><li><a href=#three-d-transform-functions><span class=secno>15.2</span>3D Transform Functions</a></ul><li><a href=#transform-function-lists><span class=secno>16</span>The Transform Function Lists</a><li><a href=#interpolation-of-transforms><span class=secno>17</span>Interpolation of Transforms</a><li><a href=#transform-primitives><span class=secno>18</span>
  Transform function primitives and derivatives
</a><li><a href=#interpolation-of-transform-functions><span class=secno>19</span>
  Interpolation of primitives and derived transform functions
</a><li><a href=#matrix-interpolation><span class=secno>20</span>Interpolation of Matrices</a><ul class=toc><li><a href=#supporting-functions><span class=secno>20.1</span>Supporting functions</a><li><a href=#interpolation-of-2d-matrices><span class=secno>20.2</span>Interpolation of 2D matrices</a><ul class=toc><li><a href=#decomposing-a-2d-matrix><span class=secno>20.2.1</span>Decomposing a 2D matrix</a><li><a href=#interpolation-of-decomposed-2d-matrix-values><span class=secno>20.2.2</span>
  Interpolation of decomposed 2D matrix values
</a><li><a href=#recomposing-to-a-2d-matrix><span class=secno>20.2.3</span>Recomposing to a 2D matrix</a></ul><li><a href=#interpolation-of-3d-matrices><span class=secno>20.3</span>Interpolation of 3D matrices</a><ul class=toc><li><a href=#decomposing-a-3d-matrix><span class=secno>20.3.1</span>Decomposing a 3D matrix</a><li><a href=#interpolation-of-decomposed-3d-matrix-values><span class=secno>20.3.2</span>
  Interpolation of decomposed 3D matrix values
</a><li><a href=#recomposing-to-a-3d-matrix><span class=secno>20.3.3</span>Recomposing to a 3D matrix</a></ul></ul><li><a href=#mathematical-description><span class=secno>21</span>
  Mathematical Description of Transform Functions
</a><li><a href=#conformance><span class=secno></span>
Conformance</a><ul class=toc><li><a href=#conventions><span class=secno></span>
Document conventions</a><li><a href=#conformance-classes><span class=secno></span>
Conformance classes</a><li><a href=#partial><span class=secno></span>
Partial implementations</a><li><a href=#experimental><span class=secno></span>
Experimental implementations</a><li><a href=#testing><span class=secno></span>
Non-experimental implementations</a></ul><li><a href=#references><span class=secno></span>
References</a><ul class=toc><li><a href=#normative><span class=secno></span>
Normative References</a><li><a href=#informative><span class=secno></span>
Informative References</a></ul><li><a href=#index><span class=secno></span>
Index</a><li><a href=#property-index><span class=secno></span>
Property index</a><li><a href=#issues-index><span class=secno></span>Issues Index</a></ul></div>


<h2 class="heading settled heading" data-level=1 id=intro><span class=secno>1 </span><span class=content>Introduction</span><a class=self-link href=#intro></a></h2>

<p><em>This section is not normative.</em>

<p>The CSS <a href=http://www.w3.org/TR/REC-CSS2/visuren.html>visual formatting model</a> describes a coordinate system within each element is positioned. Positions and sizes in this coordinate space can be thought of as being expressed in pixels, starting in the origin of point with positive values proceeding to the right and down.

<p>This coordinate space can be modified with the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property. Using transform, elements can be translated, rotated and scaled in two or three dimensional space.

<p>Additional properties make working with transforms easier, and allow the author to control how nested three-dimensional transforms interact.

<p><ul>
  <li>
    The <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> property provides a convenient way to control the origin about which transforms on an element are applied.
  </li>
  <li>
    The <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> property allows the author to make child elements with three-dimensional transforms appear as if they live in a common three-dimensional space. The <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> property provides control over the origin at which perspective is applied, effectively changing the location of the "vanishing point".
  </li>
  <li>
    The <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> property allows 3D-transformed elements and their 3D-transformed descendants to share a common three-dimensional space, allowing the construction of hierarchies of three-dimensional objects.
  </li>
  <li>
     The <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> property comes into play when an element is flipped around via three-dimensional transforms such that its reverse side is visible to the viewer. In some situations it is desirable to hide the element in this situation, which is possible using the value of <span class=css data-link-type=maybe title=hidden>hidden</span> for this property.
  </li>
</ul>

<p class=note>Note: While some values of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property allow an element to be transformed in a three-dimensional coordinate system, the elements themselves are not three-dimensional objects. Instead, they exist on a two-dimensional plane (a flat surface) and have no depth.

<h2 class="heading settled heading" data-level=2 id=module-interactions><span class=secno>2 </span><span class=content>Module Interactions</span><a class=self-link href=#module-interactions></a></h2>

<p>This module defines a set of CSS properties that affect the visual rendering of elements to which those properties are applied; these effects are applied after elements have been sized and positioned according to the <a href=http://www.w3.org/TR/CSS2/visuren.html title="Visual formatting model">Visual formatting model</a> from <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>. Some values of these properties result in the creation of a <a href=http://www.w3.org/TR/CSS2/visuren.html#containing-block title="Visual formatting model">containing block</a>, and/or the creation of a <a data-link-spec=css21 data-link-type=dfn href=http://www.w3.org/TR/CSS21/visuren.html#x43 title="stacking context">stacking context</a>.

<p>Three-dimensional transforms can also affect the visual layering of elements, and thus override the back-to-front painting order described in <a href=http://www.w3.org/TR/CSS2/zindex.html title="Elaborate description of Stacking Contexts">Appendix E</a> of <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>.

<p>Transforms affect the rendering of backgrounds on elements with a value of <span class=css data-link-type=maybe title=fixed>fixed</span> for the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-4/#background-attachment title=background-attachment>background-attachment</a> property, which is specified in <a data-biblio-type=normative data-link-type=biblio href=#css3bg title=css3bg>[CSS3BG]</a>.

<h2 class="heading settled heading" data-level=3 id=css-values><span class=secno>3 </span><span class=content>CSS Values</span><a class=self-link href=#css-values></a></h2>

<p>This specification follows the <a href=http://www.w3.org/TR/CSS21/about.html#property-defs>CSS property definition conventions</a> from <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>. Value types not defined in these specifications are defined in CSS Values and Units Module Level 3 <a data-biblio-type=normative data-link-type=biblio href=#css3val title=css3val>[CSS3VAL]</a>.

<p>In addition to the property-specific values listed in their definitions, all properties defined in this specification also accept the <a href=http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit>inherit</a> keyword as their property value. For readability it has not been repeated explicitly.



<h2 class="heading settled heading" data-level=4 id=terminology><span class=secno>4 </span><span class=content>Terminology</span><a class=self-link href=#terminology></a></h2>

<p>When used in this specification, terms have the meanings assigned in this section.

<dl>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=bounding-box>bounding box<a class=self-link href=#bounding-box></a></dfn></dt>
  <dd>
    A bounding box is the object bounding box for all SVG elements without an associated CSS layout box and the border box for all other elements. The bounding box of a table is the border box of its <a href=http://www.w3.org/TR/CSS21/tables.html#model>table wrapper box</a>, not its table box.
  </dd>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=transformable-element>transformable element<a class=self-link href=#transformable-element></a></dfn></dt>
  <dd>
    A transformable element is an element in one of these categories:
    <ul>
      <li>
        an element whose layout is governed by the CSS box model which is either a <a href=http://www.w3.org/TR/CSS2/visuren.html#block-level>block-level</a> or <a href=http://www.w3.org/TR/CSS2/visuren.html#x13>atomic inline-level element</a>, or whose <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-display title=display>display</a> property computes to <span class=css data-link-type=maybe title=table-row>table-row</span>, <span class=css data-link-type=maybe title=table-row-group>table-row-group</span>, <span class=css data-link-type=maybe title=table-header-group>table-header-group</span>, <span class=css data-link-type=maybe title=table-footer-group>table-footer-group</span>, <span class=css data-link-type=maybe title=table-cell>table-cell</span>, or <span class=css data-link-type=maybe title=table-caption>table-caption</span> <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
      </li>
      <li>
        an element in the SVG namespace and not governed by the CSS box model which has the attributes <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a>, <a class=attr-name href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternTransformAttribute>‘patternTransform‘</a> or <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> <a data-biblio-type=normative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a>.
      </li>
    </ul>
  </dd>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=user-coordinate-system>user coordinate system<a class=self-link href=#user-coordinate-system></a></dfn></dt>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=local-coordinate-system>local coordinate system<a class=self-link href=#local-coordinate-system></a></dfn></dt>
  <dd>
    In general, a coordinate system defines locations and distances on the current canvas. The current local coordinate system (also user coordinate system) is the coordinate system that is currently active and which is used to define how coordinates and lengths are located and computed, respectively, on the current canvas.
  </dd>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=perspective-matrix>perspective matrix<a class=self-link href=#perspective-matrix></a></dfn></dt>
  <dd>
    A matrix computed from the values of the <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> and <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> properties as described <a href=#perspective-matrix-computation>below</a>.
  </dd>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=transformation-matrix>transformation matrix<a class=self-link href=#transformation-matrix></a></dfn></dt>
  <dd>
    A matrix that defines the mathematical mapping from one coordinate system into another. It is computed from the values of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> and <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> properties as described <a href=#transformation-matrix-computation>below</a>.
  </dd>  
  <dt><dfn data-dfn-type=dfn data-noexport="" id=current-transformation-matrix-ctm>current transformation matrix (CTM)<a class=self-link href=#current-transformation-matrix-ctm></a></dfn></dt>
  <dd>
    A matrix that defines the mapping from the local coordinate system into the viewport coordinate system.
  </dd>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=accumulated-3d-transformation-matrix>accumulated 3D transformation matrix<a class=self-link href=#accumulated-3d-transformation-matrix></a></dfn></dt>
  <dd>
    A matrix computed for elements in a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a>, as described <a href=#accumulated-3d-transformation-matrix-computation>below</a>.
  </dd>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=2d-matrix>2D matrix<a class=self-link href=#2d-matrix></a></dfn></dt>
  <dd>
    A 3x2 transformation matrix with 6 items or a 4x4 matrix with 16 items, where the items m<sub>31</sub>, m<sub>32</sub>, m<sub>13</sub>, m<sub>23</sub>, m<sub>43</sub>, m<sub>14</sub>, m<sub>24</sub>, m<sub>34</sub> are equal to <span class=css data-link-type=maybe title=0>0</span> and m<sub>33</sub>, m<sub>44</sub> are equal to <span class=css data-link-type=maybe title=1>1</span>.
  </dd>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=3d-matrix>3D matrix<a class=self-link href=#3d-matrix></a></dfn></dt>
  <dd>
    A 4x4 matrix which does not fulfill the requirements of an <a data-link-type=dfn href=#2d-matrix title="2d matrix">2D matrix</a>.
  </dd>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=identity-transform-function>identity transform function<a class=self-link href=#identity-transform-function></a></dfn></dt>
  <dd>
    A <a href=#transform-functions>transform function</a> that is equivalent to a identity 4x4 matrix (see <a href=#mathematical-description>Mathematical Description of Transform Functions</a>). Examples for identity transform functions are <span class=css data-link-type=maybe title=translate(0)>translate(0)</span>, <span class=css data-link-type=maybe title="translate3d(0, 0, 0)">translate3d(0, 0, 0)</span>, <span class=css data-link-type=maybe title=translatex(0)>translateX(0)</span>, <span class=css data-link-type=maybe title=translatey(0)>translateY(0)</span>, <span class=css data-link-type=maybe title=translatez(0)>translateZ(0)</span>, <span class=css data-link-type=maybe title=scale(1)>scale(1)</span>, <span class=css data-link-type=maybe title=scalex(1)>scaleX(1)</span>, <span class=css data-link-type=maybe title=scaley(1)>scaleY(1)</span>, <span class=css data-link-type=maybe title=scalez(1)>scaleZ(1)</span>, <span class=css data-link-type=maybe title=rotate(0)>rotate(0)</span>, <span class=css data-link-type=maybe title="rotate3d(1, 1, 1, 0)">rotate3d(1, 1, 1, 0)</span>, <span class=css data-link-type=maybe title=rotatex(0)>rotateX(0)</span>, <span class=css data-link-type=maybe title=rotatey(0)>rotateY(0)</span>, <span class=css data-link-type=maybe title=rotatez(0)>rotateZ(0)</span>, <span class=css data-link-type=maybe title="skew(0, 0)">skew(0, 0)</span>, <span class=css data-link-type=maybe title=skewx(0)>skewX(0)</span>, <span class=css data-link-type=maybe title=skewy(0)>skewY(0)</span>, <span class=css data-link-type=maybe title="matrix(1, 0, 0, 1, 0, 0)">matrix(1, 0, 0, 1, 0, 0)</span> and <span class=css data-link-type=maybe title="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)">matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)</span>. A special case is perspective: <span class=css data-link-type=maybe title=perspective(infinity)>perspective(infinity)</span>. The value of m<sub>34</sub> becomes infinitesimal small and the transform function is therefore assumed to be equal to the identity matrix.
  </dd>

  <dt><dfn data-dfn-type=dfn data-noexport="" id=3d-rendering-context>3D rendering context<a class=self-link href=#3d-rendering-context></a></dfn></dt>
  <dd>
    A containing block hierarchy of one or more levels, instantiated by elements with a computed value for the <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> property of <span class=css data-link-type=maybe title=preserve-3d>preserve-3d</span>, whose elements share a common three-dimensional coordinate system.
  </dd>
</dl>



<h2 class="heading settled heading" data-level=5 id=two-dimensional-subset><span class=secno>5 </span><span class=content>Two Dimensional Subset</span><a class=self-link href=#two-dimensional-subset></a></h2>

<p>UAs may not always be able to render three-dimensional transforms and then just support a two-dimensional subset of this specification. In this case <a href=#three-d-transform-functions>three-dimensional transforms</a> and the properties <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a>, <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a>, <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> and <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> must not be supported. Section <a href=#3d-transform-rendering>3D Transform Rendering</a> does not apply. Matrix decomposing uses the technique taken from the "unmatrix" method in "Graphics Gems II, edited by Jim Arvo", simplified for the 2D case. Section <a href=#mathematical-description>Mathematical Description of Transform Functions</a> is still effective but can be reduced by using a 3x3 transformation matrix where <em>a</em> equals m<sub>11</sub>, <em>b</em> equals m<sub>12</sub>, <em>c</em> equals m<sub>21</sub>, <em>d</em> equals m<sub>22</sub>, <em>e</em> equals m<sub>41</sub> and <em>f</em> equals m<sub>42</sub> (see <a href=#MatrixDefined>A 2D 3x2 matrix with six parameter</a>).

<div class=figure>
  <img alt="3x3 matrix" height=79 src=3x3matrix.png title="\begin{bmatrix} a &amp; c &amp; e \\ b
  &amp; d &amp; f \\ 0 &amp; 0 &amp; 1 \end{bmatrix}" width=82>
   <p class=caption>
     3x3 matrix for two-dimensional transformations.
  </p>
</div>

<div class=example>
  <p>
    Authors can easily provide a fallback if UAs do not provide support for three-dimensional transforms. The following example has two property definitions for <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a>. The first one consists of two two-dimensional transform functions. The second one has a two-dimensional and a three-dimensional transform function.
  </p>

  <pre>div {
  transform: scale(2) rotate(45deg);
  transform: scale(2) rotate3d(0, 0, 1, 45deg);
}</pre>
  <p>
    With 3D support, the second definition will override the first one. Without 3D support, the second definition is invalid and a UA falls back to the first definition.
  </p>
</div>



<h2 class="heading settled heading" data-level=6 id=transform-rendering><span class=secno>6 </span><span class=content>The Transform Rendering Model</span><a class=self-link href=#transform-rendering></a></h2>

<p><em>This section is normative.</em>

<p>Specifying a value other than <a class=css data-link-type=maybe href=#none title=none>none</a> for the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property establishes a new <a data-link-type=dfn href=#local-coordinate-system title="local coordinate system">local coordinate system</a> at the element that it is applied to. The mapping from where the element would have rendered into that local coordinate system is given by the element’s <a data-link-type=dfn href=#transformation-matrix title="transformation matrix">transformation matrix</a>. Transformations are cumulative. That is, elements establish their local coordinate system within the coordinate system of their parent. From the perspective of the user, an element effectively accumulates all the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> properties of its ancestors as well as any local transform applied to it. The accumulation of these transforms defines a <a data-link-type=dfn href=#current-transformation-matrix-ctm title="current transformation matrix (ctm)">current transformation matrix (CTM)</a> for the element.

<p>The coordinate space is a coordinate system with two axes: the X axis increases horizontally to the right; the Y axis increases vertically downwards. Three-dimensional transform functions extend this coordinate space into three dimensions, adding a Z axis perpendicular to the plane of the screen, that increases towards the viewer.

<div class=figure>
  <img alt="Demonstration of the initial coordinate space" height=240 src=coordinates.svg width=270>
  <p class=caption>
     Demonstration of the initial coordinate space.
  </p>
</div>

<p id=transformation-matrix-computation>
  The <a data-link-type=dfn href=#transformation-matrix title="transformation matrix">transformation matrix</a> is computed from the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> and <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> properties as follows:
  <ol>
    <li>Start with the identity matrix.</li>
    <li>Translate by the computed X, Y and Z values of <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a></li>
    <li>Multiply by each of the transform functions in <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property from left to right</li>
    <li>Translate by the negated computed X, Y and Z values of <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a></li>
  </ol>
<p></p>

<p>Transforms apply to <a data-link-type=dfn href=#transformable-element title="transformable elements">transformable elements</a>.

<p class=note>Note: Transformations do affect the visual layout on the canvas, but have no affect on the CSS layout itself. This also means transforms do not affect results of the Element Interface Extensions <a href=http://www.w3.org/TR/cssom-view/#dom-element-getclientrects>getClientRects()</a> and <a href=http://www.w3.org/TR/cssom-view/#dom-element-getboundingclientrect>getBoundingClientRect()</a>, which are specified in <a data-biblio-type=informative data-link-type=biblio href=#cssom-view title=cssom-view>[CSSOM-VIEW]</a>.

<div class=example>
  <pre>div {
  transform: translate(100px, 100px);
}</pre>  <p>
    This transform moves the element by 100 pixels in both the X and Y directions.
  </p>
  <div class=figure>
    <img alt="The 100px translation in X and Y" height=250 src=examples/translate1.svg width=470>
  </div>
</div>

<div class=example>
  <pre>div {
  height: 100px; width: 100px;
  transform-origin: 50px 50px;
  transform: rotate(45deg);
}</pre>
  <p>
    The <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> property moves the point of origin by 50 pixels in both the X and Y directions. The transform rotates the element clockwise by 45° about the point of origin. After all transform functions were applied, the translation of the origin gets translated back by -50 pixels in both the X and Y directions.
  </p>

  <div class=figure>
    <img alt="The point of origin gets translated temporary" height=250 src=examples/origin1.svg width=735>
  </div>
</div>

<div class=example>
  <pre>div {
  height: 100px; width: 100px;
  transform: translate(80px, 80px) scale(1.5, 1.5) rotate(45deg);
}</pre>
  <p>
    This transform moves the element by 80 pixels in both the X and Y directions, then scales the element by 150%, then rotates it 45° clockwise about the Z axis. Note that the scale and rotation operate about the center of the element, since the element has the default transform-origin of <span class=css data-link-type=maybe title="50% 50%">50% 50%</span>.
  </p>

  <div class=figure>
    <img alt="The transform specified above" height=270 src=examples/compound_transform.svg width=270>
  </div>

  <p class=note>
    Note that an identical rendering can be obtained by nesting elements with the equivalent transforms:
  </p>

  <pre>&lt;div style="transform: translate(80px, 80px)"&gt;
  &lt;div style="transform: scale(1.5, 1.5)"&gt;
      &lt;div style="transform: rotate(45deg)"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></div>

<p>For elements whose layout is governed by the CSS box model, the transform property does not affect the flow of the content surrounding the transformed element. However, the extent of the overflow area takes into account transformed elements. This behavior is similar to what happens when elements are offset via relative positioning. Therefore, if the value of the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css-overflow-3/#overflow title=overflow>overflow</a> property is <span class=css data-link-type=maybe title=scroll>scroll</span> or <span class=css data-link-type=maybe title=auto>auto</span>, scrollbars will appear as needed to see content that is transformed outside the visible area.

<p>For elements whose layout is governed by the CSS box model, any value other than <a class=css data-link-type=maybe href=#none title=none>none</a> for the transform results in the creation of both a stacking context and a containing block. The object acts as a containing block for fixed positioned descendants.

<p class=issue id=issue-ca2c412c><a class=self-link href=#issue-ca2c412c></a>
  Is this effect on <a class=css data-link-type=propdesc href=http://www.w3.org/TR/css3-positioning/#position title=position>position: fixed</a> necessary? If so, need to go into more detail here about why fixed positioned objects should do this, i.e., that it’s much harder to implement otherwise. See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=16328">Bug 16328</a>.
</p>

<p><a href=http://www.w3.org/TR/css3-background/#fixed0>Fixed backgrounds</a> on the root element are affected by any transform specified for that element. For all other elements that are effected by a transform (i.e. have a transform applied to them, or to any of their ancestor elements), a value of <span class=css data-link-type=maybe title=fixed>fixed</span> for the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-4/#background-attachment title=background-attachment>background-attachment</a> property is treated as if it had a value of <span class=css data-link-type=maybe title=scroll>scroll</span>. The computed value of <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-4/#background-attachment title=background-attachment>background-attachment</a> is not affected.

<p class=note>Note: If the root element is transformed, the transformation applies to the entire canvas, including any background specified for the root element.  Since <a href=http://www.w3.org/TR/css3-background/#special-backgrounds>the background painting area for the root element</a> is the entire canvas, which is infinite, the transformation might cause parts of the background that were originally off-screen to appear. For example, if the root element’s background were repeating dots, and a transformation of <span class=css data-link-type=maybe title=scale(0.5)>scale(0.5)</span> were specified on the root element, the dots would shrink to half their size, but there will be twice as many, so they still cover the whole viewport.

<h3 class="heading settled heading" data-level=6.1 id=3d-transform-rendering><span class=secno>6.1 </span><span class=content>3D Transform Rendering</span><a class=self-link href=#3d-transform-rendering></a></h3>

<p>Normally, elements render as flat planes, and are rendered into the same plane as their containing block. Often this is the plane shared by the rest of the page. Two-dimensional transform functions can alter the appearance of an element, but that element is still rendered into the same plane as its containing block.

<p>Three-dimensional transforms can result in transformation matrices with a non-zero Z component (where the Z axis projects out of the plane of the screen). This can result in an element rendering on a different plane than that of its containing block. This may affect the front-to-back rendering order of that element relative to other elements, as well as causing it to intersect with other elements. This behavior depends on whether the element is a member of a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a>, as described below.

<div class=issue id=issue-34d952cb><a class=self-link href=#issue-34d952cb></a>
  <p class=desc>
    This description does not exactly match what WebKit implements. Perhaps it should be changed to match current implementations? See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=19637">Bug 19637</a>.
  </p>
</div>

<div class=example>
  <p>
    This example shows the effect of three-dimensional transform applied to an element.
  </p>

  <pre>&lt;style&gt;
div {
  height: 150px;
  width: 150px;
}
.container {
  border: 1px solid black;
}
.transformed {
  transform: rotateY(50deg);
}
&lt;/style&gt;

&lt;div class="container"&gt;
  &lt;div class="transformed"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>  <div class=figure>
    <img alt="Div with a rotateY transform." height=190 src=examples/simple-3d-example.png width=210>
  </div>

  <p>
    The transform is a 50° rotation about the vertical, Y axis. Note how this makes the blue box appear narrower, but not three-dimensional.
  </p>
</div>

<p>The <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> and <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> properties can be used to add a feeling of depth to a scene by making elements higher on the Z axis (closer to the viewer) appear larger, and those further away to appear smaller. The scaling is proportional to <var>d</var>/(<var>d</var> − <var>Z</var>) where <var>d</var>, the value of <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a>, is the distance from the drawing plane to the the assumed position of the viewer’s eye.

<div class=figure>
  <img alt="Diagram of scale vs. Z position" src=perspective_distance.png>
  <p class=caption>
    Diagrams showing how scaling depends on the <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> property and Z position. In the top diagram, <var>Z</var> is half of <var>d</var>. In order to make it appear that the original circle (solid outline) appears at <var>Z</var> (dashed circle), the circle is scaled up by a factor of two, resulting in the light blue circle. In the bottom diagram, the circle is scaled down by a factor of one-third to make it appear behind the original position.
  </p>
</div>

<p>Normally the assumed position of the viewer’s eye is centered on a drawing. This position can be moved if desired – for example, if a web page contains multiple drawings that should share a common perspective – by setting <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a>.

<div class=figure>
  <img alt="Diagram of different perspective-origin" src=perspective_origin.png>
  <p class=caption>
    Diagram showing the effect of moving the perspective origin upward.
  </p>
</div>

<p id=perspective-matrix-computation>
  The <a data-link-type=dfn href=#perspective-matrix title="perspective matrix">perspective matrix</a> is computed as follows:
  <ol>
    <li>Start with the identity matrix.</li>
    <li>Translate by the computed X and Y values of <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a></li>
    <li>Multiply by the matrix that would be obtained from the <a class=css data-link-type=maybe href=#funcdef-perspective title=perspective()>perspective()</a> transform function, where the length is provided by the value of the <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> property</li>
    <li>Translate by the negated computed X and Y values of <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a></li>
  </ol>
<p></p>


<div class=example>
  <p>
    This example shows how perspective can be used to cause three-dimensional transforms to appear more realistic.
  </p>
  <pre>&lt;style&gt;
div {
  height: 150px;
  width: 150px;
}
.container {
  perspective: 500px;
  border: 1px solid black;
}
.transformed {
  transform: rotateY(50deg);
}
&lt;/style&gt;

&lt;div class="container"&gt;
  &lt;div class="transformed"&gt;&lt;/div&gt;
&lt;/div&gt;</pre>
  <div class=figure>
      <img alt="Div with a rotateY transform, and perspective on its container" height=190 src=examples/simple-perspective-example.png width=210>
  </div>
  <p>
    The inner element has the same transform as in the previous example, but its rendering is now influenced by the perspective property on its parent element. Perspective causes vertices that have positive Z coordinates (closer to the viewer) to be scaled up in X and Y, and those further away (negative Z coordinates) to be scaled down, giving an appearance of depth.
  </p>
</div>

<p>An element with a three-dimensional transform that is not contained in a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> renders with the appropriate transform applied, but does not intersect with any other elements. The three-dimensional transform in this case can be considered just as a painting effect, like two-dimensional transforms. Similarly, the transform does not affect painting order. For example, a transform with a positive Z translation may make an element look larger, but does not cause that element to render in front of elements with no translation in Z.

<p>An element with a three-dimensional transform that is contained in a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> can visibly interact with other elements in that same 3D rendering context; the set of elements participating in the same <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> may obscure each other or intersect, based on their computed transforms. They are rendered as if they are all siblings, positioned in a common 3D coordinate space. The position of each element in that three-dimensional space is determined by accumulating the transformation matrices up from the element that establishes the <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> through each element that is a containing block for the given element, as described below.

<div class=example>
  <pre>&lt;style&gt;
div {
  height: 150px;
  width: 150px;
}
.container {
  perspective: 500px;
  border: 1px solid black;
}
.transformed {
  transform: rotateY(50deg);
  background-color: blue;
}
.child {
  transform-origin: top left;
  transform: rotateX(40deg);
  background-color: lime;
}
&lt;/style&gt;

&lt;div class="container"&gt;
  &lt;div class="transformed"&gt;
      &lt;div class="child"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>  <p>
    This example shows how nested 3D transforms are rendered in the absence of <a class=css data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style: preserve-3d</a>. The blue div is transformed as in the previous example, with its rendering influenced by the perspective on its parent element. The lime element also has a 3D transform, which is a rotation about the X axis (anchored at the top, by virtue of the transform-origin). However, the lime element is being rendered into the plane of its parent because it is not a member of a 3D rendering context; the parent is "flattening".
  </p>

  <div class=figure>
    <img alt="Nested 3D transforms, with flattening" height=200 src=examples/3d-rendering-context-flat.png width=240>
  </div>
</div>

<p>Elements establish and participate in 3D rendering contexts as follows:

<p><ul>
  <li>
    A <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> is established by a a <a data-link-type=dfn href=#transformable-element title="transformable element">transformable element</a> whose computed value for <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> is <span class=css data-link-type=maybe title=preserve-3d>preserve-3d</span>, and which itself is not part of a 3D rendering context. Note that such an element is always a containing block. An element that establishes a 3D rendering context also participates in that context.
  </li>
  <li>
    An element whose computed value for <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> is <span class=css data-link-type=maybe title=preserve-3d>preserve-3d</span>, and which itself participates in a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a>, extends that 3D rendering context rather than establishing a new one.
  </li>
  <li>
    An element participates in a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> if its containing block establishes or extends a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a>.
  </li>
</ul>

<p id=accumulated-3d-transformation-matrix-computation>
  The final value of the transform used to render an element in a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> is computed by accumulating an <a data-link-type=dfn href=#accumulated-3d-transformation-matrix title="accumulated 3d transformation matrix">accumulated 3D transformation matrix</a> as follows:
</p>

<ol>
  <li>Start with the identity matrix.</li>
  <li>For each containing block between the root of the <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> and the element in question:
    <ol>
      <li>multiply the accumulated matrix with the <a data-link-type=dfn href=#perspective-matrix title="perspective matrix">perspective matrix</a> on the element’s containing block (if any). That containing block is not necessarily a member of the 3D rendering context.</li>
      <li>apply to the accumulated matrix a translation equivalent to the horizontal and vertical offset of the element relative to its containing block as specified by the CSS visual formatting model.</li>
      <li>multiply the accumulated matrix with the <a data-link-type=dfn href=#transformation-matrix title="transformation matrix">transformation matrix</a>.</li>
    </ol>
  </li>
</ol>

<div class=example>
  <pre>&lt;style&gt;
div {
  height: 150px;
  width: 150px;
}
.container {
  perspective: 500px;
  border: 1px solid black;
}
.transformed {
  <b>transform-style: preserve-3d</b>;
  transform: rotateY(50deg);
  background-color: blue;
}
.child {
  transform-origin: top left;
  transform: rotateX(40deg);
  background-color: lime;
}
&lt;/style&gt;</pre>
  <p>
    This example is identical to the previous example, with the addition of <a class=css data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style: preserve-3d</a> on the blue element. The blue element now establishes a 3D rendering context, of which the lime element is a member. Now both blue and lime elements share a common three-dimensional space, so the lime element renders as tilting out from its parent, influenced by the perspective on the container.
  </p>
  <div class=figure>
    <img alt="Nested 3D transforms, with preserve-3d." height=200 src=examples/3d-rendering-context-3d.png width=240>
  </div>
</div>

<p>Elements in the same <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> may intersect with each other. User agents must render intersection by subdividing the planes of intersecting elements as described by <a href=http://en.wikipedia.org/wiki/Newell%27s_algorithm>Newell’s algorithm</a>.

<p>Untransformed elements in a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> render on the Z=0 plane, yet may still intersect with transformed elements.

<p>Within a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a>, the rendering order of non-intersecting elements is based on their position on the Z axis after the application of the accumulated transform. Elements at the same Z position render in <a href=http://www.w3.org/TR/CSS2/zindex.html#painting-order>stacking context order</a>.

<div class=example>
  <pre>&lt;style&gt;
.container {
  background-color: rgba(0, 0, 0, 0.3);
  transform-style: preserve-3d;
  perspective: 500px;
}
.container &gt; div {
  position: absolute;
  left: 0;
}
.container &gt; :first-child {
  transform: rotateY(45deg);
  background-color: orange;
  top: 10px;
  height: 135px;
}
.container &gt; :last-child {
  transform: translateZ(40px);
  background-color: rgba(0, 0, 255, 0.75);
  top: 50px;
  height: 100px;
}
&lt;/style&gt;

&lt;div class="container"&gt;
  &lt;div&gt;&lt;/div&gt;
  &lt;div&gt;&lt;/div&gt;
&lt;/div&gt;</pre>
  <p>
    This example shows show elements in a 3D rendering context can intersect. The container element establishes a 3D rendering context for itself and its two children. The children intersect with each other, and the orange element also intersects with the container.
  </p>
  <div class=figure>
    <img alt="Intersecting sibling elements." height=200 src=examples/3d-intersection.png width=200>
  </div>
</div>

<p>Using three-dimensional transforms, it’s possible to transform an element such that its reverse side is towards the viewer. 3D-transformed elements show the same content on both sides, so the reverse side looks like a mirror-image of the front side (as if the element were projected onto a sheet of glass). Normally, elements whose reverse side is towards the viewer remain visible. However, the <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> property allows the author to make an element invisible when its reverse side is towards the viewer. This behavior is "live"; if an element with <a class=css data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility: hidden</a> were animating, such that its front and reverse sides were alternately visible, then it would only be visible when the front side were towards the viewer.

<div class=issue id=issue-878a3175><a class=self-link href=#issue-878a3175></a>
  <p class=desc>
    This wording needs clarification; <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> works per-3D rendering context, not relative to the root.
  </p>
</div>

<h3 class="heading settled heading" data-level=6.2 id=processing-of-perspective-transformed-boxes><span class=secno>6.2 </span><span class=content>
  Processing of Perspective-Transformed Boxes
</span><a class=self-link href=#processing-of-perspective-transformed-boxes></a></h3>

<div class=issue id=issue-44e00fb5><a class=self-link href=#issue-44e00fb5></a>
  <p class=desc>
    This is a first pass at an attempt to precisely specify how exactly to transform elements using the provided matrices. It might not be ideal, and implementer feedback is encouraged.  See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15605">bug 15605</a>.
  </p>
</div>

<p>The <a data-link-type=dfn href=#accumulated-3d-transformation-matrix title="accumulated 3d transformation matrix">accumulated 3D transformation matrix</a> is a 4×4 matrix, while the objects to be transformed are two-dimensional boxes. To transform each corner (<var>a</var>, <var>b</var>) of a box, the matrix must first be applied to (<var>a</var>, <var>b</var>, 0, 1), which will result in a four-dimensional point (<var>x</var>, <var>y</var>, <var>z</var>, <var>w</var>).  This is transformed back to a three-dimensional point (<var>x</var>′, <var>y</var>′, <var>z</var>′) as follows:

<p>If <var>w</var> &gt; 0, (<var>x</var>′, <var>y</var>′, <var>z</var>′) = (<var>x</var>/<var>w</var>, <var>y</var>/<var>w</var>, <var>z</var>/<var>w</var>).

<p>If <var>w</var> = 0, (<var>x</var>′, <var>y</var>′, <var>z</var>′) = (<var>x</var> ⋅ <var>n</var>, <var>y</var> ⋅ <var>n</var>, <var>z</var> ⋅ <var>n</var>).  <var>n</var> is an implementation-dependent value that should be chosen so that <var>x</var>′ or <var>y</var>′ is much larger than the viewport size, if possible.  For example, (5px, 22px, 0px, 0) might become (5000px, 22000px, 0px), with <var>n</var> = 1000, but this value of <var>n</var> would be too small for (0.1px, 0.05px, 0px, 0). This specification does not define the value of <var>n</var> exactly.  Conceptually, (<var>x</var>′, <var>y</var>′, <var>z</var>′) is <a href=http://en.wikipedia.org/wiki/Plane_at_infinity>infinitely far</a> in the direction (<var>x</var>, <var>y</var>, <var>z</var>).

<p>If <var>w</var> &lt; 0 for all four corners of the transformed box, the box is not rendered. 

<p>If <var>w</var> &lt; 0 for one to three corners of the transformed box, the box must be replaced by a polygon that has any parts with <var>w</var> &lt; 0 cut out. This will in general be a polygon with three to five vertices, of which exactly two will have <var>w</var> = 0 and the rest <var>w</var> &gt; 0. These vertices are then transformed to three-dimensional points using the rules just stated.  Conceptually, a point with <var>w</var> &lt; 0 is "behind" the viewer, so should not be visible.

<div class=example>
  <pre>&lt;style&gt;
.transformed {
  height: 100px;
  width: 100px;
  background: lime;
  transform: perspective(50px) translateZ(100px);
}
&lt;/style&gt;</pre>
  <p>
    All of the box’s corners have <var>z</var>-coordinates greater than the perspective.  This means that the box is behind the viewer and will not display.  Mathematically, the point (<var>x</var>, <var>y</var>) first becomes (<var>x</var>, <var>y</var>, 0, 1), then is translated to (<var>x</var>, <var>y</var>, 100, 1), and then applying the perspective results in (<var>x</var>, <var>y</var>, 100, −1). The <var>w</var>-coordinate is negative, so it does not display. An implementation that doesn’t handle the <var>w</var> &lt; 0 case separately might incorrectly display this point as (−<var>x</var>, −<var>y</var>, −100), dividing by −1 and mirroring the box.
  </p>
</div>

<div class=example>
  <pre>&lt;style&gt;
.transformed {
  height: 100px;
  width: 100px;
  background: radial-gradient(yellow, blue);
  transform: perspective(50px) translateZ(50px);
}
&lt;/style&gt;</pre>
  <p>
    Here, the box is translated upward so that it sits at the same place the viewer is looking from. This is like bringing the box closer and closer to one’s eye until it fills the entire field of vision. Since the default transform-origin is at the center of the box, which is yellow, the screen will be filled with yellow.
  </p>

  <p>
    Mathematically, the point (<var>x</var>, <var>y</var>) first becomes (<var>x</var>, <var>y</var>, 0, 1), then is translated to (<var>x</var>, <var>y</var>, 50, 1), then becomes (<var>x</var>, <var>y</var>, 50, 0) after applying perspective. Relative to the transform-origin at the center, the upper-left corner was (−50, −50), so it becomes (−50,
    −50, 50, 0).  This is transformed to something very far to the upper left, such as (−5000, −5000, 5000).  Likewise the other corners are sent very far away. The radial gradient is stretched over the whole box, now enormous, so the part that’s visible without scrolling should be the color of the middle pixel: yellow.  However, since the box is not actually infinite, the user can still scroll to the edges to see the blue parts.
  </p>
</div>

<div class=issue id=issue-6b4d59fb><a class=self-link href=#issue-6b4d59fb></a>
  <p class=desc>
    WebKit doesn’t render this box unless the translateZ() is &lt; 50px.
  </p>
</div>

<div class=example>
  <pre>&lt;style&gt;
.transformed {
  height: 50px;
  width: 50px;
  background: lime;
  border: 25px solid blue;
  transform-origin: left;
  transform: perspective(50px) rotateY(-45deg);
}
&lt;/style&gt;</pre>
  <p>
    The box will be rotated toward the viewer, with the left edge staying fixed while the right edge swings closer.  The right edge will be at about <var>z</var> = <span class=css data-link-type=maybe title=70.7px>70.7px</span>, which is closer than the perspective of <span class=css data-link-type=maybe title=50px>50px</span>. Therefore, the rightmost edge will vanish ("behind" the viewer), and the visible part will stretch out infinitely far to the right.
  </p>

  <p>
    Mathematically, the top right vertex of the box was originally (100, −50), relative to the transform-origin. It is first expanded to (100, −50, 0, 1).  After applying the transform specified, this will get mapped to about (70.71, −50, 70.71, −0.4142). This has <var>w</var> = −0.4142 &lt; 0, so we need to slice away the part of the box with <var>w</var> &lt; 0.  This results in the new top-right vertex being (50, −50, 50, 0).  This is then mapped to some faraway point in the same direction, such as (5000, −5000, 5000), which is up and to the right from the transform-origin.  Something similar is done to the lower right corner, which gets mapped far down and to the right. The resulting box stretches far past the edge of the screen.
  </p>

  <p>
    Again, the rendered box is still finite, so the user can scroll to see the whole thing if he or she chooses. However, the right part has been chopped off.  No matter how far the user scrolls, the rightmost <span class=css data-link-type=maybe title=30px>30px</span> or so of the original box will not be visible.  The blue border was only <span class=css data-link-type=maybe title=25px>25px</span> wide, so it will be visible on the left, top, and bottom, but not the right.
  </p>

  <p>
    The same basic procedure would apply if one or three vertices had <var>w</var> &lt; 0.  However, in that case the result of truncating the <var>w</var> &lt; 0 part would be a triangle or pentagon instead of a quadrilateral.
  </p>
</div>



<h2 class="heading settled heading" data-level=7 id=transform-property><span class=secno>7 </span><span class=content>The <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> Property</span><a class=self-link href=#transform-property></a></h2>

<p>A transformation is applied to the coordinate system an element renders in through the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property. This property contains a list of <a href=#transform-functions>transform functions</a>. The final transformation value for a coordinate system is obtained by converting each function in the list to its corresponding matrix like defined in <a href=#mathematical-description>Mathematical Description of Transform Functions</a>, then multiplying the matrices.

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-transform>transform<a class=self-link href=#propdef-transform></a></dfn><tr><th>Value:<td>none | <a class="production css-code" data-link-type=type href=#typedef-transform-list title="<transform-list>">&lt;transform-list&gt;</a><tr><th>Initial:<td>none<tr><th>Applies to:<td><a data-link-type=dfn href=#transformable-element title="transformable elements">transformable elements</a><tr><th>Inherited:<td>no<tr><th>Media:<td>visual<tr><th>Computed value:<td>As specified, but with relative lengths converted into absolute lengths.<tr><th>Percentages:<td>refer to the size of <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a><tr><th>Animatable:<td>as <a href=#interpolation-of-transforms>transform</a></table>
<p>Any computed value other than <a class=css data-link-type=maybe href=#none title=none>none</a> for the transform results in the creation of both a stacking context and a containing block. The object acts as a containing block for fixed positioned descendants.

<pre class=prod><dfn class=css-code data-dfn-type=type data-export="" id=typedef-transform-list>&lt;transform-list&gt;<a class=self-link href=#typedef-transform-list></a></dfn> = <a class="production css-code" data-link-type=type href=#typedef-transform-function title="<transform-function>">&lt;transform-function&gt;</a>+</pre>


<h2 class="heading settled heading" data-level=8 id=transform-origin-property><span class=secno>8 </span><span class=content>The <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> Property</span><a class=self-link href=#transform-origin-property></a></h2>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-transform-origin>transform-origin<a class=self-link href=#propdef-transform-origin></a></dfn><tr><th>Value:<td>  [ left | center | right | top | bottom | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> ]<br> | <br>   [ left | center | right | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> ]<br>  [ top | center | bottom | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> ] <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a>?<br> |<br>   [ center | [ left | right ] ] &amp;&amp; [ center | [ top | bottom ] ] <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a>?<tr><th>Initial:<td>50% 50%<tr><th>Applies to:<td><a data-link-type=dfn href=#transformable-element title="transformable elements">transformable elements</a><tr><th>Inherited:<td>no<tr><th>Media:<td>visual<tr><th>Computed value:<td>For <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> the absolute value, otherwise a percentage<tr><th>Percentages:<td>refer to the size of <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a><tr><th>Animatable:<td>as <a href=http://dev.w3.org/csswg/css3-transitions/#animtype-simple-list>simple list</a> of <a href=http://dev.w3.org/csswg/css3-transitions/#animtype-lpcalc>length, percentage, or calc</a></table>
<p>The default value for SVG elements without associated CSS layout box is <span class=css data-link-type=maybe title="0 0">0 0</span>.

<p>The values of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> and <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> properties are used to compute the <a data-link-type=dfn href=#transformation-matrix title="transformation matrix">transformation matrix</a>, as described above.

<p>If only one value is specified, the second value is assumed to be <a class=css-code data-link-for=transform-origin data-link-type=value href=#valuedef-center0 title=center>center</a>. If one or two values are specified, the third value is assumed to be <span class=css data-link-type=maybe title=0px>0px</span>.

<p>If two or more values are defined and either no value is a keyword, or the only used keyword is <a class=css-code data-link-for=transform-origin data-link-type=value href=#valuedef-center0 title=center>center</a>, then the first value represents the horizontal position (or offset) and the second represents the vertical position (or offset). A third value always represents the Z position (or offset) and must be of type <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a>.

<dl data-dfn-for=transform-origin data-dfn-type=value>
  <dt><a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#percentage-value title="<percentage>">&lt;percentage&gt;</a></dt>
  <dd>
    A percentage for the horizontal offset is relative to the width of the <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>. A percentage for the vertical offset is relative to height of the <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>. The value for the horizontal and vertical offset represent an offset from the top left corner of the <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>.
  </dd>
  <dt><a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a></dt>
  <dd>
    <p>
      A length value gives a fixed length as the offset. The value for the horizontal and vertical offset represent an offset from the top left corner of the <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>.
    </p>

    <p>
      For SVG elements without an associated CSS layout box the horizontal and vertical offset represent an offset from the point of origin of the element’s local coordinate space.
    </p>
  </dd>
  <dt><dfn class=css-code data-dfn-for=transform-origin data-dfn-type=value data-export="" id=valuedef-top0>top<a class=self-link href=#valuedef-top0></a></dfn>
  <dd>Computes to <span class=css data-link-type=maybe title=0%>0%</span> for the vertical position.
  <dt><dfn class=css-code data-dfn-for=transform-origin data-dfn-type=value data-export="" id=valuedef-right0>right<a class=self-link href=#valuedef-right0></a></dfn>
  <dd>Computes to <span class=css data-link-type=maybe title=100%>100%</span> for the horizontal position.
  <dt><dfn class=css-code data-dfn-for=transform-origin data-dfn-type=value data-export="" id=valuedef-bottom0>bottom<a class=self-link href=#valuedef-bottom0></a></dfn>
  <dd>Computes to <span class=css data-link-type=maybe title=100%>100%</span> for the vertical position.
  <dt><dfn class=css-code data-dfn-for=transform-origin data-dfn-type=value data-export="" id=valuedef-left0>left<a class=self-link href=#valuedef-left0></a></dfn>
  <dd>Computes to <span class=css data-link-type=maybe title=0%>0%</span> for the horizontal position.
  <dt><dfn class=css-code data-dfn-for=transform-origin data-dfn-type=value data-export="" id=valuedef-center0>center<a class=self-link href=#valuedef-center0></a></dfn>
  <dd>
    Computes to <span class=css data-link-type=maybe title=50%>50%</span> (<span class=css data-link-type=maybe title="left 50%">left 50%</span>) for the horizontal position if the horizontal position is not otherwise specified, or <span class=css data-link-type=maybe title=50%>50%</span> (<span class=css data-link-type=maybe title="top 50%">top 50%</span>) for the vertical position if it is.
</dl>

<p>The <a href=http://www.w3.org/TR/cssom/#resolved-value>resolved value</a> of <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> is the <a href=http://www.w3.org/TR/CSS21/cascade.html#used-value>used value</a> (i.e., percentages are resolved to absolute lengths).



<h2 class="heading settled heading" data-level=9 id=transform-style-property><span class=secno>9 </span><span class=content>The <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> Property</span><a class=self-link href=#transform-style-property></a></h2>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-transform-style>transform-style<a class=self-link href=#propdef-transform-style></a></dfn><tr><th>Value:<td>flat | preserve-3d<tr><th>Initial:<td>flat<tr><th>Applies to:<td><a data-link-type=dfn href=#transformable-element title="transformable elements">transformable elements</a><tr><th>Inherited:<td>no<tr><th>Media:<td>visual<tr><th>Computed value:<td>Same as specified value.<tr><th>Percentages:<td>N/A<tr><th>Animatable:<td>no</table>
<p>A value of <span class=css data-link-type=maybe title=preserve-3d>preserve-3d</span> for <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> establishes a stacking context.

<p class=issue id=issue-f175efd2><a class=self-link href=#issue-f175efd2></a>Keyword description missing. Description of flattening behavior is missing. Does rendering operate in <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-positioning/#z-index title=z-index>z-index</a> order? Do we still create a 3D context and let planes intersect? See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22427">Bug 22427</a> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=23015">Bug 23015</a>.</p>

<p>The following CSS property values require the user agent to create a flattened representation of the descendant elements before they can be applied, and therefore override the behavior of <a class=css data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style: preserve-3d</a>:

<p><ul>
  <li><a class=property data-link-type=propdesc href=http://www.w3.org/TR/css-overflow-3/#overflow title=overflow>overflow</a>: any value other than <span class=css data-link-type=maybe title=visible>visible</span>.</li>
  <li><a class=property data-link-type=propdesc href=http://www.w3.org/TR/filter-effects/#effects title=filter>filter</a>: any value other than <a class=css data-link-type=maybe href=#none title=none>none</a>.</li>
  <li><a class=property data-link-type=propdesc href=http://www.w3.org/TR/css-masking/#propdef-clip title=clip>clip</a>: any value other than <span class=css data-link-type=maybe title=auto>auto</span>.</li>
  <li><a class=property data-link-type=propdesc href=http://www.w3.org/TR/css-masking/#propdef-clip-path title=clip-path>clip-path</a>: any value other than <a class=css data-link-type=maybe href=#none title=none>none</a>.</li>
  <li><a class=property data-link-type=propdesc href=http://www.w3.org/TR/compositing-1/#propdef-isolation title=isolation>isolation</a>: used value of <span class=css data-link-type=maybe title=isolate>isolate</span>.</li>
  <li><a class=property data-link-type=propdesc href=http://www.w3.org/TR/css-masking/#propdef-mask-image title=mask-image>mask-image</a>: any value other than <a class=css data-link-type=maybe href=#none title=none>none</a>.</li>
  <li><a class=property data-link-type=propdesc href=http://www.w3.org/TR/css-masking/#propdef-mask-box-image-source title=mask-box-image-source>mask-box-image-source</a>: any value other than <a class=css data-link-type=maybe href=#none title=none>none</a>.</li>
  <li><a class=property data-link-type=propdesc href=http://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode title=mix-blend-mode>mix-blend-mode</a>: any value other than <span class=css data-link-type=maybe title=normal>normal</span>.</li>
</ul>

<p>The computed value of <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> is not affected.

<p>The values of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> and <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> properties are used to compute the <a data-link-type=dfn href=#transformation-matrix title="transformation matrix">transformation matrix</a>, as described above.



<h2 class="heading settled heading" data-level=10 id=perspective-property><span class=secno>10 </span><span class=content>The <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> Property</span><a class=self-link href=#perspective-property></a></h2>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-perspective>perspective<a class=self-link href=#propdef-perspective></a></dfn><tr><th>Value:<td>none | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a><tr><th>Initial:<td>none<tr><th>Applies to:<td><a data-link-type=dfn href=#transformable-element title="transformable elements">transformable elements</a><tr><th>Inherited:<td>no<tr><th>Media:<td>visual<tr><th>Computed value:<td>Absolute length or "none".<tr><th>Percentages:<td>N/A<tr><th>Animatable:<td>as <a href=http://dev.w3.org/csswg/css3-transitions/#animtype-length>length</a></table>
<p>Where <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> values must be positive.

<dl data-dfn-for=perspective>
  <dt><a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a></dt>
  <dd>
    <p>Distance to the center of projection.
    <p class=issue id=issue-8678c096><a class=self-link href=#issue-8678c096></a>Verify that projection is the distance to the center of projection.
  </dd>
  <dt><dfn data-dfn-type=dfn data-noexport="" id=none>none<a class=self-link href=#none></a></dfn></dt>
  <dd>
    No perspective transform is applied. The effect is mathematically similar to an infinite <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> value. All objects appear to be flat on the canvas.
  </dd>
</dl>

<p>The use of this property with any value other than <a class=css data-link-type=maybe href=#none title=none>none</a> establishes a stacking context. It also establishes a containing block (somewhat similar to <a class=css data-link-type=propdesc href=http://www.w3.org/TR/css3-positioning/#position title=position>position: relative</a>), just like the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property does.

<p>The values of the <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> and <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> properties are used to compute the <a data-link-type=dfn href=#perspective-matrix title="perspective matrix">perspective matrix</a>, as described above.

<p class=note>Note: While the <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a> for SVG elements without an associated CSS layout box incorporate the result of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> and <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> properties on descendants, the results of the <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> and <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> properties are not taken into account.



<h2 class="heading settled heading" data-level=11 id=perspective-origin-property><span class=secno>11 </span><span class=content>The <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> Property</span><a class=self-link href=#perspective-origin-property></a></h2>

<p>The <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> property establishes the origin for the <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> property. It effectively sets the X and Y position at which the viewer appears to be looking at the children of the element.

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-perspective-origin>perspective-origin<a class=self-link href=#propdef-perspective-origin></a></dfn><tr><th>Value:<td>  [ left | center | right | top | bottom | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> ]<br> |<br>   [ left | center | right | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> ]<br>   [ top | center | bottom | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> ]<br> |<br>   [ center | [ left | right ] ] &amp;&amp; [ center | [ top | bottom ] ]<tr><th>Initial:<td>50% 50%<tr><th>Applies to:<td><a data-link-type=dfn href=#transformable-element title="transformable elements">transformable elements</a><tr><th>Inherited:<td>no<tr><th>Media:<td>visual<tr><th>Computed value:<td>For <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> the absolute value, otherwise a percentage.<tr><th>Percentages:<td>refer to the size of the <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a><tr><th>Animatable:<td>as <a href=http://dev.w3.org/csswg/css3-transitions/#animtype-simple-list>simple list</a> of <a href=http://dev.w3.org/csswg/css3-transitions/#animtype-lpcalc>length, percentage, or calc</a></table>
<p>The values of the <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a> and <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> properties are used to compute the <a data-link-type=dfn href=#perspective-matrix title="perspective matrix">perspective matrix</a>, as described above.

<p>If only one value is specified, the second value is assumed to be <a class=css-code data-link-for=perspective-origin data-link-type=value href=#valuedef-center title=center>center</a>.

<p>If at least one of the two values is not a keyword, then the first value represents the horizontal position (or offset) and the second represents the vertical position (or offset).

<p>The values for <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> represent an offset of the perspective origin from the top left corner of the <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>.

<dl data-dfn-for=perspective-origin data-dfn-type=value>
  <dt><a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#percentage-value title="<percentage>">&lt;percentage&gt;</a></dt>
  <dd><p>A percentage for the horizontal perspctive offset is relative to the width of the 
    <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>.
    A percentage for the vertical offset is relative to height of the 
    <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>. The value for the horizontal
    and vertical offset represent an offset from the top left corner of the
    <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>.
    </p>
  </dd>
  <dt><a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a></dt>

  <dd>
    <p>A length value gives a fixed length as the offset. The value for the horizontal
      and vertical offset represent an offset from the top left corner of the
      <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>.
  </dd>
  <dt><dfn class=css-code data-dfn-for=perspective-origin data-dfn-type=value data-export="" id=valuedef-top>top<a class=self-link href=#valuedef-top></a></dfn></dt>
  <dd>Computes to <span class=css data-link-type=maybe title=0%>0%</span> for the vertical position.</dd>
  <dt><dfn class=css-code data-dfn-for=perspective-origin data-dfn-type=value data-export="" id=valuedef-right>right<a class=self-link href=#valuedef-right></a></dfn></dt>
  <dd>Computes to <span class=css data-link-type=maybe title=100%>100%</span> for the horizontal position.</dd>
  <dt><dfn class=css-code data-dfn-for=perspective-origin data-dfn-type=value data-export="" id=valuedef-bottom>bottom<a class=self-link href=#valuedef-bottom></a></dfn></dt>
  <dd>Computes to <span class=css data-link-type=maybe title=100%>100%</span> for the vertical position.</dd>
  <dt><dfn class=css-code data-dfn-for=perspective-origin data-dfn-type=value data-export="" id=valuedef-left>left<a class=self-link href=#valuedef-left></a></dfn></dt>
  <dd>Computes to <span class=css data-link-type=maybe title=0%>0%</span> for the horizontal position.</dd>
  <dt><dfn class=css-code data-dfn-for=perspective-origin data-dfn-type=value data-export="" id=valuedef-center>center<a class=self-link href=#valuedef-center></a></dfn></dt>
  <dd>
    Computes to <span class=css data-link-type=maybe title=50%>50%</span> (<span class=css data-link-type=maybe title="left 50%">left 50%</span>) for the horizontal position if the horizontal position is not otherwise specified, or <span class=css data-link-type=maybe title=50%>50%</span> (<span class=css data-link-type=maybe title="top 50%">top 50%</span>) for the vertical position if it is.
  </dd>
</dl>

<p>The <a href=http://www.w3.org/TR/cssom/#resolved-value>resolved value</a> of <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a> is the <a href=http://www.w3.org/TR/CSS21/cascade.html#used-value>used value</a> (i.e., percentages are resolved to absolute lengths).



<h2 class="heading settled heading" data-level=12 id=backface-visibility-property><span class=secno>12 </span><span class=content>The <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> Property</span><a class=self-link href=#backface-visibility-property></a></h2>

<p>The <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> property determines whether or not the "back" side of a transformed element is visible when facing the viewer. With an identity transform, the front side of an element faces the viewer. Applying a rotation about Y of 180° (for instance) would cause the back side of the element to face the viewer.

<p class=note>Note: This property is useful when you place two elements back-to-back, as you would to create a playing card. Without this property, the front and back elements could switch places at times during an animation to flip the card. Another example is creating a box out of 6 elements, but where you want to see the inside faces of the box. This is useful when creating the backdrop for a 3 dimensional stage.

<table class="definition propdef"><tr><th>Name:<td><dfn class=css-code data-dfn-type=property data-export="" id=propdef-backface-visibility>backface-visibility<a class=self-link href=#propdef-backface-visibility></a></dfn><tr><th>Value:<td>visible | hidden<tr><th>Initial:<td>visible<tr><th>Applies to:<td><a data-link-type=dfn href=#transformable-element title="transformable elements">transformable elements</a><tr><th>Inherited:<td>no<tr><th>Media:<td>visual<tr><th>Computed value:<td>Same as specified value.<tr><th>Percentages:<td>N/A<tr><th>Animatable:<td>no</table>
<p>The visibility of an element with <a class=css data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility: hidden</a> is determined as follows:

<ol>
  <li>
    For an element in a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a>, compute its <var> accumulated 3D transformation matrix</var>. For an element not in a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a>, compute its <a data-link-type=dfn href=#transformation-matrix title="transformation matrix">transformation matrix</a>.
  </li>
  <li>
    If the component of the matrix in row 3, column 3 is negative, then the element should be hidden. Otherwise it is visible.
  </li>
</ol>

<p class=issue id=issue-5f192247><a class=self-link href=#issue-5f192247></a>Backface-visibility cannot be tested by only looking at m33.  See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=23014">Bug 23014</a>.</p>

<p class=note>Note: The reasoning for this definition is as follows. Assume elements are rectangles in the <var>x</var>–<var>y</var> plane with infinitesimal thickness. The front of the untransformed element has coordinates like (<var>x</var>, <var>y</var>, <var>ε</var>), and the back is (<var>x</var>, <var>y</var>, −<var>ε</var>), for some very small <var>ε</var>. We want to know if after the transformation, the front of the element is closer to the viewer than the back (higher <var>z</var>-value) or further away. The <var>z</var>-coordinate of the front will be m<sub>13</sub><var>x</var> + m<sub>23</sub><var>y</var> + m<sub>33</sub><var>ε</var> + m<sub>43</sub>, before accounting for perspective, and the back will be m<sub>13</sub><var>x</var> + m<sub>23</sub><var>y</var> − m<sub>33</sub><var>ε</var> + m<sub>43</sub>.  The first quantity is greater than the second if and only if m<sub>33</sub> &gt; 0. (If it equals zero, the front and back are equally close to the viewer. This probably means something like a 90-degree rotation, which makes the element invisible anyway, so we don’t really care whether it vanishes.)



<h2 class="heading settled heading" data-level=13 id=svg-transform><span class=secno>13 </span><span class=content>The SVG <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> Attribute</span><a class=self-link href=#svg-transform></a></h2>

<p>The SVG 1.1 specification did not specify the attributes <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a>, <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> or <a class=attr-name href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternTransformAttribute>‘patternTransform‘</a> as <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermPresentationAttribute>presentation attributes</a> <a data-biblio-type=normative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a>. In order to improve the integration of SVG and HTML, this specification makes these SVG attributes presentation attributes and makes the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property one that applies to <a data-link-type=dfn href=#transformable-element title="transformable elements">transformable elements</a> in the SVG namespace.

<p>This specification will also introduce the new presentation attributes <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a>, <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a>, <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a>, <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> and <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a>.

<p>Values on new introduced presentation attributes get parsed following the syntax rules on <a href=#svg-data-types>SVG Data Types</a> <a data-biblio-type=normative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a>.

<h3 class="heading settled heading" data-level=13.1 id=transform-attribute-specificity><span class=secno>13.1 </span><span class=content>
  SVG <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> attribute specificity
</span><a class=self-link href=#transform-attribute-specificity></a></h3>

<p>Since the previously named SVG attributes become presentation attributes, their participation in the CSS cascade is determined by the specificity of <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermPresentationAttribute>presentation attributes</a> in the SVG specification.

<div class=example>
  <p>
    This example shows the combination of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> style property and the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> presentation attribute.
  </p>

  <pre>&lt;svg xmlns="http://www.w3.org/2000/svg"&gt;
  &lt;style&gt;
  .container {
      transform: translate(100px, 100px);
  }
  &lt;/style&gt;

  &lt;g class="container" transform="translate(200 200)"&gt;
      &lt;rect width="100" height="100" fill="blue" /&gt;
  &lt;/g&gt;
&lt;/svg&gt;</pre>
  <div class=figure>
    <img alt="Translated SVG container element." height=240 src=examples/svg-translate1.svg width=470>
  </div>

  <p>
    Because of the participation to the CSS cascade, the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> style property overrides the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> presentation attribute. Therefore the container gets translated by <span class=css data-link-type=maybe title=100px>100px</span> in both the horizontal and the vertical directions, instead of <span class=css data-link-type=maybe title=200px>200px</span>.
  </p>
</div>

<h3 class="heading settled heading" data-level=13.2 id=svg-syntax><span class=secno>13.2 </span><span class=content>Syntax of the SVG <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> attribute</span><a class=self-link href=#svg-syntax></a></h3>

<p>To provide backwards compatibility, the syntax of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> presentation attribute differs from the syntax of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> style property as shown in the example above. However, the syntax used for the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> style property can be used for a <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> presentation attribute value. Authors are advised to follow the rules of CSS Values and Units Module <a data-biblio-type=normative data-link-type=biblio href=#css3val title=css3val>[CSS3VAL]</a>. Therefore an author should write ''transform="translate(200px, 200px)"<span class=css data-link-type=maybe title=" instead of "> instead of </span>transform="translate  (200 200)"<span class=css data-link-type=maybe title=" because the second example with the spaces before the "> because the second example with the spaces before the </span>('', the missing comma between the arguments and the values without the explicit unit notation would be valid for the attribute only.

<h4 class="heading settled heading" data-level=13.2.1 id=svg-transform-list><span class=secno>13.2.1 </span><span class=content>Transform List</span><a class=self-link href=#svg-transform-list></a></h4>

<p>The value for the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> attribute consists of a transform list with zero or more transform functions using <a href=#svg-functional-notation>functional notation</a>. If the transform list consists of more than one transform function, these functions are separated by optional whitespace, an optional comma (<span class=css data-link-type=maybe title=,>,</span>) and optional whitespace. The transform list can have optional whitespace characters before and after the list.

<h4 class="heading settled heading" data-level=13.2.2 id=svg-functional-notation><span class=secno>13.2.2 </span><span class=content>Functional Notation</span><a class=self-link href=#svg-functional-notation></a></h4>

<p>The syntax starts with the name of the function followed by optional whitespace characters followed by a left parenthesis followed by optional whitespace followed by the argument(s) to the notation followed by optional whitespace followed by a right parenthesis. If a function takes more than one argument, the arguments are either separated by a comma (<span class=css data-link-type=maybe title=,>,</span>) with optional whitespace characters before and after the comma, or by one or more whitespace characters.

<h4 class="heading settled heading" data-level=13.2.3 id=svg-data-types><span class=secno>13.2.3 </span><span class=content>SVG Data Types</span><a class=self-link href=#svg-data-types></a></h4>

<p>Arguments on all new introduced presentation attributes consist of data types in the sense of CSS Values and Units Module <a data-biblio-type=normative data-link-type=biblio href=#css3val title=css3val>[CSS3VAL]</a>. The definitions of data types in CSS Values and Units Module are enhanced as follows:

<h5 class="heading settled heading" data-level=13.2.3.1 id=svg-transform-value><span class=secno>13.2.3.1 </span><span class=content>
  The <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a> and <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> type
</span><a class=self-link href=#svg-transform-value></a></h5>

<p>A <dfn class=css-code data-dfn-type=type data-export="" id=typedef-translation-value>&lt;translation-value&gt;<a class=self-link href=#typedef-translation-value></a></dfn> or <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> can be a <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> without an unit identifier. In this case the <a href=#svg-number><em>number</em></a> gets interpreted as "user unit". A user unit in the the <a href=http://www.w3.org/TR/2003/REC-SVG11-20030114/coords.html#InitialCoordinateSystem>initial coordinate system</a> is equivalent to the parent environment’s notion of a pixel unit.

<h5 class="heading settled heading" data-level=13.2.3.2 id=svg-angle><span class=secno>13.2.3.2 </span><span class=content>The <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> type</span><a class=self-link href=#svg-angle></a></h5>

<p>An angle can be a <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> without an unit identifier. In this case the <a href=#svg-number><em>number</em></a> gets interpreted as a value in degrees.

<h5 class="heading settled heading" data-level=13.2.3.3 id=svg-number><span class=secno>13.2.3.3 </span><span class=content>The <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> type</span><a class=self-link href=#svg-number></a></h5>

<p>SVG supports scientific notations for numbers. Therefore a <em>number</em> gets parsed like described in SVG <a href=http://www.w3.org/TR/SVG/types.html#DataTypeNumber>Basic data types</a> for SVG attributes.

<h3 class="heading settled heading" data-level=13.3 id=svg-gradient-transform-pattern-transform><span class=secno>13.3 </span><span class=content>
  The SVG <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> and <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternTransformAttribute title=patterntransform>patternTransform</a> attributes
</span><a class=self-link href=#svg-gradient-transform-pattern-transform></a></h3>

<p>SVG specifies the attributes <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> and <a class=attr-name href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternTransformAttribute>‘patternTransform‘</a>. This specification makes both attributes presentation attributes. Both attributes use the same <a href=#svg-syntax>syntax</a> as the SVG <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> attribute. This specification does not introduce corresponding CSS style properties. Both, the <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> and the <a class=attr-name href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternTransformAttribute>‘patternTransform‘</a> attribute, are presentation attributes for the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property.

<h3 class="heading settled heading" data-level=13.4 id=svg-transform-functions><span class=secno>13.4 </span><span class=content>
  SVG transform functions
</span><a class=self-link href=#svg-transform-functions></a></h3>

<p>For backwards compatibility with existing SVG content, this specification supports all transform functions defined by <a href=http://www.w3.org/TR/SVG/coords.html#TransformAttribute>The ‘transform’ attribute</a> in <a data-biblio-type=informative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a>. Therefore the two-dimensional transform function <span class=css data-link-type=maybe title="rotate(<angle>)">rotate(&lt;angle&gt;)</span> is extended as follows:

<dl>
  <dt id=rotate-three-function><a class=self-link href=#rotate-three-function></a>
<pre class=prod><a data-link-type=functionish href=#funcdef-rotate title=rotate()>rotate()</a> = rotate( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> [, <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a>, <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a>]? )</pre>  </dt>
  <dd>
    specifies a <a href=#RotateDefined>2D rotation</a> by the angle specified in the parameter about the origin of the element, as defined by the <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> property. If the optional translation values are specified, the transform origin is translated by that amount (using the current transformation matrix) for the duration of the rotate operation. For example <span class=css data-link-type=maybe title="rotate(90deg, 100px, 100px)">rotate(90deg, 100px, 100px)</span> would cause elements to appear rotated one-quarter of a turn in the clockwise direction after a translation of the transform-origin of 100 pixel in the horizontal and vertical directions.
  </dd>
</dl>

<p>User agents are just required to support the two optional arguments for translation on elements in the SVG namespace.

<h3 class="heading settled heading" data-level=13.5 id=svg-three-dimensional-functions><span class=secno>13.5 </span><span class=content>SVG and 3D transform functions</span><a class=self-link href=#svg-three-dimensional-functions></a></h3>

<p>This specification explicitly requires three-dimensional transform functions to apply to the <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement>container elements</a>: <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/linking.html#AElement><code class=element-name>&lt;a&gt;</code></a>, <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#GElement><code class=element-name>&lt;g&gt;</code></a>, <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#SVGElement><code class=element-name>&lt;svg&gt;</code></a>, all <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement>graphics elements</a>, all <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsReferencingElement>graphics referencing elements</a> and the SVG <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/extend.html#ForeignObjectElement><code class=element-name>&lt;foreignObject&gt;</code></a> element.

<p>Three-dimensional transform functions and the properties <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a>, <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a>, <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> and <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> can not be used for the elements: <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/masking.html#ClipPathElement><code class=element-name>&lt;clipPath&gt;</code></a>, <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElement><code class=element-name>&lt;linearGradient&gt;</code></a>, <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#RadialGradientElement><code class=element-name>&lt;radialGradient&gt;</code></a> and <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElement><code class=element-name>&lt;pattern&gt;</code></a>. If a transform list includes a three-dimensional transform function, the complete transform list must be ignored. The values of every previously named property must be ignored. <var>Transformable elements</var> that are contained by one of these elements can have three-dimensional transform functions. The <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/masking.html#ClipPathElement><code class=element-name>&lt;clipPath&gt;</code></a>, <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/masking.html#MaskElement><code class=element-name>&lt;mask&gt;</code></a>, <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElement><code class=element-name>&lt;pattern&gt;</code></a> elements require the user agent to create a flattened representation of the descendant elements before they can be applied, and therefore override the behavior of <a class=css data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style: preserve-3d</a>.

<p>If the <a class=property data-link-type=propdesc href=http://www.w3.org/TR/svg2/painting.html#VectorEffectProperty title=vector-effect>vector-effect</a> property is set to <span class=css data-link-type=maybe title=non-scaling-stroke>non-scaling-stroke</span> and an object is within a <a data-link-type=dfn href=#3d-rendering-context title="3d rendering context">3D rendering context</a> the property has no affect on stroking the object.

<h3 class="heading settled heading" data-level=13.6 id=svg-user-coordinate-space><span class=secno>13.6 </span><span class=content>User coordinate space</span><a class=self-link href=#svg-user-coordinate-space></a></h3>

<p>For the <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElement><code class=element-name>&lt;pattern&gt;</code></a>, <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElement><code class=element-name>&lt;linearGradient&gt;</code></a>, <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#RadialGradientElement><code class=element-name>&lt;radialGradient&gt;</code></a> and <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/masking.html#ClipPathElement><code class=element-name>&lt;clipPath&gt;</code></a> elements the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a>, <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternTransformAttribute title=patterntransform>patternTransform</a>, <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> presentation attributes represents values in the current user coordinate system in place at the time when these elements are referenced (i.e., the user coordinate system for the element referencing the <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElement><code class=element-name>&lt;pattern&gt;</code></a> element via a <a class=property data-link-type=propdesc href=http://www.w3.org/TR/SVG/painting.html#FillProperty title=fill>fill</a> or <a class=property data-link-type=propdesc href=http://www.w3.org/TR/SVG/painting.html#StrokeProperty title=stroke>stroke</a> property). Percentage values are relative to the <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a> of the referencing element.

<p>In particular the <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternUnitsAttribute title=patternunits>patternUnits</a>, <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientUnitsAttribute title=gradientunits>gradientUnits</a> and <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/masking.html#MaskElementMaskUnitsAttribute title=maskunits>maskUnits</a> attributes don’t affect the user coordinate system used for transformations <a data-biblio-type=informative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a>.

<p>For all other <a data-link-type=dfn href=#transformable-element title="transformable elements">transformable elements</a> the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> presentation attribute represents values in the current user coordinate system of the parent. All percentage values of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> presentation attribute are relative to the element’s <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a>.

<div class=example>
  <p>
    The <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> property on the pattern in the following example specifies a <span class=css data-link-type=maybe title=50%>50%</span> translation of the origin in the horizontal and vertical dimension. The <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property specifies a translation as well, but in absolute lengths.
  </p>

  <pre>&lt;svg xmlns="http://www.w3.org/2000/svg"&gt;
  &lt;style&gt;
  pattern {
      transform: rotate(45deg);
      transform-origin: 50% 50%;
  }
  &lt;/style&gt;

  &lt;defs&gt;
  &lt;pattern id="pattern-1"&gt;
      &lt;rect id="rect1" width="100" height="100" fill="blue" /&gt;
  &lt;/pattern&gt;
  &lt;/defs&gt;

  &lt;rect width="200" height="200" fill="url(#pattern-1)" /&gt;
&lt;/svg&gt;</pre>
  <p>
    An SVG <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElement><code class=element-name>&lt;pattern&gt;</code></a> element doesn’t have a bounding box. The <a data-link-type=dfn href=#bounding-box title="bounding box">bounding box</a> of the referencing <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#RectElement><code class=element-name>&lt;rect&gt;</code></a> element is used instead to solve the relative values of the <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> property. Therefore the point of origin will get translated  by 100 pixels temporarily to rotate the user space of the <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElement><code class=element-name>&lt;pattern&gt;</code></a> elements content.
  </p>
</div>

<h3 class="heading settled heading" data-level=13.7 id=transform-attribute-dom><span class=secno>13.7 </span><span class=content>
  SVG DOM interface for the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> attribute
</span><a class=self-link href=#transform-attribute-dom></a></h3>

<p>The SVG specification defines the '<a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#InterfaceSVGAnimatedTransformList>SVGAnimatedTransformList</a>' interface in the SVG DOM to provide access to the animated and the base value of the SVG <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a>, <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> and <a class=attr-name href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternTransformAttribute>‘patternTransform‘</a> attributes. To ensure backwards compatibility, this API must still be supported by user agents.

<p>The <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property contributes to the CSS cascade. According to SVG 1.1 user agents conceptually insert a <a href=http://www.w3.org/TR/SVG/styling.html#UsingPresentationAttributes>new author style sheet</a> for presentation attributes, which is the first in the author style sheet collection. <span class=css data-link-type=maybe title=baseval>baseVal</span> gives the author the possibility to access and modify the values of the SVG <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> attribute. To provide the necessary backwards compatibility to the SVG DOM, <span class=css data-link-type=maybe title=baseval>baseVal</span> must reflect the values of this author style sheet. All modifications to SVG DOM objects of <span class=css data-link-type=maybe title=baseval>baseVal</span> must affect this author style sheet immediately.

<p><span class=css data-link-type=maybe title=animval>animVal</span> represents the computed style of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property. Therefore it includes all applied <a href=http://www.w3.org/TR/css3-transitions/>CSS3 Transitions</a>, <a href=http://www.w3.org/TR/css3-animations/>CSS3 Animations</a> or <a href=#svg-animation>SVG Animations</a> if any of those are underway. The computed style and SVG DOM objects of <span class=css data-link-type=maybe title=animval>animVal</span> can not be modified.

<p>The attribute '<a href=http://www.w3.org/TR/SVG/coords.html#__svg__SVGTransform__type>type</a>' of '<a href=http://www.w3.org/TR/SVG/coords.html#InterfaceSVGTransform>SVGTransform</a>' must return '<a href=http://www.w3.org/TR/SVG/coords.html#__svg__SVGTransform__SVG_TRANSFORM_UNKNOWN>SVG_TRANSFORM_UNKNOWN</a>' for <a href=#transform-functions>Transform Functions</a> or unit types that are not supported by this interface. If a two-dimensional transform function is not supported, the attribute '<a href=http://www.w3.org/TR/SVG/coords.html#__svg__SVGTransform__matrix>matrix</a>' must return a 3x2 '<a href=http://www.w3.org/TR/SVG/coords.html#InterfaceSVGMatrix>SVGMatrix</a>' with the corresponding values as described in the section <a href=#mathematical-description>Mathematical Description of Transform Functions</a>.

<h2 class="heading settled heading" data-level=14 id=svg-animation><span class=secno>14 </span><span class=content>SVG Animation</span><a class=self-link href=#svg-animation></a></h2>

<h3 class="heading settled heading" data-level=14.1 id=svg-animate-element><span class=secno>14.1 </span><span class=content>
  The <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement><code class=element-name>&lt;animate&gt;</code></a> and <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#SetElement><code class=element-name>&lt;set&gt;</code></a> element
</span><a class=self-link href=#svg-animate-element></a></h3>

<p>With this specification, the <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement><code class=element-name>&lt;animate&gt;</code></a> element and the <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#SetElement><code class=element-name>&lt;set&gt;</code></a> element can animate the data type <a class="production css-code" data-link-type=type href=#typedef-transform-list title="<transform-list>">&lt;transform-list&gt;</a>.

<p>The animation effect is post-multiplied to the underlying value for additive <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement><code class=element-name>&lt;animate&gt;</code></a> animations (see below) instead of added to the underlying value, due to the specific behavior of <a class="production css-code" data-link-type=type href=#typedef-transform-list title="<transform-list>">&lt;transform-list&gt;</a> animations.

<p><var>From-to</var>, <var>from-by</var> and <var>by</var> animations are defined in SMIL to be equivalent to a corresponding <var>values</var> animation. However, <var>to</var> animations are a mixture of additive and non-additive behavior <a data-biblio-type=informative data-link-type=biblio href=#smil3 title=smil3>[SMIL3]</a>.

<p><var>To</var> animations on <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement><code class=element-name>&lt;animate&gt;</code></a> provide specific functionality to get a smooth change from the underlying value to the <var>to</var> attribute value, which conflicts mathematically with the requirement for additive transform animations to be post-multiplied. As a consequence, the behavior of <var>to</var> animations for <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement><code class=element-name>&lt;animate&gt;</code></a> is undefined. Authors are suggested to use <var>from-to</var>, <var>from-by</var>, <var>by</var> or <var>values</var> animations to achieve any desired transform animation.

<p>The value <span class=css data-link-type=maybe title=paced>paced</span> is undefined for the attribute <span class=css data-link-type=maybe title=calcmode>calcMode</span> on <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement><code class=element-name>&lt;animate&gt;</code></a> for animations of the data type <a class="production css-code" data-link-type=type href=#typedef-transform-list title="<transform-list>">&lt;transform-list&gt;</a>. If specified, UAs may choose the value <span class=css data-link-type=maybe title=linear>linear</span> instead. Future versions of this specification may define how paced animations can be performed on <a class="production css-code" data-link-type=type href=#typedef-transform-list title="<transform-list>">&lt;transform-list&gt;</a>.

<p class=note>Note: The following paragraphs extend <a href=http://www.w3.org/TR/SVG/animate.html#complexDistances>Elements, attributes and properties that can be animated</a> <a data-biblio-type=informative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a>.

<p>The introduce presentation attributes <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a>, <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a>, <a class=property data-link-type=propdesc href=#propdef-perspective title=perspective>perspective</a>, <a class=property data-link-type=propdesc href=#propdef-perspective-origin title=perspective-origin>perspective-origin</a>, <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> and <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> are animatable. <a class=property data-link-type=propdesc href=#propdef-transform-style title=transform-style>transform-style</a> and <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> are non-additive.

<p>With this specification the SVG basic data type <a class="production css-code" data-link-type=type href=#typedef-transform-list title="<transform-list>">&lt;transform-list&gt;</a> is equivalent to a list of <a class="production css-code" data-link-type=type href=#typedef-transform-function title="<transform-function>">&lt;transform-function&gt;</a>s. <a class="production css-code" data-link-type=type href=#typedef-transform-list title="<transform-list>">&lt;transform-list&gt;</a> is animatable and additive. The data type can be animated using the SVG <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement><code class=element-name>&lt;animate&gt;</code></a> element and the SVG <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#SetElement><code class=element-name>&lt;set&gt;</code></a> element. SVG animations must run the same animation steps as described in section <a href=#interpolation-of-transforms>Transitions and Animations between Transform Values</a>.

<p>The set of animatable data types gets extended by <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a>. The new data type is animatable and additive.

<table class=data>
  <caption>Animatable data types</caption>
  <thead>
    <tr>
      <th>Data type</th>
      <th>Additive?</th>
      <th><a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement><code class=element-name>&lt;animate&gt;</code></a></th>
      <th><a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#SetElement><code class=element-name>&lt;set&gt;</code></a></th>
      <th><a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateColorElement><code class=element-name>&lt;animateColor&gt;</code></a></th>
      <th><a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateTransformElement><code class=element-name>&lt;animateTransform&gt;</code></a></th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th><a class="production css-code" data-link-type=type href=#typedef-transform-list title="<transform-list>">&lt;transform-list&gt;</a></th>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
      <td>no</td>
      <td>yes</td>
      <td>Additive for <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateTransformElement><code class=element-name>&lt;animateTransform&gt;</code></a> means that a transformation is post-multiplied to the base set of
        transformations.</td>
    </tr>
    <tr>
      <th><a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a></th>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
      <td>no</td>
      <td>no</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 class="heading settled heading" data-level=14.2 id=neutral-element><span class=secno>14.2 </span><span class=content>Neutral element for addition</span><a class=self-link href=#neutral-element></a></h3>

<p>Some animations require a neutral element for addition. For transform functions this is a scalar or a list of scalars of 0. Examples of neutral elements for transform functions are <span class=css data-link-type=maybe title=translate(0)>translate(0)</span>, <span class=css data-link-type=maybe title="translate3d(0, 0, 0)">translate3d(0, 0, 0)</span>, <span class=css data-link-type=maybe title=translatex(0)>translateX(0)</span>, <span class=css data-link-type=maybe title=translatey(0)>translateY(0)</span>, <span class=css data-link-type=maybe title=translatez(0)>translateZ(0)</span>, <span class=css data-link-type=maybe title=scale(0)>scale(0)</span>, <span class=css data-link-type=maybe title=scalex(0)>scaleX(0)</span>, <span class=css data-link-type=maybe title=scaley(0)>scaleY(0)</span>, <span class=css data-link-type=maybe title=scalez(0)>scaleZ(0)</span>, <span class=css data-link-type=maybe title=rotate(0)>rotate(0)</span>, <span class=css data-link-type=maybe title="rotate3d(vx, vy, vz, 0)">rotate3d(v<sub>x</sub>, v<sub>y</sub>, v<sub>z</sub>, 0)</span> (where <var>v</var> is a context dependent vector), <span class=css data-link-type=maybe title=rotatex(0)>rotateX(0)</span>, <span class=css data-link-type=maybe title=rotatey(0)>rotateY(0)</span>, <span class=css data-link-type=maybe title=rotatez(0)>rotateZ(0)</span>, <span class=css data-link-type=maybe title="skew(0, 0)">skew(0, 0)</span>, <span class=css data-link-type=maybe title=skewx(0)>skewX(0)</span>, <span class=css data-link-type=maybe title=skewy(0)>skewY(0)</span>, <span class=css data-link-type=maybe title="matrix(0, 0, 0, 0, 0, 0)">matrix(0, 0, 0, 0, 0, 0)</span>, <span class=css data-link-type=maybe title="matrix3d(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)">matrix3d(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)</span> and <span class=css data-link-type=maybe title=perspective(0)>perspective(0)</span>.

<p class=note>Note: Animations to or from the neutral element of additions <a class=css data-link-type=maybe href=#funcdef-matrix title=matrix()>matrix()</a>, <a class=css data-link-type=maybe href=#funcdef-matrix3d title=matrix3d()>matrix3d()</a> and <a class=css data-link-type=maybe href=#funcdef-perspective title=perspective()>perspective()</a> fall back to discrete animations (See <a href=#matrix-interpolation>Interpolation of Matrices</a>).

<div class=example>
  <p>
    A <var>by</var> animation with a by value v<sub>b</sub> is equivalent to the same animation with a values list with 2 values, the neutral element for addition for the domain of the target attribute (denoted 0) and v<sub>b</sub>, and ''additive="sum"''. <a data-biblio-type=informative data-link-type=biblio href=#smil3 title=smil3>[SMIL3]</a>
  </p>

  <pre>&lt;rect width="100" height="100"&gt;
&lt;animateTransform attributeName="transform" attributeType="XML"
type="scale" by="1" dur="5s" fill="freeze"/&gt;
&lt;/rect&gt;</pre>
  <p>
    The neutral element for addition when performing a <var>by</var> animation with ''type="scale"<span class=css data-link-type=maybe title=" is the value 0. thus, performing the animation of the example above causes the rectangle to be invisible at time 0s (since the animated transform list value is "> is the value 0. Thus, performing the animation of the example above causes the rectangle to be invisible at time 0s (since the animated transform list value is </span>scale(0)<span class=css data-link-type=maybe title="), and be scaled back to its original size at time 5s (since the animated transform list value is ">), and be scaled back to its original size at time 5s (since the animated transform list value is </span>scale(1)'').
  </p>
</div>

<h3 class="heading settled heading" data-level=14.3 id=svg-attribute-name><span class=secno>14.3 </span><span class=content>
  The SVG <a class=property data-link-type=propdesc href=https://svgwg.org/svg2-draft/animate.html#AttributeNameAttribute title=attributename>attributeName</a> attribute
</span><a class=self-link href=#svg-attribute-name></a></h3>

<p><a href=http://www.w3.org/TR/SVG/animate.html>SVG 1.1 Animation</a> defines the '<a href=http://www.w3.org/TR/SVG/animate.html#TargetAttributes>attributeName</a>' attribute to specify the name of the target attribute. For the presentation attributes <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> and <a class=attr-name href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternTransformAttribute>‘patternTransform‘</a> it will also be possible to use the value <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a>. The same <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property will get animated.

<div class=example>
  <p>
    In this example the gradient transformation of the linear gradient gets animated.
  </p>

  <pre>&lt;linearGradient gradientTransform="scale(2)"&gt;
&lt;animate attributeName="gradientTransform" from="scale(2)" to="scale(4)"
dur="3s" additive="sum"/&gt;
&lt;animate attributeName="transform" from="translate(0, 0)" to="translate(100px, 100px)"
dur="3s" additive="sum"/&gt;
&lt;/linearGradient&gt;</pre>
  <p>
    The <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElement><code class=element-name>&lt;linearGradient&gt;</code></a> element specifies the <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> presentation attribute. The two <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement><code class=element-name>&lt;animate&gt;</code></a> elements address the target attribute <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> and <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a>. Even so all animations apply to the same gradient transformation by taking the value of the <a class=attr-name data-link-type=maybe href=http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute title=gradienttransform>gradientTransform</a> presentation attribute, applying the scaling of the first animation and applying the translation of the second animation one after the other.
  </p>
</div>



<h2 class="heading settled heading" data-level=15 id=transform-functions><span class=secno>15 </span><span class=content>The Transform Functions</span><a class=self-link href=#transform-functions></a></h2>

<p>The value of the <a class=property data-link-type=propdesc href=#propdef-transform title=transform>transform</a> property is a list of <dfn class=css-code data-dfn-type=type data-export="" id=typedef-transform-function>&lt;transform-function&gt;<a class=self-link href=#typedef-transform-function></a></dfn>. The set of allowed transform functions is given below. Wherever <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> is used in this specification, a <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> that is equal to zero is also allowed, which is treated the same as an angle of zero degrees.

<h3 class="heading settled heading" data-level=15.1 id=two-d-transform-functions><span class=secno>15.1 </span><span class=content>2D Transform Functions</span><a class=self-link href=#two-d-transform-functions></a></h3>
<dl>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-matrix title=matrix()>matrix()<a class=self-link href=#funcdef-matrix></a></dfn> = matrix( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> [, <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> ]{5,5} )</pre>  </dt>
  <dd>
    specifies a 2D transformation in the form of a <a href=#MatrixDefined>transformation matrix</a> of the six values a-f.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-translate title=translate()>translate()<a class=self-link href=#funcdef-translate></a></dfn> = translate( <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a> [, <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a> ]? )</pre>  </dt>
  <dd>
    specifies a <a href=#TranslateDefined>2D translation</a> by the vector [tx, ty], where tx is the first translation-value parameter and ty is the optional second translation-value parameter. If <em>&lt;ty&gt;</em> is not provided, ty has zero as a value.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-translatex title=translatex()>translateX()<a class=self-link href=#funcdef-translatex></a></dfn> = translateX( <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#TranslateDefined>translation</a> by the given amount in the X direction.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-translatey title=translatey()>translateY()<a class=self-link href=#funcdef-translatey></a></dfn> = translateX( <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#TranslateDefined>translation</a> by the given amount in the Y direction.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-scale title=scale()>scale()<a class=self-link href=#funcdef-scale></a></dfn> = scale( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> [, <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> ]? )</pre>  </dt>
  <dd>
    specifies a <a href=#ScaleDefined>2D scale</a> operation by the [sx,sy] scaling vector described by the 2 parameters. If the second parameter is not provided, it takes a value equal to the first. For example, scale(1, 1) would leave an element unchanged, while scale(2, 2) would cause it to appear twice as long in both the X and Y axes, or four times its typical geometric size.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-scalex title=scalex()>scaleX()<a class=self-link href=#funcdef-scalex></a></dfn> = scaleX( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#ScaleDefined>2D scale</a> operation using the [sx,1] scaling vector, where sx is given as the parameter.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-scaley title=scaley()>scaleY()<a class=self-link href=#funcdef-scaley></a></dfn> = scaleY( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#ScaleDefined>2D scale</a> operation using the [1,sy] scaling vector, where sy is given as the parameter.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-rotate title=rotate()>rotate()<a class=self-link href=#funcdef-rotate></a></dfn> = rotate( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#RotateDefined>2D rotation</a> by the angle specified in the parameter about the origin of the element, as
    defined by the <a class=property data-link-type=propdesc href=#propdef-transform-origin title=transform-origin>transform-origin</a> property. For example, <span class=css data-link-type=maybe title=rotate(90deg)>rotate(90deg)</span>
    would cause elements to appear rotated one-quarter of a turn in the clockwise direction.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-skew title=skew()>skew()<a class=self-link href=#funcdef-skew></a></dfn> = skew( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> [, <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> ]? )</pre>  </dt>
  <dd>
    specifies a <a href=#SkewDefined>2D skew</a> by [ax,ay] for X and Y. If the second parameter is not provided, it has a zero value.
    <p class=note>Note that the behavior of <a class=css data-link-type=maybe href=#funcdef-skew title=skew()>skew()</a> is different from multiplying <a class=css data-link-type=maybe href=#funcdef-skewx title=skewx()>skewX()</a> with <a class=css data-link-type=maybe href=#funcdef-skewy title=skewy()>skewY()</a>. Implementations must support this function for compatibility with legacy content.</p>
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-skewx title=skewx()>skewX()<a class=self-link href=#funcdef-skewx></a></dfn> = skewX( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#SkewXDefined>2D skew transformation along the X axis</a> by the given angle.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-skewy title=skewy()>skewY()<a class=self-link href=#funcdef-skewy></a></dfn> = skewY( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#SkewYDefined>2D skew transformation along the Y axis</a> by the given angle.
  </dd>
</dl>


<h3 class="heading settled heading" data-level=15.2 id=three-d-transform-functions><span class=secno>15.2 </span><span class=content>3D Transform Functions</span><a class=self-link href=#three-d-transform-functions></a></h3>

<dl>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-matrix3d title=matrix3d()>matrix3d()<a class=self-link href=#funcdef-matrix3d></a></dfn> = matrix3d( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> [, <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> ]{15,15} )</pre>  </dt>
  <dd>
    specifies a 3D transformation as a 4x4 homogeneous matrix of 16 values in column-major order.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-translate3d title=translate3d()>translate3d()<a class=self-link href=#funcdef-translate3d></a></dfn> = translate3d( <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a> , <a class="production css-code" data-link-type=type href=#typedef-translation-value title="<translation-value>">&lt;translation-value&gt;</a> , <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#Translate3dDefined>3D translation</a> by the vector [tx,ty,tz], with tx, ty and tz being the first, second and third translation-value parameters respectively.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-translatez title=translatez()>translateZ()<a class=self-link href=#funcdef-translatez></a></dfn> = translateZ( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#Translate3dDefined>3D translation</a> by the vector [0,0,tz] with the given amount in the Z direction.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-scale3d title=scale3d()>scale3d()<a class=self-link href=#funcdef-scale3d></a></dfn> = scale3d( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> , <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a>, <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#Scale3dDefined>3D scale</a> operation by the [sx,sy,sz] scaling vector described by the 3 parameters.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-scalez title=scalez()>scaleZ()<a class=self-link href=#funcdef-scalez></a></dfn> = scaleZ( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#Scale3dDefined>3D scale</a> operation using the [1,1,sz] scaling vector, where sz is given as the parameter.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-rotate3d title=rotate3d()>rotate3d()<a class=self-link href=#funcdef-rotate3d></a></dfn> = rotate3d( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> , <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> , <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#number-value title="<number>">&lt;number&gt;</a> , <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#Rotate3dDefined>3D rotation</a> by the angle specified in last parameter about the [x,y,z] direction vector described by the first three parameters. A direction vector that cannot be normalized, such as [0,0,0], will cause the rotation to not be applied.
    <p class=note>Note that the rotation is clockwise as one looks from the end of the vector toward the origin.</p>
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-rotatex title=rotatex()>rotateX()<a class=self-link href=#funcdef-rotatex></a></dfn> = rotateX( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> )</pre>  </dt>
  <dd>
    same as <span class=css data-link-type=maybe title="rotate3d(1, 0, 0, <angle>)">rotate3d(1, 0, 0, &lt;angle&gt;)</span>.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-rotatey title=rotatey()>rotateY()<a class=self-link href=#funcdef-rotatey></a></dfn> = rotateY( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> )</pre>  </dt>
  <dd>
    same as <span class=css data-link-type=maybe title="rotate3d(0, 1, 0, <angle>)">rotate3d(0, 1, 0, &lt;angle&gt;)</span>.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-rotatez title=rotatez()>rotateZ()<a class=self-link href=#funcdef-rotatez></a></dfn> = rotateZ( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#angle-value title="<angle>">&lt;angle&gt;</a> )</pre>  </dt>
  <dd>
    same as <span class=css data-link-type=maybe title="rotate3d(0, 0, 1, <angle>)">rotate3d(0, 0, 1, &lt;angle&gt;)</span>, which is also the same as <span class=css data-link-type=maybe title="rotate(<angle>)">rotate(&lt;angle&gt;)</span>.
  </dd>
  <dt>
<pre class=prod><dfn class=css-code data-dfn-type=function data-export="" id=funcdef-perspective title=perspective()>perspective()<a class=self-link href=#funcdef-perspective></a></dfn> = perspective( <a class="production css-code" data-link-type=type href=http://www.w3.org/TR/css3-values/#length-value title="<length>">&lt;length&gt;</a> )</pre>  </dt>
  <dd>
    specifies a <a href=#PerspectiveDefined>perspective projection matrix</a>. This matrix scales points in X and Y based on their Z value, scaling points with positive Z values away from the origin, and those with negative Z values towards the origin. Points on the z=0 plane are unchanged. The parameter represents the distance of the z=0 plane from the viewer. Lower values give a more flattened pyramid and therefore a more pronounced perspective effect. For example, a value of 1000px gives a moderate amount of foreshortening and a value of 200px gives an extreme amount. The value for depth must be greater than zero, otherwise the function is invalid.
  </dd>
</dl>



<h2 class="heading settled heading" data-level=16 id=transform-function-lists><span class=secno>16 </span><span class=content>The Transform Function Lists</span><a class=self-link href=#transform-function-lists></a></h2>

<p>If a list of <a class="production css-code" data-link-type=type href=#typedef-transform-function title="<transform-function>">&lt;transform-function&gt;</a> is provided, then the net effect is as if each transform function had been specified separately in the order provided. For example,

<pre>&lt;div style="transform:translate(-10px,-20px) scale(2) rotate(45deg) translate(5px,10px)"/&gt;
</pre>
<p>is functionally equivalent to:

<pre>&lt;div style="transform:translate(-10px,-20px)"&gt;
  &lt;div style="transform:scale(2)"&gt;
    &lt;div style="transform:rotate(45deg)"&gt;
      &lt;div style="transform:translate(5px,10px)"&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>
<p>That is, in the absence of other styling that affects position and dimensions, a nested set of transforms is equivalent to a single list of transform functions, applied from the outside in. The resulting transform is the matrix multiplication of the list of transforms.

<p>If a transform function causes the <a data-link-type=dfn href=#current-transformation-matrix-ctm title="current transformation matrix (ctm)">current transformation matrix (CTM)</a> of an object to be non-invertible, the object and its content do not get displayed.

<div class=example>
  <p>
    The object in the following example gets scaled by 0.
  </p>

  <pre>&lt;style&gt;
.box {
transform: scale(0);
}
&lt;/style&gt;

&lt;div class="box"&gt;
Not visible
&lt;/div&gt;</pre>
  <p>
    The scaling causes a non-invertible CTM for the coordinate space of the div box. Therefore neither the div box, nor the text in it get displayed.
  </p>
</div>



<h2 class="heading settled heading" data-level=17 id=interpolation-of-transforms><span class=secno>17 </span><span class=content>Interpolation of Transforms</span><a class=self-link href=#interpolation-of-transforms></a></h2>

<p>When animating or transitioning transforms, the transform function lists must be interpolated. For interpolation between one transform <em>from-transform</em> and a second transforms <em>to-transform</em>, the rules described below are applied.

<p><ul>
  <li id=none-none-animation><a class=self-link href=#none-none-animation></a>
    If both the <em>from-</em> and <em>to-transform</em> are <a class=css data-link-type=maybe href=#none title=none>none</a>:
    <ul>
      <li>
        There is no interpolation necessary. The computed value stays <a class=css data-link-type=maybe href=#none title=none>none</a>.
      </li>
    </ul>
  </li>
  <li id=none-transform-animation><a class=self-link href=#none-transform-animation></a>
    If one of the <em>from-</em> or <em>to-transforms</em> is <a class=css data-link-type=maybe href=#none title=none>none</a>.
    <ul>
      <li>
        The value <a class=css data-link-type=maybe href=#none title=none>none</a> is replaced by an equivalent <a data-link-type=dfn href=#identity-transform-function title="identity transform function">identity transform function</a> list for the corresponding transform function list. Both transform function lists get interpolated following the next rule.
      </li>
    </ul>
    <div class=example>
      <p>
        For example, if <em>from-transform</em> is <span class=css data-link-type=maybe title=scale(2)>scale(2)</span> and <em>to-transform</em> is <a class=css data-link-type=maybe href=#none title=none>none</a> then the value <span class=css data-link-type=maybe title=scale(1)>scale(1)</span> will be used for <em>to-transform</em> and animation will proceed using the next rule. Similarly, if <em>from-transform</em> is <a class=css data-link-type=maybe href=#none title=none>none</a> and <em>to-transform</em> is <span class=css data-link-type=maybe title="scale(2) rotate(50deg)">scale(2) rotate(50deg)</span> then the animation will execute as if <em>from-transform</em> is <span class=css data-link-type=maybe title="scale(1) rotate(0)">scale(1) rotate(0)</span>.
      </p>
    </div>
  </li>
  <li id=transform-transform-animation><a class=self-link href=#transform-transform-animation></a>
    If <em>from-</em> and <em>to-transform</em> have the same number of transform functions, each transform function pair has either the same name, or is a derivative of the same <a href=#transform-primitives>primitive</a>.
    <ul>
      <li>
        Interpolate each transform function pair as described in <a href=#interpolation-of-transform-functions>Interpolation of transform functions</a>. The computed value is the resulting transform function list.
      </li>
    </ul>
    <div class=example>
      <p>
        For example, if <em>from-transform</em> is <span class=css data-link-type=maybe title="scale(1) translate(0)">scale(1) translate(0)</span> and <em>to-transform</em> is <span class=css data-link-type=maybe title="translate(100px) scale(2)">translate(100px) scale(2)</span> then <span class=css data-link-type=maybe title=scale(1)>scale(1)</span> and <span class=css data-link-type=maybe title=translate(100px)>translate(100px)</span> as well as <span class=css data-link-type=maybe title=translate(0)>translate(0)</span> and <span class=css data-link-type=maybe title=scale(2)>scale(2)</span> don’t share a common primitive and therefore can not get interpolated following this rule.
      </p>
    </div>
  </li>
  <li id=other-animation><a class=self-link href=#other-animation></a>
    In all other cases:
    <ul>
      <li>
        The transform functions of each transform function list on the <em>from-</em> and <em>to-transform</em> get post multiplied and converted into 4x4 matrices. Each of the matrices gets interpolated following the instructions in <a href=#matrix-interpolation>Interpolation of matrices</a>. The computed value is the transform function <span class=css data-link-type=maybe title=matrix>matrix</span> if both initial matrices can be represented by a correlating 3x2 matrix and <span class=css data-link-type=maybe title=matrix3d>matrix3d</span> otherwise.
      </li>
    </ul>
  </li>
</ul>

<p>In some cases, an animation might cause a transformation matrix to be singular or non-invertible. For example, an animation in which scale moves from 1 to -1. At the time when the matrix is in such a state, the transformed element is not rendered.



<h2 class="heading settled heading" data-level=18 id=transform-primitives><span class=secno>18 </span><span class=content>
  Transform function primitives and derivatives
</span><a class=self-link href=#transform-primitives></a></h2>

<p>Some transform functions can be represented by more generic transform functions. These transform functions are called derived transform functions, the generic transform functions primitives. Primitives for two-dimensional and three-dimensional transform functions are listed below.

<p>Two-dimensional primitives with derived transform functions are:

<dl>
  <dt id=translate-primitive><a class=self-link href=#translate-primitive></a>
    <a class=css data-link-type=maybe href=#funcdef-translate title=translate()>translate()</a>
  </dt>
  <dd>
    for <a class=css data-link-type=maybe href=#funcdef-translatex title=translatex()>translateX()</a>, <a class=css data-link-type=maybe href=#funcdef-translatey title=translatey()>translateY()</a> and <a class=css data-link-type=maybe href=#funcdef-translate title=translate()>translate()</a>.
  </dd>
  <dt id=rotate-three-primitive><a class=self-link href=#rotate-three-primitive></a>
    <a class=css data-link-type=maybe href=#funcdef-rotate title=rotate()>rotate()</a> with three arguments
  </dt>
  <dd>
    for <a class=css data-link-type=maybe href=#funcdef-rotate title=rotate()>rotate()</a> with one or three arguments if <a href=#svg-transform-functions>rotate with three arguments</a> is supported.
  </dd>
  <dt id=scale-primitive><a class=self-link href=#scale-primitive></a>
    <a class=css data-link-type=maybe href=#funcdef-scale title=scale()>scale()</a>
  </dt>
  <dd>
    for <a class=css data-link-type=maybe href=#funcdef-scalex title=scalex()>scaleX()</a>, <a class=css data-link-type=maybe href=#funcdef-scaley title=scaley()>scaleY()</a> and <a class=css data-link-type=maybe href=#funcdef-scale title=scale()>scale()</a>.
  </dd>
</dl>

<p>Three-dimensional primitives with derived transform functions are:

<dl>
  <dt id=translate3d-primitive><a class=self-link href=#translate3d-primitive></a>
    <a class=css data-link-type=maybe href=#funcdef-translate3d title=translate3d()>translate3d()</a>
  </dt>
  <dd>
    for <a class=css data-link-type=maybe href=#funcdef-translatex title=translatex()>translateX()</a>, <a class=css data-link-type=maybe href=#funcdef-translatey title=translatey()>translateY()</a>, <a class=css data-link-type=maybe href=#funcdef-translatez title=translatez()>translateZ()</a> and <a class=css data-link-type=maybe href=#funcdef-translate title=translate()>translate()</a>.
  </dd>
  <dt id=scale3d-primitive><a class=self-link href=#scale3d-primitive></a>
    <a class=css data-link-type=maybe href=#funcdef-scale3d title=scale3d()>scale3d()</a>
  </dt>
  <dd>
    for <a class=css data-link-type=maybe href=#funcdef-scalex title=scalex()>scaleX()</a>, <a class=css data-link-type=maybe href=#funcdef-scaley title=scaley()>scaleY()</a>, <a class=css data-link-type=maybe href=#funcdef-scalez title=scalez()>scaleZ()</a> and <a class=css data-link-type=maybe href=#funcdef-scale title=scale()>scale()</a>.
  </dd>
  <dt id=rotate3d-primitive><a class=self-link href=#rotate3d-primitive></a>
    <a class=css data-link-type=maybe href=#funcdef-rotate3d title=rotate3d()>rotate3d()</a>
  </dt>
  <dd>
    for <a class=css data-link-type=maybe href=#funcdef-rotate title=rotate()>rotate()</a>, <a class=css data-link-type=maybe href=#funcdef-rotatex title=rotatex()>rotateX()</a>, <a class=css data-link-type=maybe href=#funcdef-rotatey title=rotatey()>rotateY()</a> and <a class=css data-link-type=maybe href=#funcdef-rotatez title=rotatez()>rotateZ()</a>.
  </dd>
</dl>

<p id=interpolation-two-three-dimensional-function>
  For derived transform functions that have a two-dimensional primitive and a three-dimensional primitive, the context decides about the used primitive. See <a href=#interpolation-of-transform-functions>Interpolation of primitives and derived transform functions</a>.
</p>



<h2 class="heading settled heading" data-level=19 id=interpolation-of-transform-functions><span class=secno>19 </span><span class=content>
  Interpolation of primitives and derived transform functions
</span><a class=self-link href=#interpolation-of-transform-functions></a></h2>

<p>Two transform functions with the same name and the same number of arguments are interpolated numerically without a former conversion. The calculated value will be of the same transform function type with the same number of arguments. Special rules apply to <a class=css data-link-type=maybe href=#funcdef-rotate3d title=rotate3d()>rotate3d()</a>, <a class=css data-link-type=maybe href=#funcdef-matrix title=matrix()>matrix()</a>, <a class=css data-link-type=maybe href=#funcdef-matrix3d title=matrix3d()>matrix3d()</a> and <a class=css data-link-type=maybe href=#funcdef-perspective title=perspective()>perspective()</a>.

<div class=example>
  <p>
    The two transform functions <span class=css data-link-type=maybe title=translate(0)>translate(0)</span> and <span class=css data-link-type=maybe title=translate(100px)>translate(100px)</span> are of the same type, have the same number of arguments and therefore can get interpolated numerically. <span class=css data-link-type=maybe title=translatex(100px)>translateX(100px)</span> is not of the same type and <span class=css data-link-type=maybe title="translate(100px, 0)">translate(100px, 0)</span> does not have the same number of arguments, therefore these transform functions can not get interpolated without a former conversion step.
  </p>
</div>

<p>Two different types of transform functions that share the same primitive, or transform functions of the same type with different number of arguments can be interpolated. Both transform functions need a former conversion to the common primitive first and get interpolated numerically afterwards. The computed value will be the primitive with the resulting interpolated arguments. 

<div class=example>
  <p>
    The following example describes a transition from <span class=css data-link-type=maybe title=translatex(100px)>translateX(100px)</span> to <span class=css data-link-type=maybe title=translatey(100px)>translateY(100px)</span> in 3 seconds on hovering over the div box. Both transform functions derive from the same primitive <a class=css data-link-type=maybe href=#funcdef-translate title=translate()>translate()</a>
    and therefore can be interpolated.
  </p>

  <pre>div {
  transform: translateX(100px);
}

div:hover {
  transform: translateY(100px);
  transition: transform 3s;
}</pre>
  <p>
    For the time of the transition both transform functions get transformed to the common primitive. <span class=css data-link-type=maybe title=translatex(100px)>translateX(100px)</span> gets converted to <span class=css data-link-type=maybe title="translate(100px, 0)">translate(100px, 0)</span> and <span class=css data-link-type=maybe title=translatey(100px)>translateY(100px)</span> gets converted to <span class=css data-link-type=maybe title="translate(0, 100px)">translate(0, 100px)</span>. Both transform functions can then get interpolated numerically.
  </p>
</div>

<p>If both transform functions share a primitive in the two-dimensional space, both transform functions get converted to the two-dimensional primitive. If one or both transform functions are three-dimensional transform functions, the common three-dimensional primitive is used.

<div class=example>
  <p>
    In this example a two-dimensional transform function gets animated to a three-dimensional transform function. The common primitive is <a class=css data-link-type=maybe href=#funcdef-translate3d title=translate3d()>translate3d()</a>.
  </p>

  <pre>div {
  transform: translateX(100px);
}

div:hover {
  transform: translateZ(100px);
  transition: transform 3s;
}</pre>
  <p>
    First <span class=css data-link-type=maybe title=translatex(100px)>translateX(100px)</span> gets converted to <span class=css data-link-type=maybe title="translate3d(100px, 0, 0)">translate3d(100px, 0, 0)</span> and <span class=css data-link-type=maybe title=translatez(100px)>translateZ(100px)</span> to <span class=css data-link-type=maybe title="translate3d(0, 0, 100px)">translate3d(0, 0, 100px)</span> respectively. Then both converted transform functions get interpolated numerically.
  </p>
</div>

<p>The transform functions <a class=css data-link-type=maybe href=#funcdef-matrix title=matrix()>matrix()</a>, <a class=css data-link-type=maybe href=#funcdef-matrix3d title=matrix3d()>matrix3d()</a> and <a class=css data-link-type=maybe href=#funcdef-perspective title=perspective()>perspective()</a> get converted into 4x4 matrices first and interpolated as defined in section <a href=#matrix-interpolation>Interpolation of Matrices</a> afterwards.

<p>For interpolations with the primitive <a class=css data-link-type=maybe href=#funcdef-rotate3d title=rotate3d()>rotate3d()</a>, the direction vectors of the transform functions get normalized first. If the normalized vectors are equal, the rotation angle gets interpolated numerically. Otherwise the transform functions get converted into 4x4 matrices first and interpolated as defined in section <a href=#matrix-interpolation>Interpolation of Matrices</a> afterwards.



<h2 class="heading settled heading" data-level=20 id=matrix-interpolation><span class=secno>20 </span><span class=content>Interpolation of Matrices</span><a class=self-link href=#matrix-interpolation></a></h2>

<p>When interpolating between two matrices, each matrix is decomposed into the corresponding translation, rotation, scale, skew and (for a <a data-link-type=dfn href=#3d-matrix title="3d matrix">3D matrix</a>) perspective values. Each corresponding component of the decomposed matrices gets interpolated numerically and recomposed back to a matrix in a final step.

<div class=note>
  <p>
    In the following example the element gets translated by 100 pixel in both the X and Y directions and rotated by 1170° on hovering. The initial transformation is 45°. With the usage of transition, an author might expect a animated, clockwise rotation by three and a quarter turns (1170°).
  </p>

  <pre>&lt;style&gt;
div {
  transform: rotate(45deg);
}
div:hover {
  transform: translate(100px, 100px) rotate(1215deg);
  transition: transform 3s;
}
&lt;/style&gt;

&lt;div&gt;&lt;/div&gt;</pre>
  <p>
    The number of transform functions on the source transform <span class=css data-link-type=maybe title=rotate(45deg)>rotate(45deg)</span> differs from the number of transform functions on the destination transform <span class=css data-link-type=maybe title="translate(100px, 100px) rotate(1125deg)">translate(100px, 100px) rotate(1125deg)</span>. According to the last rule of <a href=#interpolation-of-transforms>Interpolation of Transforms</a>, both transforms must be interpolated by matrix interpolation. With converting the transformation functions to matrices, the information about the three turns gets lost and the element gets rotated by just a quarter turn (90°).
  </p>

  <p>
    To achieve the three and a quarter turns for the example above, source and destination transforms must fulfill the third rule of <a href=#interpolation-of-transforms>Interpolation of Transforms</a>. Source transform could look like <span class=css data-link-type=maybe title="translate(0, 0) rotate(45deg)">translate(0, 0) rotate(45deg)</span> for a linear interpolation of the transform functions.
  </p>
</div>

<p>In the following we differ between the <a href=#interpolation-of-2d-matrices>interpolation of two 2D matrices</a> and the <a href=#interpolation-of-3d-matrices>interpolation of two matrices</a> where at least one matrix is not a <a data-link-type=dfn href=#2d-matrix title="2d matrix">2D matrix</a>.

<p>If one of the matrices for interpolation is non-invertible, the used animation function must fall-back to a discrete animation according to the rules of the respective animation specification.

<h3 class="heading settled heading" data-level=20.1 id=supporting-functions><span class=secno>20.1 </span><span class=content>Supporting functions</span><a class=self-link href=#supporting-functions></a></h3>

<p>The pseudo code in the next subsections make use of the following supporting functions:

<pre>Supporting functions (point is a 3 component vector, matrix is a 4x4 matrix, vector is a 4 component vector):
  double  determinant(matrix)          returns the 4x4 determinant of the matrix
  matrix  inverse(matrix)              returns the inverse of the passed matrix
  matrix  transpose(matrix)            returns the transpose of the passed matrix
  point   multVecMatrix(point, matrix) multiplies the passed point by the passed matrix
                                       and returns the transformed point
  double  length(point)                returns the length of the passed vector
  point   normalize(point)             normalizes the length of the passed point to 1
  double  dot(point, point)            returns the dot product of the passed points
  double  sqrt(double)                 returns the root square of passed value
  double  max(double y, double x)      returns the bigger value of the two passed values
  double  dot(vector, vector)         returns the dot product of the passed vectors
  vector  multVector(vector, vector)  multiplies the passed vectors
  double  sqrt(double)                returns the root square of passed value
  double  max(double y, double x)     returns the bigger value of the two passed values
  double  min(double y, double x)     returns the smaller value of the two passed values
  double  cos(double)                 returns the cosines of passed value
  double  sin(double)                 returns the sine of passed value  
  double  acos(double)                returns the inverse cosine of passed value
  double  abs(double)                  returns the absolute value of the passed value
  double  rad2deg(double)              transforms a value in radian to degree and returns it
  double  deg2rad(double)              transforms a value in degree to radian and returns it

Decomposition also makes use of the following function:
  point combine(point a, point b, double ascl, double bscl)
      result[0] = (ascl * a[0]) + (bscl * b[0])
      result[1] = (ascl * a[1]) + (bscl * b[1])
      result[2] = (ascl * a[2]) + (bscl * b[2])
      return result
</pre>
<h3 class="heading settled heading" data-level=20.2 id=interpolation-of-2d-matrices><span class=secno>20.2 </span><span class=content>Interpolation of 2D matrices</span><a class=self-link href=#interpolation-of-2d-matrices></a></h3>

<h4 class="heading settled heading" data-level=20.2.1 id=decomposing-a-2d-matrix><span class=secno>20.2.1 </span><span class=content>Decomposing a 2D matrix</span><a class=self-link href=#decomposing-a-2d-matrix></a></h4>

<p>The pseudo code below is based upon the "unmatrix" method in "Graphics Gems II, edited by Jim Arvo".

<pre>Input:  matrix      ; a 4x4 matrix
Output: translation ; a 2 component vector
        scale       ; a 2 component vector
        angle       ; rotation
        m11         ; 1,1 coordinate of 2x2 matrix
        m12         ; 1,2 coordinate of 2x2 matrix
        m21         ; 2,1 coordinate of 2x2 matrix
        m22         ; 2,2 coordinate of 2x2 matrix
Returns false if the matrix cannot be decomposed, true if it can


double row0x = matrix[0][0]
double row0y = matrix[0][1]
double row1x = matrix[1][0]
double row1y = matrix[1][1]

translate[0] = matrix[3][0]
translate[1] = matrix[3][1]

scale[0] = sqrt(row0x * row0x + row0y * row0y)
scale[1] = sqrt(row1x * row1x + row1y * row1y)

// If determinant is negative, one axis was flipped.
double determinant = row0x * row1y - row0y * row1x
if (determinant &lt; 0)
    // Flip axis with minimum unit vector dot product.
    if (row0x &lt; row1y)
        scale[0] = -scale[0]
    else
        scale[1] = -scale[1]

// Renormalize matrix to remove scale. 
if (scale[0])
    row0x *= 1 / scale[0]
    row0y *= 1 / scale[0]
if (scale[1]) 
    row1x *= 1 / scale[1]
    row1y *= 1 / scale[1]

// Compute rotation and renormalize matrix. 
angle = atan2(row0y, row0x); 

if (angle)
    // Rotate(-angle) = [cos(angle), sin(angle), -sin(angle), cos(angle)]
    //                = [row0x, -row0y, row0y, row0x]
    // Thanks to the normalization above.
    double sn = -row0y
    double cs = row0x
    double m11 = row0x
    double m12 = row0y
    double m21 = row1x
    double m22 = row1y
    row0x = cs * m11 + sn * m21
    row0y = cs * m12 + sn * m22
    row1x = -sn * m11 + cs * m21
    row1y = -sn * m12 + cs * m22

m11 = row0x
m12 = row0y
m21 = row1x
m22 = row1y

// Convert into degrees because our rotation functions expect it.
angle = rad2deg(angle)

return true
</pre>
<h4 class="heading settled heading" data-level=20.2.2 id=interpolation-of-decomposed-2d-matrix-values><span class=secno>20.2.2 </span><span class=content>
  Interpolation of decomposed 2D matrix values
</span><a class=self-link href=#interpolation-of-decomposed-2d-matrix-values></a></h4>

<p>Before two decomposed 2D matrix values can be interpolated, the following 

<pre>Input: translationA ; a 2 component vector
       scaleA       ; a 2 component vector
       angleA       ; rotation
       m11A         ; 1,1 coordinate of 2x2 matrix
       m12A         ; 1,2 coordinate of 2x2 matrix
       m21A         ; 2,1 coordinate of 2x2 matrix
       m22A         ; 2,2 coordinate of 2x2 matrix
       translationB ; a 2 component vector
       scaleB       ; a 2 component vector
       angleB       ; rotation
       m11B         ; 1,1 coordinate of 2x2 matrix
       m12B         ; 1,2 coordinate of 2x2 matrix
       m21B         ; 2,1 coordinate of 2x2 matrix
       m22B         ; 2,2 coordinate of 2x2 matrix


// If x-axis of one is flipped, and y-axis of the other,
// convert to an unflipped rotation.
if ((scaleA[0] &lt; 0 &amp;&amp; scaleB[1] &lt; 0) || (scaleA[1] &lt; 0 &amp;&amp; scaleB[0] &lt; 0))
    scaleA[0] = -scaleA[0]
    scaleA[1] = -scaleA[1]
    angleA += angleA &lt; 0 ? 180 : -180

// Don’t rotate the long way around.
if (!angleA)
    angleA = 360
if (!angleB)
    angleB = 360

if (abs(angleA - angleB) &gt; 180)
    if (angleA &gt; angleB)
        angleA -= 360
    else 
        angleB -= 360
</pre>
<p>Afterwards, each component of the decomposed values translation, scale, angle, m11 to m22 of the source matrix get linearly interpolated with each corresponding component of the destination matrix.

<h4 class="heading settled heading" data-level=20.2.3 id=recomposing-to-a-2d-matrix><span class=secno>20.2.3 </span><span class=content>Recomposing to a 2D matrix</span><a class=self-link href=#recomposing-to-a-2d-matrix></a></h4>

<p>After interpolation, the resulting values are used to transform the elements user space. One way to use these values is to recompose them into a 4x4 matrix. This can be done following the pseudo code below:

<pre>Input:  translation ; a 2 component vector
        scale       ; a 2 component vector
        angle       ; rotation
        m11         ; 1,1 coordinate of 2x2 matrix
        m12         ; 1,2 coordinate of 2x2 matrix
        m21         ; 2,1 coordinate of 2x2 matrix
        m22         ; 2,2 coordinate of 2x2 matrix
Output: matrix      ; a 4x4 matrix initialized to identity matrix


matrix[0][0] = m11
matrix[0][1] = m12
matrix[1][0] = m21
matrix[1][1] = m22

// Translate matrix.
matrix[3][0] = translate[0] * m11 + translate[1] * m21
matrix[3][1] = translate[0] * m12 + translate[1] * m22

// Rotate matrix.
angle = deg2rad(angle);
double cosAngle = cos(angle);
double sinAngle = sin(angle);

// New temporary, identity initialized, 4x4 matrix rotateMatrix
rotateMatrix[0][0] = cosAngle
rotateMatrix[0][1] = sinAngle
rotateMatrix[1][0] = -sinAngle
rotateMatrix[1][1] = cosAngle

matrix = multiply(matrix, rotateMatrix)

// Scale matrix.
matrix[0][0] *= scale[0]
matrix[0][1] *= scale[0]
matrix[1][0] *= scale[1]
matrix[1][1] *= scale[1]
</pre>
<h3 class="heading settled heading" data-level=20.3 id=interpolation-of-3d-matrices><span class=secno>20.3 </span><span class=content>Interpolation of 3D matrices</span><a class=self-link href=#interpolation-of-3d-matrices></a></h3>

<h4 class="heading settled heading" data-level=20.3.1 id=decomposing-a-3d-matrix><span class=secno>20.3.1 </span><span class=content>Decomposing a 3D matrix</span><a class=self-link href=#decomposing-a-3d-matrix></a></h4>

<p>The pseudo code below is based upon the "unmatrix" method in "Graphics Gems II, edited by Jim Arvo", but modified to use Quaternions instead of Euler angles to avoid the problem of Gimbal Locks.

<p>The following pseudocode works on a 4x4 homogeneous matrix:

<pre>Input:  matrix      ; a 4x4 matrix
Output: translation ; a 3 component vector
        scale       ; a 3 component vector
        skew        ; skew factors XY,XZ,YZ represented as a 3 component vector
        perspective ; a 4 component vector
        quaternion  ; a 4 component vector
Returns false if the matrix cannot be decomposed, true if it can


// Normalize the matrix.
if (matrix[3][3] == 0)
    return false

for (i = 0; i &lt; 4; i++)
    for (j = 0; j &lt; 4; j++)
        matrix[i][j] /= matrix[3][3]

// perspectiveMatrix is used to solve for perspective, but it also provides
// an easy way to test for singularity of the upper 3x3 component.
perspectiveMatrix = matrix

for (i = 0; i &lt; 3; i++)
    perspectiveMatrix[i][3] = 0

perspectiveMatrix[3][3] = 1

if (determinant(perspectiveMatrix) == 0)
    return false

// First, isolate perspective.
if (matrix[0][3] != 0 || matrix[1][3] != 0 || matrix[2][3] != 0)
    // rightHandSide is the right hand side of the equation.
    rightHandSide[0] = matrix[0][3]
    rightHandSide[1] = matrix[1][3]
    rightHandSide[2] = matrix[2][3]
    rightHandSide[3] = matrix[3][3]

    // Solve the equation by inverting perspectiveMatrix and multiplying
    // rightHandSide by the inverse.
    inversePerspectiveMatrix = inverse(perspectiveMatrix)
    transposedInversePerspectiveMatrix = transposeMatrix4(inversePerspectiveMatrix)
    perspective = multVecMatrix(rightHandSide, transposedInversePerspectiveMatrix)
else
    // No perspective.
    perspective[0] = perspective[1] = perspective[2] = 0
    perspective[3] = 1

// Next take care of translation
for (i = 0; i &lt; 3; i++)
    translate[i] = matrix[3][i]

// Now get scale and shear. 'row' is a 3 element array of 3 component vectors
for (i = 0; i &lt; 3; i++)
    row[i][0] = matrix[i][0]
    row[i][1] = matrix[i][1]
    row[i][2] = matrix[i][2]

// Compute X scale factor and normalize first row.
scale[0] = length(row[0])
row[0] = normalize(row[0])

// Compute XY shear factor and make 2nd row orthogonal to 1st.
skew[0] = dot(row[0], row[1])
row[1] = combine(row[1], row[0], 1.0, -skew[0])

// Now, compute Y scale and normalize 2nd row.
scale[1] = length(row[1])
row[1] = normalize(row[1])
skew[0] /= scale[1];

// Compute XZ and YZ shears, orthogonalize 3rd row
skew[1] = dot(row[0], row[2])
row[2] = combine(row[2], row[0], 1.0, -skew[1])
skew[2] = dot(row[1], row[2])
row[2] = combine(row[2], row[1], 1.0, -skew[2])

// Next, get Z scale and normalize 3rd row.
scale[2] = length(row[2])
row[2] = normalize(row[2])
skew[1] /= scale[2]
skew[2] /= scale[2]

// At this point, the matrix (in rows) is orthonormal.
// Check for a coordinate system flip.  If the determinant
// is -1, then negate the matrix and the scaling factors.
pdum3 = cross(row[1], row[2])
if (dot(row[0], pdum3) &lt; 0)
    for (i = 0; i &lt; 3; i++)
        scale[i] *= -1;
        row[i][0] *= -1
        row[i][1] *= -1
        row[i][2] *= -1

// Now, get the rotations out
quaternion[0] = 0.5 * sqrt(max(1 + row[0][0] - row[1][1] - row[2][2], 0))
quaternion[1] = 0.5 * sqrt(max(1 - row[0][0] + row[1][1] - row[2][2], 0))
quaternion[2] = 0.5 * sqrt(max(1 - row[0][0] - row[1][1] + row[2][2], 0))
quaternion[3] = 0.5 * sqrt(max(1 + row[0][0] + row[1][1] + row[2][2], 0))

if (row[2][1] &gt; row[1][2])
    quaternion[0] = -quaternion[0]
if (row[0][2] &gt; row[2][0])
    quaternion[1] = -quaternion[1]
if (row[1][0] &gt; row[0][1])
    quaternion[2] = -quaternion[2]

return true</pre>
<h4 class="heading settled heading" data-level=20.3.2 id=interpolation-of-decomposed-3d-matrix-values><span class=secno>20.3.2 </span><span class=content>
  Interpolation of decomposed 3D matrix values
</span><a class=self-link href=#interpolation-of-decomposed-3d-matrix-values></a></h4>

<p>Each component of the decomposed values translation, scale, skew and perspective of the source matrix get linearly interpolated with each corresponding component of the destination matrix.

<p class=note>Note: For instance, <code>translate[0]</code> of the source matrix and <code>translate[0]</code> of the destination matrix are interpolated numerically, and the result is used to set the translation of the animating element.

<p>Quaternions of the decomposed source matrix are interpolated with quaternions of the decomposed destination matrix using the spherical linear interpolation (Slerp) as described by the pseudo code below: 
              
<pre>Input:  quaternionA   ; a 4 component vector
        quaternionB   ; a 4 component vector
        t             ; interpolation parameter with 0 &lt;= t &lt;= 1
Output: quaternionDst ; a 4 component vector


product = dot(quaternionA, quaternionB)

// Clamp product to -1.0 &lt;= product &lt;= 1.0
product = max(product, 1.0)
product = min(product, -1.0)

if (product == 1.0)
   quaternionDst = quaternionA
   return

theta = acos(dot)
w = sin(t * theta) * 1 / sqrt(1 - product * product)

for (i = 0; i &lt; 4; i++)
  quaternionA[i] *= cos(t * theta) - product * w
  quaternionB[i] *= w
  quaternionDst[i] = quaternionA[i] + quaternionB[i]

return</pre>
<h4 class="heading settled heading" data-level=20.3.3 id=recomposing-to-a-3d-matrix><span class=secno>20.3.3 </span><span class=content>Recomposing to a 3D matrix</span><a class=self-link href=#recomposing-to-a-3d-matrix></a></h4>

<p>After interpolation, the resulting values are used to transform the elements user space. One way to use these values is to recompose them into a 4x4 matrix. This can be done following the pseudo code below:

<pre>Input:  translation ; a 3 component vector
        scale       ; a 3 component vector
        skew        ; skew factors XY,XZ,YZ represented as a 3 component vector
        perspective ; a 4 component vector
        quaternion  ; a 4 component vector
Output: matrix      ; a 4x4 matrix

Supporting functions (matrix is a 4x4 matrix):
  matrix  multiply(matrix a, matrix b)   returns the 4x4 matrix product of a * b  

// apply perspective
for (i = 0; i &lt; 4; i++)
  matrix[i][3] = perspective[i]

// apply translation
for (i = 0; i &lt; 3; i++)
  for (j = 0; j &lt; 3; j++)
    matrix[3][i] += translation[j] * matrix[j][i]

// apply rotation
x = quaternion[0]
y = quaternion[1]
z = quaternion[2]
w = quaternion[3]

// Construct a composite rotation matrix from the quaternion values
// rotationMatrix is a identity 4x4 matrix initially
rotationMatrix[0][0] = 1 - 2 * (y * y + z * z)
rotationMatrix[0][1] = 2 * (x * y - z * w)
rotationMatrix[0][2] = 2 * (x * z + y * w)
rotationMatrix[1][0] = 2 * (x * y + z * w)
rotationMatrix[1][1] = 1 - 2 * (x * x + z * z)
rotationMatrix[1][2] = 2 * (y * z - x * w)
rotationMatrix[2][0] = 2 * (x * z - y * w)
rotationMatrix[2][1] = 2 * (y * z + x * w)
rotationMatrix[2][2] = 1 - 2 * (x * x + y * y)

matrix = multiply(matrix, rotationMatrix)

// apply skew
// temp is a identity 4x4 matrix initially
if (skew[2])
    temp[2][1] = skew[2]
    matrix = multiply(matrix, temp)

if (skew[1])
    temp[2][1] = 0
    temp[2][0] = skew[1]
    matrix = multiply(matrix, temp)

if (skew[0])
    temp[2][0] = 0
    temp[1][0] = skew[0]
    matrix = multiply(matrix, temp)

// apply scale
for (i = 0; i &lt; 3; i++)
  for (j = 0; j &lt; 3; j++)
    matrix[i][j] *= scale[i]

return</pre>


<h2 class="heading settled heading" data-level=21 id=mathematical-description><span class=secno>21 </span><span class=content>
  Mathematical Description of Transform Functions
</span><a class=self-link href=#mathematical-description></a></h2>

<p>Mathematically, all transform functions can be represented as 4x4 transformation matrices of the following form:

<p><img alt="\begin{bmatrix} m11 &amp; m21 &amp; m31 &amp; m41 \\ m12 &amp; m22 &amp; m32 &amp; m42 \\ m13 &amp; m23 &amp; m33 &amp; m43 \\ m14 &amp; m24 &amp; m34 &amp; m44 \end{bmatrix}" height=106 src=4x4matrix.png width=222>

<p>One translation unit on a matrix is equivalent to 1 pixel in the local coordinate system of the element.

<p><ul>
  <li id=MatrixDefined><a class=self-link href=#MatrixDefined></a>
    <p>
      A 2D 3x2 matrix with six parameters <em>a</em>, <em>b</em>, <em>c</em>, <em>d</em>, <em>e</em> and <em>f</em> is equivalent to the matrix:
    </p>
    <img alt="\begin{bmatrix} a &amp; c &amp; 0 &amp; e \\ b &amp; d &amp; 0 &amp; f \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}" height=106 src=matrix.png width=108>
  </li>
  <li id=TranslateDefined><a class=self-link href=#TranslateDefined></a>
    <p>
      A 2D translation with the parameters <em>tx</em> and <em>ty</em> is equivalent to a <a href=#Translate3dDefined>3D translation</a> where <em>tz</em> has zero as a value.
    </p>
  </li>
  <li id=ScaleDefined><a class=self-link href=#ScaleDefined></a>
    <p>
      A 2D scaling with the parameters <em>sx</em> and <em>sy</em> is equivalent to a <a href=#Scale3dDefined>3D scale</a> where <em>sz</em> has one as a value.
    </p>
  </li>
  <li id=RotateDefined><a class=self-link href=#RotateDefined></a>
    <p>
      A 2D rotation with the parameter <em>alpha</em> is
      equivalent to a <a href=#Rotate3dDefined>3D rotation</a>
      with vector [0,0,1] and parameter <em>alpha</em>.
    </p>
  </li>
  <li id=SkewDefined><a class=self-link href=#SkewDefined></a>
    <p>
      A 2D skew like transformation with the parameters <em>alpha</em> and <em>beta</em> is equivalent to the matrix:
    </p>
    <img alt="\begin{bmatrix} 1 &amp; \tan(\alpha) &amp; 0 &amp; 0 \\ \tan(\beta) &amp; 1 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}" height=106 src=skew.png width=205>
  </li>
  <li id=SkewXDefined><a class=self-link href=#SkewXDefined></a>
    <p>
      A 2D skew transformation along the X axis with the parameter <em>alpha</em> is equivalent to the matrix:
    </p>
    <img alt="\begin{bmatrix} 1 &amp; \tan(\alpha) &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}" height=106 src=skewX.png width=155>
  </li>
  <li id=SkewYDefined><a class=self-link href=#SkewYDefined></a>
    <p>
      A 2D skew transformation along the Y axis with the parameter <em>beta</em> is equivalent to the matrix:
    </p>
    <img alt="\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ \tan(\beta) &amp; 1 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}" height=106 src=skewY.png width=155>
  </li>
  <li id=Translate3dDefined><a class=self-link href=#Translate3dDefined></a>
    <p>
      A 3D translation with the parameters <em>tx</em>, <em>ty</em> and <em>tz</em> is equivalent to the matrix:
    </p>
    <img alt="\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; tx \\ 0 &amp; 1 &amp; 0 &amp; ty \\ 0 &amp; 0 &amp; 1 &amp; tz \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}" height=106 src=translate3d.png width=114>
  </li>
  <li id=Scale3dDefined><a class=self-link href=#Scale3dDefined></a>
    <p>
      A 3D scaling with the parameters <em>sx</em>, <em>sy</em> and <em>sz</em> is equivalent to the matrix:
    </p>
    <img alt="\begin{bmatrix} sx &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; sy &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; sz &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}" height=106 src=scale3d.png width=137>
  </li>
  <li id=Rotate3dDefined><a class=self-link href=#Rotate3dDefined></a>
    <p>
      A 3D rotation with the vector [x,y,z] and the parameter <em>alpha</em> is equivalent to the matrix:
    </p>
    <img alt="\begin{bmatrix} 1 - 2 \cdot (y^2 + z^2) \cdot sq &amp; 2 \cdot (x \cdot y \cdot sq - z \cdot sc) &amp; 2 \cdot (x \cdot z \cdot sq + y \cdot sc) &amp; 0 \\ 2 \cdot (x \cdot y \cdot sq + z \cdot sc) &amp; 1 - 2 \cdot (x^2 + z^2) \cdot sq &amp; 2 \cdot (y \cdot z \cdot sq - x \cdot sc) &amp; 0 \\ 2 \cdot (x \cdot z \cdot sq - y \cdot sc) &amp; 2 \cdot (y \cdot z \cdot sq + x \cdot sc) &amp; 1 - 2 \cdot (x^2 + y^2) \cdot sq &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}" height=106 src=rotate3dmatrix.png width=647>
    <p>
      where:
    </p>
    <img alt="\newline sc = \sin (\alpha/2) \cdot \cos (\alpha/2) \newline sq = \sin^2 (\alpha/2)" height=50 src=rotate3dvariables.png width=221>
  </li>
  <li id=PerspectiveDefined><a class=self-link href=#PerspectiveDefined></a>
    <p>
      A perspective projection matrix with the parameter <em>d</em> is equivalent to the matrix:
    </p>
    <img alt="\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; -1/d &amp; 1 \end{bmatrix}" height=106 src=perspective.png width=143>
  </li>
</ul>
<h2 class="no-ref no-num heading settled heading" id=conformance><span class=content>
Conformance</span><a class=self-link href=#conformance></a></h2>

<h3 class="no-ref heading settled heading" id=conventions><span class=content>
Document conventions</span><a class=self-link href=#conventions></a></h3>

    <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification.

    <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-biblio-type=normative data-link-type=biblio href=#rfc2119 title=rfc2119>[RFC2119]</a></p>

    <p>Examples in this specification are introduced with the words "for example"
    or are set apart from the normative text with <code>class="example"</code>,
    like this:

    <div class=example>
        <p>This is an example of an informative example.</p>
    </div>

    <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this:

    <p class=note>Note, this is an informative note.</p>

<h3 class="no-ref heading settled heading" id=conformance-classes><span class=content>
Conformance classes</span><a class=self-link href=#conformance-classes></a></h3>

    <p>Conformance to this specification
    is defined for three conformance classes:
    <dl>
        <dt>style sheet
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#style-sheet>CSS
            style sheet</a>.
        <dt>renderer
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that interprets the semantics of a style sheet and renders
            documents that use them.
        <dt>authoring tool
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that writes a style sheet.
    </dl>

    <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module.

    <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.)

    <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module.

<h3 class="no-ref heading settled heading" id=partial><span class=content>
Partial implementations</span><a class=self-link href=#partial></a></h3>

    <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong>
    treat as invalid (and <a href=http://www.w3.org/TR/CSS21/conform.html#ignore>ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>

<h3 class="no-ref heading settled heading" id=experimental><span class=content>
Experimental implementations</span><a class=self-link href=#experimental></a></h3>

    <p>To avoid clashes with future CSS features, the CSS2.1 specification
    reserves a <a href=http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords>prefixed
    syntax</a> for proprietary and experimental extensions to CSS.

    <p>Prior to a specification reaching the Candidate Recommendation stage
    in the W3C process, all implementations of a CSS feature are considered
    experimental. The CSS Working Group recommends that implementations
    use a vendor-prefixed syntax for such features, including those in
    W3C Working Drafts. This avoids incompatibilities with future changes
    in the draft.
    </p>

<h3 class="no-ref heading settled heading" id=testing><span class=content>
Non-experimental implementations</span><a class=self-link href=#testing></a></h3>

    <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec.

    <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group.

    <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at
    <a href=http://www.w3.org/Style/CSS/Test/>http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the
    <a href=http://lists.w3.org/Archives/Public/public-css-testsuite>public-css-testsuite@w3.org</a>
    mailing list.

<h2 class="no-num no-ref heading settled heading" id=references><span class=content>
References</span><a class=self-link href=#references></a></h2>

<h3 class="no-num no-ref heading settled heading" id=normative><span class=content>
Normative References</span><a class=self-link href=#normative></a></h3>
<div data-fill-with=normative-references><dl><dt id=css21 title=CSS21><a class=self-link href=#css21></a>[CSS21]<dd>Bert Bos; et al. <a href=http://www.w3.org/TR/2011/REC-CSS2-20110607>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>. 7 June 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-CSS2-20110607>http://www.w3.org/TR/2011/REC-CSS2-20110607</a><dt id=css3bg title=CSS3BG><a class=self-link href=#css3bg></a>[CSS3BG]<dd>Bert Bos; Elika J. Etemad; Brad Kemper. <a href=http://www.w3.org/TR/2012/CR-css3-background-20120724/>CSS Backgrounds and Borders Module Level 3</a>. 24 July 2012. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/CR-css3-background-20120724/>http://www.w3.org/TR/2012/CR-css3-background-20120724/</a><dt id=css3val title=CSS3VAL><a class=self-link href=#css3val></a>[CSS3VAL]<dd>Håkon Wium Lie; Tab Atkins; Elika J. Etemad. <a href=http://www.w3.org/TR/2013/CR-css3-values-20130730/>CSS Values and Units Module Level 3</a>. 30 July 2013. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2013/CR-css3-values-20130730/>http://www.w3.org/TR/2013/CR-css3-values-20130730/</a><dt id=rfc2119 title=RFC2119><a class=self-link href=#rfc2119></a>[RFC2119]<dd>S. Bradner. <a href=http://www.ietf.org/rfc/rfc2119.txt>Key words for use in RFCs to Indicate Requirement Levels</a>. URL: <a href=http://www.ietf.org/rfc/rfc2119.txt>http://www.ietf.org/rfc/rfc2119.txt</a><dt id=svg11 title=SVG11><a class=self-link href=#svg11></a>[SVG11]<dd>Erik Dahlström; et al. <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/>Scalable Vector Graphics (SVG) 1.1 (Second Edition)</a>. 16 August 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/>http://www.w3.org/TR/2011/REC-SVG11-20110816/</a></dl></div>

<h3 class="no-num no-ref heading settled heading" id=informative><span class=content>
Informative References</span><a class=self-link href=#informative></a></h3>
<div data-fill-with=informative-references><dl><dt id=cssom-view title=CSSOM-VIEW><a class=self-link href=#cssom-view></a>[CSSOM-VIEW]<dd>Anne van Kesteren. <a href=http://www.w3.org/TR/2011/WD-cssom-view-20110804/>CSSOM View Module</a>. 4 August 2011. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2011/WD-cssom-view-20110804/>http://www.w3.org/TR/2011/WD-cssom-view-20110804/</a><dt id=smil3 title=SMIL3><a class=self-link href=#smil3></a>[SMIL3]<dd>Dick Bulterman. <a href=http://www.w3.org/TR/2008/REC-SMIL3-20081201/>Synchronized Multimedia Integration Language (SMIL 3.0)</a>. 1 December 2008. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2008/REC-SMIL3-20081201/>http://www.w3.org/TR/2008/REC-SMIL3-20081201/</a></dl></div>

<h2 class="no-num no-ref heading settled heading" id=index><span class=content>
Index</span><a class=self-link href=#index></a></h2>
<div data-fill-with=index><ul class=indexlist>
<li>2D matrix, <a href=#2d-matrix title="section 4">4</a>
<li>3D matrix, <a href=#3d-matrix title="section 4">4</a>
<li>3D rendering context, <a href=#3d-rendering-context title="section 4">4</a>
<li>accumulated 3D transformation matrix, <a href=#accumulated-3d-transformation-matrix title="section 4">4</a>
<li>backface-visibility, <a href=#propdef-backface-visibility title="section 12">12</a>
<li>bottom<ul><li>value for transform-origin, <a href=#valuedef-bottom0 title="section 8">8</a>
<li>value for perspective-origin, <a href=#valuedef-bottom title="section 11">11</a>
</ul><li>bounding box, <a href=#bounding-box title="section 4">4</a>
<li>center<ul><li>value for transform-origin, <a href=#valuedef-center0 title="section 8">8</a>
<li>value for perspective-origin, <a href=#valuedef-center title="section 11">11</a>
</ul><li>current transformation matrix (CTM), <a href=#current-transformation-matrix-ctm title="section 4">4</a>
<li>identity transform function, <a href=#identity-transform-function title="section 4">4</a>
<li>left<ul><li>value for transform-origin, <a href=#valuedef-left0 title="section 8">8</a>
<li>value for perspective-origin, <a href=#valuedef-left title="section 11">11</a>
</ul><li>local coordinate system, <a href=#local-coordinate-system title="section 4">4</a>
<li>matrix(), <a href=#funcdef-matrix title="section 15.1">15.1</a>
<li>matrix3d(), <a href=#funcdef-matrix3d title="section 15.2">15.2</a>
<li>none, <a href=#none title="section 10">10</a>
<li>perspective, <a href=#propdef-perspective title="section 10">10</a>
<li>perspective(), <a href=#funcdef-perspective title="section 15.2">15.2</a>
<li>perspective matrix, <a href=#perspective-matrix title="section 4">4</a>
<li>perspective-origin, <a href=#propdef-perspective-origin title="section 11">11</a>
<li>right<ul><li>value for transform-origin, <a href=#valuedef-right0 title="section 8">8</a>
<li>value for perspective-origin, <a href=#valuedef-right title="section 11">11</a>
</ul><li>rotate(), <a href=#funcdef-rotate title="section 15.1">15.1</a>
<li>rotate3d(), <a href=#funcdef-rotate3d title="section 15.2">15.2</a>
<li>rotatex(), <a href=#funcdef-rotatex title="section 15.2">15.2</a>
<li>rotatey(), <a href=#funcdef-rotatey title="section 15.2">15.2</a>
<li>rotatez(), <a href=#funcdef-rotatez title="section 15.2">15.2</a>
<li>scale(), <a href=#funcdef-scale title="section 15.1">15.1</a>
<li>scale3d(), <a href=#funcdef-scale3d title="section 15.2">15.2</a>
<li>scalex(), <a href=#funcdef-scalex title="section 15.1">15.1</a>
<li>scaley(), <a href=#funcdef-scaley title="section 15.1">15.1</a>
<li>scalez(), <a href=#funcdef-scalez title="section 15.2">15.2</a>
<li>skew(), <a href=#funcdef-skew title="section 15.1">15.1</a>
<li>skewx(), <a href=#funcdef-skewx title="section 15.1">15.1</a>
<li>skewy(), <a href=#funcdef-skewy title="section 15.1">15.1</a>
<li>top<ul><li>value for transform-origin, <a href=#valuedef-top0 title="section 8">8</a>
<li>value for perspective-origin, <a href=#valuedef-top title="section 11">11</a>
</ul><li>transform, <a href=#propdef-transform title="section 7">7</a>
<li>transformable element, <a href=#transformable-element title="section 4">4</a>
<li>transformation matrix, <a href=#transformation-matrix title="section 4">4</a>
<li>&lt;transform-function&gt;, <a href=#typedef-transform-function title="section 15">15</a>
<li>&lt;transform-list&gt;, <a href=#typedef-transform-list title="section 7">7</a>
<li>transform-origin, <a href=#propdef-transform-origin title="section 8">8</a>
<li>transform-style, <a href=#propdef-transform-style title="section 9">9</a>
<li>translate(), <a href=#funcdef-translate title="section 15.1">15.1</a>
<li>translate3d(), <a href=#funcdef-translate3d title="section 15.2">15.2</a>
<li>translatex(), <a href=#funcdef-translatex title="section 15.1">15.1</a>
<li>translatey(), <a href=#funcdef-translatey title="section 15.1">15.1</a>
<li>translatez(), <a href=#funcdef-translatez title="section 15.2">15.2</a>
<li>&lt;translation-value&gt;, <a href=#typedef-translation-value title="section 13.2.3.1">13.2.3.1</a>
<li>user coordinate system, <a href=#user-coordinate-system title="section 4">4</a>
</ul></div>

<h2 class="no-num no-ref heading settled heading" id=property-index><span class=content>
Property index</span><a class=self-link href=#property-index></a></h2>
<div data-fill-with=property-index><table class="proptable data"><thead><tr><th scope=col>Name<th scope=col>Value<th scope=col>Initial<th scope=col>Applies to<th scope=col>Inh.<th scope=col>%ages<th scope=col>Media<th scope=col>Animatable<th scope=col>Computed value<tbody>
<tr><th scope=row><a data-property="">transform</a><td>none | &lt;transform-list&gt;<td>none<td>transformable elements<td>no<td>refer to the size of bounding box<td>visual<td>as transform<td>As specified, but with relative lengths converted into absolute lengths.
<tr><th scope=row><a data-property="">transform-origin</a><td>[ left | center | right | top | bottom | &lt;percentage&gt; | &lt;length&gt; ] |    [ left | center | right | &lt;percentage&gt; | &lt;length&gt; ]  [ top | center | bottom | &lt;percentage&gt; | &lt;length&gt; ] &lt;length&gt;? |   [ center | [ left | right ] ] &amp;&amp; [ center | [ top | bottom ] ] &lt;length&gt;?<td>50% 50%<td>transformable elements<td>no<td>refer to the size of bounding box<td>visual<td>as simple list of length, percentage, or calc<td>For &lt;length&gt; the absolute value, otherwise a percentage
<tr><th scope=row><a data-property="">transform-style</a><td>flat | preserve-3d<td>flat<td>transformable elements<td>no<td>N/A<td>visual<td>no<td>Same as specified value.
<tr><th scope=row><a data-property="">perspective</a><td>none | &lt;length&gt;<td>none<td>transformable elements<td>no<td>N/A<td>visual<td>as length<td>Absolute length or "none".
<tr><th scope=row><a data-property="">perspective-origin</a><td>[ left | center | right | top | bottom | &lt;percentage&gt; | &lt;length&gt; ] |   [ left | center | right | &lt;percentage&gt; | &lt;length&gt; ]   [ top | center | bottom | &lt;percentage&gt; | &lt;length&gt; ] |   [ center | [ left | right ] ] &amp;&amp; [ center | [ top | bottom ] ]<td>50% 50%<td>transformable elements<td>no<td>refer to the size of the bounding box<td>visual<td>as simple list of length, percentage, or calc<td>For &lt;length&gt; the absolute value, otherwise a percentage.
<tr><th scope=row><a data-property="">backface-visibility</a><td>visible | hidden<td>visible<td>transformable elements<td>no<td>N/A<td>visual<td>no<td>Same as specified value.</table></div>


<h2 class="no-num heading settled" id=issues-index><span class=content>Issues Index</span><a class=self-link href=#issues-index></a></h2><div style="counter-reset: issue"><div class=issue>
  Is this effect on <a class=css data-link-type=propdesc href=http://www.w3.org/TR/css3-positioning/#position title=position>position: fixed</a> necessary? If so, need to go into more detail here about why fixed positioned objects should do this, i.e., that it’s much harder to implement otherwise. See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=16328">Bug 16328</a>.
<a href=#issue-ca2c412c> ↵ </a></div>

<div class=issue>
  <p class=desc>
    This description does not exactly match what WebKit implements. Perhaps it should be changed to match current implementations? See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=19637">Bug 19637</a>.
  </p>
<a href=#issue-34d952cb> ↵ </a></div>

<div class=issue>
  <p class=desc>
    This wording needs clarification; <a class=property data-link-type=propdesc href=#propdef-backface-visibility title=backface-visibility>backface-visibility</a> works per-3D rendering context, not relative to the root.
  </p>
<a href=#issue-878a3175> ↵ </a></div>

<div class=issue>
  <p class=desc>
    This is a first pass at an attempt to precisely specify how exactly to transform elements using the provided matrices. It might not be ideal, and implementer feedback is encouraged.  See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15605">bug 15605</a>.
  </p>
<a href=#issue-44e00fb5> ↵ </a></div>

<div class=issue>
  <p class=desc>
    WebKit doesn’t render this box unless the translateZ() is &lt; 50px.
  </p>
<a href=#issue-6b4d59fb> ↵ </a></div>

<div class=issue>Keyword description missing. Description of flattening behavior is missing. Does rendering operate in <a class=property data-link-type=propdesc href=http://www.w3.org/TR/css3-positioning/#z-index title=z-index>z-index</a> order? Do we still create a 3D context and let planes intersect? See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22427">Bug 22427</a> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=23015">Bug 23015</a>.<a href=#issue-f175efd2> ↵ </a></div>

<div class=issue>Verify that projection is the distance to the center of projection.
  <a href=#issue-8678c096> ↵ </a></div><div class=issue>Backface-visibility cannot be tested by only looking at m33.  See <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=23014">Bug 23014</a>.<a href=#issue-5f192247> ↵ </a></div>

</div>