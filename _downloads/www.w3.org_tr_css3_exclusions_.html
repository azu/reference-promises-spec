<!-- http://www.w3.org/TR/css3-exclusions/ -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang=en>
 <head
  profile="http://dublincore.org/documents/2008/08/04/dc-html/ http://www.w3.org/2006/03/hcard">
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <title>CSS Exclusions Module Level 1</title>

  <link href="http://purl.org/dc/terms/" rel=schema.dcterms>
  <link href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
   rel=dcterms.rights>
  <meta content="CSS Exclusions Module Level 1" name=dcterms.title>
  <meta content=text name=dcterms.type>
  <meta content=2013-05-28 name=dcterms.date>
  <meta content="Vincent Hardy" name=dcterms.creator>
  <meta content="Rossen Atanassov" name=dcterms.creator>
  <meta content="Alan Stearns" name=dcterms.creator>
  <meta content=W3C name=dcterms.publisher>
  <meta content="http://www.w3.org/TR/2013/WD-css3-exclusions-20130528/"
   name=dcterms.identifier>
  <link href=default.css rel=stylesheet type="text/css">
  <style type="text/css">
    .singleImgExample {
    	display: block;
    	margin: auto;
    }
    
    .example-table {
    	table-layout: fixed; 
    	width: 100%; 
    }
    
    .example-table tr td img {
    	width: 90%;
    }
  </style>
  <link href=issues.css rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-WD.css" rel=stylesheet
   type="text/css">

 <body>
  <div class=head id=div-head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1 id=css-exclusions-module>CSS Exclusions Module Level 1</h1>

   <h2 class="no-num no-toc" id=longstatus-date>W3C Working Draft 28 May 2013</h2>

   <dl>
    <dt>This version:

    <dd><a
     href="http://www.w3.org/TR/2013/WD-css3-exclusions-20130528/">http://www.w3.org/TR/2013/WD-css3-exclusions-20130528/</a>

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-exclusions/">http://www.w3.org/TR/css3-exclusions/</a>

    <dt>Editor's Draft:

    <dd><a
     href="http://dev.w3.org/csswg/css3-exclusions/">http://dev.w3.org/csswg/css3-exclusions/</a>

    <dt>Previous version:

    <dd><a
     href="http://www.w3.org/TR/2012/WD-css3-exclusions-20120503/">http://www.w3.org/TR/2012/WD-css3-exclusions-20120503/</a>

    <dt>Editors:

    <dd class=vcard><span class=fn>Vincent Hardy</span>, <span
     class=org>Adobe Systems, Inc.</span>, <span
     class=email>vhardy@adobe.com</span>

    <dd class=vcard><span class=fn>Rossen Atanassov</span>, <span
     class=org>Microsoft Corporation</span>, <span
     class=email>ratan@microsoft.com</span>

    <dd class=vcard><span class=fn>Alan Stearns</span>, <span class=org>Adobe
     Systems, Inc.</span>, <span class=email>stearns@adobe.com</span>

    <dt>Issues List:

    <dd><a
     href="https://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;product=CSS&amp;component=Exclusions&amp;resolution=---&amp;cmdtype=doit">in
     Bugzilla</a>

    <dt>Feedback:

    <dd><a
     href="mailto:www-style@w3.org?subject=%5B[css-exclusions]%5D%20feedback">www-style@w3.org</a>
     with subject line “<kbd>[css-exclusions] <var>… message topic
     …</var></kbd>” (<a
     href="http://lists.w3.org/Archives/Public/www-style/"
     rel=discussion>archives</a>)
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> © 2013 <a href="http://www.w3.org/"><abbr
    title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
    href="http://www.csail.mit.edu/"><abbr
    title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr
    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>, <a
    href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>CSS Exclusions define arbitrary areas around which <a
   href="http://www.w3.org/TR/CSS2/visuren.html#inline-boxes">inline
   content</a> (<a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>) can flow. CSS
   Exclusions can be defined on any CSS block-level elements. CSS Exclusions
   extend the notion of content wrapping previously limited to floats.

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p><em>This section describes the status of this document at the time of
   its publication. Other documents may supersede this document. A list of
   current W3C publications and the latest revision of this technical report
   can be found in the <a href="http://www.w3.org/TR/">W3C technical reports
   index at http://www.w3.org/TR/.</a></em>

  <p>Publication as a Working Draft does not imply endorsement by the W3C
   Membership. This is a draft document and may be updated, replaced or
   obsoleted by other documents at any time. It is inappropriate to cite this
   document as other than work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a href="mailto:www-style@w3.org">www-style@w3.org</a> (see
   <a href="http://www.w3.org/Mail/Request">instructions</a>) is preferred
   for discussion of this specification. When sending e-mail, please put the
   text “css3-exclusions” in the subject, preferably like this:
   “[<!---->css3-exclusions<!---->] <em>…summary of comment…</em>”

  <p>This document was produced by the <a
   href="http://www.w3.org/Style/CSS/members">CSS Working Group</a> (part of
   the <a href="http://www.w3.org/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February
   2004 W3C Patent Policy</a>. W3C maintains a <a
   href="http://www.w3.org/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
   6 of the W3C Patent Policy</a>.</p>
  <!--end-status-->

  <p>This specification was previously called “CSS Exclusions and
   Shapes.” The definitions for shapes are now in a separate specification,
   see <a href="#CSS-SHAPES"
   rel=biblioentry>[CSS-SHAPES]<!--{{CSS-SHAPES}}--></a>.

  <h2 class="no-num no-toc" id=contents>Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#intro"><span class=secno>1. </span>Introduction</a>

   <li><a href="#definitions"><span class=secno>2. </span>Definitions</a>

   <li><a href="#exclusions"><span class=secno>3. </span>Exclusions</a>
    <ul class=toc>
     <li><a href="#declaring-exclusions"><span class=secno>3.1.
      </span>Declaring exclusions</a>
      <ul class=toc>
       <li><a href="#wrap-flow-property"><span class=secno>3.1.1. </span>The
        ‘<code class=property>wrap-flow</code>’ property</a>
      </ul>

     <li><a href="#scope-and-effect-of-exclusions"><span class=secno>3.2.
      </span>Scope and effect of exclusions</a>

     <li><a href="#propagation-of-exclusions"><span class=secno>3.3.
      </span>Propagation of Exclusions</a>
      <ul class=toc>
       <li><a href="#wrap-through-property"><span class=secno>3.3.1.
        </span>The ‘<code class=property>wrap-through</code>’
        Property</a>
      </ul>

     <li><a href="#exclusions-order"><span class=secno>3.4. </span>Exclusions
      order</a>

     <li><a href="#exclusions-processing-model"><span class=secno>3.5.
      </span>Processing model</a>
      <ul class=toc>
       <li><a href="#exclusions-processing-model-description"><span
        class=secno>3.5.1. </span>Description</a>

       <li><a
        href="#step-1-resolve-exclusion-boxes-belonging-to-each-wrapping-context"><span
        class=secno>3.5.2. </span>Step 1: resolve exclusion boxes belonging
        to each <span>wrapping context</span></a>

       <li><a
        href="#step-2-resolve-wrapping-contexts-layout-containing-blocks"><span
        class=secno>3.5.3. </span>Step 2: resolve wrapping contexts and lay
        out containing blocks</a>

       <li><a href="#step-2-A-resolve-exclusions-position-and-size"><span
        class=secno>3.5.4. </span>Step 2-A: resolve the position and size of
        exclusion boxes</a>

       <li><a
        href="#step-2-B-layout-containing-block-applying-wrapping"><span
        class=secno>3.5.5. </span>Step 2-B: lay out containing block applying
        wrapping</a>

       <li><a href="#exclusions-processing-model-example"><span
        class=secno>3.5.6. </span>Example</a>
        <ul class=toc>
         <li><a href="#step-1-resolve-exclusion-boxes-belonging"><span
          class=secno>3.5.6.1. </span>Step 1: resolve exclusion boxes
          belonging to each <span>wrapping context</span></a>

         <li><a href="#step-2-resolve-wrapping-contexts-and-lay"><span
          class=secno>3.5.6.2. </span>Step 2: resolve wrapping contexts and
          lay out containing blocks</a>
          <ul class=toc>
           <li><a href="#resolving-rwc-1"><span class=secno>3.5.6.2.1.
            </span>Resolving RWC-1</a>

           <li><a href="#resolving-rwc-2"><span class=secno>3.5.6.2.2.
            </span>Resolving RWC-2</a>
          </ul>
        </ul>
      </ul>

     <li><a href="#floats-and-exclusions"><span class=secno>3.6.
      </span>Floats and exclusions</a>
      <ul class=toc>
       <li><a href="#floats-and-exclusions-similarities"><span
        class=secno>3.6.1. </span>Similarities</a>

       <li><a href="#floats-and-exclusions-differences"><span
        class=secno>3.6.2. </span>Differences</a>

       <li><a href="#floats-and-exclusions-interoperability"><span
        class=secno>3.6.3. </span>Interoperability</a>
        <ul class=toc>
         <li><a href="#effect-of-floats-on-exclusions"><span
          class=secno>3.6.3.1. </span>Effect of floats on exclusions</a>

         <li><a href="#effect-of-exclusions-on-floats"><span
          class=secno>3.6.3.2. </span>Effect of exclusions on floats</a>
        </ul>
      </ul>
    </ul>

   <li><a href="#conformance"><span class=secno>4. </span>Conformance</a>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references">Normative
      references</a>

     <li class=no-num><a href="#other-references">Other references</a>
    </ul>

   <li class=no-num><a href="#index">Index</a>

   <li class=no-num><a href="#property-index">Property index</a>

   <li class=no-num><a href="#change-log">Change Log</a>
    <ul class=toc>
     <li class=no-num><a href="#since-may-3rd-2012">Since May 3rd 2012</a>

     <li class=no-num><a href="#since-december-13th-2011">Since December 13th
      2011</a>
    </ul>
  </ul>
  <!--end-toc-->

  <h2 id=intro><span class=secno>1. </span>Introduction</h2>

  <p><em>This section is not normative.</em>

  <p> This specification defines features that allow inline flow content to
   wrap around outside the <a href="#exclusion-area">exclusion area</a> of
   elements.

  <h2 id=definitions><span class=secno>2. </span>Definitions</h2>

  <p><dfn id=exclusion-box>Exclusion box</dfn>

  <p> A <a href="http://www.w3.org/TR/css3-box/">box</a> (<a href="#CSS3BOX"
   rel=biblioentry>[CSS3BOX]<!--{{!CSS3BOX}}--></a>) that defines an <a
   href="#exclusion-area">exclusion area</a> for other boxes. The ‘<a
   href="#wrap-flow"><code class=property>wrap-flow</code></a>’ property is
   used to make an element's generated box an exclusion box. An exclusion box
   contributes its <a href="#exclusion-area">exclusion area</a> to its <a
   href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">
   containing block's</a> <a href="#wrapping-context">wrapping context</a>.
   An element with a ‘<code class=property>float</code>’ computed value
   other than ‘<code class=property>none</code>’ does not become an
   exclusion.

  <p><dfn id=exclusion-area>Exclusion area</dfn>

  <p> The area used for excluding inline flow content around an exclusion
   box. The <a href="#exclusion-area">exclusion area</a> is equivalent to the
   <a href="http://www.w3.org/TR/CSS2/box.html#box-dimensions"> border
   box</a> for an exclusion box.

  <p class=note> If a user agent implements both CSS Exclusions and CSS
   Shapes, the shape-outside property defines the exclusion area instead of
   the border box.

  <p><dfn id=exclusion-element>Exclusion element</dfn>

  <p>An block-level element which is not a float and generates an <a
   href="#exclusion-box">exclusion box</a>. An element generates an exclusion
   box when its ‘<a href="#wrap-flow"><code
   class=property>wrap-flow</code></a>’ property's computed value is not
   ‘<code class=property>auto</code>’.

  <p><dfn id=wrapping-context>Wrapping context</dfn>

  <div class=issue-marker> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15086">Issue-15086</a>

   <div class=issue-details>
    <p class=short-desc>should the wrapping context be generic and include
     floats?
   </div>
  </div>

  <p> The <a href="#wrapping-context">wrapping context</a> of a box is a
   collection of <a href="#exclusion-area">exclusion areas</a> contributed by
   its associated <a href="#exclusion-box">exclusion boxes</a>. During
   layout, a box wraps its inline flow content in the <a
   href="#wrapping-area"><code>wrapping area</code></a> that corresponds to
   the subtraction of its <a href="#wrapping-context">wrapping context</a>
   from its own <a href="#content-area">content area</a>.

  <p> A box inherits its <a
   href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">containing
   block's</a> <a href="#wrapping-context">wrapping context</a> unless it
   specifically resets it using the ‘<a href="#wrap-through"><code
   class=property>wrap-through</code></a>’ property.

  <p><dfn id=content-area>Content area</dfn>

  <p> The <a href="http://www.w3.org/TR/CSS2/box.html#box-dimensions">content
   area</a> is normally used for layout of the inline flow content of a box.

  <p><dfn id=wrapping-area>Wrapping area</dfn>

  <p> The area used for layout of inline flow content of a box affected by a
   <a href="#wrapping-context">wrapping context</a>, defined by subtracting
   the <a href="#wrapping-context">wrapping context</a> from its <a
   href="#content-area">content area</a>

  <p><dfn id=outside-and-inside title=outside-inside>Outside and inside</dfn>

  <p> In this specification, ‘<code class=property>outside</code>’ refers
   to DOM content that is not a descendant of an element while ‘<code
   class=property>inside</code>’ refers to the element's descendants.

  <h2 id=exclusions><span class=secno>3. </span>Exclusions</h2>

  <p> Exclusion elements define <a href="#exclusion-area">exclusion areas</a>
   that contribute to their containing block's <a
   href="#wrapping-context">wrapping context</a>. As a consequence,
   exclusions impact the layout of their containing block's descendants.

  <p>

  <p> Elements layout their inline content in their <a
   href="#content-area">content area</a> and wrap around the <a
   href="#exclusion-area">exclusion areas</a> in their associated <a
   href="#wrapping-context">wrapping context</a>. If the element is itself an
   exclusion, it does not wrap around its own exclusion area and the impact
   of other exclusions on other exclusions is controlled by the ‘<code
   class=property>z-index</code>’ property as explained in the <a
   href="#exclusions-order">exclusions order</a> section.

  <h3 id=declaring-exclusions><span class=secno>3.1. </span>Declaring
   exclusions</h3>

  <p> An element becomes an exclusion when its ‘<a href="#wrap-flow"><code
   class=property>wrap-flow</code></a>’ property has a computed value other
   than ‘<code class=property>auto</code>’.

  <h4 id=wrap-flow-property><span class=secno>3.1.1. </span>The ‘<a
   href="#wrap-flow"><code class=property>wrap-flow</code></a>’ property</h4>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=wrap-flow title="'wrap-flow'">wrap-flow</dfn>

    <tr>
     <th>Value:

     <td><var>auto</var> | <var>both</var> | <var>start</var> |
      <var>end</var> | <var>minimum</var> | <var>maximum</var> |
      <var>clear</var>

    <tr>
     <th>Initial:

     <td>auto

    <tr>
     <th>Applies to:

     <td>block-level elements.

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>as specified except for element's whose ‘<code
      class=property>float</code>’ computed value is not <code
      class=css>none</code>, in which case the computed value is ‘<code
      class=property>auto</code>’.
  </table>

  <p>The values of this property have the following meanings:

  <dl>
   <dt><dfn id=auto title="'wrap-flow'!!'auto'">auto</dfn>

   <dd> No exclusion is created. Inline flow content interacts with the
    element as usual. In particular, if the element is a <a
    href="http://www.w3.org/TR/CSS2/visuren.html#floats">float</a> (see <a
    href="#CSS21" rel=biblioentry>[CSS21]<!--{{CSS21}}--></a>), the behavior
    is unchanged.

   <dt><dfn id=both title="'wrap-flow'!!'both'">both</dfn>

   <dd> Inline flow content can flow on all sides of the exclusion.

   <dt><dfn id=start title="'wrap-flow'!!'start'">start</dfn>

   <dd> Inline flow content can flow around the start edge of the <a
    href="#exclusion-area">exclusion area</a> but must leave the area next to
    the end edge of the exclusion empty.

   <dt><dfn id=end title="'wrap-flow'!!'end'">end</dfn>

   <dd> Inline flow content can flow around the end edge of the <a
    href="#exclusion-area">exclusion area</a> but must leave the area next to
    the start edge of the exclusion empty.

   <dt><dfn id=minimum title="'wrap-flow'!!'minimum'">minimum</dfn>

   <dd> Inline flow content can flow around the edge of the exclusion with
    the smallest available space within the flow content's containing block,
    and must leave the other edge of the exclusion empty.

   <dt><dfn id=maximum title="'wrap-flow'!!'maximum'">maximum</dfn>

   <dd> Inline flow content can flow around the edge of the exclusion with
    the largest available space within the flow content's containing block,
    and must leave the other edge of the exclusion empty.

   <dt><dfn id=clear title="'wrap-flow'!!'clear'">clear</dfn>

   <dd> Inline flow content can only flow before and after the exclusion in
    the flow content's block direction and must leave the areas next to the
    start and end edges of the exclusion empty.
  </dl>

  <p> If the property's computed value is ‘<code
   class=property>auto</code>’, the element does not become an
   <span>exclusion</span>.

  <p> Otherwise, a computed ‘<a href="#wrap-flow"><code
   class=property>wrap-flow</code></a>’ property value of ‘<code
   class=property>both</code>’, ‘<code class=property>start</code>’,
   ‘<code class=property>end</code>’, ‘<code
   class=property>minimum</code>’, ‘<code
   class=property>maximum</code>’ or ‘<code
   class=property>clear</code>’ on an element makes that element an <a
   href="#exclusion-element">exclusion element</a>. It's <a
   href="#exclusion-area">exclusion area</a> is contributed to its containing
   block's <a href="#wrapping-context">wrapping context</a>, causing the
   containing block's descendants to wrap around its <a
   href="#exclusion-area">exclusion area</a>.

  <div class=figure> <img
   alt="LTR text wrapping on left edge, RTL text wrapping on right edge, and vertical text wrapping on top edge."
   src="images/exclusion-writing-modes.png" width="70%">
   <p class=caption>Exclusion with ‘<code class=css>wrap-flow:
    start</code>’ interacting with various writing modes.
  </div>

  <p>Determining the relevant edges of the exclusion depends on the <a
   href="http://www.w3.org/TR/css3-writing-modes/#text-flow">writing mode</a>
   <a href="#CSS3-WRITING-MODES"
   rel=biblioentry>[CSS3-WRITING-MODES]<!--{{!CSS3-WRITING-MODES}}--></a> of
   the content wrapping around the <a href="#exclusion-area">exclusion
   area</a>.

  <p>An <a href="#exclusion-element">exclusion element</a> establishes a new
   <a href="">block formatting context</a> (see <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>) for its content.

  <div class=figure> <img
   alt="General illustration showing how exclusions combine"
   src="images/exclusions-illustration.png" width="70%">
   <p class=caption>Combining exclusions
  </div>

  <p> The above figure illustrates how exclusions are combined. The outermost
   box represents an element's content box. The A, B, C and D darker gray
   boxes represent exclusions in the element's <a
   href="#wrapping-context">wrapping context</a>. A, B, C and D have their
   respective ‘<a href="#wrap-flow"><code
   class=property>wrap-flow</code></a>’ computed to ‘<code
   class=property>both</code>’, ‘<code class=property>start</code>’,
   ‘<code class=property>end</code>’ and ‘<code
   class=property>clear</code>’ respectively. The lighter gray areas show
   the additional areas that are excluded for inline layout as a result of
   the ‘<a href="#wrap-flow"><code
   class=property>wrap-flow</code></a>’value. For example, the area to the
   right of ‘<code class=property>B</code>’ cannot be used for inline
   layout of left-to-right writing mode content because the ‘<a
   href="#wrap-flow"><code class=property>wrap-flow</code></a>’ for
   ‘<code class=property>B</code>’ is ‘<code
   class=property>start</code>’.

  <p> The background ‘<code class=property>blue</code>’ area shows what
   areas are available for a left-to-right writing mode element's inline
   content layout. All areas represented with a light or dark shade of gray
   are not available for (left-to-right writing mode) inline content layout.

  <div class=example>
   <p> The ‘<a href="#wrap-flow"><code
    class=property>wrap-flow</code></a>’ property values applied to
    exclusions as grid items.

   <pre>
    
&lt;div id="grid"&gt;
    &lt;div id="top-right" class="exclusion"&gt;&lt;/div&gt;
    &lt;div id="bottom-left" class="exclusion"&gt;&lt;/div&gt;
    &lt;div id="content"&gt;Lorem ipsum…&lt;/div&gt;
&lt;/div&gt;

&lt;style type="text/css"&gt; 
#grid {
    width: 30em;
    height: 30em;
    display: grid;
    grid-columns: 25% 25% 25% 25%;
    grid-rows: 25% 25% 25% 25%;

#top-right {
    grid-column: 3;
    grid-row: 2;
}

#bottom-left {
    grid-column: 2;
    grid-row: 3;
}

.exclusion {
    wrap-flow: &lt;see below&gt;
}

#content {
    grid-row: 1;
    grid-row-span: 4;
    grid-column: 1;
    grid-column-span: 4;
}
&lt;/style&gt; 
</pre>

   <p>The following figures illustrate the visual rendering for different
    values of the ‘<a href="#wrap-flow"><code
    class=property>wrap-flow</code></a>’ property. The gray grid lines are
    marking the grid cells. and the blue area is the exclusion box
    (positioned by the grid).

   <table class=example-table>
    <tbody>
     <tr>
      <td><code class=html>.exclusion{ wrap-flow: auto; }</code>

      <td><code class=html>.exclusion{ wrap-flow: both; }</code>

     <tr>
      <td><img alt="Example rendering for wrap-side: auto"
       src="images/exclusion_wrap_side_auto.png">

      <td><img alt="Example rendering for wrap-side: both"
       src="images/exclusion_wrap_side_both.png">

     <tr>
      <td><code class=html>.exclusion{ wrap-flow: start; }</code>

      <td><code class=html>.exclusion{ wrap-flow: end; }</code>

     <tr>
      <td><img alt="Example rendering for wrap-side: start"
       src="images/exclusion_wrap_side_left.png">

      <td><img alt="Example rendering for wrap-side: end"
       src="images/exclusion_wrap_side_right.png">

     <tr>
      <td><code class=html>.exclusion{ wrap-flow: minimum; }</code>

      <td><code class=html>.exclusion{ wrap-flow: maximum; }</code>

     <tr>
      <td><img alt="Example rendering for wrap-side: minimum"
       src="images/exclusion_wrap_side_minimum.png">

      <td><img alt="Example rendering for wrap-side: maximum"
       src="images/exclusion_wrap_side_maximum.png">

     <tr>
      <td><code class=html>.exclusion{ wrap-flow: clear; }</code>

      <td>

     <tr>
      <td><img alt="Example rendering for wrap-side: clear"
       src="images/exclusion_wrap_side_clear.png">

      <td>
   </table>
  </div>
  <!-- End section "wrap-flow Property" -->
  <!-- End section "Declaring Exclusions" -->

  <h3 id=scope-and-effect-of-exclusions><span class=secno>3.2. </span>Scope
   and effect of exclusions</h3>

  <p> An <span>exclusion</span> affects the inline flow content descended
   from the exclusion's containing block (defined in <a
   href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">
   CSS 2.1 10.1</a>) and that of all descendant elements of the same
   containing block. All inline flow content inside the containing block of
   the exclusions is affected. To stop the effect of exclusions defined
   outside an element, the ‘<a href="#wrap-through"><code
   class=property>wrap-through</code></a>’ property can be used (see the <a
   href="#propagation-of-exclusions">propagation of exclusions</a> section
   below).

  <p> As a reminder, for exclusions with ‘<code
   class=css>position:fixed</code>’, the containing block is that of the
   root element.</p>
  <!-- End section "Scope and Effect of Exclusions" -->

  <h3 id=propagation-of-exclusions><span class=secno>3.3. </span>Propagation
   of Exclusions</h3>

  <p> By default, an element inherits its parent <a
   href="#wrapping-context">wrapping context</a>. In other words it is
   subject to the exclusions defined <a href="#outside-and-inside"
   title=outside-inside>outside</a> the element.

  <p>Setting the ‘<a href="#wrap-through"><code
   class=property>wrap-through</code></a>’ property to ‘<code
   class=property>none</code>’ prevents an element from inheriting its
   parent <a href="#wrapping-context">wrapping context</a>. In other words,
   exclusions defined ‘<code class=property>outside</code>’ the element,
   have not effect on the element's children layout.

  <div class=note> Exclusions defined by an element's descendants still
   contribute to their containing block's <a
   href="#wrapping-context">wrapping context</a>. If that containing block is
   a child of an element with ‘<a href="#wrap-through"><code
   class=property>wrap-through</code></a>’ computes to none, or the element
   itself, then exclusion still have an effect on the children of that
   containing block element.</div>

  <h4 id=wrap-through-property><span class=secno>3.3.1. </span>The ‘<a
   href="#wrap-through"><code class=property>wrap-through</code></a>’
   Property</h4>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=wrap-through title="'wrap-through'">wrap-through</dfn>

    <tr>
     <th>Value:

     <td><var>wrap</var> | <var>none</var>

    <tr>
     <th>Initial:

     <td>wrap

    <tr>
     <th>Applies to:

     <td>block-level elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>as specified
  </table>

  <p>The values of this property have the following meanings:

  <dl>
   <dt><dfn id=wrap title="'wrap-through'!!'wrap'">wrap</dfn>

   <dd> The element inherits its parent node's <a
    href="#wrapping-context">wrapping context</a>. Its descendant inline
    content wraps around exclusions defined <a href="#outside-and-inside"
    title=outside-inside>outside</a> the element.
  </dl>

  <dl>
   <dt><dfn id=none title="'wrap-through'!!'none'">none</dfn>

   <dd> The element does not inherit its parent node's <a
    href="#wrapping-context">wrapping context</a>. Its descendants are only
    subject to exclusion areas defined <a href="#outside-and-inside"
    title=outside-inside>inside</a> the element.
  </dl>

  <div class=example>
   <p> Using the ‘<a href="#wrap-through"><code
    class=property>wrap-through</code></a>’ property to control the effect
    of exclusions.

   <pre><code class=html>

&lt;style type="text/css"&gt; 
    #grid {
        display: grid;
        grid-columns: 25% 50% 25%;
        grid-rows: 25% 25% 25% 25%;
    }

    #exclusion {
        grid-row: 2;
        grid-row-span: 2;
        grid-column: 2;
        wrap-flow: &lt;see below&gt;
    }
    
    #rowA, #rowB {
        grid-row-span: 2;
        grid-column: 1;
        grid-column-span: 3;
    }

    #rowA {
        grid-row: 1;
    }
    
    #rowB {
        grid-row: 3;
    }
    &lt;/style&gt;
        
&lt;style type="text/css"&gt; 
    .exclusion  {
    	wrap-flow: both; 
    	position: absolute; 
    	left: 20%;
    	top: 20%;
    	width: 50%;
    	height: 50%;
    	background-color: rgba(220, 230, 242, 0.5); 
    } 
&lt;/style&gt; 

&lt;div id="grid"&gt; 
    &lt;div class=”exclusion”&gt;&lt;/div&gt; 
    &lt;div id="rowA" style=”wrap-through: wrap;”&gt; Lorem ipsum dolor sit amet...&lt;/div&gt; 
    &lt;div id="rowB" style=”wrap-through: none;”&gt; Lorem ipsum dolor sit amet...&lt;/div&gt; 
&lt;/div&gt;
</code></pre>
   <img alt="Example rendering of wrap-through: wrap | none"
   class=singleImgExample src="images/exclusion_wrap_through.png"
   style="max-width:40%"></div>
  <!-- End section "wrap-through property" -->
  <!-- End section "Propagation of Exclusions" -->

  <h3 id=exclusions-order><span class=secno>3.4. </span>Exclusions order</h3>

  <p> Exclusions follow the painting order (See <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> Appendix E). Exclusions are
   applied in reverse to the document order in which they are defined. The
   last exclusion appears on top of all other exclusion, thus it affects the
   inline flow content of all other preceding exclusions or elements
   descendant of the same containing block. The ‘<code
   class=property>z-index</code>’ property can be used to change the
   ordering of <a
   href="http://www.w3.org/TR/CSS2/visuren.html#choose-position">positioned</a>
   exclusion boxes (see <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>). Statically positioned
   exclusions are not affected by the ‘<code
   class=property>z-index</code>’ property and thus follow the painting
   order.

  <div class=example>
   <p>Ordering of exclusions.

   <pre><code class=html>
&lt;style type="text/css"&gt; 
    .exclusion  {
      wrap-flow: both; 
      position: absolute; 
      width: 200px;
    }
    .topleft {
      top: 10px;
      left: 10px;
      background-color: lightblue;
    }
    .middle {
      top: 90px;
      left: 90px;
      background-color: lightgreen;
    }
    .bottomright {
      top: 170px;
      left: 170px;
      background-color: pink;
    }
&lt;/style&gt; 

&lt;div class="exclusion topleft"&gt; 
    The top left div... 
&lt;/div&gt; 
&lt;div class="exclusion middle"&gt; 
    The middle div... 
&lt;/div&gt; 
&lt;div class="exclusion bottomright"&gt; 
    The bottom right div... 
&lt;/div&gt;
</code></pre>

   <table class=example-table>
    <tbody>
     <tr>
      <td style="width:50%"><code class=html>.middle { z-index: auto;
       }</code>

      <td style="width:50%"><code class=html>.middle { z-index: 1; }</code>

     <tr>
      <td><img alt="Example rendering of default exclusion ordering."
       class=singleImgExample src="images/exclusion_ordering.png">

      <td><img alt="Example rendering of default exclusion ordering."
       class=singleImgExample src="images/exclusion_ordering_z_order.png">
   </table>
  </div>
  <!-- End section "Order of Exclusions" -->

  <div class="issue-marker wrapper">
   <div class=issue-marker> <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15183">Issue-15183</a>

    <div class=issue-details>
     <p class=short-desc>Is the CSS exclusions processing model incorrect?
    </div>
   </div>
  </div>

  <div class=issue>
   <p>The current draft provides a model for exclusions without a
    collision-avoidance model. The existing exclusion model in CSS uses
    floats, which have both exclusion and collision-avoidance behavior.
    Concerns have been raised that allowing exclusions without collision
    avoidance could be harmful, particularly with absolutely-positioned
    elements. Three options should be considered:

   <p>

   <ol>
    <li>Allow exclusions in positioning schemes with no collision avoidance.

    <li>Disallow exclusions in positioning schemes with no collision
     avoidance.

    <li>Define collision-avoidance behavior for positioning schemes without
     it, and use this behavior by default with exclusions.
   </ol>
  </div>

  <h3 id=exclusions-processing-model><span class=secno>3.5. </span>Processing
   model</h3>

  <h4 id=exclusions-processing-model-description><span class=secno>3.5.1.
   </span>Description</h4>

  <p>Applying exclusions is a two-step process:

  <ul>
   <li><strong>Step 1</strong>: resolve exclusion boxes belonging to each <a
    href="#wrapping-context">wrapping context</a>

   <li><strong>Step 2</strong>: resolve <a href="#wrapping-context">wrapping
    context</a>s and lay out each containing block in turn:
    <ul>
     <li><strong>Step 2-A</strong>: resolve the position and size of
      exclusion boxes

     <li><strong>Step 2-B</strong>: lay out containing block, wrapping around
      <a href="#exclusion-area">exclusion areas</a>
    </ul>
  </ul>

  <h4
   id=step-1-resolve-exclusion-boxes-belonging-to-each-wrapping-context><span
   class=secno>3.5.2. </span>Step 1: resolve exclusion boxes belonging to
   each <a href="#wrapping-context">wrapping context</a></h4>

  <p>In this step, the user agent determines which <a
   href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">containing
   block</a> each <a href="#exclusion-area">exclusion area</a> belongs to.
   This is a simple step, based on the definition of containing blocks and
   elements with a computed value for ‘<a href="#wrap-flow"><code
   class=property>wrap-flow</code></a>’ that is not <code
   class=css>auto</code>.

  <h4 id=step-2-resolve-wrapping-contexts-layout-containing-blocks><span
   class=secno>3.5.3. </span>Step 2: resolve wrapping contexts and lay out
   containing blocks</h4>

  <p>In this step, starting from the top of the <a
   href="http://www.w3.org/TR/CSS2/visuren.html#z-index">rendering tree</a>
   (see <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>), the
   the agent processes each containing block in two sub-steps.

  <h4 id=step-2-A-resolve-exclusions-position-and-size><span
   class=secno>3.5.4. </span>Step 2-A: resolve the position and size of
   exclusion boxes</h4>

  <p>Resolving the position and size of <a href="#exclusion-box">exclusion
   boxes</a> in the <a href="#wrapping-context">wrapping context</a> may or
   may not require a layout. For example, if an <a
   href="#exclusion-box">exclusion box</a> is absolutely positioned and
   sized, a layout may not be needed to resolve its position and size. In
   other situations, laying out the containing block's content is required.

  <p>When a layout is required, it is carried out without applying any <a
   href="#exclusion-area">exclusion area</a>. In other words, the containing
   block is laid out without a <a href="#wrapping-context">wrapping
   context</a>.

  <p>Step 2-A yields a position and size for all <a
   href="#exclusion-box">exclusion boxes</a> in the <a
   href="#wrapping-context">wrapping context</a>. Each exclusion box is
   processed in turn, starting from the top-most, and each <a
   href="#exclusion-area">exclusion area</a> is computed and contributed to
   the <a
   href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">containing
   block's</a> <a href="#wrapping-context">wrapping context</a>.

  <p>Scrolling is ignored in this step when resolving the position and size
   of ‘<code class=css>position:fixed</code>’ <a
   href="#exclusion-box">exclusion boxes</a>.

  <p>Once the <a
   href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">containing
   block's</a> <a href="#wrapping-context">wrapping context</a> is computed,
   all <a href="#exclusion-box">exclusion boxes</a> in that <a
   href="#wrapping-context">wrapping context</a> are removed from the normal
   flow.

  <h4 id=step-2-B-layout-containing-block-applying-wrapping><span
   class=secno>3.5.5. </span>Step 2-B: lay out containing block applying
   wrapping</h4>

  <p>Finally, the content of the containing block is laid out, with the
   inline content wrapping around the <span>wrapping content</span>‘<code
   class=css>s <a href="#exclusion-area">exclusion areas</a> </code>

  <p>When the containing block itself is an <a
   href="#exclusion-box">exclusion box</a>, then rules on <a
   href="#exclusions-order">exclusions order</a> define which exclusions
   affect the inline and descendant content of the box.

  <h4 id=exclusions-processing-model-example><span class=secno>3.5.6.
   </span>Example</h4>

  <p>This section illustrates the exclusions processing model with an
   example. It is meant to be simple. Yet, it contains enough complexity to
   address the issues of layout dependencies and re-layout.

  <p>The code snippet in the following example has two exclusions affecting
   the document’s inline content.

  <div class=example>
   <pre class=html>&lt;html&gt;
&lt;style&gt;
#d1 {
    position:relative;
    height: auto;
    color: #46A4E9;
    border: 1px solid gray;
}

#e1 {
    wrap-flow: both;
    position: absolute; 
    left: 50%; 
    top: 50%; 
    width: 40%; 
    height: 40%; 
    border: 1px solid red;
    margin-left: -20%;
    margin-top: -20%;
}

#d2 {
    position: static;
    width: 100%;
    height: auto;
    color: #808080;
}

#e2 {
    wrap-flow: both;
    position: absolute; 
    right: 5ex; 
    top: 1em; 
    width: 12ex;
    height: 10em; 
    border: 1px solid lime;
}
&lt;/style&gt;
&lt;body&gt;
    &lt;div id="d1"&gt;
        Lorem ipsusm ...
        &lt;p id="e1"&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;div id="d2"&gt;
        Lorem ipsusm ...
        &lt;p id="e2" &gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
  </div>

  <p>The following figures illustrate:

  <ul>
   <li>the document's DOM tree

   <li>the layout tree of generated block boxes
  </ul>

  <div class=figure> <img alt="DOM tree nodes"
   src="images/processing-model-example-dom.svg" width=200>
   <p class=caption>DOM tree
  </div>

  <div class=figure> <img alt="Layout tree boxes"
   src="images/processing-model-example-layout-tree.svg" width=350>
   <p class=caption>Layout tree of generated block boxes
  </div>

  <h5 id=step-1-resolve-exclusion-boxes-belonging><span class=secno>3.5.6.1.
   </span>Step 1: resolve exclusion boxes belonging to each <a
   href="#wrapping-context">wrapping context</a></h5>

  <p>The figures illustrate how the boxes corresponding to the element
   sometimes have a different containment hierarchy in the layout tree than
   in the DOM tree. For example, the box generated by <code
   class=idl>e1</code> is positioned in its containing block's box, which is
   the <code class=idl>d1-box</code>, because <code class=idl>e1</code> is
   absolutely positioned and <code class=idl>d1</code> is relatively
   positioned. However, while <code class=idl>e2</code> is also absolutely
   positioned, its containing block is the initial containing block (ICB).
   See the section 10.1 of the CSS 2.1 specification (<a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>) for details.

  <p>As a result of the computation of containing blocks for the tree, the
   boxes belonging to the <a href="#wrapping-context">wrapping context</a>s
   of all the elements can be determined:

  <ul>
   <li>The <a href="#wrapping-context">wrapping context</a> for the html
    element contains the <code class=idl>e2</code> box: WC-1 (Wrapping
    Context 1)

   <li>The <a href="#wrapping-context">wrapping context</a> for the body
    element inherits the html element's <a href="#wrapping-context">wrapping
    context</a>: WC-1

   <li>The <a href="#wrapping-context">wrapping context</a> for <code
    class=idl>d1</code> inherits the body element's <a
    href="#wrapping-context">wrapping context</a> and adds the <code
    class=idl>e1-box</code> to it. So the wrapping context is made of both
    the <code class=idl>e1-box</code> and the <code class=idl>e2-box</code>:
    WC-2

   <li>The <a href="#wrapping-context">wrapping context</a> for <code
    class=idl>d2</code> inherits the body element's <a
    href="#wrapping-context">wrapping context</a>: WC-1
  </ul>

  <h5 id=step-2-resolve-wrapping-contexts-and-lay><span class=secno>3.5.6.2.
   </span>Step 2: resolve wrapping contexts and lay out containing blocks</h5>

  <p>In this step, each containing block is processed in turn. For each
   containing block, we (conceptually) go through two phases:

  <ol>
   <li>resolve the <a href="#wrapping-context">wrapping context</a>: resolve
    the position and size of its exclusions

   <li>lay out the containing block
  </ol>

  <p>In our example, this breaks down to:

  <ol>
   <li>resolve the position and size of the exclusions belonging to WC-1:
    RWC-1 (Resolved Wrapping Context 1).

   <li>lay out the initial containing block (i.e., lay out its content):
    <ol>
     <li>resolve the html element's <a href="#wrapping-context">wrapping
      context</a>: RWC-1

     <li>lay out the html element:
      <ol>
       <li>resolve the body element's <a href="#wrapping-context">wrapping
        context</a>: RWC-1

       <li>lay out the body element:
        <ol>
         <li>resolve the <code class=idl>d1</code> element's <a
          href="#wrapping-context">wrapping context</a>: RWC-2

         <li>lay out the <code class=idl>d1</code> element

         <li>resolve the <code class=idl>d2</code> element's <a
          href="#wrapping-context">wrapping context</a>: RWC-1

         <li>lay out the <code class=idl>d2</code> element
        </ol>
      </ol>
    </ol>
  </ol>

  <h6 id=resolving-rwc-1><span class=secno>3.5.6.2.1. </span>Resolving RWC-1</h6>

  <p>The top-most <a href="#wrapping-context">wrapping context</a> in the
   layout tree contains the <code class=idl>e2</code> exclusion. Its position
   and size needs to be resolved. In general, computing an exclusion's
   position and size may or may not require laying out other content. In our
   example, no content needs to be laid out to resolve the <code
   class=idl>e2</code> exclusion's position because it is absolutely
   positioned and its size can be resolved without layout either. At this
   point, RWC-1 is resolved and can be used when laying inline content out.

  <h6 id=resolving-rwc-2><span class=secno>3.5.6.2.2. </span>Resolving RWC-2</h6>

  <p>The process is similar: the position of the <code class=idl>e1</code>
   exclusion needs to be resolved. Again, resolving the exclusion's position
   and size may require processing the containing block (d1 here). It is the
   case here because the size and position of <code class=idl>e1</code>
   depend on resolving the percentage lengths. The percentages are relative
   to the size of <code class=idl>d1</code>‘<code class=css>s box. As a
   result, in order to resolve a size for <code
   class=idl>d1</code></code>’s box, a first layout of <code
   class=idl>d1</code> is done without any <a
   href="#wrapping-context">wrapping context</a> (i.e., no exclusions
   applied). The layout yields a position and size for <code
   class=idl>e1</code>‘<code class=css>s box. </code>

  <p>At this point, RWC-2 is resolved because the position and size of both
   e1 and e2 are resolved.

  <p class=note>The important aspect of the above processing example is that
   once an element’s <a href="#wrapping-context">wrapping context</a> is
   resolved (by resolving its exclusions' position and size), the position
   and size of the exclusions are not re-processed if the element's size
   changes between the layout that may be done without considering any <a
   href="#wrapping-context">wrapping context</a> (as for RWC-2) and the
   layout done with the resolved <a href="#wrapping-context">wrapping
   context</a>. This is what breaks the possible circular dependency between
   the resolution of <a href="#wrapping-context">wrapping context</a>s and
   the layout of containing blocks.

  <h3 id=floats-and-exclusions><span class=secno>3.6. </span>Floats and
   exclusions</h3>

  <h4 id=floats-and-exclusions-similarities><span class=secno>3.6.1.
   </span>Similarities</h4>

  <p>There are similarities between floats and exclusions in that inline
   content wraps around floats and also wraps around <a
   href="#exclusion-area">exclusion areas</a>. However, there are very
   significant differences.

  <h4 id=floats-and-exclusions-differences><span class=secno>3.6.2.
   </span>Differences</h4>

  <ul>
   <li><strong>scope</strong>. While floats apply to content that follows in
    the document, exclusions apply to content in their containing block.

   <li><strong>positioning</strong>. Floats are part of the inline flow and
    ‘<code class=property>float</code>’ on the line box. Authors can
    control how the floats move on the line box, to the right or to the left.
    By contrast, exclusions can be positioned using any positioning scheme
    such as grid layout (<a href="#CSS3-GRID-LAYOUT"
    rel=biblioentry>[CSS3-GRID-LAYOUT]<!--{{CSS3-GRID-LAYOUT}}--></a>),
    flexible box (<a href="#CSS3-FLEXBOX"
    rel=biblioentry>[CSS3-FLEXBOX]<!--{{CSS3-FLEXBOX}}--></a>) or any other
    CSS positioning scheme.

   <li><strong>separation of concerns</strong>. Making an element a float
    determines both its positioning scheme and its effect on inline content.
    Making an element an exclusion only determines its impact on inline
    content and does not impose constraints on its positioning method.
  </ul>

  <h4 id=floats-and-exclusions-interoperability><span class=secno>3.6.3.
   </span>Interoperability</h4>

  <h5 id=effect-of-floats-on-exclusions><span class=secno>3.6.3.1.
   </span>Effect of floats on exclusions</h5>

  <p>Floats have an effect on the positioning of exclusions and the layout of
   their inline content. For example, if an exclusion is an inline-box which
   happens to be on the same line as a float, its' position, as computed in
   <a href="#step-2-A-resolve-exclusions-position-and-size">Step 2-A</a> will
   be impacted by the float, as is any other inline content.

  <h5 id=effect-of-exclusions-on-floats><span class=secno>3.6.3.2.
   </span>Effect of exclusions on floats</h5>

  <p>Exclusions have an effect on the positioning of floats as they have an
   effect on inline content. Therefore, in <a
   href="#step-2-B-layout-containing-block-applying-wrapping">Step 2-B</a>,
   floats will avoid <a href="#exclusion-area">exclusion areas</a>.

  <h2 id=conformance><span class=secno>4. </span>Conformance</h2>
  <!--begin-conformance-->

  <h3 class=no-ref id=conventions> Document conventions</h3>

  <p>Conformance requirements are expressed with a combination of descriptive
   assertions and RFC 2119 terminology. The key words “MUST”, “MUST
   NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
   “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the
   normative parts of this document are to be interpreted as described in RFC
   2119. However, for readability, these words do not appear in all uppercase
   letters in this specification.

  <p>All of the text of this specification is normative except sections
   explicitly marked as non-normative, examples, and notes. <a
   href="#RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

  <p>Examples in this specification are introduced with the words “for
   example” or are set apart from the normative text with
   <code>class="example"</code>, like this:

  <div class=example>
   <p>This is an example of an informative example.
  </div>

  <p>Informative notes begin with the word “Note” and are set apart from
   the normative text with <code>class="note"</code>, like this:

  <p class=note>Note, this is an informative note.

  <h3 class=no-ref id=conformance-classes> Conformance classes</h3>

  <p>Conformance to this specification is defined for three conformance
   classes:

  <dl>
   <dt><dfn id=style-sheet title="style sheet!!as conformance class">style
    sheet</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
    style sheet</a>.

   <dt><dfn id=renderer>renderer</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that interprets the semantics of a style sheet and renders documents that
    use them.

   <dt><dfn id=authoring-tool>authoring tool</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that writes a style sheet.
  </dl>

  <p>A style sheet is conformant to this specification if all of its
   statements that use syntax defined in this module are valid according to
   the generic CSS grammar and the individual grammars of each feature
   defined in this module.

  <p>A renderer is conformant to this specification if, in addition to
   interpreting the style sheet as defined by the appropriate specifications,
   it supports all the features defined by this specification by parsing them
   correctly and rendering the document accordingly. However, the inability
   of a UA to correctly render a document due to limitations of the device
   does not make the UA non-conformant. (For example, a UA is not required to
   render color on a monochrome monitor.)

  <p>An authoring tool is conformant to this specification if it writes style
   sheets that are syntactically correct according to the generic CSS grammar
   and the individual grammars of each feature in this module, and meet all
   other conformance requirements of style sheets as described in this
   module.

  <h3 class=no-ref id=partial> Partial implementations</h3>

  <p>So that authors can exploit the forward-compatible parsing rules to
   assign fallback values, CSS renderers <strong>must</strong> treat as
   invalid (and <a
   href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore as
   appropriate</a>) any at-rules, properties, property values, keywords, and
   other syntactic constructs for which they have no usable level of support.
   In particular, user agents <strong>must not</strong> selectively ignore
   unsupported component values and honor supported values in a single
   multi-value property declaration: if any value is considered invalid (as
   unsupported values must be), CSS requires that the entire declaration be
   ignored.

  <h3 class=no-ref id=experimental> Experimental implementations</h3>

  <p>To avoid clashes with future CSS features, the CSS 2.1 specification
   reserves a <a
   href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
   syntax</a> for proprietary and experimental extensions to CSS.

  <p>Prior to a specification reaching the Candidate Recommendation stage in
   the W3C process, all implementations of a CSS feature are considered
   experimental. The CSS Working Group recommends that implementations use a
   vendor-prefixed syntax for such features, including those in W3C Working
   Drafts. This avoids incompatibilities with future changes in the draft.

  <h3 class=no-ref id=testing> Non-experimental implementations</h3>

  <p>Once a specification reaches the Candidate Recommendation stage,
   non-experimental implementations are possible, and implementors should
   release an unprefixed implementation of any CR-level feature they can
   demonstrate to be correctly implemented according to spec.

  <p>To establish and maintain the interoperability of CSS across
   implementations, the CSS Working Group requests that non-experimental CSS
   renderers submit an implementation report (and, if necessary, the
   testcases used for that implementation report) to the W3C before releasing
   an unprefixed implementation of any CSS features. Testcases submitted to
   W3C are subject to review and correction by the CSS Working Group.

  <p>Further information on submitting testcases and implementation reports
   can be found from on the CSS Working Group's website at <a
   href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
   Questions should be directed to the <a
   href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
   mailing list. <!--end-conformance-->

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <p>This specification is made possible by input from Andrei Bucur,
   Alexandru Chiculita, Arron Eicholz, Daniel Glazman, Arno Gourdol, Chris
   Jones, Bem Jones-Bey, Marcus Mielke, Alex Mogilevsky, Hans Muller, Mihnea
   Ovidenie, Virgil Palanciuc, Peter Sorotokin, Bear Travis, Eugene Veselov,
   Stephen Zilles and the CSS Working Group members.

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative-references>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dd style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS 2.1) Specification.</cite></a> 7 June
    2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
   </dd>
   <!---->

   <dt id=CSS3-WRITING-MODES>[CSS3-WRITING-MODES]

   <dd>Elika J. Etemad; Koji Ishii. <a
    href="http://www.w3.org/TR/2012/WD-css3-writing-modes-20121115/"><cite>CSS
    Writing Modes Module Level 3.</cite></a> 15 November 2012. W3C Working
    Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-css3-writing-modes-20121115/">http://www.w3.org/TR/2012/WD-css3-writing-modes-20121115/</a>
   </dd>
   <!---->

   <dt id=CSS3BOX>[CSS3BOX]

   <dd>Bert Bos. <a
    href="http://www.w3.org/TR/2007/WD-css3-box-20070809"><cite>CSS basic box
    model.</cite></a> 9 August 2007. W3C Working Draft. (Work in progress.)
    URL: <a
    href="http://www.w3.org/TR/2007/WD-css3-box-20070809">http://www.w3.org/TR/2007/WD-css3-box-20070809</a>
   </dd>
   <!---->

   <dt id=RFC2119>[RFC2119]

   <dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a
    href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
   </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references>Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dd style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS-SHAPES>[CSS-SHAPES]

   <dd>Vincent Hardy; Rossen Atanassov; Alan Stearns. <cite>CSS Shapes Module
    Level 1.</cite> (forthcoming). W3C Working Draft. (Work in progress.)</dd>
   <!---->

   <dt id=CSS3-FLEXBOX>[CSS3-FLEXBOX]

   <dd>Tab Atkins Jr.; Elika J. Etemad; Alex Mogilevsky. <a
    href="http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/"><cite>CSS
    Flexible Box Layout Module.</cite></a> 18 September 2012. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/">http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/</a>
   </dd>
   <!---->

   <dt id=CSS3-GRID-LAYOUT>[CSS3-GRID-LAYOUT]

   <dd>Tab Atkins Jr.; Elika J. Etemad; Rossen Atanassov. <a
    href="http://www.w3.org/TR/2013/WD-css3-grid-layout-20130402/"><cite>CSS
    Grid Layout.</cite></a> 2 April 2013. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2013/WD-css3-grid-layout-20130402/">http://www.w3.org/TR/2013/WD-css3-grid-layout-20130402/</a>
   </dd>
   <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>authoring tool, <a href="#authoring-tool"
    title="section 4."><strong>4.</strong></a>

   <li>Content area, <a href="#content-area"
    title="section 2."><strong>2.</strong></a>

   <li>Exclusion area, <a href="#exclusion-area"
    title="section 2."><strong>2.</strong></a>

   <li>Exclusion box, <a href="#exclusion-box"
    title="section 2."><strong>2.</strong></a>

   <li>Exclusion element, <a href="#exclusion-element"
    title="section 2."><strong>2.</strong></a>

   <li>outside-inside, <a href="#outside-and-inside"
    title="section 2."><strong>2.</strong></a>

   <li>renderer, <a href="#renderer"
    title="section 4."><strong>4.</strong></a>

   <li>style sheet
    <ul>
     <li>as conformance class, <a href="#style-sheet"
      title="section 4."><strong>4.</strong></a>
    </ul>

   <li>'wrap-flow', <a href="#wrap-flow"
    title="section 3.1.1."><strong>3.1.1.</strong></a>
    <ul>
     <li>'auto', <a href="#auto"
      title="section 3.1.1."><strong>3.1.1.</strong></a>

     <li>'both', <a href="#both"
      title="section 3.1.1."><strong>3.1.1.</strong></a>

     <li>'clear', <a href="#clear"
      title="section 3.1.1."><strong>3.1.1.</strong></a>

     <li>'end', <a href="#end"
      title="section 3.1.1."><strong>3.1.1.</strong></a>

     <li>'maximum', <a href="#maximum"
      title="section 3.1.1."><strong>3.1.1.</strong></a>

     <li>'minimum', <a href="#minimum"
      title="section 3.1.1."><strong>3.1.1.</strong></a>

     <li>'start', <a href="#start"
      title="section 3.1.1."><strong>3.1.1.</strong></a>
    </ul>

   <li>Wrapping area, <a href="#wrapping-area"
    title="section 2."><strong>2.</strong></a>

   <li>Wrapping context, <a href="#wrapping-context"
    title="section 2."><strong>2.</strong></a>

   <li>'wrap-through', <a href="#wrap-through"
    title="section 3.3.1."><strong>3.3.1.</strong></a>
    <ul>
     <li>'none', <a href="#none"
      title="section 3.3.1."><strong>3.3.1.</strong></a>

     <li>'wrap', <a href="#wrap"
      title="section 3.3.1."><strong>3.3.1.</strong></a>
    </ul>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr>
     <th><a class=property href="#wrap-flow">wrap-flow</a>

     <td>auto | both | start | end | minimum | maximum | clear

     <td>auto

     <td>block-level elements.

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#wrap-through">wrap-through</a>

     <td>wrap | none

     <td>wrap

     <td>block-level elements

     <td>no

     <td>N/A

     <td>visual
  </table>
  <!--end-properties-->
  <!-- template markup for issues pulled from Bugzilla -->
  <!-- issue template and script need a new API to access bugzilla
          <script type="text/template" id="issue-template">
      <div class="issue-marker" data-bug_id="{{bug_id}}" data-bug_status="{{bug_status}}">
          <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id={{bug_id}}">Issue-{{bug_id}}</a>
          <div class="issue-details">
              <p class="short-desc">{{short_desc}}</p>
          </div>  
      </div>
          </script>   

          <script type="text/javascript" src="../shared/scripts/BugzillaTrackerUtil.js"></script>
          <script type="text/javascript" src="../shared/scripts/BugzillaTracker.js"></script>
          <script type="text/javascript">
              checkSpecificationIssues('CSS', 'Exclusions');        
          </script>
          -->

  <h2 class=no-num id=change-log>Change Log</h2>

  <h3 class=no-num id=since-may-3rd-2012>Since <a
   href="http://www.w3.org/TR/2012/WD-css3-exclusions-20120503/">May 3rd
   2012</a></h3>

  <ul>
   <li>split exclusions from shapes into separate modules

   <li>added inset-rectangle() to basic shapes

   <li>Changed shape-inside overflow diagrams to show exclusion behavior

   <li>Changed shape-inside to contribute to the wrapping context

   <li>Defined exclusion edges relative to wrapping content's writing mode

   <li>Made use of start, end, before and after consistent

   <li>Added interpolation for basic shapes

   <li>Changed basic shapes to depend on box specified with box-sizing

   <li>Added overflow behavior for shape-inside.

   <li>Added wrap-flow:minimum.

   <li>Clarified processing model.

   <li>Changed wrap-margin and wrap-padding to shape-margin and
    shape-padding.

   <li>Removed wrap shorthand.
  </ul>

  <h3 class=no-num id=since-december-13th-2011>Since <a
   href="http://www.w3.org/TR/2011/WD-css3-exclusions-20111213/">December
   13th 2011</a></h3>

  <ul>
   <li>Clarified processing model.

   <li>Clarified interaction with floats.

   <li>Clarified that an exclusion element establishes a new block formatting
    context.
  </ul>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
