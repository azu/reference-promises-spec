<!-- http://www.w3.org/TR/r2rml/ -->
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="EN" xml:lang="EN">
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />
  <title>R2RML: RDB to RDF Mapping Language</title>
  <meta name="RCS-Id" content=
  "$Id: Overview.html,v 1.1 2012/09/26 15:23:35 eric Exp $" />
  <link rel="stylesheet" type="text/css" href=
  "http://www.w3.org/StyleSheets/TR/W3C-REC.css" />
  <style type="text/css">
/*<![CDATA[*/
        dfn { color: navy; font-weight: bold; }
        pre { margin-left: 0; padding: 0 2em; }
        dt { margin-top: 0.8em; }
        th, td { padding: 0.3em 0.5em; }
        cite { font-style: normal }
        th { text-align: left; }
        h2, h3 { margin-top: 2em; }
        em.rfc2119 { text-transform: lowercase; font-variant: small-caps; font-style: normal; }
        .figure { margin: 2em 0; text-align: center; }
        .figure .caption { margin-top: 1.6em; }
        table.term-index th code { font-weight: normal; }
        table.term-index th, table.term-index td { padding: 0.1em 0.5em; }
        .issue { background-color: #fdd; border: 1px solid #800; margin: 1em 0em; padding: 1em; page-break-inside: avoid ; font-style: italic; }
        .issue a.tracker { font-style: normal; font-weight: bold; }
        .note { background: #e2fff0; border: 2px solid #cff6d9; margin: 1em 0em 0em; padding: 1em; }
        .note:before { background: #fff; border: 1px solid #cff6d9; content: "Note"; display: block; font-weight: bold; margin: -1.5em 0 0.5em 0; padding: 0.2em 0.8em; width: 2.5em; }
        .ex-data, table.ex-data th, table.ex-data td { background: #cee; border: 1px solid #acc; }
        table.ex-data { border-collapse: collapse; margin-bottom: 1.5em; }
        table.ex-data caption, table.ex-data th, table.ex-data td { font-family: monospace; }
        table.ex-data caption, table.ex-data th { font-size: 125%; }
        table.ex-data caption { font-weight: bold; }
        table.ex-data th small, table.ex-data caption small { display: block; font-size: 65%; font-weight: normal; }
        pre.vocab, pre.ex-mapping, pre.ex-output, pre.ex-sql { margin-top: 1.5em; padding: 1em; }
        pre.vocab:before, pre.ex-mapping:before, pre.ex-output:before, pre.ex-sql:before { background: white; display: block; font-family: sans-serif; font-size: 90%; margin: -1.7em 0 0.5em 0; padding: 0.2em 0.4em; }
        pre.vocab { background: #d4dddd; }
        pre.vocab, pre.vocab:before { border: 1px solid #bbb; }
        pre.vocab:before { color: #888; content: "R2RML vocabulary definition"; width: 13em; }
        pre.ex-mapping, pre.ex-sql { background: #eeb; }
        pre.ex-mapping, pre.ex-mapping:before, pre.ex-sql, pre.ex-sql:before { border: 1px solid #cc9; }
        pre.ex-mapping:before { color: #996; content: "Example R2RML mapping"; width: 12em; }
        pre.ex-sql:before { color: #996; content: "Example SQL query"; width: 9em; }
        .ex-output { background: #cfc; }
        .ex-output, .ex-output:before, .ex-output th, .ex-output td { border: 1px solid #aca; }
        pre.ex-output:before { color: #797; content: "Example output data"; width: 9.5em; }
        .toc ul { list-style-type: none; }
        .toc > li { font-weight: bold; margin-bottom: 0.8em; }
        .toc li li { font-weight: normal; }
  /*]]>*/
  </style>
</head>

<body>
  <div class="head">
    <p><a href="http://www.w3.org/"><img src="http://www.w3.org/Icons/w3c_home" alt="W3C"
    height="48" width="72" /></a></p>

    <h1><a name="title" id="title"></a>R2RML: RDB to RDF Mapping Language</h1>

    <h2><a name="w3c-doctype" id="w3c-doctype"></a>W3C Recommendation 27 September 2012</h2>

    <dl>
      <dt>This version:</dt> 
      <dd><a href="http://www.w3.org/TR/2012/REC-r2rml-20120927/">http://www.w3.org/TR/2012/REC-r2rml-20120927/</a></dd> 

      <dt>Latest version:</dt>
      <dd><a href="http://www.w3.org/TR/r2rml/">http://www.w3.org/TR/r2rml/</a></dd>

      <dt>Previous version:</dt>
      <dd><a href="http://www.w3.org/TR/2012/PR-r2rml-20120814/">http://www.w3.org/TR/2012/PR-r2rml-20120814/</a></dd>

      <dt>Editors:</dt>
      <dd>Souripriya Das, Oracle</dd>
      <dd>Seema Sundara, Oracle</dd>
      <dd>Richard Cyganiak, DERI, National University of Ireland, Galway</dd>
    </dl>

    <p>Please refer to the <a href="http://www.w3.org/2001/sw/rdb2rdf/errata.html"><strong>errata</strong></a> for this document, which may include some normative corrections.</p>

    <p>See also <a href="http://www.w3.org/2003/03/Translations/byTechnology?technology=r2rml"><strong>translations</strong></a>.</p>

    <p class="copyright"><a href=
    "http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> &copy;
    2012 <a href="http://www.w3.org/"><acronym title=
    "World Wide Web Consortium">W3C</acronym></a><sup>&reg;</sup> (<a href=
    "http://www.csail.mit.edu/"><acronym title=
    "Massachusetts Institute of Technology">MIT</acronym></a>, <a href=
    "http://www.ercim.eu/"><acronym title=
    "European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href=
    "http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>
    rules apply.</p>
  </div>
  <hr />


  <h2><a name="abstract" id="abstract"></a>Abstract</h2>

  <p>This document describes R2RML, a language for expressing customized mappings from
  relational databases to RDF datasets. Such mappings provide the ability to view
  existing relational data in the RDF data model, expressed in a structure and target
  vocabulary of the mapping author's choice. R2RML mappings are themselves RDF graphs and
  written down in Turtle syntax. R2RML enables different types of mapping
  implementations. Processors could, for example, offer a virtual SPARQL endpoint over
  the mapped relational data, or generate RDF dumps, or offer a Linked Data
  interface.</p>

  <div>
    <h2><a name="status" id="status"></a>Status of this Document</h2>

    <p><em>This section describes the status of this document at the time of its
    publication. Other documents may supersede this document. A list of current W3C
    publications and the latest revision of this technical report can be found in the
    <a href="http://www.w3.org/TR/">W3C technical reports index</a> at
    http://www.w3.org/TR/.</em></p>

    <p>This document has been reviewed by W3C Members, by software developers,
    and by other W3C groups and interested parties, and is endorsed by the
    Director as a
    <a href="http://www.w3.org/2004/02/Process-20040205/tr.html#RecsW3C">W3C
    Recommendation</a>. It is a stable document and may be used as reference
    material or cited from another document. W3C's role in making the
    Recommendation is to draw attention to the specification and to promote
    its widespread deployment. This enhances the functionality and
    interoperability of the Web.</p>

    <p>This document was published by the
    <a href="http://www.w3.org/2001/sw/rdb2rdf/">RDB2RDF Working Group</a>.
    Comments on this document should be sent to
    <a href="mailto:public-rdb2rdf-comments@w3.org">public-rdb2rdf-comments@w3.org</a>,
    a mailing list with a
    <a href="http://lists.w3.org/Archives/Public/public-rdb2rdf-comments/">public archive</a>.
    The following related documents have been made available:</p>

    <ul>
    <li>A <a href="http://www.w3.org/2001/sw/wiki/RDB2RDF">wiki page</a> with additional information for users and implementers of R2RML,</li>
    <li>a <a href="http://www.w3.org/2001/sw/rdb2rdf/r2rml/diffs/REC.html">color-coded diff</a>
    of all changes since the previous draft,</li> 
    <li>the <a href="http://www.w3.org/TR/2012/NOTE-rdb2rdf-implementations-20120814/">implementation
    report</a> used by the director to transition to W3C Recommendation.</li>
    </ul>

    <p>This document was produced by a group operating under the <a href=
    "http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
    Policy</a>. W3C maintains a <a rel="disclosure" href=
    "http://www.w3.org/2004/01/pp-impl/43889/status">public list of any patent
    disclosures</a> made in connection with the deliverables of the group; that page also
    includes instructions for disclosing a patent. An individual who has actual knowledge
    of a patent which the individual believes contains <a href=
    "http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
    Claim(s)</a> must disclose the information in accordance with <a href=
    "http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of
    the W3C Patent Policy</a>.</p>
  </div>

  <div class="toc">
    <h2><a name="contents" id="contents"></a>Table of Contents</h2>

<ul class="toc">
  <li><a href="#introduction">1 Introduction</a>
  <ul>
    <li><a href="#conventions">1.1 Document Conventions</a></li>
  </ul></li>
  <li><a href="#overview">2 R2RML Overview and Example (Informative)</a>
  <ul>
    <li><a href="#example-input-database">2.1 Example Input Database</a></li>
    <li><a href="#desired-rdf">2.2 Desired RDF Output</a></li>
    <li><a href="#example-simple">2.3 Example: Mapping a Simple Table</a></li>
    <li><a href="#example-r2rml-view">2.4 Example: Computing a Property with an R2RML View</a></li>
    <li><a href="#example-fk">2.5 Example: Linking Two Tables</a></li>
    <li><a href="#example-m2m">2.6 Example: Many-to-Many Tables</a></li>
    <li><a href="#example-translationtable">2.7 Example: Translating database type codes to IRIs</a></li>
  </ul></li>
  <li><a href="#conformance">3 Conformance</a></li>
  <li><a href="#definitions">4 R2RML Processors and Mapping Documents</a>
  <ul>
    <li><a href="#vocabulary">4.1 Mapping Graphs and the R2RML Vocabulary</a></li>
    <li><a href="#syntax">4.2 RDF-based Turtle Syntax; Media Type</a></li>
    <li><a href="#data-errors">4.3 Data Errors</a></li>
    <li><a href="#default-mappings">4.4 Default Mappings</a></li>
  </ul></li>
  <li><a href="#logical-tables">5 Defining Logical Tables</a>
  <ul>
    <li><a href="#physical-tables">5.1 Base Tables and SQL Views (<code>rr:tableName</code>)</a></li>
    <li><a href="#r2rml-views">5.2 R2RML Views (<code>rr:sqlQuery</code>, <code>rr:sqlVersion</code>)</a></li>
  </ul></li>
  <li><a href="#triples-map">6 Mapping Logical Tables to RDF with Triples Maps</a>
  <ul>
    <li><a href="#subject-map">6.1 Creating Resources with Subject Maps</a></li>
    <li><a href="#typing">6.2 Typing Resources (<code>rr:class</code>)</a></li>
    <li><a href="#predicate-object-map">6.3 Creating Properties and Values with Predicate-Object Maps</a></li>
  </ul></li>
  <li><a href="#term-map">7 Creating RDF Terms with Term Maps</a>
  <ul>
    <li><a href="#constant">7.1 Constant RDF Terms (<code>rr:constant</code>)</a></li>
    <li><a href="#from-column">7.2 From a Column (<code>rr:column</code>)</a></li>
    <li><a href="#from-template">7.3 From a Template (<code>rr:template</code>)</a></li>
    <li><a href="#termtype">7.4 IRIs, Literal, Blank Nodes (<code>rr:termType</code>)</a></li>
    <li><a href="#language-tags">7.5 Language Tags (<code>rr:language</code>)</a></li>
    <li><a href="#typed-literals">7.6 Typed Literals (<code>rr:datatype</code>)</a></li>
    <li><a href="#inverse">7.7 Inverse Expressions (<code>rr:inverseExpression</code>)</a></li>
  </ul></li>
  <li><a href="#foreign-key">8 Foreign Key Relationships among Logical Tables (<code>rr:parentTriplesMap</code>, <code>rr:joinCondition</code>, <code>rr:child</code> and <code>rr:parent</code>)</a></li>
  <li><a href="#named-graphs">9 Assigning Triples to Named Graphs</a>
  <ul>
    <li><a href="#blank-nodes">9.1 Scope of Blank Nodes</a></li>
  </ul></li>
  <li><a href="#datatype-conversions">10 Datatype Conversions</a>
  <ul>
    <li><a href="#datatype-intro">10.1 Introduction (Informative)</a></li>
    <li><a href="#natural-mapping">10.2 Natural Mapping of SQL Values</a></li>
    <li><a href="#datatype-overrides">10.3 Datatype-override Mapping of SQL Values</a></li>
    <li><a href="#non-string-columns">10.4 Non-String Columns in String Contexts</a></li>
    <li><a href="#xsd-summary">10.5 Summary of XSD Lexical Forms (Informative)</a></li>
  </ul></li>
  <li><a href="#generated-rdf">11 The Output Dataset</a>
  <ul>
    <li><a href="#generated-triples">11.1 The Generated RDF Triples of a Triples Map</a></li>
    <li><a href="#generated-rdf-term">11.2 The Generated RDF Term of a Term Map</a></li>
  </ul></li>
  <li><a href="#terminology">A. RDF Terminology (Informative)</a></li>
  <li><a href="#index">B. Index of R2RML Vocabulary Terms (Informative)</a>
  <ul>
    <li><a href="#class-index">B.1 Classes</a></li>
    <li><a href="#property-index">B.2 Properties</a></li>
    <li><a href="#other-index">B.3 Other Terms</a></li>
  </ul></li>
  <li><a href="#references">C. References</a>
  <ul>
    <li><a href="#normative-refs">C.1 Normative References</a></li>
    <li><a href="#non-normative-refs">C.2 Other References</a></li>
  </ul></li>
  <li><a href="#acknowledgements">D. Acknowledgements (Informative)</a></li>
</ul>

</div>

  <hr />

  <div class="body">
    <h2><a name="introduction" id="introduction"></a>1 Introduction</h2>

    <p>This specification describes R2RML, a language for expressing customized mappings
    from relational databases to RDF datasets. Such mappings provide the ability to view
    existing relational data in the RDF data model, expressed in a structure and target
    vocabulary of the mapping author's choice.</p>

    <p>This specification has a companion that defines <cite><a class="norm"
    href="http://www.w3.org/TR/rdb-direct-mapping/">a direct mapping
    from relational databases to RDF</a></cite> [<cite><a href="#DM">DM</a></cite>].
    In the direct mapping of a database, the
    structure of the resulting RDF graph directly reflects the structure of the database,
    the target RDF vocabulary directly reflects the names of database schema elements,
    and neither structure nor target vocabulary can be changed. With R2RML on the other
    hand, a mapping author can define highly customized views over the relational
    data.</p>

    <p>Every R2RML mapping is tailored to a specific database schema and target
    vocabulary. The input to an R2RML mapping is a relational database that conforms to
    that schema. The output is an <cite><a class="norm" href=
    "http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115/#rdfDataset">RDF
    dataset</a></cite> [<cite><a href="#SPARQL">SPARQL</a></cite>], as defined in SPARQL,
    that uses predicates and types from the target vocabulary. The mapping is conceptual;
    R2RML processors are free to materialize the output data, or to offer virtual access
    through an interface that queries the underlying database, or to offer any other
    means of providing access to the output RDF dataset.</p>

    <p>R2RML mappings are themselves expressed as RDF graphs and written down in
    <cite><a class="norm" href=
    "http://www.w3.org/TR/turtle/">Turtle
    syntax</a></cite> [<cite><a href="#TURTLE">TURTLE</a></cite>].</p>

    <p>The intended audience of this specification is implementors of software
    that
    generates or processes R2RML mapping documents, as well as mapping authors looking
    for a reference to the R2RML language constructs. The document uses concepts from
    <cite><em><a class="norm" href=
    "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/">RDF Concepts and Abstract
    Syntax</a></em></cite> [<cite><a href="#RDF">RDF</a></cite>] and from the <cite>SQL
    language specifications</cite> [<cite><a href="#SQL1">SQL1</a></cite>][<cite><a href=
    "#SQL2">SQL2</a></cite>]. A reader's familiarity with the contents of these
    documents, as well as with the Turtle syntax, is assumed.</p>

    <p>The R2RML language is designed to meet the use cases and requirements identified
    in <cite><em><a class="inform" href=
    "http://www.w3.org/TR/rdb2rdf-ucr/">Use Cases and Requirements for
    Mapping Relational Databases to RDF</a></em></cite> [<cite><a href=
    "#UCNR">UCNR</a></cite>].</p>


    <h3 id="conventions">1.1 Document Conventions</h3>

    <p>In this document, examples assume the following namespace prefix bindings unless
    otherwise stated:</p>

    <table rules="all" summary="list of prefixes used in the document">
      <tr>
        <th>Prefix</th>

        <th>IRI</th>
      </tr>

      <tr>
        <td><code>rr:</code></td>

        <td><code>http://www.w3.org/ns/r2rml#</code></td>
      </tr>

      <tr>
        <td><code>rdf:</code></td>

        <td><code>http://www.w3.org/1999/02/22-rdf-syntax-ns#</code></td>
      </tr>

      <tr>
        <td><code>rdfs:</code></td>

        <td><code>http://www.w3.org/2000/01/rdf-schema#</code></td>
      </tr>

      <tr>
        <td><code>xsd:</code></td>

        <td><code>http://www.w3.org/2001/XMLSchema#</code></td>
      </tr>

      <tr>
        <td><code>ex:</code></td>

        <td><code>http://example.com/ns#</code></td>
      </tr>
    </table>

    <p>Throughout the document, boxes containing Turtle markup and SQL data will appear.
    These boxes are color-coded. Gray boxes contain RDFS definitions of R2RML vocabulary
    terms:</p>
    <pre class="vocab">
# This box contains RDFS definitions of R2RML vocabulary terms
</pre>

    <p>Yellow boxes contain example fragments of R2RML mappings in Turtle syntax:</p>
    <pre class="ex-mapping">
# This box contains example R2RML mappings
</pre>

    <p>Blue tables contain example input into an R2RML mapping:</p>
    <table class="ex-data">
      <caption>EXAMPLE</caption>
      <tr><th>ID <small>INTEGER PRIMARY KEY</small></th><th>DESC <small>VARCHAR(100)</small></th></tr>
      <tr><td>1</td><td>This is an example input table.</td></tr>
      <tr><td>2</td><td>The table name is EXAMPLE.</td></tr>
      <tr><td>3</td><td>It has six rows.</td></tr>
      <tr><td>4</td><td>It has two columns, ID and DESC.</td></tr>
      <tr><td>5</td><td>ID is the table's primary key and of type INTEGER.</td></tr>
      <tr><td>6</td><td>DESC is of type VARCHAR(100)</td></tr>
    </table>

    <p>Green boxes contain example output:</p>

    <pre class="ex-output">
# This box contains example output RDF triples or fragments
</pre>


    <h2 id="overview">2 R2RML Overview and Example (Informative)</h2>

    <p>This section gives a brief overview of the R2RML mapping language,
    followed by a simple example relational database with an
    R2RML mapping document and its output RDF. Further R2RML examples can
    be found in the
    <cite><em><a class="inform" href="http://www.w3.org/TR/rdb2rdf-test-cases/">R2RML and Direct Mapping Test Cases</a></em></cite>
    [<cite><a href="#TC">TC</a></cite>].</p>

    <p>An <a href="#dfn-r2rml-mapping">R2RML mapping</a> refers to
    <a href="#dfn-logical-table">logical tables</a> to retrieve
    data from the <a href="#dfn-input-database">input database</a>.
    A logical table can be one of the following:</p>

    <ol>
      <li>A base table,</li>
      <li>a view, or</li>
      <li>a valid SQL query (called an
      “<a href="#dfn-r2rml-view">R2RML view</a>” because it
      emulates a SQL view without modifying the database).</li>
    </ol>

    <p>Each logical table is mapped to RDF using a
    <a href="#dfn-triples-map">triples map</a>. The triples map is
    a rule that maps each <a href="#dfn-logical-table-row">row in the
    logical table</a> to a number of <a href="#dfn-rdf-triple">RDF triples</a>.
    The rule has two main parts:</p>

    <ol>
    <li>A <a href="#dfn-subject-map">subject map</a> that generates the subject
    of all RDF triples that will be generated from a logical table row. The
    subjects often are <a href="#dfn-iri">IRIs</a> that are generated
    from the primary key column(s) of the table.</li>
    <li>Multiple <a href="#dfn-predicate-object-map">predicate-object maps</a>
    that in turn consist of <a href="#dfn-predicate-map">predicate maps</a> and
    <a href="#dfn-object-map">object maps</a>
    (or <a href="#dfn-referencing-object-map">referencing object maps</a>).
    </li>
    </ol>

    <p>Triples are produced by combining the subject map with a predicate
    map and object map, and applying these three to each
    <a href="#dfn-logical-table-row">logical table row</a>. For example, the
    complete rule for generating a set of triples might be:</p>

    <ul>
    <li><strong>Subjects:</strong> A template <code>http://data.example.com/employee/{empno}</code> is used to generate subject <a href="#dfn-iri">IRIs</a> from the <code>empno</code> column.</li>
    <li><strong>Predicates:</strong> The constant vocabulary <a href="#dfn-iri">IRI</a> <code>ex:name</code> is used.</li>
    <li><strong>Objects:</strong> The value of the <code>ename</code> column is used to produce an <a href="#dfn-literal">RDF literal</a>.</li>
    </ul>

    <p>By default, all <a href="#dfn-rdf-triple">RDF triples</a> are in the
    <a href="#dfn-default-graph">default graph</a> of the
    <a href="#dfn-output-dataset">output dataset</a>.
    A triples map can contain
    <a href="#dfn-graph-map">graph maps</a>
    that place some or all of the triples into
    <a href="#dfn-named-graph">named graphs</a> instead.</p>

    <div class="figure">
     <img src="images/uml-overview.png" alt="UML overview diagram of R2RML"/>
      <br /><br />
      Figure 1: An overview of R2RML
    </div>


    <h3 id="example-input-database">2.1 Example Input Database</h3>

    <p>The following example database consists of two tables,
    <code>EMP</code> and <code>DEPT</code>, with one row each:</p>

      <table class="ex-data" summary="EMP table: sample data" id="ex_EMP">
        <caption>EMP</caption>
        <tr>
          <th>EMPNO <small>INTEGER PRIMARY KEY</small></th>
          <th>ENAME <small>VARCHAR(100)</small></th>
          <th>JOB <small>VARCHAR(20)</small></th>
          <th>DEPTNO <small>INTEGER REFERENCES DEPT (DEPTNO)</small></th>
        </tr>
        <tr>
          <td><code>7369</code></td>
          <td><code>SMITH</code></td>
          <td><code>CLERK</code></td>
          <td><code>10</code></td>
        </tr>
      </table>

      <table class="ex-data" summary="DEPT table: sample data" id="ex_DEPT">
        <caption>DEPT</caption>
        <tr>
          <th>DEPTNO <small>INTEGER PRIMARY KEY</small></th>
          <th>DNAME <small>VARCHAR(30)</small></th>
          <th>LOC <small>VARCHAR(100)</small></th>
        </tr>
        <tr>
          <td><code>10</code></td>
          <td><code>APPSERVER</code></td>
          <td><code>NEW YORK</code></td>
        </tr>
      </table>


    <h3 id="desired-rdf">2.2 Desired RDF Output</h3>

    <p>The desired RDF triples to be produced from this database are
    as follows:</p>

    <pre class="ex-output">
&lt;http://data.example.com/employee/7369&gt; rdf:type ex:Employee.
&lt;http://data.example.com/employee/7369&gt; ex:name "SMITH".
&lt;http://data.example.com/employee/7369&gt; ex:department &lt;http://data.example.com/department/10&gt;.

&lt;http://data.example.com/department/10&gt; rdf:type ex:Department.
&lt;http://data.example.com/department/10&gt; ex:name "APPSERVER".
&lt;http://data.example.com/department/10&gt; ex:location "NEW YORK".
&lt;http://data.example.com/department/10&gt; ex:staff 1.</pre>

    <p>Note in particular:</p>

    <ul>
    <li>Construction of custom IRI identifiers for departments and employees;</li>
    <li>use of a custom target vocabulary (<code>ex:Employee</code>, <code>ex:location</code> etc.);</li>
    <li>the <code>ex:staff</code> property has the total number of staff of a department; this value is not stored directly in the database but has to be computed.</li>
    <li>the <code>ex:department</code> property relates an employee to their department, using the identifiers of both entities;</li>
    </ul>


    <h3 id="example-simple">2.3 Example: Mapping a Simple Table</h3>

    <p>The following partial R2RML mapping document will produce
    the desired triples from the <a href="#ex_EMP"><code>EMP</code> table</a>
    (except the
    <code>ex:department</code> triple, which will be added later):</p>

    <pre class="ex-mapping">
@prefix rr: &lt;http://www.w3.org/ns/r2rml#&gt;.
@prefix ex: &lt;http://example.com/ns#&gt;.

&lt;#TriplesMap1&gt;
    rr:logicalTable [ rr:tableName "EMP" ];
    rr:subjectMap [
        rr:template "http://data.example.com/employee/{EMPNO}";
        rr:class ex:Employee;
    ];
    rr:predicateObjectMap [
        rr:predicate ex:name;
        rr:objectMap [ rr:column "ENAME" ];
    ].</pre>

    <pre class="ex-output">
&lt;http://data.example.com/employee/7369&gt; rdf:type ex:Employee.
&lt;http://data.example.com/employee/7369&gt; ex:name "SMITH".</pre>


    <h3 id="example-r2rml-view">2.4 Example: Computing a Property with an R2RML View</h3>

    <p>Next, the <a href="#ex_DEPT"><code>DEPT</code> table</a> needs 
    to be mapped. Instead of using the table directly as the basis
    for that mapping, an “<a href="#dfn-r2rml-view">R2RML view</a>”
    will be defined based on a SQL query.
    This allows computation of the staff number.
    (Alternatively, one could define this view directly in the database.)</p>

    <pre class="ex-sql">
&lt;#DeptTableView&gt; rr:sqlQuery """
SELECT DEPTNO,
       DNAME,
       LOC,
       (SELECT COUNT(*) FROM EMP WHERE EMP.DEPTNO=DEPT.DEPTNO) AS STAFF
FROM DEPT;
""".
</pre>

    <p>The definition of a triples map that generates the desired
    <code>DEPT</code> triples based on this R2RML view follows.</p>

    <pre class="ex-mapping">
&lt;#TriplesMap2&gt;
    rr:logicalTable &lt;#DeptTableView&gt;;
    rr:subjectMap [
        rr:template "http://data.example.com/department/{DEPTNO}";
        rr:class ex:Department;
    ];
    rr:predicateObjectMap [
        rr:predicate ex:name;
        rr:objectMap [ rr:column "DNAME" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ex:location;
        rr:objectMap [ rr:column "LOC" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ex:staff;
        rr:objectMap [ rr:column "STAFF" ];
    ].</pre>

    <pre class="ex-output">
&lt;http://data.example.com/department/10&gt; rdf:type ex:Department.
&lt;http://data.example.com/department/10&gt; ex:name "APPSERVER".
&lt;http://data.example.com/department/10&gt; ex:location "NEW YORK".
&lt;http://data.example.com/department/10&gt; ex:staff 1.</pre>


    <h3 id="example-fk">2.5 Example: Linking Two Tables</h3>

    <p>To complete the mapping document, the <code>ex:department</code>
    triples need to be generated. Their subjects come from
    the first triples map (<code>&lt;#TriplesMap1&gt;</code>),
    the objects come from the second triples map
    (<code>&lt;#TriplesMap2&gt;</code>).</p>

    <p>This can be achieved by adding another <code>rr:predicateObjectMap</code>
    to <code>&lt;#TriplesMap1&gt;</code>. This one uses the other triples map,
    <code>&lt;#TriplesMap2&gt;</code>, as a <a href="#foreign-key">parent
    triples map</a>:</p>

<pre class="ex-mapping">&lt;#TriplesMap1&gt;
    rr:predicateObjectMap [
        rr:predicate ex:department;
        rr:objectMap [
            rr:parentTriplesMap &lt;#TriplesMap2&gt;;
            rr:joinCondition [
                rr:child "DEPTNO";
                rr:parent "DEPTNO";
            ];
        ];
    ].</pre>

    <p>This performs a join between the <code>EMP</code> table and the
    R2RML view, on the
    <code>DEPTNO</code> columns. The objects will be generated from
    the subject map of the parent triples map, yielding the desired
    triple:</p>

    <pre class="ex-output">
&lt;http://data.example.com/employee/7369&gt; ex:department &lt;http://data.example.com/department/10&gt;.</pre>

    <p>This completes the R2RML mapping document. An R2RML processor will
    generate the triples listed above from this mapping document.</p>


    <h3 id="example-m2m">2.6 Example: Many-to-Many Tables</h3>

    <p>The following example will assume that a many-to-many relationship exists between 
    the extended versions of <a href="#ex_EMP_m2m"><code>EMP</code> table</a> and the <a
    href="#ex_DEPT_m2m"><code>DEPT</code> table</a> shown below. This
    many-to-many relationship is captured by the content of
    the <a href="#ex_EMP2DEPT"><code>EMP2DEPT</code> table</a>. The database consisting of
    the <code>EMP</code>, <code>DEPT</code>, and <code>EMP2DEPT</code> tables are shown below:</p>

      <table class="ex-data" summary="EMP table: sample data" id="ex_EMP_m2m">
        <caption>EMP</caption>
        <tr>
          <th>EMPNO <small>INTEGER PRIMARY KEY</small></th>
          <th>ENAME <small>VARCHAR(100)</small></th>
          <th>JOB <small>VARCHAR(20)</small></th>
        </tr>
        <tr>
          <td><code>7369</code></td>
          <td><code>SMITH</code></td>
          <td><code>CLERK</code></td>
        </tr>
        <tr>
          <td><code>7369</code></td>
          <td><code>SMITH</code></td>
          <td><code>NIGHTGUARD</code></td>
        </tr>
        <tr>
          <td><code>7400</code></td>
          <td><code>JONES</code></td>
          <td><code>ENGINEER</code></td>
        </tr>

      </table>

      <table class="ex-data" summary="DEPT table: sample data" id="ex_DEPT_m2m">
        <caption>DEPT</caption>
        <tr>
          <th>DEPTNO <small>INTEGER PRIMARY KEY</small></th>
          <th>DNAME <small>VARCHAR(30)</small></th>
          <th>LOC <small>VARCHAR(100)</small></th>
        </tr>
        <tr>
          <td><code>10</code></td>
          <td><code>APPSERVER</code></td>
          <td><code>NEW YORK</code></td>
        </tr>
        <tr>
          <td><code>20</code></td>
          <td><code>RESEARCH</code></td>
          <td><code>BOSTON</code></td>
        </tr>
      </table>

      <table class="ex-data" summary="EMP2DEPT table: sample data" id="ex_EMP2DEPT">
        <caption>EMP2DEPT <small>PRIMARY KEY (EMPNO, DEPTNO)</small></caption>
        <tr>
          <th>EMPNO <small>INTEGER REFERENCES EMP (EMPNO)</small></th>
          <th>DEPTNO <small>INTEGER REFERENCES DEPT (DEPTNO)</small></th>
        </tr>
        <tr>
          <td><code>7369</code></td>
          <td><code>10</code></td>
        </tr>
        <tr>
          <td><code>7369</code></td>
          <td><code>20</code></td>
        </tr>
        <tr>
          <td><code>7400</code></td>
          <td><code>10</code></td>
        </tr>
      </table>

    <pre class="ex-output">
&lt;http://data.example.com/employee=7369/department=10&gt; 
    ex:employee   &lt;http://data.example.com/employee/7369&gt; ;
    ex:department &lt;http://data.example.com/department/10&gt; .

&lt;http://data.example.com/employee=7369/department=20&gt; 
    ex:employee &lt;http://data.example.com/employee/7369&gt; ;
    ex:department &lt;http://data.example.com/department/20&gt; .

&lt;http://data.example.com/employee=7400/department=10&gt; 
    ex:employee &lt;http://data.example.com/employee/7400&gt; ;
    ex:department &lt;http://data.example.com/department/10&gt; .
    </pre>

    <p>The following R2RML mapping will produce the desired triples listed above:</p>

    <pre class="ex-mapping">&lt;#TriplesMap3&gt;
    rr:logicalTable [ rr:tableName "EMP2DEPT" ];
    rr:subjectMap [ rr:template "http://data.example.com/employee={EMPNO}/department={DEPTNO}" ];
    rr:predicateObjectMap [
        rr:predicate ex:employee;
        rr:objectMap [ rr:template "http://data.example.com/employee/{EMPNO}" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ex:department;
        rr:objectMap [ rr:template "http://data.example.com/department/{DEPTNO}" ];
    ].
    </pre>


    <p>However, if one does <em>not</em> require that the subjects in
    the desired output uniquely identify the rows in the <a
    href="#ex_EMP2DEPT"><code>EMP2DEPT</code> table</a>, the desired output
    may look as follows: </p>

    <pre class="ex-output">
&lt;http://data.example.com/employee/7369&gt; 
    ex:department &lt;http://data.example.com/department/10&gt; ;
    ex:department &lt;http://data.example.com/department/20&gt; .

&lt;http://data.example.com/employee/7400&gt; 
    ex:department &lt;http://data.example.com/department/10&gt;.
    </pre>

    <p>The following R2RML mapping will produce the desired triples:</p>

    <pre class="ex-mapping">&lt;#TriplesMap3&gt;
    rr:logicalTable [ rr:tableName "EMP2DEPT" ];
    rr:subjectMap [
        rr:template "http://data.example.com/employee/{EMPNO}";
    ];
    rr:predicateObjectMap [
      rr:predicate ex:department;
      rr:objectMap [ rr:template "http://data.example.com/department/{DEPTNO}" ];
    ].</pre>


    <h3 id="example-translationtable">2.7 Example: Translating database
    type codes to IRIs</h3>

    <p>Sometimes, database columns contain codes that need to be translated
    into IRIs, but a direct syntactic translation using
    <a href="#dfn-string-template">string templates</a> is not possible.
    For example, consider a <code>JOB</code> column in the <code>EMP</code>
    table with the following possible values, and IRIs corresponding to
    those database values in the RDF output:</p>

    <table>
    <tr><th>Value</th><th>Corresponding RDF IRI</th></tr>
    <tr><td><code>CLERK</code></td><td><code>http://data.example.com/roles/general-office</code></td></tr>
    <tr><td><code>NIGHTGUARD</code></td><td><code>http://data.example.com/roles/security</code></td></tr>
    <tr><td><code>ENGINEER</code></td><td><code>http://data.example.com/roles/engineering</code></td></tr>
    </table>

    <p>The IRIs are not found in the original database and therefore the mapping
    from database codes to IRIs has to be
    specified in the R2RML mapping. Such translations can be achieved using an
    “<a href="#dfn-r2rml-view">R2RML view</a>”. The view is defined based on a
    SQL query that computes the IRI based on the database value.
    SQL's <code>CASE</code> statement is convenient for this purpose.
    (Alternatively, one could define this view directly in the database.)</p>

    <pre class="ex-mapping">
&lt;#TriplesMap1&gt;
    rr:logicalTable [ rr:sqlQuery """

        SELECT EMP.*, (CASE JOB
            WHEN 'CLERK' THEN 'general-office'
            WHEN 'NIGHTGUARD' THEN 'security'
            WHEN 'ENGINEER' THEN 'engineering'
        END) ROLE FROM EMP

        """ ];
    rr:subjectMap [
        rr:template "http://data.example.com/employee/{EMPNO}";
    ];
    rr:predicateObjectMap [
        rr:predicate ex:role;
        rr:objectMap [ rr:template "http://data.example.com/roles/{ROLE}" ];
    ].
    </pre>

    <p>With the <a href="#example-input-database">example input database</a>,
    this mapping would yield the following triple:</p>

    <pre class="ex-output">
&lt;http://data.example.com/employee/7369&gt; ex:role &lt;http://data.example.com/roles/general-office&gt;.</pre>


    <h2 id="conformance">3 Conformance</h2>

    <p>As well as sections marked as non-normative in the section heading,
    all diagrams, examples, and notes in this specification are
    non-normative. Everything else in this specification is normative.</p>

    <p>The key words <em class="rfc2119">must</em>,
    <em class="rfc2119">must not</em>, <em class="rfc2119">required</em>,
    <em class="rfc2119">should</em>, <em class="rfc2119">should not</em>,
    <em class="rfc2119">recommended</em>, <em class="rfc2119">may</em>,
    and <em class="rfc2119">optional</em> in this specification are to be
    interpreted as described in
    <cite><a href="http://tools.ietf.org/html/rfc2119">RFC 2119</a></cite>
    [<cite><a href="#RFC2119">RFC2119</a></cite>].</p>

    <p>This specification describes conformance criteria for:</p>

    <ul>
    <li><a href="#dfn-r2rml-mapping-document">R2RML mapping documents</a></li>
    <li><a href="#dfn-r2rml-mapping-graph">R2RML mapping graphs</a></li>
    <li><a href="#dfn-r2rml-processor">R2RML processors</a></li>
    <li><a href="#dfn-r2rml-data-validator">R2RML data validators</a></li>
    <li><a href="#dfn-r2rml-default-mapping-generator">R2RML default mapping generators</a></li>
    </ul>

    <p>A collection of test cases for R2RML processors and
    R2RML data validators is available in the
    <cite><em><a class="inform" href="http://www.w3.org/TR/rdb2rdf-test-cases/">R2RML and Direct Mapping Test Cases</a></em></cite> [<cite><a href="#TC">TC</a></cite>].</p>

    <p>This specification defines R2RML for databases that conform to
    <em>Core SQL 2008</em>, as defined in
    <cite><em>ISO/IEC 9075-1:2008</em></cite>
    [<cite><a href="#SQL1">SQL1</a></cite>] and
    <cite><em>ISO/IEC 9075-2:2008</em></cite>
    [<cite><a href="#SQL2">SQL2</a></cite>].
    Processors and mappings may have
    to deviate from the R2RML specification in order to support databases
    that do not conform to this version of SQL.</p>

    <p>Where SQL queries are embedded into R2RML mappings,
    <a href="#dfn-sql-version-identifier">SQL version identifiers</a>
    can be used to indicate the specific version of SQL that is being used.</p>


    <h2 id="definitions">4 R2RML Processors and Mapping Documents</h2>

    <p>An <dfn id="dfn-r2rml-mapping">R2RML mapping</dfn> defines a mapping
    from a relational database to RDF. It is a structure that consists of
    one or more <a href="#dfn-triples-map">triples maps</a>.</p>

    <p>The input to an R2RML mapping is called the
    <dfn id="dfn-input-database">input database</dfn>.</p>

    <p>An <dfn id="dfn-r2rml-processor">R2RML processor</dfn> is a system
    that, given an <a href="#dfn-r2rml-mapping">R2RML mapping</a> and an
    <a href="#dfn-input-database">input database</a>, provides access to 
    the <a href="#dfn-output-dataset">output dataset</a>.</p>

    <p>There are no constraints on the method of access to the output
    dataset provided by a conforming R2RML processor. An R2RML processor
    <em class="rfc2119">MAY</em>
    materialize the output dataset into a file, or offer virtual access
    through an interface that queries the input database, or offer any
    other means of providing access to the output dataset.</p>

    <p>An <a href="#dfn-r2rml-processor">R2RML processor</a> also has access
    to an execution environment consisting of:</p>

    <ul>
    <li>A <dfn id="dfn-sql-connection">SQL connection</dfn>
    to the <a href="#dfn-input-database">input database</a>,</li>
    <li>a <dfn id="dfn-base-iri">base IRI</dfn> used in resolving
    relative IRIs produced by the R2RML mapping.</li>
    </ul>

    <p>The <a href="#dfn-sql-connection">SQL connection</a> 
    is used by the R2RML processor to evaluate SQL queries against the input
    database. It <em class="rfc2119">MUST</em> be established
    with sufficient privileges for read access to all base tables and views that are
    referenced in the R2RML mapping. It <em class="rfc2119">MUST</em> be
    configured with a <dfn id="dfn-default-catalog">default catalog</dfn>
    and <dfn id="dfn-default-schema">default schema</dfn> that will be
    used when tables and views are accessed without an explicit
    catalog or schema reference.</p>

    <p>How the SQL connection is established, or how users
    are authenticated against the database, is outside of the scope of this document.</p>

    <p>The <a href="#dfn-base-iri">base IRI</a> <em class="rfc2119">MUST</em>
    be a valid <a href="#dfn-iri">IRI</a>. It <em class="rfc2119">SHOULD NOT</em>
    contain question mark (“<code>?</code>”) or hash (“<code>#</code>”)
    characters and <em class="rfc2119">SHOULD</em> end in a slash
    (“<code>/</code>”) character.</p>

    <div class="note">
    <p>To obtain an absolute IRI from a relative IRI, 
    the <a href="#dfn-term-generation-rules">term generation rules</a>
    of R2RML use simple string concatenation, rather than the more complex
    algorithm for resolution of relative URIs defined in 
    <a href="http://tools.ietf.org/html/rfc3986#section-5.2">Section 5.2</a>
    of [<cite><a href="#RFC3986">RFC3986</a></cite>].
    This ensures that the original database
    value can be reconstructed from the generated absolute IRI.
    Both algorithms are equivalent if all of the following are
    true:</p>
    <ol>
    <li>The base IRI does not contain question marks or hashes,</li>
    <li>the base IRI ends in a slash,</li>
    <li>the relative IRI does not start with a slash, and</li>
    <li>the relative IRI does not contain any
    “<code>.</code>” or “<code>..</code>” path segments.</li>
        </ol>
    </div>

    <p>An <dfn id="dfn-r2rml-data-validator">R2RML data validator</dfn>
    is a system that takes as its input an
    <a href="#dfn-r2rml-mapping">R2RML mapping</a>, a
    <a href="#dfn-base-iri">base IRI</a>, and a
    <a href="#dfn-sql-connection">SQL connection</a> to an
    <a href="#dfn-input-database">input database</a>, and checks for
    the presence of <a href="#dfn-data-error">data errors</a>.
    When checking the input database, a data validator
    <em class="rfc2119">MUST</em> report any data errors that are raised
    in the process of generating the output dataset.</p>

    <p>An <a href="#dfn-r2rml-processor">R2RML processor</a>
    <em class="rfc2119">MAY</em> include an
    <a href="#dfn-r2rml-data-validator">R2RML data validator</a>, but this
    is not required.</p>


    <h3 id="vocabulary">4.1 Mapping Graphs and the R2RML Vocabulary</h3>

    <p>An <a href="#dfn-r2rml-mapping">R2RML mapping</a> is represented
    as an <a href="#dfn-rdf-graph">RDF graph</a>. In other words,
    RDF is used not just as the target data model of the mapping, but also
    as a formalism for representing the R2RML mapping itself.</p>

    <p>An <a href="#dfn-rdf-graph">RDF graph</a> that represents an
    <a href="#dfn-r2rml-mapping">R2RML mapping</a> is called an
    <dfn id="dfn-r2rml-mapping-graph">R2RML mapping graph</dfn>.</p>

    <p>The <dfn id="dfn-r2rml-vocabulary">R2RML vocabulary</dfn> is the
    set of <a href="#dfn-iri">IRIs</a> defined in this specification
    that start with the <code>rr:</code> namespace IRI:</p>

    <pre><strong><a href="http://www.w3.org/ns/r2rml#">http://www.w3.org/ns/r2rml#</a></strong></pre>

    <p>An <a href="#dfn-r2rml-mapping-graph">R2RML mapping graph</a>:</p>

    <ul>
    <li><em class="rfc2119">SHOULD NOT</em> include any
    <a href="#dfn-iri">IRIs</a> that start with the <code>rr:</code>
    namespace IRI, but are not defined in the
    <a href="#dfn-r2rml-vocabulary">R2RML vocabulary</a>.</li>

    <li><em class="rfc2119">SHOULD NOT</em> include
    <a href="#dfn-iri">IRIs</a> from the
    <a href="#dfn-r2rml-vocabulary">R2RML vocabulary</a> where
    such use is not explicitly allowed or required by a clause in this
    specification.</li>

    <li><em class="rfc2119">SHOULD</em> contain only
    <a href="#dfn-mapping-component">mapping components</a>
    that are referenced by some <a href="#dfn-triples-map">triples map</a>
    (in other words, all mapping components should actually be “used”
    in the mapping).</li>

    <li><em class="rfc2119">MAY</em> contain arbitrary additional
    <a href="#dfn-rdf-triple">triples</a> whose terms are not 
    from the <a href="#dfn-r2rml-vocabulary">R2RML vocabulary</a>.
    In particular, a valid mapping graph <em class="rfc2119">MAY</em>
    contain documentation in the form of <code>rdfs:label</code>,
    <code>rdfs:comment</code> and similar properties.</li>

    <li><em class="rfc2119">MAY</em> assign <a href="#dfn-iri">IRIs</a>
    or <a href="#dfn-blank-node-identifier">blank node identifiers</a>
    to any <a href="#dfn-mapping-component">mapping component</a> in order
    to enable reuse of mapping components within the mapping graph.
    For example, an IRI that represents
    a <a href="#dfn-subject-map">subject map</a> may be used as the subject 
    map of multiple <a href="#dfn-triples-map">triples maps</a>; and may
    even be used as an <a href="#dfn-object-map">object map</a> of another
    triples map if it has the right properties.</li>
    </ul>

    <p>The <a href="#dfn-r2rml-vocabulary">R2RML vocabulary</a> also
    includes the following <dfn id="dfn-r2rml-classes">R2RML classes</dfn>:</p>

    <ul>
      <li><code>rr:TriplesMap</code> is the class of
      <a href="#dfn-triples-map">triples maps</a>.</li>
      <li><code>rr:LogicalTable</code> is the class of
      <a href="#dfn-logical-table">logical tables</a>. It has two subclasses:
        <ul>
          <li><code>rr:R2RMLView</code> is the class of
          <a href="#dfn-r2rml-view">R2RML views</a>.</li>
          <li><code>rr:BaseTableOrView</code> is the class of
          <a href="#dfn-sql-base-table-or-view">SQL base tables or views</a>.</li>
        </ul>
      </li>
      <li><code>rr:TermMap</code> is the class of
      <a href="#dfn-term-map">term maps</a>. It has four subclasses:
        <ul>
          <li><code>rr:SubjectMap</code> is the class of
          <a href="#dfn-subject-map">subject maps</a>.</li>
          <li><code>rr:PredicateMap</code> is the class of
          <a href="#dfn-predicate-map">predicate maps</a>.</li>
          <li><code>rr:ObjectMap</code> is the class of
          <a href="#dfn-object-map">object maps</a>.</li>
          <li><code>rr:GraphMap</code> is the class of
          <a href="#dfn-graph-map">graph maps</a>.</li>
        </ul>
      </li>
      <li><code>rr:PredicateObjectMap</code> is the class of
      <a href="#dfn-predicate-object-map">predicate-object maps</a>.</li>
      <li><code>rr:RefObjectMap</code> is the class of
      <a href="#dfn-referencing-object-map">referencing object maps</a>.</li>
      <li><code>rr:Join</code> is the class of
      <a href="#dfn-join-condition">join conditions</a>.</li>
    </ul>

    <p>The members of these classes are collectively called
    <dfn id="dfn-mapping-component">mapping components</dfn>.</p>

    <p class="note">Many of these classes differ only in capitalization from
    properties in the <a href="#dfn-r2rml-vocabulary">R2RML vocabulary</a>.</p>

    <p>Explicit typing of the resources in a mapping graph with
    <a href="#dfn-r2rml-classes">R2RML classes</a>
    is <em class="rfc2119">OPTIONAL</em> and
    has no effect on the behaviour of an
    <a href="#dfn-r2rml-processor">R2RML processor</a>.
    The <a href="#dfn-mapping-component">mapping component</a>
    represented by any given resource in a mapping graph is defined by the
    presence or absence of certain properties, as defined throughout this
    specification. A resource <em class="rfc2119">SHOULD NOT</em>
    be typed as an R2RML class if it does not meet the definition
    of that class.</p>


    <h3 id="syntax">4.2 RDF-based Turtle Syntax; Media Type</h3>

    <p>An <dfn id="dfn-r2rml-mapping-document">R2RML mapping document</dfn> is any document
    written in the <cite><a class="norm" href=
    "http://www.w3.org/TR/turtle/">Turtle</a></cite>
    [<cite><a href="#TURTLE">TURTLE</a></cite>] RDF syntax that encodes an
    <a href="#dfn-r2rml-mapping-graph">R2RML mapping graph</a>.</p>

    <p>The media type for <a href="#dfn-r2rml-mapping-document">R2RML mapping
    documents</a> is the same as for Turtle
    documents in general: <code>text/turtle</code>. The content encoding of
    Turtle content is always UTF-8 and the <code>charset</code> parameter
    on the media type <em class="rfc2119">SHOULD</em> always be used:
    <code>text/turtle;charset=utf-8</code>. The file extension 
    <code>.ttl</code> <em class="rfc2119">SHOULD</em> be used.</p>

    <p>A conforming <a href="#dfn-r2rml-processor">R2RML processor</a>
    <em class="rfc2119">SHOULD</em> accept
    <a href="#dfn-r2rml-mapping-document">R2RML mapping documents</a>
    in Turtle syntax. It <em class="rfc2119">MAY</em> accept
    <a href="#dfn-r2rml-mapping-graph">R2RML mapping graphs</a> encoded in
    other RDF syntaxes.</p>


    <h3 id="data-errors">4.3 Data Errors</h3>

    <p>A <dfn id="dfn-data-error">data error</dfn> is a condition
    of the data in the <a href="#dfn-input-database">input database</a>
    that would lead to the generation of an invalid
    <a href="#dfn-rdf-term">RDF term</a>.  
    The following conditions give rise to data errors:</p>

    <ol>
    <li>A <a href="#dfn-term-map">term map</a> with
    <a href="#dfn-term-type">term type</a> <code>rr:IRI</code>
    results in the <a href="#dfn-generated-rdf-term">generation</a>
    of an invalid <a href="#dfn-iri">IRI</a>.</li>
    <li>A <a href="#dfn-term-map">term map</a> whose
    <a href="#dfn-natural-rdf-datatype">natural RDF datatype</a> is
    overridden with a <a href="#dfn-specified-datatype">specified datatype</a>
    produces an <a href="#dfn-ill-typed">ill-typed literal</a> (see
    <a href="#dfn-datatype-override-rdf-literal">datatype-override RDF
    literal</a>).</li>
    </ol>

    <p>When providing access to the
    <a href="#dfn-output-dataset">output dataset</a>, an
    <a href="#dfn-r2rml-processor">R2RML processor</a>
    <em class="rfc2119">MUST</em> abort any operation that
    requires inspecting or returning an <a href="#dfn-rdf-term">RDF term</a>
    whose generation would give rise to a
    <a href="#dfn-data-error">data error</a>, and report an error
    to the agent invoking the operation. A conforming
    <a href="#dfn-r2rml-processor">R2RML processor</a>
    <em class="rfc2119">MAY</em>, however, allow other operations
    that do not require inspecting or returning these
    <a href="#dfn-rdf-term">RDF terms</a>,
    and thus <em class="rfc2119">MAY</em> provide partial access to an
    <a href="#dfn-output-dataset">output dataset</a> that contains
    data errors. Nevertheless, an
    <a href="#dfn-r2rml-processor">R2RML processor</a>
    <em class="rfc2119">SHOULD</em> report data errors as early as possible.</p>

    <p>The presence of <a href="#dfn-data-error">data errors</a>
    does not make an <a href="#dfn-r2rml-mapping">R2RML mapping</a>
    non-conforming.</p>

    <div class="note">
    <p><a href="#dfn-data-error">Data errors</a> cannot
    generally be detected by analyzing the table schema of the database,
    but only by scanning the data in the tables. For large and rapidly
    changing databases, this can be impractical. Therefore,
    <a href="#dfn-r2rml-processor">R2RML processors</a> are allowed to
    answer queries that do not “touch” a data error, and the behavior
    of such operations is well-defined. For the same reason,
    the conformance of <a href="#dfn-r2rml-mapping">R2RML mappings</a>
    is defined without regard for the presence of data errors.</p>

    <p><a href="#dfn-r2rml-data-validator">R2RML data validators</a>
    can be used to explicitly scan a database for data errors.</p>
    </div>


    <h3 id="default-mappings">4.4 Default Mappings</h3>

    <p>An <a href="#dfn-r2rml-processor">R2RML processor</a>
    <em class="rfc2119">MAY</em> include an
    <dfn id="dfn-r2rml-default-mapping-generator">R2RML default mapping generator</dfn>.
    This is a facility that introspects the schema of the
    <a href="#dfn-input-database">input database</a> and generates an
    <a href="#dfn-r2rml-mapping">R2RML mapping</a>, possibly in the form
    of an <a href="#dfn-r2rml-mapping-document">R2RML mapping document</a>,
    intended for further customization by a mapping author. Such a
    mapping is known as a <dfn id="dfn-default-mapping">default mapping</dfn>.</p>

    <p>The <a href="#dfn-default-mapping">default mapping</a>
    <em class="rfc2119">SHOULD</em> be such that its output is the
    <a class="norm" href="http://www.w3.org/TR/rdb-direct-mapping/#definition">Direct Graph</a>
    [<cite><a href="#DM">DM</a></cite>]
    corresponding to the <a href="#dfn-input-database">input database</a>.</p>

    <p><dfn id="dfn-duplicate-row-preservation">Duplicate row preservation</dfn>:
    For tables without a primary key, the
    <a class="norm" href="http://www.w3.org/TR/rdb-direct-mapping/#definition">Direct Graph</a>
    requires that a
    fresh <a href="#dfn-blank-node">blank node</a> is created for each row.
    This ensures that duplicate rows in such tables are preserved.
    This requirement is relaxed for
    R2RML <a href="#dfn-default-mapping">default mappings</a>:
    They <em class="rfc2119">MAY</em> reuse the same blank node for
    multiple duplicate rows. This behaviour does not preserve duplicate rows.
    <a href="#dfn-r2rml-default-mapping-generator">R2RML default mapping generators</a>
    that provide default mappings based on the Direct Graph
    <em class="rfc2119">MUST</em> document whether the generated
    <a href="#dfn-default-mapping">default mapping</a>
    <em>preserves duplicate rows</em> or not.</p>


    <h2 id="logical-tables">5 Defining Logical Tables</h2>

    <div class="figure">
     <img src="images/logical-table.png" alt="Diagram: The properties of logical tables"/>
      <br /><br />
      Figure 2: The properties of logical tables
    </div>

    <p>A <dfn id="dfn-logical-table">logical table</dfn> is a
    tabular SQL query result that is to be mapped to
    <a href="#dfn-rdf-triple">RDF triples</a>. A logical table is either</p>

    <ul>
    <li>a <a href="#dfn-sql-base-table-or-view">SQL base table or view</a>,
    or</li>
    <li>an <a href="#dfn-r2rml-view">R2RML view</a>.</li>
    </ul>

    <p>Every logical table has an
    <dfn id="dfn-effective-sql-query">effective SQL query</dfn> that,
    if executed over the <a href="#dfn-sql-connection">SQL connection</a>,
    produces as its result the contents of the logical table.</p>

    <p>A <dfn id="dfn-logical-table-row">logical table row</dfn> is a row
    in a <a href="#dfn-logical-table">logical table</a>.</p>

    <p>A <dfn id="dfn-column-name">column name</dfn> is the name of a
    column of a <a href="#dfn-logical-table">logical table</a>. A column name
    <em class="rfc2119">MUST</em> be a valid
    <a href="#dfn-sql-identifier">SQL identifier</a>. Column names
    do not include any qualifying table, view or schema names.</p>

    <p>A <dfn id="dfn-sql-identifier">SQL identifier</dfn> is the name of
    a SQL object, such as a column, table, view, schema, or catalog.
    A SQL identifier
    <em class="rfc2119">MUST</em> match the <code>&lt;identifier&gt;</code>
    production in [<cite><a href="#SQL2">SQL2</a></cite>].  When
    comparing identifiers for equality, the comparison rules
    of [<cite><a href="#SQL2">SQL2</a></cite>] <em class="rfc2119">MUST</em>
    be used.</p>

    <div class="note">
    An informative summary of SQL identifier syntax rules:
    <ol>
    <li>SQL identifiers can be delimited identifiers (with double quotes),
    or regular identifiers.</li>
    <li>Regular identifiers must start with a Unicode character from
    any of the following character classes: upper-case letter,
    lower-case letter, title-case letter, modifier letter, other letter,
    or letter number. Subsequent characters may be any of these, or
    a nonspacing mark, spacing combining mark, decimal number,
    connector punctuation, and formatting code.</li>
    <li>Regular identifiers are case-insensitive.</li>
    <li>Delimited identifiers can contain any character.</li>
    <li>A double-quote character inside a delimited identifier is escaped by
    appending a second double-quote character.</li>
    <li>Delimited identifiers are case-sensitive.</li>
    <li><code>deptno</code> and <code>"deptno"</code> are not equivalent
    (delimited identifiers that are not all-upper-case are
    not equivalent to any undelimited identifiers).</li>
    <li><code>DEPTNO</code> and <code>"DEPTNO"</code> are equivalent
    (all-upper-case delimited and undelimited identifiers are equivalent).</li>
    <li>Five examples of valid column names:
    <code>deptno</code>, <code>dept_no</code>, <code>"dept_no"</code>,
    <code>"Department Number"</code>,
    <code>"Identifier ""with quotes"""</code>.</li>
    </ol>
    Note that Turtle string syntax requires escaping of double quotes with
    a backslash, so the identifiers from the list above might be
    written like this if occurring inside an R2RML mapping document:
    <pre>[] rr:column "deptno".
[] rr:column "dept_no".
[] rr:column "\"dept_no\"".
[] rr:column "\"Department Number\"".
[] rr:column "\"Identifier \"\"with quotes\"\"\"".</pre>
    These rules are for <em>Core SQL 2008</em>. See
    <a href="#conformance">Section 3,
    <em>Conformance</em></a> regarding databases that do not conform to this
    version of SQL.
    </div>


    <h3 id="physical-tables">5.1 Base Tables and SQL Views (<code>rr:tableName</code>)</h3>

    <p>A <dfn id="dfn-sql-base-table-or-view">SQL base table or view</dfn> is a
    <a href="#dfn-logical-table">logical table</a> containing
    SQL data from a base table or view in the
    <a href="#dfn-input-database">input database</a>.
    A SQL base table or view is represented by a resource that
    has exactly one <code>rr:tableName</code> property.</p>

    <p>The value of <code>rr:tableName</code> specifies the
    <dfn id="dfn-table-or-view-name">table or view name</dfn> of the base table or view.
    Its value <em class="rfc2119">MUST</em>
    be a valid <a href="#dfn-schema-qualified-name">schema-qualified name</a>
    that names an existing base table or view in the
    <a href="#dfn-input-database">input database</a>.</p>

    <p>A <dfn id="dfn-schema-qualified-name">schema-qualified name</dfn>
    is a sequence of one, two or three valid
    <a href="#dfn-sql-identifier">SQL identifiers</a>, separated
    by the dot character (“<code>.</code>”). The three identifiers
    name, respectively, a catalog, a schema, and a table or view.
    If no catalog or schema is specified, then the
    <a href="#dfn-default-catalog">default catalog</a> and
    <a href="#dfn-default-schema">default schema</a> of the
    <a href="#dfn-sql-connection">SQL connection</a> are assumed.</p>

    <p>The <a href="#dfn-effective-sql-query">effective SQL query</a>
    of a <a href="#dfn-sql-base-table-or-view">SQL base table or view</a> is:</p>

    <pre>SELECT * FROM <em>{table}</em></pre>
    <p>with <code><em>{table}</em></code>
    replaced with the
    <a href="#dfn-table-or-view-name">table or view name</a>.</p>

    <p>The following example shows a logical table specified using 
    a schema-qualified table name.</p>
    <pre class="ex-mapping">
[] rr:tableName "SCOTT.DEPT".
</pre>

    <p>The following example shows a logical table specified using 
    an unqualified table name. The SQL connection's default
    schema will be used.</p>
    <pre class="ex-mapping">
[] rr:tableName "DEPT".
</pre>


    <h3 id="r2rml-views">5.2 R2RML Views (<code>rr:sqlQuery</code>, <code>rr:sqlVersion</code>)</h3>

    <p>An <dfn id="dfn-r2rml-view">R2RML view</dfn>
    is a <a href="#dfn-logical-table">logical table</a> whose contents
    are the result of executing a SQL query against the
    <a href="#dfn-input-database">input database</a>. It is represented
    by a resource that has exactly one <code>rr:sqlQuery</code> property,
    whose value is a <a href="#dfn-literal">literal</a> with a
    <a href="#dfn-lexical-form">lexical form</a> that is a valid
    <a href="#dfn-sql-query">SQL query</a>.</p>

    <p class="note">
    R2RML mappings sometimes require data transformation, computation,
    or filtering before
    generating triples from the database. This can be achieved by defining
    a SQL view in the <a href="#dfn-input-database">input database</a>
    and referring to it with
    <a href="#dfn-sql-base-table-or-view"><code>rr:tableName</code></a>.
    However, this approach
    may sometimes not be practical for lack of database privileges or other
    reasons. <a href="#dfn-r2rml-view">R2RML views</a>
    achieve the same effect without requiring changes to the
    input database.</p>

    <p class="note">
    Note that unlike “real” SQL views, an R2RML view can not be
    used as an input table in further SQL queries.
    </p>

    <p>A <dfn id="dfn-sql-query">SQL query</dfn> is a <code>SELECT</code>
    query in the SQL language that can be executed over the
    <a href="#dfn-input-database">input database</a>.
    The string <em class="rfc2119">MUST</em>
    conform to the production
    <code>&lt;direct select statement: multiple rows&gt;</code>
    in [<cite><a href="#SQL2">SQL2</a></cite>] with an
    <em class="rfc2119">OPTIONAL</em> trailing semicolon character and
    <em class="rfc2119">OPTIONAL</em> surrounding white space (excluding
    comments) as defined in [<cite><a href="#TURTLE">TURTLE</a></cite>].
    It <em class="rfc2119">MUST</em> be valid to execute over
    the <a href="#dfn-sql-connection">SQL connection</a>.
    The result of the query execution
    <em class="rfc2119">MUST NOT</em> have duplicate
    <a href="#dfn-column-name">column names</a>.
    Any columns in the <code>SELECT</code>
    list derived by projecting an expression <em class="rfc2119">SHOULD</em>
    be named, because otherwise they cannot be reliably referenced in the
    rest of the mapping.</p>

    <p>Database objects referenced in the
    SQL query <em class="rfc2119">MAY</em> be qualified with
    a catalog or schema name. For any
    database objects referenced without an explicit catalog name
    or schema name, the <a href="#dfn-default-catalog">default catalog</a>
    and <a href="#dfn-default-schema">default schema</a> of the
    <a href="#dfn-sql-connection">SQL connection</a> are assumed.</p>

    <p>For example, the following <code>SELECT</code> query is
    <strong>not a valid</strong> R2RML <a href="#dfn-sql-query">SQL query</a>
    because the result contains a duplicate column name <code>DEPTNO</code>:</p>

    <pre class="ex-sql">SELECT EMP.DEPTNO, 1 AS DEPTNO FROM EMP;</pre>

    <p>As a further example, the following <code>SELECT</code> query 
    <em class="rfc2119">SHOULD NOT</em> be used, because it
    contains an unnamed column derived from a <code>COUNT</code> expression:</p>

    <pre class="ex-sql">SELECT DEPTNO, COUNT(EMPNO) FROM EMP GROUP BY DEPTNO;</pre>

    <p>An <a href="#dfn-r2rml-view">R2RML view</a>
    <em class="rfc2119">MAY</em> have one or more
    <dfn id="dfn-sql-version-identifier">SQL version identifiers</dfn>.
    They <em class="rfc2119">MUST</em> be valid <a href="#dfn-iri">IRIs</a>
    and are represented as values of the <code>rr:sqlVersion</code>
    property. The following <a href="#dfn-sql-version-identifier">SQL version
    identifier</a> indicates that the SQL query conforms to
    Core SQL 2008:</p>

    <pre>http://www.w3.org/ns/r2rml#SQL2008</pre>

    <p>The absence of a <a href="#dfn-sql-version-identifier">SQL version
    identifier</a> indicates that no claim to Core SQL 2008 conformance
    is made.</p>

    <p class="note">No further identifiers besides <code>rr:SQL2008</code>
    are defined in this specification.
    The RDB2RDF Working Group intends to maintain a non-normative
    <cite><a href="http://www.w3.org/2001/sw/wiki/RDB2RDF/SQL_Version_IRIs">list
    of identifiers for other SQL versions</a></cite>
    [<cite><a href="#SQLIRIS">SQLIRIS</a></cite>].</p>

    <p>The <a href="#dfn-effective-sql-query">effective SQL query</a>
    of an <a href="#dfn-r2rml-view">R2RML view</a> is the value of its
    <code>rr:sqlQuery</code> property.</p>

    <p id="ex-r2rml-view">The following example shows a logical table specified as an R2RML view
    conforming to Core SQL 2008.</p>
    <pre class="ex-mapping">
[] rr:sqlQuery """
        Select ('Department' || DEPTNO) AS DEPTID
             , DEPTNO
             , DNAME
             , LOC
          from SCOTT.DEPT
    """;
    rr:sqlVersion rr:SQL2008.</pre>


    <h2 id="triples-map">6 Mapping Logical Tables to RDF with Triples Maps</h2>

    <div class="figure">
     <img src="images/triples-map.png" alt="Diagram: The properties of triples maps"/>
      <br /><br />
      Figure 3: The properties of triples maps
    </div>

    <p>A <dfn id="dfn-triples-map">triples map</dfn> specifies a rule
    for translating each row of a <a href="#dfn-logical-table">logical table</a>
    to zero or more <a href="#dfn-rdf-triple">RDF triples</a>.</p>

    <p>The RDF triples generated from one row in the logical table
    all share the same subject.</p>

    <p>A triples map is represented by a resource that references the
    following other resources:</p>

    <ul>
    <li>It <em class="rfc2119">MUST</em> have exactly one
    <code>rr:logicalTable</code> property.
    Its value is a <a href="#dfn-logical-table">logical table</a>
    that specifies a SQL query result to be mapped to triples.</li>

    <li>It <em class="rfc2119">MUST</em> have exactly one
    <a href="#dfn-subject-map">subject map</a>
    that specifies how to generate a subject for each row of the
    logical table. It may be specified in two ways:
      <ol>
      <li>using the <code>rr:subjectMap</code> property,
      whose value <em class="rfc2119">MUST</em> be
      the subject map, or</li>
      <li>using the <a href="#dfn-constant-shortcut-property">constant
      shortcut property</a> <code>rr:subject</code>.</li>
      </ol>
    </li>

    <li>It <em class="rfc2119">MAY</em> have zero or more
    <code>rr:predicateObjectMap</code> properties,
    whose values <em class="rfc2119">MUST</em> be
    <a href="#dfn-predicate-object-map">predicate-object maps</a>.
    They specify pairs of predicate maps and object maps that,
    together with the
    subjects generated by the subject map, may form one or more
    <a href="#dfn-rdf-triple">RDF triples</a> for each row.</li>
    </ul>
    
    <p>The <a href="#dfn-referenced-columns">referenced columns</a> of
    all <a href="#dfn-term-map">term maps</a> of a triples map
    (subject map, predicate maps, object maps, graph maps)
    <em class="rfc2119">MUST</em>
    be <a href="#dfn-column-name">column names</a> that exist
    in the term map's <a href="#dfn-logical-table">logical table</a>.</p>

    <p>The following example shows a <a href="#dfn-triples-map">triples map</a>
    including its logical table, subject map, and two predicate-object maps.</p>

    <pre class="ex-mapping">
[]
    rr:logicalTable [ rr:tableName "DEPT" ];
    rr:subjectMap [ rr:template "http://data.example.com/department/{DEPTNO}" ];
    rr:predicateObjectMap [
        rr:predicate ex:name;
        rr:objectMap [ rr:column "DNAME" ];
    ];
    rr:predicateObjectMap [
        rr:predicate ex:location;
        rr:objectMap [ rr:column "LOC" ];
    ].</pre>


    <h3 id="subject-map">6.1 Creating Resources with Subject Maps</h3>

    <p>A <dfn id="dfn-subject-map">subject map</dfn> is a
    <a href="#dfn-term-map">term map</a>. It specifies a rule
    for generating the subjects of the
    <a href="#dfn-rdf-triple">RDF triples</a> generated by a
    <a href="#dfn-triples-map">triples map</a>.</p>


    <h3 id="typing">6.2 Typing Resources (<code>rr:class</code>)</h3>

    <p>A <a href="#dfn-subject-map">subject map</a> <em class="rfc2119">MAY</em>
    have one or more <dfn id="dfn-class-iri">class IRIs</dfn>. They are
    represented by the <code>rr:class</code> property. The values
    of the <code>rr:class</code> property
    <em class="rfc2119">MUST</em> be <a href="#dfn-iri">IRIs</a>.
    For each <a href="#dfn-rdf-term">RDF term</a> generated by the subject map,
    <a href="#dfn-rdf-triple">RDF triples</a> with predicate
    <code>rdf:type</code> and the class IRI as object will be generated.</p>

    <p class="note">Mappings where the class IRI is not constant, but needs
    to be computed based on the contents of the database, can be achieved by
    defining a <a href="#dfn-predicate-object-map">predicate-object map</a>
    with predicate <code>rdf:type</code> and a non-constant
    <a href="#dfn-object-map">object map</a>.</p>

    <p>In the following example, the generated subject will be asserted
    as an instance of the <code>ex:Employee</code> class.</p>
    <pre class="ex-mapping">
[] rr:template "http://data.example.com/employee/{EMPNO}"; 
   rr:class ex:Employee.
</pre>

    <p>Using the example <a href="#ex_EMP"><code>EMP</code> table</a>,
    the following RDF triple will be generated:</p>
    <pre class="ex-output">
&lt;http://data.example.com/emp/7369&gt; rdf:type ex:Employee.
</pre>


    <h3 id="predicate-object-map">6.3 Creating Properties and Values with Predicate-Object Maps</h3>

    <p>A <dfn id="dfn-predicate-object-map">predicate-object map</dfn> is
    a function that creates one or more predicate-object pairs for
    each <a href="#dfn-logical-table-row">logical table row</a> of a
    <a href="#dfn-logical-table">logical table</a>. It is
    used in conjunction with a <a href="#dfn-subject-map">subject map</a>
    to generate <a href="#dfn-rdf-triple">RDF triples</a> in a
    <a href="#dfn-triples-map">triples map</a>.</p>

    <p>A <a href="#dfn-predicate-object-map">predicate-object map</a>
    is represented by a resource that references the following
    other resources:</p>

    <ul>
    <li>
      <p>One or more <a href="#dfn-predicate-map">predicate maps</a>.
      Each of them may be specified in one of two ways:</p>
      <ol>
      <li>using the <code>rr:predicateMap</code> property, whose value
      <em class="rfc2119">MUST</em> be a
      <a href="#dfn-predicate-map">predicate map</a>, or</li>
      <li>using the <a href="#dfn-constant-shortcut-property">constant
      shortcut property</a> <code>rr:predicate</code>.</li>
      </ol>
    </li>
    <li>
      <p>One or more <a href="#dfn-object-map">object maps</a> or
      <a href="#dfn-referencing-object-map">referencing object maps</a>.
      Each of them may be specified in one of two ways:</p>
      <ol>
      <li>using the <code>rr:objectMap</code> property, whose value
      <em class="rfc2119">MUST</em> be either an
      <a href="#dfn-object-map">object map</a>, or a
      <a href="#dfn-referencing-object-map">referencing object map</a>.</li>
      <li>using the <a href="#dfn-constant-shortcut-property">constant
      shortcut property</a> <code>rr:object</code>.</li>
      </ol>
    </li>
    </ul>

    <p>A <dfn id="dfn-predicate-map">predicate map</dfn> is a
    <a href="#dfn-term-map">term map</a>.</p>

    <p>An <dfn id="dfn-object-map">object map</dfn>
    is a <a href="#dfn-term-map">term map</a>.</p>


    <h2 id="term-map">7 Creating RDF Terms with Term Maps</h2>

    <div class="figure">
     <img src="images/term-map.png" alt="Diagram: The properties of term maps"/>
      <br /><br />
      Figure 4: The properties of term maps
    </div>

    <p>An <dfn id="dfn-rdf-term">RDF term</dfn> is either an
    <a href="#dfn-iri">IRI</a>, or a <a href="#dfn-blank-node">blank node</a>,
    or a <a href="#dfn-literal">literal</a>.</p>

    <p>A <dfn id="dfn-term-map">term map</dfn> is a function that generates
    an <a href="#dfn-rdf-term">RDF term</a> from a
    <a href="#dfn-logical-table-row">logical table row</a>. The result of
    that function is known as the term map's
    <a href="#dfn-generated-rdf-term">generated RDF term</a>.</p>

    <p>Term maps
    are used to generate the subjects, predicates and objects of the
    <a href="#dfn-rdf-triple">RDF triples</a> that are generated by
    a <a href="#dfn-triples-map">triples map</a>. Consequently, there
    are several kinds of <a href="#dfn-term-map">term maps</a>,
    depending on where in the mapping they occur:
    <a href="#dfn-subject-map">subject maps</a>,
    <a href="#dfn-predicate-map">predicate maps</a>,
    <a href="#dfn-object-map">object maps</a> and
    <a href="#dfn-graph-map">graph maps</a>.</p>

    <p>A <a href="#dfn-term-map">term map</a> <em class="rfc2119">MUST</em>
    be exactly one of the following:</p>

    <ul>
    <li>a <a href="#dfn-constant-valued-term-map">constant-valued term map</a>,</li>
    <li>a <a href="#dfn-column-valued-term-map">column-valued term map</a>,</li>
    <li>a <a href="#dfn-template-valued-term-map">template-valued term map</a>.</li>
    </ul>

    <p>The <dfn id="dfn-referenced-columns">referenced columns</dfn> of a
    <a href="#dfn-term-map">term map</a> are the set of
    <a href="#dfn-column-name">column names</a> referenced
    in the term map and depend on the type of term map.</p>


    <h3 id="constant">7.1 Constant RDF Terms (<code>rr:constant</code>)</h3>

    <p>A <dfn id="dfn-constant-valued-term-map">constant-valued term map</dfn>
    is a <a href="#dfn-term-map">term map</a> that ignores the
    <a href="#dfn-logical-table-row">logical table row</a> and always generates
    the same RDF term. A constant-valued term map is represented by a
    resource that has exactly one <code>rr:constant</code>
    property.</p>

    <p>The <dfn id="dfn-constant-value">constant value</dfn> of a
    <a href="#dfn-constant-valued-term-map">constant-valued term map</a>
    is the RDF term that is the value of its <code>rr:constant</code>
    property.</p>

    <p>If the 
    <a href="#dfn-constant-valued-term-map">constant-valued term map</a>
    is a <a href="#dfn-subject-map">subject map</a>,
    <a href="#dfn-predicate-map">predicate map</a> or
    <a href="#dfn-graph-map">graph map</a>, then its
    <a href="#dfn-constant-value">constant value</a>
    <em class="rfc2119">MUST</em> be an <a href="#dfn-iri">IRI</a>.</p>

    <p>If the 
    <a href="#dfn-constant-valued-term-map">constant-valued term map</a>
    is an <a href="#dfn-object-map">object map</a>, then its
    <a href="#dfn-constant-value">constant value</a>
    <em class="rfc2119">MUST</em> be an
    <a href="#dfn-iri">IRI</a> or <a href="#dfn-literal">literal</a>.</p>

    <p>The <a href="#dfn-referenced-columns">referenced columns</a> of
    a <a href="#dfn-constant-valued-term-map">constant-valued term map</a>
    is the empty set.</p>

    <p>Constant-valued term maps can be expressed more concisely using the
    <dfn id="dfn-constant-shortcut-property">constant shortcut properties</dfn>
    <code>rr:subject</code>, <code>rr:predicate</code>,
    <code>rr:object</code> and <code>rr:graph</code>.
    Occurrences of these properties <em class="rfc2119">MUST</em> be 
    treated exactly as if the following triples were present in the
    mapping graph instead:</p>

    <table rules="all" summary="Constant shortcut properties and their replacements">
      <tr>
        <th>Triple involving constant shortcut property</th>
        <th>Replacement triples</th>
      </tr>
      <tr>
        <td><code><em>?x</em> rr:subject <em>?y</em>.</code></td>
        <td><code><em>?x</em> rr:subjectMap [ rr:constant <em>?y</em> ].</code></td>
      </tr>
      <tr>
        <td><code><em>?x</em> rr:predicate <em>?y</em>.</code></td>
        <td><code><em>?x</em> rr:predicateMap [ rr:constant <em>?y</em> ].</code></td>
      </tr>
      <tr>
        <td><code><em>?x</em> rr:object <em>?y</em>.</code></td>
        <td><code><em>?x</em> rr:objectMap [ rr:constant <em>?y</em> ].</code></td>
      </tr>
      <tr>
        <td><code><em>?x</em> rr:graph <em>?y</em>.</code></td>
        <td><code><em>?x</em> rr:graphMap [ rr:constant <em>?y</em> ].</code></td>
      </tr>
    </table>

    <p>The following example shows a
    <a href="#dfn-predicate-object-map">predicate-object map</a> that
    uses a constant-valued term map both for its predicate and for its
    object.</p>
    <pre class="ex-mapping">
[] rr:predicateMap [ rr:constant rdf:type ];
   rr:objectMap [ rr:constant ex:Employee ].</pre>
    
    <p>If added to a <a href="#dfn-triples-map">triples map</a>,
    this predicate-object map would add the following triple to
    all resources <code>?x</code> generated by the triples map:</p>
    <pre class="ex-output">
?x rdf:type ex:Employee.</pre>

    <p>The following example uses
    <a href="#dfn-constant-shortcut-property">constant shortcut properties</a>
    and is equivalent to the example above:</p>

    <pre class="ex-mapping">
[] rr:predicate rdf:type;
   rr:object ex:Employee.</pre>


    <h3 id="from-column">7.2 From a Column (<code>rr:column</code>)</h3>

    <p>A <dfn id="dfn-column-valued-term-map">column-valued term map</dfn>
    is a <a href="#dfn-term-map">term map</a> that is represented by
    a resource that has exactly one <code>rr:column</code> property.</p>

    <p>The value of the <code>rr:column</code> property
    <em class="rfc2119">MUST</em> be a valid
    <a href="#dfn-column-name">column name</a>. The
    <dfn id="dfn-column-value">column value</dfn> of the term map
    is the data value of that column in a given
    <a href="#dfn-logical-table-row">logical table row</a>.</p>

    <p>The <a href="#dfn-referenced-columns">referenced columns</a> of
    a <a href="#dfn-column-valued-term-map">column-valued term map</a>
    is the singleton set containing the value of the
    term map's <code>rr:column</code> property.</p>

    <p>The following example defines an <a href="#dfn-object-map">object map</a>
    that generates <a href="#dfn-literal">literals</a> from the
    <code>DNAME</code> column of some logical table.</p>
    <pre class="ex-mapping">
[] rr:objectMap [ rr:column "DNAME" ].</pre>

    <p>Using the sample row from the
    <a href="#ex_DEPT"><code>DEPT</code> table</a> as a logical table
    row, the <a href="#dfn-column-value">column value</a> of the object map
    would be “<code>APPSERVER</code>”.</p>


    <h3 id="from-template">7.3 From a Template (<code>rr:template</code>)</h3>

    <p>A <dfn id="dfn-template-valued-term-map">template-valued term map</dfn>
    is a <a href="#dfn-term-map">term map</a> that is represented by
    a resource that has exactly one <code>rr:template</code> property.
    The value of the <code>rr:template</code> property
    <em class="rfc2119">MUST</em> be a valid
    <a href="#dfn-string-template">string template</a>.</p>

    <p>A <dfn id="dfn-string-template">string template</dfn> is a
    format string that can be used to build strings from multiple
    components. It can reference
    <a href="#dfn-column-name">column names</a> by enclosing
    them in curly braces (“<code>{</code>” and “<code>}</code>”).
    The following syntax rules apply to valid
    string templates:</p>

    <ul>
    <li>Pairs of unescaped curly braces <em class="rfc2119">MUST</em> enclose
    valid <a href="#dfn-column-name">column names</a>.</li>
    <li>Curly braces that do not enclose column names
    <em class="rfc2119">MUST</em> be escaped by a backslash character
    (“<code>\</code>”). This also applies to curly braces within column names.</li>
    <li>Backslash characters (“<code>\</code>”)
    <em class="rfc2119">MUST</em> be escaped by
    preceding them with another backslash character, yielding “<code>\\</code>”.
    This also applies to backslashes within column names.</li>
    <li>There <em class="rfc2119">SHOULD</em> be at least one pair
    of unescaped curly braces.</li>
    <li>If a template contains multiple pairs of unescaped curly braces,
    then any pair <em class="rfc2119">SHOULD</em> be separated from the next one
    by a <dfn id="dfn-safe-separator">safe separator</dfn>. This is any character or
    string that does not occur anywhere
    in any of the data values of either referenced column; or in the
    <a href="#dfn-iri-safe">IRI-safe versions</a> of the data values,
    if the <a href="#dfn-term-type">term type</a> is <code>rr:IRI</code>
    (see <a href="#note-safe-separators">note below</a>).</li>
    </ul>

    <p>The <dfn id="dfn-template-value">template value</dfn> of the term map
    for a given <a href="#dfn-logical-table-row">logical table row</a>
    is determined as follows:</p>

    <ol>
    <li>Let <code><em>result</em></code> be the
    <a href="#dfn-string-template">template string</a></li>
    <li>For each pair of unescaped curly braces in
    <code><em>result</em></code>:
      <ol>
      <li>Let <code><em>value</em></code> be the data value of the
      column whose name is enclosed in the curly braces</li>
      <li>If <code><em>value</em></code> is <code>NULL</code>,
      then return <code>NULL</code></li>
      <li>Let <code><em>value</em></code> be the
      <a href="#dfn-natural-rdf-lexical-form">natural RDF lexical form</a>
      corresponding to <code><em>value</em></code></li>
      <li>If the <a href="#dfn-term-type">term type</a> is
      <code>rr:IRI</code>, then replace the pair of curly braces
      with an <a href="#dfn-iri-safe">IRI-safe version</a> of
      <code><em>value</em></code>; otherwise, replace the pair
      of curly braces with <code><em>value</em></code></li>
      </ol>
    </li>
    <li>Return <code><em>result</em></code></li>
    </ol>

    <p>The <dfn id="dfn-iri-safe">IRI-safe version</dfn> of a string
    is obtained by applying the following transformation to any character
    that is not in the
    <cite><a class="norm" href="http://tools.ietf.org/html/rfc3987#section-2.2">
    <code>iunreserved</code> production</a></cite> in
    [<cite><a href="#RFC3987">RFC3987</a></cite>]:</p>

    <ol>
    <li>Convert the character to a sequence of one or more octets
    using <cite><a class="norm" href="http://tools.ietf.org/html/rfc3629">UTF-8</a></cite>
    [<cite><a href="#RFC3629">RFC3629</a></cite>]</li>
    <li><cite><a class="norm" href="http://tools.ietf.org/html/rfc3986#section-2.1">Percent-encode</a></cite>
    each octet [<cite><a href="#RFC3986">RFC3986</a></cite>]</li>
    </ol>

    <p>The following table shows examples of strings and their IRI-safe versions:</p>

    <table rules="all" id="example-iri-safe">
      <tr><th>String</th><th>IRI-safe version</th></tr>
      <tr><td>42</td><td>42</td></tr>
      <tr><td>Hello World!</td><td>Hello%20World%21</td></tr>
      <tr><td>2011-08-23T22:17:00Z</td><td>2011-08-23T22%3A17%3A00Z</td></tr>
      <tr><td>~A_17.1-2</td><td>~A_17.1-2</td></tr>
      <tr><td>葉篤正</td><td>葉篤正</td></tr>
    </table>

    <p class="note">R2RML always performs percent-encoding when IRIs are
    generated from string templates. If IRIs need to be generated without
    percent-encoding, then <code>rr:column</code> should be used instead
    of <code>rr:template</code>, with an
    <a href="#dfn-r2rml-view">R2RML view</a> that performs the string
    concatenation.</p>

    <p class="note" id="note-safe-separators">In the case of string templates
    that generate IRIs,
    any single character that is legal in an IRI, but percent-encoded
    in the <a href="#dfn-iri-safe">IRI-safe version</a> of a data value, is a
    <a href="#dfn-safe-separator">safe separator</a>.
    This includes in particular the eleven <code>sub-delim</code> characters defined in
    [<cite><a href="#RFC3987">RFC3987</a></cite>]:
    <code>!$&amp;'()*+,;=</code></p>

    <p>The <a href="#dfn-referenced-columns">referenced columns</a> of
    a <a href="#dfn-template-valued-term-map">template-valued term map</a>
    is the set of <a href="#dfn-column-name">column names</a> enclosed
    in unescaped curly braces in the
    <a href="#dfn-string-template">template string</a>.</p>

    <p>The following example defines a
    <a href="#dfn-subject-map">subject map</a> that generates
    <a href="#dfn-iri">IRIs</a> from the
    <code>DEPTNO</code> column of a logical table.</p>
    <pre class="ex-mapping">
[] rr:subjectMap [ rr:template "http://data.example.com/department/{DEPTNO}" ].</pre>

    <p>Using the sample row from the
    <a href="#ex_DEPT"><code>DEPT</code> table</a> as a logical table
    row, the <a href="#dfn-template-value">template value</a> of the subject map
    would be:</p>

    <pre class="ex-output">http://data.example.com/department/10</pre>

    <p>The following example shows how an <a href="#dfn-iri-safe">IRI-safe</a>
    template value is created:</p>
    <pre class="ex-mapping">
[] rr:subjectMap [ rr:template "http://data.example.com/site/{LOC}" ].</pre>

    <p>Using the sample row from the
    <a href="#ex_DEPT"><code>DEPT</code> table</a> as a logical table
    row, the <a href="#dfn-template-value">template value</a> of the subject map
    would be:</p>

    <pre class="ex-output">http://data.example.com/site/NEW%20YORK</pre>

    <p>The space character is not in the <code>iunreserved</code> set,
    and therefore percent-encoding is applied to the character, yielding
    “<code>%20</code>”.</p>

    <p>The following example shows the use of backslash escapes in string
    templates. The template will generate a fancy title such as</p>
    <pre>{{{ \o/ Hello World! \o/ }}}</pre>
    <p>from a string “<code>Hello World!</code>” in the <code>TITLE</code>
    column. By default, <code>rr:template</code> generates IRIs. Since
    the intention here is to create a literal instead,
    the <a href="#dfn-term-type">term type</a> has to be set.</p>
    <pre class="ex-mapping">
[] rr:objectMap [
    rr:template "\\{\\{\\{ \\\\o/ {TITLE} \\\\o/ \\}\\}\\}";
    rr:termType rr:Literal;
].</pre>
    <p>Note that because <a class="norm" href=
    "http://www.w3.org/TR/turtle/#string">
    backslashes need to be escaped by a second backslash
    in the Turtle syntax</a>
    [<cite><a href="#TURTLE">TURTLE</a></cite>],
    a double backslash is needed to escape each curly brace, and to
    get one literal backslash in the output one needs to write
    four backslashes in the template.</p>


    <h3 id="termtype">7.4 IRIs, Literal, Blank Nodes (<code>rr:termType</code>)</h3>

    <p>The <dfn id="dfn-term-type">term type</dfn> of a
    <a href="#dfn-column-valued-term-map">column-valued term map</a> or
    <a href="#dfn-template-valued-term-map">template-valued term map</a>
    determines the kind of
    <a href="#dfn-generated-rdf-term">generated RDF term</a>
    (<a href="#dfn-iri">IRIs</a>, <a href="#dfn-blank-node">blank nodes</a> or
    <a href="#dfn-literal">literals</a>).</p>

    <p>If the term map has an optional <code>rr:termType</code> property,
    then its <a href="#dfn-term-type">term type</a> 
    is the value of that property. The value <em class="rfc2119">MUST</em>
    be an IRI and <em class="rfc2119">MUST</em> be
    one of the following options:</p>

    <ul>
    <li>If the term map is a <a href="#dfn-subject-map">subject map</a>:
    <code>rr:IRI</code> or <code>rr:BlankNode</code></li>
    <li>If the term map is a <a href="#dfn-predicate-map">predicate map</a>:
    <code>rr:IRI</code></li>
    <li>If the term map is an <a href="#dfn-object-map">object map</a>:
    <code>rr:IRI</code>, <code>rr:BlankNode</code>, or <code>rr:Literal</code></li>
    <li>If the term map is a <a href="#dfn-graph-map">graph map</a>:
    <code>rr:IRI</code></li>
    </ul>

    <p>If the term map does not have a <code>rr:termType</code> property,
    then its <a href="#dfn-term-type">term type</a> is:</p>

    <ul>
    <li><code>rr:Literal</code>, if it is an
    <a href="#dfn-object-map">object map</a> and at least one of the following
    conditions is true:
      <ul>
      <li>It is a
      <a href="#dfn-column-valued-term-map">column-based term map</a>.</li>
      <li>It has a <code>rr:language</code> property (and thus a
      <a href="#dfn-specified-language-tag">specified language tag</a>).</li>
      <li>It has a <code>rr:datatype</code> property (and thus a
      <a href="#dfn-specified-datatype">specified datatype</a>).</li>
      </ul>
    </li>
    <li><code>rr:IRI</code>, otherwise.</li>
    </ul>

    <p class="note">Term maps with term type <code>rr:IRI</code>
    cause <a href="#dfn-data-error">data errors</a> if the value is not a
    valid <a href="#dfn-iri">IRI</a>
    (see <a href="#dfn-generated-rdf-term">generated RDF term</a> for details).
    Data values from the input database may require percent-encoding before
    they can be used in IRIs.
    <a href="#dfn-template-valued-term-map">Template-valued term maps</a>
    are a convenient way of percent-encoding data values.</p>

    <p class="note"><a href="#dfn-constant-valued-term-map">Constant-valued term maps</a>
    are not considered as having a <a href="#dfn-term-type">term type</a>,
    and specifying <code>rr:termType</code> on these term maps has no effect.
    The type of the generated RDF term is determined directly by the
    value of <code>rr:constant</code>: If it is an IRI, then an
    IRI will be generated; if it is a literal, a literal will be
    generated.</p>


    <h3 id="language-tags">7.5 Language Tags (<code>rr:language</code>)</h3>

    <p>A <a href="#dfn-term-map">term map</a> with a
    <a href="#dfn-term-type">term type</a> of <code>rr:Literal</code>
    <em class="rfc2119">MAY</em> have a
    <dfn id="dfn-specified-language-tag">specified language tag</dfn>.
    It is represented by the <code>rr:language</code> property on a term map.
    If present, its value <em class="rfc2119">MUST</em> be
    a valid <a href="#dfn-language-tag">language tag</a>.</p>

    <p>A specified language tag causes generated literals to be
    language-tagged plain literals. In the following example, plain
    literals with language tag “<code>en-us</code>” (U.S. English)
    will be generated for the data values in the <code>DNAME</code>
    column.</p>

    <pre class="ex-mapping">
[] rr:objectMap [ rr:column "DNAME"; rr:language "en-us" ].
</pre>


    <h3 id="typed-literals">7.6 Typed Literals (<code>rr:datatype</code>)</h3>

    <p>A <dfn id="dfn-datatypeable-term-map">datatypeable term map</dfn> is a
    <a href="#dfn-term-map">term map</a> with a
    <a href="#dfn-term-type">term type</a> of <code>rr:Literal</code>
    that does not have a
    <a href="#dfn-specified-language-tag">specified language tag</a>.</p>

    <p>Datatypeable term maps may generate
    <a href="#dfn-typed-literal">typed literals</a>. The datatype
    of these literals can be automatically determined based on the
    SQL datatype of the underlying logical table column (producing a
    <a href="#dfn-natural-rdf-literal">natural RDF literal</a>), or
    it can be explicitly overridden using <code>rr:datatype</code>
    (producing a <a href="#dfn-datatype-override-rdf-literal">datatype-override
    RDF literal</a>).</p>

    <p>A <a href="#dfn-datatypeable-term-map">datatypeable term map</a>
    <em class="rfc2119">MAY</em> have a <code>rr:datatype</code> property.
    Its value <em class="rfc2119">MUST</em> be an <a href="#dfn-iri">IRI</a>.
    This IRI is the <dfn id="dfn-specified-datatype">specified datatype</dfn>
    of the term map.</p>

    <p>A term map <em class="rfc2119">MUST NOT</em> have more than one
    <code>rr:datatype</code> value.</p>

    <p>A term map that is not a
    <a href="#dfn-datatypeable-term-map">datatypeable term map</a>
    <em class="rfc2119">MUST NOT</em> have an <code>rr:datatype</code>
    property.</p>

    <p>The <dfn id="dfn-implicit-sql-datatype">implicit SQL datatype</dfn>
    of a <a href="#dfn-datatypeable-term-map">datatypeable term map</a> is
    <code>CHARACTER VARYING</code> if the term map is a
    <a href="#dfn-template-valued-term-map">template-valued term map</a>;
    otherwise, it is the SQL datatype of the respective column in the
    <a href="#dfn-logical-table-row">logical table row</a>.</p>

    <p>See <a href="#dfn-generated-rdf-term">generated RDF term</a>
    for further details on generating literals from term maps.</p>

    <p class="note">One cannot explicitly state that a
    <a href="#dfn-plain-literal">plain literal</a> without
    <a href="#dfn-language-tag">language tag</a> should be generated.
    They are the default for string columns. To generate one from a
    non-string column, a
    <a href="#dfn-template-valued-term-map">template-valued term map</a>
    with a template such as <code>"{MY_COLUMN}"</code> and a
    <a href="#dfn-term-type">term type</a> of <code>rr:Literal</code>
    can be used.</p>

    <p>The following example shows an <a href="#dfn-object-map">object map</a>
    that overrides the default datatype of the logical table with
    an explicitly specified <code>xsd:positiveInteger</code> type.
    A <a href="#dfn-datatype-override-rdf-literal">datatype-override
    RDF literal</a> of that datatype will be generated from whatever
    is in the <code>EMPNO</code> column.</p>

    <pre class="ex-mapping">
[] rr:objectMap [ rr:column "EMPNO"; rr:datatype xsd:positiveInteger ].
</pre>


    <h3 id="inverse">7.7 Inverse Expressions (<code>rr:inverseExpression</code>)</h3>

    <p>An <dfn id="dfn-inverse-expression">inverse expression</dfn> is a
    <a href="#dfn-string-template">string template</a> associated with
    a <a href="#dfn-column-valued-term-map">column-valued term map</a> or
    <a href="#dfn-template-valued-term-map">template-value term map</a>.
    It is represented by the value of the <code>rr:inverseExpression</code>
    property. This property is <em class="rfc2119">OPTIONAL</em> and there
    <em class="rfc2119">MUST NOT</em> be more than one for a term map.</p>

    <p>Inverse expressions are useful for optimizing
    <a href="#dfn-term-map">term maps</a>
    that reference derived columns in
    <a href="#dfn-r2rml-view">R2RML views</a>.
    An inverse expression specifies an expression that
    allows “reversing” of a <a href="#dfn-generated-rdf-term">generated RDF term</a>
    and the construction of a SQL query that efficiently retrieves the
    <a href="#dfn-logical-table-row">logical table row</a> from which the
    term was generated. In particular, it allows the use of indexes
    on the underlying relational tables.</p>

    <p>Every pair of unescaped curly braces in the inverse expression is a
    <dfn id="dfn-column-reference">column reference in an inverse expression</dfn>.
    The string between the braces <em class="rfc2119">MUST</em> be a valid
    <a href="#dfn-column-name">column name</a>.</p>

    <p>An <a href="#dfn-inverse-expression">inverse expression</a>
    <em class="rfc2119">MUST</em> satisfy the following condition:</p>

    <ul>
    <li>Let <em>t</em> be the <a href="#dfn-logical-table">logical table</a>
    associated with this <a href="#dfn-term-map">term map</a></li>
    <li>Every <a href="#dfn-column-reference">column reference</a> in the
    inverse expression <em class="rfc2119">MUST</em> be an existing column
    in <em>t</em></li>
    <li>Given a <a href="#dfn-logical-table-row">logical table row</a>
    <em>r</em> in <em>t</em>, let <em>instantiation(r)</em> be the result of
    replacing each <a href="#dfn-column-reference">column reference</a>
    <em>c</em> in the inverse expression with:
      <ul>
      <li>the <a href="#dfn-quoted-data-value">quoted and escaped data value</a>
      of column
      <em>c</em> in <em>r</em>, if <em>c</em> is a
      <a href="#dfn-referenced-columns">referenced column</a>
      in the <a href="#dfn-term-map">term map</a></li>
      <li>the <a href="#dfn-column-name">column name</a>
      of column <em>c</em>, otherwise</li>
      </ul>
    </li>

    <li>Given a <a href="#dfn-logical-table-row">logical table row</a>
    <em>r</em> in <em>t</em>, let <em>same-term(r)</em>
    be the set of logical table rows in <em>t</em> that are the
    result of executing the following SQL query over the
    <a href="#dfn-sql-connection">SQL connection</a>:

    <pre>SELECT * FROM (<em>{query}</em>) AS tmp WHERE <em>{expr}</em></pre>

    where <code><em>{query}</em></code> is the
    <a href="#dfn-effective-sql-query">effective SQL query</a>
    of <em>t</em>, and <code><em>{expr}</em></code> is
    <em>instantiation(r)</em></li>

    <li>For every <a href="#dfn-logical-table-row">logical table row</a>
    <em>r</em> in <em>t</em> whose
    <a href="#dfn-generated-rdf-term">generated RDF term</a> <em>g</em>
    is not <code>NULL</code>, <em>same-term(r)</em>
    <em class="rfc2119">MUST</em> be exactly the set of logical table rows
    in <em>t</em> whose
    <a href="#dfn-generated-rdf-term">generated RDF term</a> is
    also <em>g</em>.</li>
    </ul>

    <p>For example, for the <code>DEPTID</code> column in the
    <a href="#dfn-logical-table">logical table</a> used for
    mapping the <code>DEPT</code> table in
    <a href="#ex-r2rml-view">this example mapping</a>,
    an inverse expression could be defined as follows:</p>

    <pre class="ex-mapping">
[] rr:column "DEPTID";
   rr:inverseExpression "{DEPTNO} = SUBSTRING({DEPTID}, CHARACTER_LENGTH('Department')+1)";
</pre>

    <p>This facilitates the use of an existing index on the <code>DEPTNO</code>
    column of the <a href="#ex_DEPT">DEPT table</a>.</p>

    <p>A <dfn id="dfn-quoted-data-value">quoted and escaped data value</dfn>
    is any SQL string that matches the <code>&lt;literal&gt;</code> or
    <code>&lt;null specification&gt;</code> productions of 
    [<cite><a href="#SQL2">SQL2</a></cite>]. This string can be used in
    a SQL query to specify a SQL data value. Examples:</p>

    <ul>
    <li><code>27</code></li>
    <li><code>'foo'</code></li>
    <li><code>'foo''bar'</code></li>
    <li><code>TRUE</code></li>
    <li><code>DATE '2011-11-11'</code></li>
    <li><code>NULL</code></li>
    </ul>


    <h2 id="foreign-key">8 Foreign Key Relationships among Logical Tables (<code>rr:parentTriplesMap</code>, <code>rr:joinCondition</code>, <code>rr:child</code> and <code>rr:parent</code>)</h2>

    <div class="figure">
     <img src="images/ref-object-map.png" alt="Diagram: The properties of referencing object maps"/>
      <br /><br />
      Figure 5: The properties of referencing object maps
    </div>

    <p>A <dfn id="dfn-referencing-object-map">referencing object map</dfn>
    allows using the subjects of another
    <a href="#dfn-triples-map">triples map</a> as the objects generated
    by a <a href="#dfn-predicate-object-map">predicate-object map</a>.
    Since both triples maps may be based on different
    <a href="#dfn-logical-table">logical tables</a>, this may require
    a join between the logical tables. This is not restricted to
    1:1 joins.</p>

    <p>A referencing object map is represented by a resource that:</p>

    <ul>
    <li>has exactly one <code>rr:parentTriplesMap</code> property, whose value
    <em class="rfc2119">MUST</em> be a
    <a href="#dfn-triples-map">triples map</a>, known as the
    referencing object map's <dfn id="dfn-parent-triples-map">parent
    triples map</dfn>.</li>

    <li><em class="rfc2119">MAY</em> have one or more
    <code>rr:joinCondition</code> properties, whose values
    <em class="rfc2119">MUST</em> be
    <a href="#dfn-join-condition">join conditions</a>.</li>
    </ul>

    <p>A <dfn id="dfn-join-condition">join condition</dfn> is represented
    by a resource that has exactly one value for each of the following
    two properties:</p>

    <ul>
    <li><code>rr:child</code>, whose value is known as the join condition's
    <dfn id="dfn-child-column">child column</dfn> and
    <em class="rfc2119">MUST</em> be a
    <a href="#dfn-column-name">column name</a> that exists in the
    <a href="#dfn-logical-table">logical table</a> of the
    <a href="#dfn-triples-map">triples map</a> that contains the
    referencing object map</li>
    <li><code>rr:parent</code>, whose value is known as the join condition's
    <dfn id="dfn-parent-column">parent column</dfn> and
    <em class="rfc2119">MUST</em> be a
    <a href="#dfn-column-name">column name</a> that exists in the
    <a href="#dfn-logical-table">logical table</a> of the
    referencing object map's
    <a href="#dfn-parent-triples-map">parent triples map</a>.</li>
    </ul>

    <p>The <dfn id="dfn-child-query">child query</dfn> of a
    <a href="#dfn-referencing-object-map">referencing object map</a>
    is the <a href="#dfn-effective-sql-query">effective SQL query</a>
    of the <a href="#dfn-logical-table">logical table</a> of the
    <a href="#dfn-term-map">term map</a> containing
    the referencing object map.</p>

    <p>The <dfn id="dfn-parent-query">parent query</dfn> of a
    <a href="#dfn-referencing-object-map">referencing object map</a>
    is the <a href="#dfn-effective-sql-query">effective SQL query</a>
    of the <a href="#dfn-logical-table">logical table</a> of its
    <a href="#dfn-parent-triples-map">parent triples map</a>.</p>

    <p>If the <a href="#dfn-child-query">child query</a> and
    <a href="#dfn-parent-query">parent query</a> of a
    <a href="#dfn-referencing-object-map">referencing object map</a>
    are not identical, then the referencing object map
    <em class="rfc2119">MUST</em> have at least one
    <a href="#dfn-join-condition">join condition</a>.</p>

    <p>The <dfn id="dfn-joint-sql-query">joint SQL query</dfn> of a 
    <a href="#dfn-referencing-object-map">referencing object map</a>
    is:</p>

    <ul>
    <li>If the referencing object map has no
    <a href="#dfn-join-condition">join condition</a>:
    <pre>SELECT * FROM (<em>{child-query}</em>) AS tmp</pre></li>
    <li>If the referencing object map has at least one join condition:
    <pre>
SELECT * FROM (<em>{child-query}</em>) AS child,
              (<em>{parent-query}</em>) AS parent
        WHERE child.<em>{child-column1}</em>=parent.<em>{parent-column1}</em>
          AND child.<em>{child-column2}</em>=parent.<em>{parent-column2}</em>
          AND ...</pre>
    where <code><em>{child-query}</em></code> is the referencing object map's
    <a href="#dfn-child-query">child query</a>,
    <code><em>{parent-query}</em></code> is its
    <a href="#dfn-parent-query">parent query</a>,
    <code><em>{child-column1}</em></code> and
    <code><em>{parent-column1}</em></code> are the
    <a href="#dfn-child-column">child column</a> and 
    <a href="#dfn-parent-column">parent column</a> of its first
    <a href="#dfn-join-condition">join condition</a>, and so on.
    The order of the join conditions is chosen arbitrarily.</li>
    </ul>

    <p>The <a href="#dfn-joint-sql-query">joint SQL query</a> is used when
    <a href="#dfn-generating-rdf-triples">generating RDF triples</a> from
    <a href="#dfn-referencing-object-map">referencing object maps</a>.</p>

    <p>The following example shows a referencing object map as
    part of a <a href="#dfn-predicate-object-map">predicate-object map</a>:</p>
    <pre class="ex-mapping" id="ex-ref-object-map1">
[] rr:predicateObjectMap [
    rr:predicate ex:department;
    rr:objectMap [
        rr:parentTriplesMap &lt;#TriplesMap2&gt;;
        rr:joinCondition [
            rr:child "DEPTNO";
            rr:parent "DEPTNO";
        ];
    ];
].</pre>
    <p>If the logical table of the surrounding
    triples map is <code>EMP</code>, and the logical table
    of <code>&lt;#TriplesMap2&gt;</code> is <code>DEPT</code>,
    this would result in a join between these two tables
    with the condition</p>
    <pre>EMP.DEPTNO = DEPT.DEPTNO</pre>
    <p>and the objects of the triples would be generated using
    the subject map of <code>&lt;#TriplesMap2&gt;</code>.</p>

    <p>Given the two <a href="#example-input-database">example
    tables</a>, and subject maps as defined in the
    <a href="#example-simple">example mapping</a>, this would
    result in a triple:</p>

    <pre class="ex-output">&lt;http://data.example.com/employee/7369&gt; ex:department &lt;http://data.example.com/department/10&gt;.</pre>

    <p>The following example shows a
    <a href="#dfn-referencing-object-map">referencing object map</a>
    that does not have a <a href="#dfn-join-condition">join condition</a>.
    It creates two kinds of resources from the
    <a href="#example-input-database"><code>DEPT</code> table</a>:
    departments and sites.</p>

    <pre class="ex-mapping" id="ex-ref-object-map2">&lt;#DeptTriplesMap&gt;
    rr:logicalTable [ rr:tableName "DEPT" ];
    rr:subjectMap [
        rr:template "department/{DEPTNO}";
        rr:class ex:Department;
    ];
    rr:predicateObjectMap [
        rr:predicate ex:location;
        rr:objectMap [ rr:parentTriplesMap &lt;#SiteTriplesMap&gt; ];
    ].

&lt;#SiteTriplesMap&gt;
    rr:logicalTable [ rr:tableName "DEPT" ];
    rr:subjectMap [
        rr:template "site/{LOC}";
        rr:class ex:Site;
    ];
    rr:predicateObjectMap [
        rr:predicate ex:siteName;
        rr:objectMap [ ex:column "LOC" ];
    ].</pre>

    <p>An <code>ex:Site</code> resource is created
    for each distinct value in the <code>LOC</code> column, using the
    <code>&lt;#SiteTriplesMap&gt;</code>. Departments and sites are
    linked by <code>ex:location</code> triples, and the objects
    of these triples are specified using a
    <a href="#dfn-referencing-object-map">referencing object map</a>
    that references the sites triples map. No join condition is
    needed as both triples maps use the same logical table
    (the base table <code>DEPT</code>). Given the example table,
    this mapping would result in four triples
    (assuming an appropriate <a href="#dfn-base-iri">base IRI</a>):</p>

    <pre class="ex-output">&lt;http://data.example.com/department/10&gt; rdf:type ex:Department.
&lt;http://data.example.com/department/10&gt; ex:location &lt;http://data.example.com/site/NEW%20YORK&gt;.
&lt;http://data.example.com/site/NEW%20YORK&gt; rdf:type ex:Site.
&lt;http://data.example.com/site/NEW%20YORK&gt; ex:siteName "NEW YORK".</pre>


    <h2 id="named-graphs">9 Assigning Triples to Named Graphs</h2>

    <div class="figure">
     <img src="images/graph-map.png" alt="Diagram: The properties of graph maps"/>
      <br /><br />
      Figure 6: The properties of graph maps
    </div>

    <p>Each triple generated from an <a href="#dfn-r2rml-mapping">R2RML
    mapping</a> is placed into one or
    more graphs of the <a href="#dfn-output-dataset">output dataset</a>.
    Possible target graphs are the unnamed
    <a href="#dfn-default-graph">default graph</a>, and the
    <a href="#dfn-iri">IRI</a>-named <a href="#dfn-named-graph">named
    graphs</a>.</p>

    <p>Any <a href="#dfn-subject-map">subject map</a>
    or <a href="#dfn-predicate-object-map">predicate-object map</a> <em class="rfc2119">MAY</em>
    have one or more associated <dfn id="dfn-graph-map">graph maps</dfn>.
    They are specified in one of two ways:</p>

    <ol>
    <li>using the <code>rr:graphMap</code> property, whose value
    <em class="rfc2119">MUST</em> be a
    <a href="#dfn-graph-map">graph map</a>,</li>
    <li>using the <a href="#dfn-constant-shortcut-property">constant
    shortcut property</a> <code>rr:graph</code>.</li>
    </ol>

    <p>Graph maps are themselves <a href="#dfn-term-map">term maps</a>.
    When <a href="#dfn-generating-rdf-triples">RDF
    triples are generated</a>, the set of target graphs is determined by
    taking into account any graph maps associated with the subject map
    or predicate-object map.</p>
    <p>If a <a href="#dfn-graph-map">graph map</a> generates the special
    IRI <code>rr:defaultGraph</code>, then the target graph is the
    <a href="#dfn-default-graph">default graph</a> of the
    <a href="#dfn-output-dataset">output dataset</a>.</p>

    <p>In the following <a href="#dfn-subject-map">subject map</a> example,
    all generated RDF triples will be stored in the named graph
    <code>ex:DepartmentGraph</code>.</p>
    <pre class="ex-mapping">
[] rr:subjectMap [
    rr:template "http://data.example.com/department/{DEPTNO}";
    rr:graphMap [ rr:constant ex:DepartmentGraph ];
].</pre>

    <p>This is equivalent to the following example, which uses a
    <a href="#dfn-constant-shortcut-property">constant shortcut property</a>:</p>

    <pre class="ex-mapping">
[] rr:subjectMap [
    rr:template "http://data.example.com/department/{DEPTNO}";
    rr:graph ex:DepartmentGraph;
].</pre>

    <p>In the following example, RDF triples are placed into named graphs
    according to the job title of employees:</p>

    <pre class="ex-mapping">
[] rr:subjectMap [
    rr:template "http://data.example.com/employee/{EMPNO}";
    rr:graphMap [ rr:template "http://data.example.com/jobgraph/{JOB}" ];
].</pre>

    <p>The triples generated from the <a href="#ex_EMP"><code>EMP</code>
    table</a> would be placed in the named graph with the following IRI:</p>

    <pre class="ex-output">
&lt;http://data.example.com/jobgraph/CLERK&gt;</pre>


    <h3 id="blank-nodes">9.1 Scope of Blank Nodes</h3>

    <p><a href="#dfn-blank-node">Blank nodes</a> in the
    <a href="#dfn-output-dataset">output dataset</a> are
    scoped to a single <a href="#dfn-rdf-graph">RDF graph</a>.
    If the same <a href="#dfn-blank-node-identifier">blank node identifier</a>
    occurs in multiple <a href="#dfn-rdf-triple">RDF triples</a>
    that are in the same graph, then the triples will share the
    same blank node.
    If, however, the same blank node identifier occurs in multiple graphs,
    then a distinct blank node be created for each graph. An R2RML-generated
    blank node can never be shared by two triples in two different graphs.</p>

    <p>This implies that triples generated from a single logical table row
    will have different subjects if the subjects are blank nodes and the
    triples are placed into different graphs.</p>


    <h2 id="datatype-conversions">10 Datatype Conversions</h2>
    
    <p>This section defines mappings from SQL data values to
    RDF <a href="#dfn-literal">literals</a>.</p>


    <h3 id="datatype-intro">10.1 Introduction (Informative)</h3>

    <p>This section defines the following mappings from SQL data values:</p>

    <ol>
    <li>The <strong><a href="#dfn-natural-rdf-literal">natural
    RDF literal</a></strong> 
    is a mapping to <a href="#dfn-literal">literals</a>.
    It is used in R2RML and in the
    <em><a href="http://www.w3.org/TR/rdb-direct-mapping/">Direct Mapping of
    Relational Data to RDF</a></em>
    [<cite><a href="#DM">DM</a></cite>] as the default mapping when literals
    are created. It maps SQL datatypes to corresponding XML Schema datatypes 
    [<cite><a href="#XMLSCHEMA2">XMLSCHEMA2</a></cite>] and loosely
    follows <cite><em>ISO/IEC 9075-14:2008</em></cite>
    [<cite><a href="#SQL14">SQL14</a></cite>].</li>

    <li>The <strong><a href="#dfn-natural-rdf-lexical-form">natural
    RDF lexical form</a></strong>
    is similar, but produces only the lexical form of the typed literal
    and <em>recommends</em> that implementations perform XSD canonicalization.
    It is used in R2RML when <a href="#non-string-columns">non-string
    columns are used in a string context</a>, for example when a
    <code>TIMESTAMP</code> is used in an IRI
    <a href="#dfn-template-valued-term-map">template</a>.</li>

    <li>The <strong><a href="#dfn-canonical-rdf-lexical-form">canonical
    RDF lexical form</a></strong>
    is again similar, but <em>requires</em> XSD canonicalization. It is used in
    the Direct Mapping when IRIs are generated.</li>

    <li>The <strong><a href="#dfn-datatype-override-rdf-literal">datatype-override
    RDF literal</a></strong> is a mapping that constructs
    <a href="#dfn-typed-literal">typed literals</a> by using the
    <a href="#dfn-natural-rdf-lexical-form">natural RDF lexical form</a>
    and applying a specified <a href="#dfn-datatype-iri">datatype IRI</a>.
    The mapping author is responsible for ensuring that the generated
    <a href="#dfn-lexical-form">lexical form</a> is valid for the datatype.
    It is used in R2RML when the target datatype of a literal-generating
    term map is overridden using
    <a href="#dfn-specified-datatype"><code>rr:datatype</code></a>.</li>
    </ol>

    <p>The mappings cover all predefined Core SQL 2008 datatypes except
    <code>INTERVAL</code>. The natural mappings may be
    <a href="#note-natural-mapping-extensions">extended with custom handling
    for other types</a>, such as vendor-specific
    SQL datatypes. In the absence of such extensions, the natural mappings
    fall back on a simple <a href="#dfn-cast-to-string">cast to string</a>
    for all unsupported SQL datatypes.</p>

    <p>The mappings are referenced in the R2RML
    <a href="#dfn-term-generation-rules">term generation rules</a>.</p>

    <p>An informative <a href="#xsd-summary">summary of XSD lexical forms</a>
    is provided to aid implementers.</p>

    
    <h3 id="natural-mapping">10.2 Natural Mapping of SQL Values</h3>

    <p>The <dfn id="dfn-natural-rdf-literal">natural RDF literal</dfn>
    corresponding to a SQL data value is the result of applying the
    following steps:</p>

    <ol>
    <li>Let <em>dt</em> be the SQL datatype of the SQL data value.</li>
    <li>If <em>dt</em> is a character string type (in Core SQL 2008:
    <code>CHARACTER</code>, <code>CHARACTER VARYING</code>, <code>CHARACTER
    LARGE OBJECT</code>, <code>NATIONAL CHARACTER</code>, <code>NATIONAL
    CHARACTER VARYING</code>, <code>NATIONAL CHARACTER LARGE OBJECT</code>),
    then the result is a
    <a href="#dfn-plain-literal">plain literal</a> without
    <a href="#dfn-language-tag">language tag</a> whose
    <a href="#dfn-lexical-form">lexical form</a> is the SQL data value.</li>
    <li>Otherwise, if <em>dt</em> is listed in the
    <a href="#table-type-mapping">table below</a>: The result is a
    <a href="#dfn-typed-literal">typed literal</a>
    whose <a href="#dfn-datatype-iri">datatype IRI</a> is the IRI indicated
    in the <em>RDF datatype</em> column in the same row as <em>dt</em>.
    The <a href="#dfn-lexical-form">lexical form</a> may be any lexical
    form that represents the same value as the SQL data value, according
    to the definition of the RDF datatype. If there are
    multiple lexical forms available that represent the same value
    (e.g., <code>1</code>, <code>+1</code>, <code>1.0</code> and
    <code>1.0E0</code>), then the choice is implementation-dependent.
    However, the choice <em class="rfc2119">MUST</em> be made so that
    given a target RDF datatype and value, the same lexical form
    is chosen consistently (e.g., <code>INTEGER 5</code> and
    <code>BIGINT 5</code> must be mapped to the same lexical form,
    as both are mapped to the RDF datatype <code>xsd:integer</code> and
    are equal values; mapping one to <code>5</code> and the other to
    <code>+5</code> would be an error). The
    <a href="http://www.w3.org/TR/xmlschema11-2/#dt-canonical-representation">canonical lexical representation</a>
    [<cite><a href="#XMLSCHEMA2">XMLSCHEMA2</a></cite>]
    <em class="rfc2119">MAY</em> be chosen.
    (See also: <a href="#xsd-summary">Summary of XSD Lexical Forms</a>)</li>
    <li>Otherwise, the result is a
    <a href="#dfn-plain-literal">plain literal</a> without
    <a href="#dfn-language-tag">language tag</a> whose
    <a href="#dfn-lexical-form">lexical form</a> is the SQL data value
    <a href="#dfn-cast-to-string">cast to string</a>.</li>
    </ol>

    <table id="table-type-mapping" rules="all" summary="Table of mappings between SQL datatypes and RDF datatypes">
    <tr>
      <th>SQL datatype</th>
      <th>RDF datatype</th>
      <th>Lexical transformation (informative)</th>
    </tr>
    <tr>
      <td><code>BINARY</code>, <code>BINARY VARYING</code>, <code>BINARY LARGE OBJECT</code></td>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#hexBinary">xsd:hexBinary</a></code></td>
      <td><a href="http://www.w3.org/TR/xmlschema11-2/#hexBinary"><code>xsd:hexBinary</code> lexical mapping</a></td>
    </tr>
    <tr>
      <td><code>NUMERIC</code>, <code>DECIMAL</code></td>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#decimal">xsd:decimal</a></code></td>
      <td>none required</td>
    </tr>
    <tr>
      <td><code>SMALLINT</code>, <code>INTEGER</code>, <code>BIGINT</code></td>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#integer">xsd:integer</a></code></td>
      <td>none required</td>
    </tr>
    <tr>
      <td><code>FLOAT</code>, <code>REAL</code>, <code>DOUBLE PRECISION</code></td>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#double">xsd:double</a></code></td>
      <td>none required</td>
    </tr>
    <tr>
      <td><code>BOOLEAN</code></td>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#boolean">xsd:boolean</a></code></td>
      <td>ensure lowercase (<code>true</code>, <code>false</code>)</td>
    </tr>
    <tr>
      <td><code>DATE</code></td>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#date">xsd:date</a></code></td>
      <td>none required</td>
    </tr>
    <tr>
      <td><code>TIME</code></td>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#time">xsd:time</a></code></td>
      <td>none required</td>
    </tr>
    <tr>
      <td><code>TIMESTAMP</code></td>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#dateTime">xsd:dateTime</a></code></td>
      <td>replace space character with “<code>T</code>”</td>
    </tr>
    <tr>
      <td><code>INTERVAL</code></td>
      <td>undefined</td>
      <td>undefined</td>
    </tr>
    </table>

    <p class="note" id="note-natural-mapping-extensions">R2RML extensions
    that handle vendor-specific or user-defined datatypes
    beyond those of Core SQL 2008 are expected to behave as if
    the table above contained additional rows that associate the
    SQL datatypes with appropriate RDF-compatible datatypes
    (e.g., the
    <a href="http://www.w3.org/TR/xmlschema11-2/#built-in-datatypes">XML Schema built-in types</a>
    [<cite><a href="#XMLSCHEMA2">XMLSCHEMA2</a></cite>]),
    and appropriate lexical transformations where required.
    Note however that future versions of R2RML may also normatively
    add additional rows to this table.</p>

    <p class="note">The translation of <code>INTERVAL</code> is left
    undefined due to the complexity of the translation.
    [<cite><a href="#SQL14">SQL14</a></cite>] describes a translation of
    <code>INTERVAL</code> to <code>xdt:yearMonthDuration</code> and
    <code>xdt:dayTimeDuration</code>.</p>

    <p class="note">In [<cite><a href="#SQL2">SQL2</a></cite>],
    the precision of many SQL datatypes is not fixed, but left
    implementation-defined. Therefore, the mapping to XML Schema datatypes
    must rely on arbitrary-precision types such as
    <code>xsd:decimal</code>, <code>xsd:integer</code> and
    <code>xsd:dateTime</code>. Implementers of the mapping
    may wish to set upper limits for the supported precision of these XSD types.
    The XML Schema specification allows such <em><a href="http://www.w3.org/TR/xmlschema11-2/#partial-implementation">partial implementations of
    infinite datatypes</a></em> [<cite><a href="#XMLSCHEMA2">XMLSCHEMA2</a></cite>],
    and defines specific minimum requirements.</p>

    <p>The <dfn id="dfn-natural-rdf-datatype">natural RDF datatype</dfn>
    corresponding to a SQL datatype is the value of the <em>RDF datatype</em>
    column in the row corresponding to the SQL datatype in the 
    <a href="#table-type-mapping">table above</a>.</p>

    <p>The <dfn id="dfn-natural-rdf-lexical-form">natural RDF lexical form</dfn>
    corresponding to a SQL data value is the
    <a href="#dfn-lexical-form">lexical form</a> of its corresponding
    <a href="#dfn-natural-rdf-literal">natural RDF literal</a>,
    with the additional constraint that the
    <a href="http://www.w3.org/TR/xmlschema11-2/#dt-canonical-representation">canonical lexical representation</a>
    [<cite><a href="#XMLSCHEMA2">XMLSCHEMA2</a></cite>]
    <em class="rfc2119">SHOULD</em> be chosen.</p>

    <p>The <dfn id="dfn-canonical-rdf-lexical-form">canonical RDF
    lexical form</dfn> corresponding to a SQL data value is the
    <a href="#dfn-lexical-form">lexical form</a> of its corresponding
    <a href="#dfn-natural-rdf-literal">natural RDF literal</a>,
    with the additional constraint that the
    <a href="http://www.w3.org/TR/xmlschema11-2/#dt-canonical-representation">canonical lexical representation</a>
    [<cite><a href="#XMLSCHEMA2">XMLSCHEMA2</a></cite>]
    <em class="rfc2119">MUST</em> be chosen.</p>

    <p><dfn id="dfn-cast-to-string">Cast to string</dfn> is an
    implementation-dependent function that maps SQL data values
    to equivalent Unicode strings. It is undefined for the following
    kinds of SQL datatypes:
    collection types, row types, user-defined types without a user-defined
    string <code>CAST</code>, reference types whose referenced type does
    not have a user-defined string <code>CAST</code>, binary types.</p>

    <p class="note"><a href="#dfn-cast-to-string">Cast to string</a>
    is a fallback that handles vendor-specific and user-defined datatypes
    not supported by the R2RML processor. It can be implemented in a number
    of ways, including explicit SQL casts (“<code>CAST(<em>value</em>
    AS VARCHAR(<em>n</em>))</code>”, where <em>n</em> is an arbitrary
    large integer), implicit SQL casts
    (concatenation with the empty string), or by employing a
    database access API that presents return values as strings.</p>


    <h3 id="datatype-overrides">10.3 Datatype-override Mapping of SQL Values</h3>

    <p>The <dfn id="dfn-datatype-override-rdf-literal">datatype-override
    RDF literal</dfn>
    corresponding to a SQL data value <em>v</em> and a
    <a href="#dfn-datatype-iri">datatype IRI</a> <em>dt</em>, is a
    <a href="#dfn-typed-literal">typed literal</a> whose lexical form is the
    <a href="#dfn-natural-rdf-lexical-form">natural RDF lexical form</a>
    corresponding to <em>v</em>, and whose datatype IRI is <em>dt</em>.
    If the typed literal is <a href="#dfn-ill-typed">ill-typed</a>,
    then a <a href="#dfn-data-error">data error</a> is raised.</p>

    <p>A <a href="#dfn-typed-literal">typed literal</a> is
    <dfn id="dfn-ill-typed">ill-typed</dfn> in R2RML if its
    datatype IRI denotes a
    <a href="#dfn-validatable-rdf-datatype">validatable RDF datatype</a> 
    and its
    <a href="#dfn-lexical-form">lexical form</a> is not in the
    <a href="#dfn-lexical-space">lexical space</a> of the RDF datatype
    identified by its <a href="#dfn-datatype-iri">datatype IRI</a>.
    (See also: <a href="#xsd-summary">Summary of XSD Lexical Forms</a>)</p>

    <p>The set of
    <dfn id="dfn-validatable-rdf-datatype">validatable RDF datatypes</dfn>
    includes all datatypes in the <em>RDF datatype</em> column of the
    <a href="#table-type-mapping">table of natural datatype
    mappings</a>, as defined in
    [<cite><a href="#XMLSCHEMA2">XMLSCHEMA2</a></cite>].
    This set <em class="rfc2119">MAY</em> include implementation-defined
    additional RDF datatypes.</p>

    <p>For example, <code>"X"^^xsd:boolean</code> is ill-typed because
    <code>xsd:boolean</code> is a validatable RDF datatype in R2RML, and
    “<code>X</code>” is not in the
    <a href="http://www.w3.org/TR/xmlschema11-2/#boolean">lexical space of
    <code>xsd:boolean</code></a>
    [<cite><a href="#XMLSCHEMA2">XMLSCHEMA2</a></cite>].</p>


    <h3 id="non-string-columns">10.4 Non-String Columns in String Contexts</h3>

    <p>The same non-character-string SQL data value can typically be
    represented in multiple different string forms. For example,
    the <code>DOUBLE</code> value 1 can be represented as
    <code>1</code>, <code>+1</code>, <code>1.0</code> and <code>1.0E0</code>.
    This can cause interoperability issues when such values
    are used in string contexts, for example when using them to generate
    <a href="#dfn-iri">IRIs</a>. Two IRIs that are character-for-character
    equivalent, except one contains <code>1</code> where the other
    contains <code>1.0</code>, will not “link up” in an RDF graph – they
    are two different nodes.</p>

    <p>To reduce portability issues arising from such conversions,
    this specification recommends that implementations convert non-string
    data values to a canonical form (see
    <a href="#dfn-natural-rdf-lexical-form">natural RDF lexical form</a>).
    However, this is not a strict requirement. Therefore,
    when portability between R2RML implementations is a concern,
    mapping authors <em class="rfc2119">SHOULD NOT</em> use
    non-character-string columns in contexts where strings are produced:</p>

    <ul>
    <li>with <code>rr:column</code> when IRIs or blank nodes are
    produced,</li>
    <li>with <code>rr:column</code> when <code>rr:language</code>
    or an <code>rr:datatype</code> other than the
    <a href="#dfn-natural-rdf-datatype">natural RDF datatype</a> is used,
    and</li> <li>with <code>rr:template</code>.</li>
    </ul>

    <p>In these contexts, if portability is to be maximized, then
    mapping authors <em class="rfc2119">SHOULD</em> use an
    <a href="#dfn-r2rml-view">R2RML view</a> instead and explicitly
    convert the non-string column to a string column using
    an SQL expression.</p>

    <p>Note that this is not a problem when
    <a href="#dfn-natural-rdf-literal">natural RDF literals</a> are generated
    from such columns, because the resulting literal has a corresponding
    non-string XSD datatype, and equivalences between different lexical forms
    within these datatype are well-defined.</p>


    <h3 id="xsd-summary">10.5 Summary of XSD Lexical Forms (Informative)</h3>

    <p>The <a href="#natural-mapping">natural mappings</a> make reference to
    various XSD datatypes and require that SQL data values be converted
    to strings that are appropriate as lexical forms for these datatypes.
    This subsection gives examples of these lexical forms in order to
    aid implementers of the mappings. This subsection is non-normative;
    the normative definitions of the lexical spaces as well as the
    canonical lexical mappings are found in
    <em><a href="http://www.w3.org/TR/xmlschema11-2/">W3C XML Schema
    Definition Language (XSD) 1.1 Part 2: Datatypes</a></em>
    [<cite><a href="#XMLSCHEMA2">XMLSCHEMA2</a></cite>].</p>

    <p>A general approach that may be used for implementing the
    natural mappings is as follows:</p>

    <ol>
    <li>Identify the SQL datatype of the input SQL data value.</li>
    <li>Look up its corresponding <a href="#dfn-natural-rdf-datatype">natural
    RDF datatype</a>.</li>
    <li>Apply <a href="#dfn-cast-to-string">cast to string</a> to the
    SQL data value.</li>
    <li>Ensure that the resulting string is in the lexical space of the
    target RDF datatype; that is, it must be in a form such as those listed
    in either column of the table below. This may require some transformations
    of the string, in particular for <code>xsd:hexBinary</code>,
    <code>xsd:dateTime</code> and <code>xsd:boolean</code>.</li>
    <li>If the goal is to obtain a canonical lexical representation, then
    further string transformations may be required to obtain a form such
    as those listed in the <em>Canonical lexical forms</em> column of the
    table below.</li>
    </ol>

    <table id="table-lexical-forms" rules="all" summary="Table of canonical and non-canonical lexical forms for some XSD datatypes">
    <tr>
      <th>RDF datatype</th>
      <th>Non-canonical lexical forms</th>
      <th>Canonical lexical forms</th>
      <th>Comments</th>
    </tr>
    <tr>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#hexBinary">xsd:hexBinary</a></code></td>
      <td><code>5232524d4c</code></td>
      <td><code>5232524D4C</code></td>
      <td>Convert from SQL by applying <a href="http://www.w3.org/TR/xmlschema11-2/#hexBinary"><code>xsd:hexBinary</code> lexical mapping</a>.</td>
    </tr>
    <tr>
      <td rowspan="4"><code><a href="http://www.w3.org/TR/xmlschema11-2/#decimal">xsd:decimal</a></code></td>
      <td><code>.224</code></td>
      <td><code>0.224</code></td>
      <td rowspan="4"></td>
    </tr>
    <tr>
      <td><code>+001</code></td>
      <td><code>1</code></td>
    </tr>
    <tr>
      <td><code>42.0</code></td>
      <td><code>42</code></td>
    </tr>
    <tr>
      <td><code>-5.9000</code></td>
      <td><code>-5.9</code></td>
    </tr>
    <tr>
      <td rowspan="3"><code><a href="http://www.w3.org/TR/xmlschema11-2/#integer">xsd:integer</a></code></td>
      <td><code>-05</code></td>
      <td><code>-5</code></td>
      <td rowspan="3"></td>
    </tr>
    <tr>
      <td><code>+333</code></td>
      <td><code>333</code></td>
    </tr>
    <tr>
      <td><code>00</code></td>
      <td><code>0</code></td>
    </tr>
    <tr>
      <td rowspan="5"><code><a href="http://www.w3.org/TR/xmlschema11-2/#double">xsd:double</a></code></td>
      <td><code>-5.90</code></td>
      <td><code>-5.9E0</code></td>
      <td rowspan="5">Also supports <code>INF</code>, <code>-INF</code>, <code>NaN</code> and <code>-0.0E0</code>,<br />but these do not appear in standard SQL.</td>
    </tr>
    <tr>
      <td><code>+0.00014770215000</code></td>
      <td><code>1.4770215E-4</code></td>
    </tr>
    <tr>
      <td><code>+01E+3</code></td>
      <td><code>1.0E3</code></td>
    </tr>
    <tr>
      <td><code>100.0</code></td>
      <td><code>1.0E2</code></td>
    </tr>
    <tr>
      <td><code>0</code></td>
      <td><code>0.0E0</code></td>
    </tr>
    <tr>
      <td rowspan="2"><code><a href="http://www.w3.org/TR/xmlschema11-2/#boolean">xsd:boolean</a></code></td>
      <td><code>1</code></td>
      <td><code>true</code></td>
      <td rowspan="2">Must be lowercase.</td>
    </tr>
    <tr>
      <td><code>0</code></td>
      <td><code>false</code></td>
    </tr>
    <tr>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#date">xsd:date</a></code></td>
      <td></td>
      <td><code>2011-08-23</code></td>
      <td>Dates in SQL don't have timezone offsets.<br />They are optional in XSD.</td>
    </tr>
    <tr>
      <td rowspan="3"><code><a href="http://www.w3.org/TR/xmlschema11-2/#time">xsd:time</a></code></td>
      <td><code>22:17:34.885+00:00</code></td>
      <td><code>22:17:34.885Z</code></td>
      <td rowspan="3">May or may not have timezone offset.</td>
    </tr>
    <tr>
      <td><code>22:17:34.000</code></td>
      <td><code>22:17:34</code></td>
    </tr>
    <tr>
      <td><code>22:17:34.1+01:00</code></td>
      <td><code>22:17:34.1+01:00</code></td>
    </tr>
    <tr>
      <td><code><a href="http://www.w3.org/TR/xmlschema11-2/#dateTime">xsd:dateTime</a></code></td>
      <td><code>2011-08-23T22:17:00.000+00:00</code></td>
      <td><code>2011-08-23T22:17:00Z</code></td>
      <td>May or may not have timezone offset.<br />Convert from SQL by replacing space wiht “<code>T</code>”.</td>
    </tr>
    </table>


    <h2 id="generated-rdf">11 The Output Dataset</h2>

    <p>The <dfn id="dfn-output-dataset">output dataset</dfn> of an
    R2RML mapping is an <a href="#dfn-rdf-dataset">RDF dataset</a>
    that contains the
    <a href="#dfn-generating-rdf-triples">generated RDF triples</a>
    for each of the <a href="#dfn-triples-map">triples maps</a> of
    the R2RML mapping. The output dataset <em class="rfc2119">MUST NOT</em>
    contain any other <a href="#dfn-rdf-triple">RDF triples</a> or
    <a href="#dfn-named-graph">named graphs</a> besides these.
    However, <a href="#dfn-r2rml-processor">R2RML processors</a>
    <em class="rfc2119">MAY</em> provide access to datasets that
    contain additional triples or graphs beyond those in the
    output dataset, such as inferred triples or provenance 
    information.</p>

    <p>If a table or column is not explicitly referenced in a
    <a href="#dfn-triples-map">triples map</a>,
    then no <a href="#dfn-rdf-triple">RDF triples</a>
    will be generated for that table or column.</p>

    <p>Conforming <a href="#dfn-r2rml-processor">R2RML processors</a>
    <em class="rfc2119">MAY</em> rename
    <a href="#dfn-blank-node">blank nodes</a> when providing
    access to the <a href="#dfn-output-dataset">output dataset</a>.
    This means that client applications may see actual
    <a href="#dfn-blank-node-identifier">blank node identifiers</a>
    that differ from those produced by the
    <a href="#dfn-r2rml-mapping">R2RML mapping</a>. Client applications
    <em class="rfc2119">SHOULD NOT</em>
    rely on the specific text of the blank node identifier for any purpose.</p>

    <p class="note" id="note-blank-node-identifiers">RDF syntaxes
    and RDF APIs generally represent
    <a href="#dfn-blank-node">blank nodes</a> with
    <a href="#dfn-blank-node-identifier">blank node identifiers</a>.
    But the characters allowed in blank node identifiers differ between
    syntaxes, and not all characters occurring in the values produced by
    a <a href="#dfn-term-map">term map</a> may be allowed, so a bijective
    mapping function from values to valid blank node identifiers may be
    required. The details of this mapping function are
    implementation-dependent, and 
    <a href="#dfn-r2rml-processor">R2RML processors</a> may have to use
    different functions for different output syntaxes or access interfaces.
    Strings matching the regular expression
    <code>[a-zA-Z_][a-zA-Z_0-9-]*</code> are valid blank node identifiers
    in all W3C-recommended RDF syntaxes (as of this document's publication).</p>

    <p class="note"><a href="#dfn-rdf-dataset">RDF datasets</a> may
    contain empty <a href="#dfn-named-graph">named graphs</a>.
    R2RML cannot generate such output datasets.</p>


    <h3 id="generated-triples">11.1 The Generated RDF Triples of a Triples Map</h3>

    <p>This subsection describes the process of
    <dfn id="dfn-generating-rdf-triples">generating RDF triples</dfn>
    from a <a href="#dfn-triples-map">triples map</a>. This process adds
    <a href="#dfn-rdf-triple">RDF triples</a> to the 
    <a href="#dfn-output-dataset">output dataset</a>. Each generated triple
    is placed into one or more graphs of the output dataset.</p>

    <p>The generated RDF triples are determined by the following algorithm.
    R2RML processors <em class="rfc2119">MAY</em> use other means than
    implementing this algorithm to compute the generated RDF triples,
    as long as the result is the same.</p>

    <ol>
    <li>Let <code><em>sm</em></code> be the
    <a href="#dfn-subject-map">subject map</a> of the triples map</li>
    <li>Let <code><em>rows</em></code> be the result of evaluating the
    <a href="#dfn-effective-sql-query">effective SQL query</a>
    of the <a href="#dfn-triples-map">triples map</a>'s
    <a href="#dfn-logical-table">logical table</a> using the
    <a href="#dfn-sql-connection">SQL connection</a></li>
    <li>Let <code><em>classes</em></code> be the
    <a href="#dfn-class-iri">class IRIs</a> of <code><em>sm</em></code></li>
    <li>Let <code><em>sgm</em></code> be the set of
    <a href="#dfn-graph-map">graph maps</a> of <code><em>sm</em></code></li>

    <li>For each <a href="#dfn-logical-table-row">logical table row</a>
    <code><em>row</em></code> in <code><em>rows</em></code>,
    apply the following steps:
      <ol>
      <li>Let <code><em>subject</em></code> be the
      <a href="#dfn-generated-rdf-term">generated RDF term</a> that results
      from applying <code><em>sm</em></code> to
      <code><em>row</em></code></li>
      <li>Let <code><em>subject_graphs</em></code> be the set of
      the <a href="#dfn-generated-rdf-term">generated RDF terms</a>
      that result from applying each term map in <code><em>sgm</em></code>
      to <code><em>row</em></code></li>
      <li>For each <code><em>class</em></code> in
      <code><em>classes</em></code>,
      <a href="#dfn-add-triples">add triples to the output dataset</a>
      as follows:
        <p>
        <strong>Subject:</strong> <code><em>subject</em></code><br />
        <strong>Predicate:</strong> <code>rdf:type</code><br />
        <strong>Object:</strong> <code><em>class</em></code><br />
        <strong>Target graphs:</strong> If <code><em>sgm</em></code> is empty:
          <code>rr:defaultgraph</code>;
          otherwise: <code><em>subject_graphs</em></code>
        </p>
      </li>
      <li>For each <a href="#dfn-predicate-object-map">predicate-object map</a>
      of the <a href="#dfn-triples-map">triples map</a>, apply the following
      steps:
        <ol>
        <li>Let <code><em>predicates</em></code> be the set of
        <a href="#dfn-generated-rdf-term">generated RDF terms</a> that result
        from applying each of the predicate-object map's
        <a href="#dfn-predicate-map">predicate maps</a>
        to <code><em>row</em></code></li>
        <li>Let <code><em>objects</em></code> be the set of
        <a href="#dfn-generated-rdf-term">generated RDF terms</a> that result
        from applying each of the predicate-object map's
        <a href="#dfn-object-map">object maps</a> (but not
        <a href="#dfn-referencing-object-map">referencing object maps</a>)
        to <code><em>row</em></code></li>
        <li>Let <code><em>pogm</em></code> be the set of 
        <a href="#dfn-graph-map">graph maps</a> of the predicate-object map</li>
        <li>Let <code><em>predicate-object_graphs</em></code> be the set of
        <a href="#dfn-generated-rdf-term">generated RDF terms</a>
        that result from applying each <a href="#dfn-graph-map">graph map</a>
        in <code><em>pogm</em></code> to <code><em>row</em></code></li>
        <li>For each possible combination &lt;<code><em>predicate</em></code>,
        <code><em>object</em></code>&gt;
        where <code><em>predicate</em></code> is a member of
        <code><em>predicates</em></code> and <code><em>object</em></code>
        is a member of <code><em>objects</em></code>,
        <a href="#dfn-add-triples">add triples to the output dataset</a>
        as follows:
          <p>
          <strong>Subject:</strong> <code><em>subject</em></code><br />
          <strong>Predicate:</strong> <code><em>predicate</em></code><br />
          <strong>Object:</strong> <code><em>object</em></code><br />
          <strong>Target graphs:</strong> If <code><em>sgm</em></code> and
          <code><em>pogm</em></code> are empty: <code>rr:defaultGraph</code>;
          otherwise: union of <code><em>subject_graphs</em></code>
          and <code><em>predicate-object_graphs</em></code>
          </p>
        </li>
        </ol>
      </li>
      </ol>
    </li>
    <li>For each <a href="#dfn-referencing-object-map">referencing object map</a>
    of a <a href="#dfn-predicate-object-map">predicate-object map</a> 
    of the <a href="#dfn-triples-map">triples map</a>, apply the following
    steps:
      <ol>
      <li>Let <code><em>psm</em></code> be the
      <a href="#dfn-subject-map">subject map</a> of the
      <a href="#dfn-parent-triples-map">parent triples map</a> of the
      referencing object map</li>
      <li>Let <code><em>pogm</em></code> be the set of 
      <a href="#dfn-graph-map">graph maps</a> of the predicate-object map</li>
      <li>Let <code><em>n</em></code> be the number of columns
      in the logical table of the
      <a href="#dfn-triples-map">triples map</a></li>
      <li>Let <code><em>rows</em></code> be the result of evaluating the
      <a href="#dfn-joint-sql-query">joint SQL query</a>
      of the referencing object map</li>
      <li>For each <code><em>row</em></code> in <code><em>rows</em></code>,
      apply the following steps:
        <ol>
        <li>Let <code><em>child_row</em></code> be the logical table row
        derived by taking the first <code><em>n</em></code> columns of
        <code><em>row</em></code></li>
        <li>Let <code><em>parent_row</em></code> be the logical table row
        derived by taking all but the first <code><em>n</em></code> columns of
        <code><em>row</em></code></li>
        <li>Let <code><em>subject</em></code> be the
        <a href="#dfn-generated-rdf-term">generated RDF term</a> that results
        from applying <code><em>sm</em></code> to
        <code><em>child_row</em></code></li>
        <li>Let <code><em>predicates</em></code> be the set of
        <a href="#dfn-generated-rdf-term">generated RDF terms</a> that result
        from applying each of the predicate-object map's
        <a href="#dfn-predicate-map">predicate maps</a>
        to <code><em>child_row</em></code></li>
        <li>Let <code><em>object</em></code> be the
        <a href="#dfn-generated-rdf-term">generated RDF term</a> that results
        from applying <code><em>psm</em></code> to
        <code><em>parent_row</em></code></li>
        <li>Let <code><em>subject_graphs</em></code> be the set of
        <a href="#dfn-generated-rdf-term">generated RDF terms</a>
        that result from applying each
        <a href="#dfn-graph-map">graph map</a> of <code><em>sgm</em></code>
        to <code><em>child_row</em></code></li>
        <li>Let <code><em>predicate-object_graphs</em></code> be the set of
        <a href="#dfn-generated-rdf-term">generated RDF terms</a>
        that result from applying each
        <a href="#dfn-graph-map">graph map</a> in <code><em>pogm</em></code>
        to <code><em>child_row</em></code></li>
        <li>For each <code><em>predicate</em></code>
        in <code><em>predicates</em></code>,
        <a href="#dfn-add-triples">add triples to the output dataset</a>
        as follows:
          <p>
          <strong>Subject:</strong> <code><em>subject</em></code><br />
          <strong>Predicate:</strong> <code><em>predicate</em></code><br />
          <strong>Object:</strong> <code><em>object</em></code><br />
          <strong>Target graphs:</strong> If neither <code><em>sgm</em></code>
          nor <code><em>pogm</em></code> has any <a href="#dfn-graph-map">graph
          maps</a>: <code>rr:defaultGraph</code>; otherwise: union of
          <code><em>subject_graphs</em></code>
          and <code><em>predicate-object_graphs</em></code>
          </p>
        </li>
        </ol>
      </li>
      </ol>
    </li>
    </ol>

    <p>“<dfn id="dfn-add-triples">Add triples
    to the output dataset</dfn>” is a process that takes the following
    inputs:</p>

    <ul>
    <li><strong>Subject</strong>, an
    <a href="#dfn-iri">IRI</a> or
    <a href="#dfn-blank-node">blank node</a> or <em>empty</em></li>
    <li><strong>Predicate</strong>, an
    <a href="#dfn-iri">IRI</a> or <em>empty</em></li>
    <li><strong>Object</strong>, an
    <a href="#dfn-rdf-term">RDF term</a> or <em>empty</em></li>
    <li><strong>Target graphs</strong>, a set of zero or more
    <a href="#dfn-iri">IRIs</a></li>
    </ul>

    <p>Execute the following steps:</p>

    <ol>
    <li>If <em>Subject</em>, <em>Predicate</em> or <em>Object</em>
    is <em>empty</em>, then abort these steps.</li>
    <li>Otherwise, generate an <a href="#dfn-rdf-triple">RDF triple</a>
    &lt;<em>Subject</em>, <em>Predicate</em>, <em>Object</em>&gt;</li>
    <li>If the set of target graphs includes <code>rr:defaultGraph</code>,
    add the triple to the <a href="#dfn-default-graph">default graph</a>
    of the <a href="#dfn-output-dataset">output dataset</a>.</li>
    <li>For each <a href="#dfn-iri">IRI</a> in the set of target
    graphs that is not equal to <code>rr:defaultGraph</code>,
    add the triple to a <a href="#dfn-default-graph">named graph</a>
    of that name in the <a href="#dfn-output-dataset">output dataset</a>.
    If the output dataset does not contain a named graph with that IRI,
    create it first.</li>
    </ol>

    <p><a href="#dfn-rdf-graph">RDF graphs</a> cannot contain duplicate
    <a href="#dfn-rdf-triple">RDF triples</a>. Placing multiple equal
    triples into the same graph has the same effect as placing it into
    the graph only once. Also note the <a href="#blank-nodes">scope of
    blank nodes</a>.</p>


    <h3 id="generated-rdf-term">11.2 The Generated RDF Term of a Term Map</h3>

    <p>A <a href="#dfn-term-map">term map</a> is a function that generates
    an <a href="#dfn-rdf-term">RDF term</a> from a
    <a href="#dfn-logical-table-row">logical table row</a>. The result of that
    function can be:</p>

    <ul>
      <li><em>Empty</em> – if any of the
      <a href="#dfn-referenced-columns">referenced columns</a> of the
      term map has a <code>NULL</code> value,</li>
      <li>An RDF term – the common case,</li>
      <li>A <a href="#dfn-data-error">data error</a>.</li>
    </ul>

    <p>The <dfn id="dfn-generated-rdf-term">generated RDF term</dfn> 
    of a term map for a given logical table row is determined as follows:</p>

    <ul>
    <li>If the term map is a
    <a href="#dfn-constant-valued-term-map">constant-valued term map</a>,
    then the generated RDF term is
    the term map's <a href="#dfn-constant-value">constant value</a>.</li>

    <li>If the term map is a
    <a href="#dfn-column-valued-term-map">column-valued term map</a>, then
    the generated RDF term is determined by applying the
    <a href="#dfn-term-generation-rules">term generation rules</a> to its
    <a href="#dfn-column-value">column value</a>.</li>

    <li>If the term map is a
    <a href="#dfn-template-valued-term-map">template-valued term map</a>, then
    the generated RDF term is determined by applying the
    <a href="#dfn-term-generation-rules">term generation rules</a> to its
    <a href="#dfn-template-value">template value</a>.</li>
    </ul>

    <p>The <dfn id="dfn-term-generation-rules">term generation rules</dfn>,
    applied to a <em>value</em>, are as follows:</p>

    <ol>
    <li>If <em>value</em> is <code>NULL</code>, then no RDF term
    is generated.</li>
    <li>Otherwise, if the <a href="#dfn-term-map">term map</a>'s
    <a href="#dfn-term-type">term type</a> is <code>rr:IRI</code>:
      <ol>
      <li>Let <em>value</em> be the
      <a href="#dfn-natural-rdf-lexical-form">natural RDF lexical form</a>
      corresponding to <em>value</em>.</li>
      <li>If <em>value</em> is a valid
      <cite><a href="http://tools.ietf.org/html/rfc3987#section-2.2">
      absolute IRI</a></cite> [<cite><a href="#RFC3987">RFC3987</a></cite>],
      then return an <a href="#dfn-iri">IRI</a> generated from
      <em>value</em>.</li>
      <li>Otherwise, prepend <em>value</em> with the
      <a href="#dfn-base-iri">base IRI</a>. If the result is a valid
      <cite><a href="http://tools.ietf.org/html/rfc3987#section-2.2">
      absolute IRI</a></cite> [<cite><a href="#RFC3987">RFC3987</a></cite>],
      then return an <a href="#dfn-iri">IRI</a> generated from the result.</li>
      <li>Otherwise, raise a <a href="#dfn-data-error">data error</a>.</li>
      </ol>
    </li>
    <li>Otherwise, if the term type is <code>rr:BlankNode</code>:
      <ol>
      <li>Return a <a href="#dfn-blank-node-identifier">blank node</a> that
      is unique to the 
      <a href="#dfn-natural-rdf-lexical-form">natural RDF lexical form</a>
      corresponding to <em>value</em>. (Note: 
      <a href="#note-blank-node-identifiers">On Blank Node Identifiers</a>,
      <a href="#blank-nodes">Scope of Blank Nodes</a>)</li>
      </ol>
    </li>
    <li>Otherwise, if the term type is <code>rr:Literal</code>:
      <ol>
      <li>If the term map has a <a href="#dfn-specified-language-tag">specified
      language tag</a>, then return a
      <a href="#dfn-plain-literal">plain literal</a> with that language tag
      and with the 
      <a href="#dfn-natural-rdf-lexical-form">natural RDF lexical form</a>
      corresponding to <em>value</em>.</li>
      <li>Otherwise, if the term map has a non-empty
      <a href="#dfn-specified-datatype">specified datatype</a> that is
      different from the
      <a href="#dfn-natural-rdf-datatype">natural RDF datatype</a>
      corresponding to the term map's
      <a href="#dfn-implicit-sql-datatype">implicit SQL datatype</a>, then
      return the <a href="#dfn-datatype-override-rdf-literal">datatype-override
      RDF literal</a> corresponding to <em>value</em> and the
      specified datatype.</li>
      <li>Otherwise, return the
      <a href="#dfn-natural-rdf-literal">natural RDF literal</a>
      corresponding to <em>value</em>.</li>
      </ol>
    </li>
    </ol>


    <h2 id="terminology">A. RDF Terminology (Informative)</h2>

    <p>This appendix lists some terms normatively defined in other specifications.</p>

    <p>The following terms are defined in <cite><em><a class="norm" href=
    "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/">RDF Concepts and Abstract
    Syntax</a></em></cite> [<cite><a href="#RDF">RDF</a></cite>] and used in R2RML:</p>

    <ul>
      <li><dfn id="dfn-rdf-graph"><a class="type rdfGraph" href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-rdf-graph">RDF
      graph</a></dfn></li>

      <li><dfn id="dfn-rdf-triple"><a href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-rdf-triple">RDF
      triple</a></dfn></li>

      <li><dfn id="dfn-iri"><a class="type IRI" href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-URI-reference">IRI</a></dfn>
      (corresponds to the Concepts and Abstract Syntax term <em>RDF URI
      reference</em>)</li>

      <li><dfn id="dfn-literal"><a class="type literal" href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-literal">literal</a></dfn></li>

      <li><dfn id="dfn-plain-literal"><a class="type plainLiteral" href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-plain-literal">plain
      literal</a></dfn></li>

      <li><dfn id="dfn-typed-literal"><a class="type typedLiteral" href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-typed-literal">typed
      literal</a></dfn></li>

      <li><dfn id="dfn-language-tag"><a class="type langTag" href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-language-identifier">language
      tag</a></dfn></li>

      <li><dfn id="dfn-lexical-form"><a class="type lexicalForm" href=
      "http://www.w3.org/TR/rdf-concepts/#dfn-lexical-form">lexical form</a></dfn></li>

      <li><dfn id="dfn-datatype-iri"><a class="type datatypeIRI" href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-datatype-URI">datatype
      IRI</a></dfn> (corresponds to the Concepts and Abstract Syntax term <em>datatype
      URI</em>)</li>

      <li><dfn id="dfn-lexical-space"><a class="type lexicalSpace" href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-lexical-space">lexical space</a></dfn></li>

      <li><dfn id="dfn-blank-node"><a class="type bNode" href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-blank-node">blank
      node</a></dfn></li>

      <li><dfn id="dfn-blank-node-identifier"><a href=
      "http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-blank-node-id">
      blank node identifier</a></dfn></li>
    </ul>

    <p>The following terms are defined in <cite><em><a class="norm" href=
    "http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115/">SPARQL Query Language for
    RDF</a></em></cite> [<cite><a href="#SPARQL">SPARQL</a></cite>] and used in
    R2RML:</p>

    <ul>
      <li><dfn id="dfn-rdf-dataset"><a href=
      "http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115/#rdfDataset">RDF
      dataset</a></dfn></li>

      <li><dfn id="dfn-default-graph"><a href=
      "http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115/#rdfDataset">default
      graph</a></dfn></li>

      <li><dfn id="dfn-named-graph"><a href=
      "http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115/#rdfDataset">named
      graph</a></dfn></li>
    </ul>


    <h2 id="index">B. Index of R2RML Vocabulary Terms (Informative)</h2>

    <p>This appendix lists all the classes, properties and other terms
    defined by this specification within the
    <a href="#dfn-r2rml-vocabulary">R2RML vocabulary</a>.</p>

    <p>An RDFS representation of the vocabulary is available from
    the <a href="http://www.w3.org/ns/r2rml#">namespace IRI</a>.</p>


    <h3 id="class-index">B.1 Classes</h3>

    <p>The following table lists all <a href="#dfn-r2rml-classes">R2RML classes</a>.</p>

    <p>The third column contains minimum conditions that a resource
    has to fulfil in order to be considered member of the class.
    Where multiple conditions are listed, all must be fulfilled.</p>

    <table class="term-index">
      <tr><th>Class</th><th>Represents</th><th>Minimum conditions</th></tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#BaseTableOrView"><code>rr:BaseTableOrView</code></a></th>
        <td><a href="#dfn-sql-base-table-or-view">SQL base table or view</a></td>
        <td>Having an <code>rr:tableName</code> property</td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#GraphMap"><code>rr:GraphMap</code></a></th>
        <td><a href="#dfn-graph-map">graph map</a></td>
        <td>Being an <code>rr:TermMap</code><br />
          Being value of an <code>rr:graphMap</code> property</td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#Join"><code>rr:Join</code></a></th>
        <td><a href="#dfn-join-condition">join condition</a></td>
        <td>Having an <code>rr:parent</code> property<br />
          Having an <code>rr:child</code> property</td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#LogicalTable"><code>rr:LogicalTable</code></a></th>
        <td><a href="#dfn-logical-table">logical table</a></td>
        <td>Being one of its subclasses, <code>rr:BaseTableOrView</code> or <code>rr:R2RMLView</code></td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#ObjectMap"><code>rr:ObjectMap</code></a></th>
        <td><a href="#dfn-object-map">object map</a></td>
        <td>Being an <code>rr:TermMap</code><br />
          Being value of an <code>rr:objectMap</code> property</td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#PredicateMap"><code>rr:PredicateMap</code></a></th>
        <td><a href="#dfn-predicate-map">predicate map</a></td>
        <td>Being an <code>rr:TermMap</code><br />
          Being value of an <code>rr:predicateMap</code> property</td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#PredicateObjectMap"><code>rr:PredicateObjectMap</code></a></th>
        <td><a href="#dfn-predicate-object-map">predicate-object map</a></td>
        <td>Having at least one of <code>rr:predicate</code> and <code>rr:predicateMap</code><br />
          Having at least one of <code>rr:object</code> and <code>rr:objectMap</code></td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#R2RMLView"><code>rr:R2RMLView</code></a></th>
        <td><a href="#dfn-r2rml-view">R2RML view</a></td>
        <td>Having an <code>rr:sqlQuery</code> property</td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#RefObjectMap"><code>rr:RefObjectMap</code></a></th>
        <td><a href="#dfn-referencing-object-map">referencing object map</a></td>
        <td>Having an <code>rr:parentTriplesMap</code> property</td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#SubjectMap"><code>rr:SubjectMap</code></a></th>
        <td><a href="#dfn-subject-map">subject map</a></td>
        <td>Being an <code>rr:TermMap</code><br />
          Being value of an <code>rr:subjectMap</code> property</td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#TermMap"><code>rr:TermMap</code></a></th>
        <td><a href="#dfn-term-map">term map</a></td>
        <td>Having exactly one of <code>rr:constant</code>, <code>rr:column</code>, <code>rr:template</code></td>
      </tr>
      <tr>
        <th><a href="http://www.w3.org/ns/r2rml#TriplesMap"><code>rr:TriplesMap</code></a></th>
        <td><a href="#dfn-triples-map">triples map</a></td>
        <td>Having an <code>rr:logicalTable</code> property<br />
          Having exactly one of <code>rr:subject</code> and <code>rr:subjectMap</code></td>
      </tr>
    </table>

    <p>As <a href="#vocabulary">noted earlier</a>, a single node in an
    <a href="#dfn-r2rml-mapping-graph">R2RML mapping graph</a> may represent
    multiple mapping components and thus be typed as several of these
    classes. However, the following classes are disjoint:</p>

    <ul>
    <li><code>rr:TermMap</code> and <code>rr:RefObjectMap</code></li>
    <li><code>rr:BaseTableOrView</code> and <code>rr:SQLQuery</code></li>
    <li><a href="#dfn-constant-valued-term-map">constant-valued</a>,
    <a href="#dfn-column-valued-term-map">column-valued</a> and
    <a href="#dfn-template-valued-term-map">template valued</a> term
    maps (indicated by the presence of the properties
    <code>rr:constant</code>, <code>rr:column</code> and <code>rr:template</code>,
    respectively)</li>
    </ul>


    <h3 id="property-index">B.2 Properties</h3>

    <p>The following table lists all properties in the
    <a href="#dfn-r2rml-vocabulary">R2RML vocabulary</a>.</p>

    <p>The cardinality column indicates how often this property
    occurs within its context. Note that additional constraints
    not stated in this table might apply. The actual
    cardinality of some properties may depend on the presence
    or absence of other properties, and their values.
    Properties where this applies are indicated by an exclamation
    mark.</p>

    <table class="term-index">
      <tr><th>Property</th><th>Represents</th><th>Context</th><th colspan="2">Cardinality</th></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#child"><code>rr:child</code></a></th>
        <td><a href="#dfn-child-column">child column</a></td>
        <td><a href="#dfn-join-condition">join condition</a></td>
        <td>1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#class"><code>rr:class</code></a></th>
        <td><a href="#dfn-class-iri">class IRI</a></td>
        <td><a href="#dfn-subject-map">subject map</a></td>
        <td>0…∞</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#column"><code>rr:column</code></a></th>
        <td><a href="#dfn-column-valued-term-map">column name</a></td>
        <td><a href="#dfn-column-valued-term-map">column-valued term map</a></td>
        <td>1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#datatype"><code>rr:datatype</code></a></th>
        <td><a href="#dfn-specified-datatype">specified datatype</a></td>
        <td><a href="#dfn-term-map">term map</a></td>
        <td>0…1</td><td>!</td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#constant"><code>rr:constant</code></a></th>
        <td><a href="#dfn-constant-value">constant value</a></td>
        <td><a href="#dfn-constant-valued-term-map">constant-valued term map</a></td>
        <td>1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#graph"><code>rr:graph</code></a></th>
        <td><a href="#dfn-constant-shortcut-property">constant shortcut property</a></td>
        <td rowspan="2"><a href="#dfn-subject-map">subject map</a>, <a href="#dfn-predicate-object-map">predicate-object map</a></td>
        <td rowspan="2">0…∞</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#graphMap"><code>rr:graphMap</code></a></th>
        <td><a href="#dfn-graph-map">graph map</a></td>
        <td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#inverseExpression"><code>rr:inverseExpression</code></a></th>
        <td><a href="#dfn-inverse-expression">inverse expression</a></td>
        <td><a href="#dfn-term-map">term map</a></td>
        <td>0…1</td><td>!</td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#joinCondition"><code>rr:joinCondition</code></a></th>
        <td><a href="#dfn-join-condition">join condition</a></td>
        <td><a href="#dfn-referencing-object-map">referencing object map</a></td>
        <td>0…∞</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#language"><code>rr:language</code></a></th>
        <td><a href="#dfn-specified-language-tag">specified language tag</a></td>
        <td><a href="#dfn-term-map">term map</a></td>
        <td>0…1</td><td>!</td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#logicalTable"><code>rr:logicalTable</code></a></th>
        <td><a href="#dfn-triples-map">logical table</a></td>
        <td><a href="#dfn-triples-map">triples map</a></td>
        <td>1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#object"><code>rr:object</code></a></th>
        <td><a href="#dfn-constant-shortcut-property">constant shortcut property</a></td>
        <td rowspan="2"><a href="#dfn-predicate-object-map">predicate-object map</a></td>
        <td rowspan="2">1…∞</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#objectMap"><code>rr:objectMap</code></a></th>
        <td><a href="#dfn-object-map">object map</a>, <a href="#dfn-referencing-object-map">referencing object map</a></td>
        <td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#parent"><code>rr:parent</code></a></th>
        <td><a href="#dfn-parent-column">parent column</a></td>
        <td><a href="#dfn-join-condition">join condition</a></td>
        <td>1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#parentTriplesMap"><code>rr:parentTriplesMap</code></a></th>
        <td><a href="#dfn-parent-triples-map">parent triples map</a></td>
        <td><a href="#dfn-referencing-object-map">referencing object map</a></td>
        <td>1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#predicate"><code>rr:predicate</code></a></th>
        <td><a href="#dfn-constant-shortcut-property">constant shortcut property</a></td>
        <td rowspan="2"><a href="#dfn-predicate-object-map">predicate-object map</a></td>
        <td rowspan="2">1…∞</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#predicateMap"><code>rr:predicateMap</code></a></th>
        <td><a href="#dfn-predicate-map">predicate map</a></td>
        <td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#predicateObjectMap"><code>rr:predicateObjectMap</code></a></th>
        <td><a href="#dfn-triples-map">predicate-object map</a></td>
        <td><a href="#dfn-triples-map">triples map</a></td>
        <td>0…∞</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#sqlQuery"><code>rr:sqlQuery</code></a></th>
        <td><a href="#dfn-sql-query">SQL query</a></td>
        <td><a href="#dfn-r2rml-view">R2RML view</a></td>
        <td>1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#sqlVersion"><code>rr:sqlVersion</code></a></th>
        <td><a href="#dfn-sql-version-identifier">SQL version identifier</a></td>
        <td><a href="#dfn-r2rml-view">R2RML view</a></td>
        <td>0…∞</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#subject"><code>rr:subject</code></a></th>
        <td><a href="#dfn-constant-shortcut-property">constant shortcut property</a></td>
        <td rowspan="2"><a href="#dfn-triples-map">triples map</a></td>
        <td rowspan="2">0…1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#subjectMap"><code>rr:subjectMap</code></a></th>
        <td><a href="#dfn-triples-map">subject map</a></td>
        <td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#tableName"><code>rr:tableName</code></a></th>
        <td><a href="#dfn-table-or-view-name">table or view name</a></td>
        <td><a href="#dfn-sql-base-table-or-view">SQL base table or view</a></td>
        <td>1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#template"><code>rr:template</code></a></th>
        <td><a href="#dfn-string-template">string template</a></td>
        <td><a href="#dfn-template-valued-term-map">template-valued term map</a></td>
        <td>1</td><td></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#termType"><code>rr:termType</code></a></th>
        <td><a href="#dfn-term-type">term type</a></td>
        <td><a href="#dfn-term-map">term map</a></td>
        <td>0…1</td><td>!</td></tr>
    </table>


    <h3 id="other-index">B.3 Other Terms</h3>

    <table class="term-index">
      <tr><th>Term</th><th>Denotes</th><th>Used with property</th></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#defaultGraph"><code>rr:defaultGraph</code></a></th>
        <td><a href="#dfn-default-graph">default graph</a></td>
        <td><a href="#named-graphs"><code>rr:graph</code></a></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#SQL2008"><code>rr:SQL2008</code></a></th>
        <td><a href="#conformance">Core SQL 2008</a></td>
        <td><a href="#dfn-sql-version-identifier"><code>rr:sqlVersion</code></a></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#IRI"><code>rr:IRI</code></a></th>
        <td><a href="#dfn-iri">IRI</a></td>
        <td><a href="#dfn-term-type"><code>rr:termType</code></a></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#BlankNode"><code>rr:BlankNode</code></a></th>
        <td><a href="#dfn-blank-node">blank node</a></td>
        <td><a href="#dfn-term-type"><code>rr:termType</code></a></td></tr>
      <tr><th><a href="http://www.w3.org/ns/r2rml#Literal"><code>rr:Literal</code></a></th>
        <td><a href="#dfn-literal">literal</a></td>
        <td><a href="#dfn-term-type"><code>rr:termType</code></a></td></tr>
    </table>


    <h2 id="references">C. References</h2>

    <h3 id="normative-refs">C.1 Normative References</h3>

    <dl>
      <dt><a id="DM" name="DM">[DM]</a></dt>

      <dd><cite><a href="http://www.w3.org/TR/2012/REC-rdb-direct-mapping-20120927/">A
      Direct Mapping of Relational Data to RDF</a></cite>, Alexandre Bertails, Marcelo Arenas,
      Eric Prud'hommeaux, Juan Sequeda, Editors. World Wide Web Consortium, 27 September 2012.
      This version is http://www.w3.org/TR/2012/REC-rdb-direct-mapping-20120927/. The latest
      version is http://www.w3.org/TR/rdb-direct-mapping/.</dd>

      <dt><a id="RDF" name="RDF">[RDF]</a></dt>

      <dd><cite><a href="http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/">Resource
      Description Framework (RDF): Concepts and Abstract Syntax</a></cite>, Graham Klyne,
      Jermey J. Carroll, Editors. World Wide Web Consortium, 10 February 2004. This
      version is http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/. The latest version
      is http://www.w3.org/TR/rdf-concepts/.</dd>

      <dt><a id="RFC2119" name="RFC2119">[RFC2119]</a></dt>

      <dd><cite><a href="http://tools.ietf.org/html/rfc2119">Key words
      for use in RFCs to Indicate Requirement Levels</a></cite>, S. Bradner,
      March 1997.
      Internet RFC 2119, http://tools.ietf.org/html/rfc2119.</dd> 

      <dt><a id="RFC3629" name="RFC3629">[RFC3629]</a></dt>

      <dd><cite><a href="http://tools.ietf.org/html/rfc3629">UTF-8, a
      transformation format of ISO 10646</a></cite>, F. Yergeau. November 2003.
      Internet RFC 3629, http://tools.ietf.org/html/rfc3629.</dd> 

      <dt><a id="RFC3986" name="RFC3986">[RFC3986]</a></dt>

      <dd><cite><a href="http://tools.ietf.org/html/rfc3986">Uniform Resource
      Identifier (URI): Generic Syntax</a></cite>, T. Berners-Lee, R. Fielding,
      L. Masinter. January 2005.
      Internet RFC 3986, http://tools.ietf.org/html/rfc3986.</dd> 

      <dt><a id="RFC3987" name="RFC3987">[RFC3987]</a></dt>

      <dd><cite><a href="http://tools.ietf.org/html/rfc3987">Internationalized
      Resource Identifiers (IRIs)</a></cite>, M. Duerst, M. Suignard.  January 2005.
      Internet RFC 3987, http://tools.ietf.org/html/rfc3987.</dd> 

      <dt><a id="SPARQL" name="SPARQL">[SPARQL]</a></dt>

      <dd><cite><a href="http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115/">SPARQL
      Query Language for RDF</a></cite>, Eric Prud'hommeaux, Andy Seaborne, Editors.
      World Wide Web Consortium, 15 January 2008. This version is
      http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115/. The latest version is
      http://www.w3.org/TR/rdf-sparql-query/.</dd>

      <dt><a id="SQL1" name="SQL1">[SQL1]</a></dt>

      <dd><cite>ISO/IEC 9075-1:2008 SQL - Part 1: Framework (SQL/Framework)</cite>.
      International Organization for
      Standardization, 27 January 2009.</dd>

      <dt><a id="SQL2" name="SQL2">[SQL2]</a></dt>

      <dd><cite>ISO/IEC 9075-2:2008 SQL - Part 2: Foundation (SQL/Foundation)</cite>.
      International Organization for
      Standardization, 27 January 2009.</dd>

      <dt><a id="TURTLE" name="TURTLE">[TURTLE]</a></dt>

      <dd><cite><a href=
      "http://www.w3.org/TR/2012/WD-turtle-20120710/">Turtle - Terse RDF
      Triple Language</a></cite>, Eric Prud'hommeaux, Gavin Carothers.
      World Wide Web Consortium, 10 July 2012. This version is
      http://www.w3.org/TR/2012/WD-turtle-20120710/. The latest version is
      http://www.w3.org/TR/turtle/. This document is work in progress.</dd>

      <dt><a id="XMLSCHEMA2" name="XMLSCHEMA2">[XMLSCHEMA2]</a></dt>

      <dd><cite><a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/">W3C XML Schema Definition Language (XSD) 1.1 Part 2: Datatypes</a></cite>,
      David Peterson, Shudi Gao, Ashok Malhotra, C. M. Sperberg-McQueen,
      Henry S. Thompson. World Wide Web Consortium,
      5 April 2012. This version is
      http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/.
      The latest version is http://www.w3.org/TR/xmlschema11-2/.</dd>
    </dl>


    <h3 id="non-normative-refs">C.2 Other References</h3>

    <dl>
      <dt><a id="SQL14" name="SQL14">[SQL14]</a></dt>

      <dd><cite>ISO/IEC 9075-14:2008 SQL - Part 14: XML-Related Specifications (SQL/XML)</cite>.
      International Organization for Standardization, 27 January 2009.</dd>

      <dt><a id="SQLIRIS" name="SQLIRIS">[SQLIRIS]</a></dt>

      <dd><cite><a href="http://www.w3.org/2001/sw/wiki/RDB2RDF/SQL_Version_IRIs">SQL
      Version IRIs</a></cite>, Editors of the W3C Semantic Web Standards wiki.
      The latest version is http://www.w3.org/2001/sw/wiki/RDB2RDF/SQL_Version_IRIs.
      This is a public wiki page.</dd>

      <dt><a id="TC" name="TC">[TC]</a></dt>

      <dd><cite><a href="http://www.w3.org/TR/2012/NOTE-rdb2rdf-test-cases-20120814/">R2RML and Direct Mapping Test Cases</a></cite>, Boris Villaz&oacute;n-Terrazas, Michael Hausenblas, Editors. World Wide Web Consortium, 14 August 2012. This version is http://www.w3.org/TR/2012/NOTE-rdb2rdf-test-cases-20120814/. The latest version is http://www.w3.org/TR/rdb2rdf-test-cases/.</dd>

      <dt><a id="UCNR" name="UCNR">[UCNR]</a></dt>

      <dd><cite><a href="http://www.w3.org/TR/2010/WD-rdb2rdf-ucr-20100608/">Use Cases
      and Requirements for Mapping Relational Databases to RDF</a></cite>, Eric
      Prud'hommeaux, Michael Hausenblas, Editors. World Wide Web Consortium, 8 June 2010.
      This version is http://www.w3.org/TR/2010/WD-rdb2rdf-ucr-20100608/. The latest
      version is http://www.w3.org/TR/rdb2rdf-ucr/. This document is work in
      progress.</dd>
    </dl>


    <h2 id="acknowledgements">D. Acknowledgements (Informative)</h2>

	<p>The Editors would like to give special thanks to the following contributors: David McNeil greatly improved the quality of the specification with detailed reviews and comments. Nuno Lopes and Eric Prud'hommeaux contributed to the design of the mapping from SQL data values to RDF literals. Eric also worked on the mechanism for SQL compatibility. Boris Villaz&oacute;n-Terrazas drew the diagrams throughout the text, and kept them up-to-date throughout many iterations.</p>

    <p>In addition, the Editors gratefully acknowledge contributions from: Marcelo Arenas, S&ouml;ren Auer, Samir Batla, Alexander de Leon, Orri Erling, Lee Feigenbaum, Enrico Franconi, Howard Greenblatt, Wolfgang Halb, Harry Halpin, Michael Hausenblas, Patrick Hayes, Ivan Herman, Nophadol Jekjantuk, Li Ma, Nan Ma, Ashok Malhotra, Ivan Mikhailov, Percy Enrique Rivera Salas, Juan Sequeda, Ben Szekely, Ted Thibodeau, and Edward Thomas.
    </p>

  </div>
</body>
</html>
