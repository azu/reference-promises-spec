<!-- http://www.w3.org/TR/fullscreen/ -->
<!DOCTYPE html><html lang="en-US"><head>
  <meta charset="utf-8">
  <title>Fullscreen</title>
  <style>
   pre.idl { border:solid thin; background:#eee; color:#000; padding:0.5em 1em }
   pre.idl :link, pre.idl :visited { color:inherit; background:transparent }
   pre code { color:inherit; background:transparent }
   pre.css { border: solid 0.0625em; background: #FFFFEE; color: black; padding: 0.5em 1em; }
   .example { margin-left:1em; padding-left:1em; border-left:double; color:#222; background:#fcfcfc }
   .note { margin-left:2em; font-weight:bold; font-style:italic; color:#008000 }
   p.note::before { content:"Note: " }
   .XXX { padding:.5em; border:solid #f00 }
   p.XXX::before { content:"Issue: " }
   dl.switch { padding-left:2em }
   dl.switch > dt { text-indent:-1.5em }
   dl.switch > dt:before { content:'\21AA'; padding:0 0.5em 0 0; display:inline-block; width:1em; text-align:right; line-height:0.5em }
   dl.domintro { color: green; margin: 2em 0 2em 2em; padding: 0.5em 1em; border: none; background: #DDFFDD; }
   dl.domintro dt, dl.domintro dt * { color: black; text-decoration: none; }
   dl.domintro dd { margin: 0.5em 0 1em 2em; padding: 0; }
   dl.domintro dd p { margin: 0.5em 0; }
   dl.domintro:before { display: table; margin: -1em -0.5em -0.5em auto; width: auto; content: 'This box is non-normative. Implementation requirements are given below this box.'; color: red; border: solid 2px; background: white; padding: 0 0.25em; }
   em.ct { text-transform:lowercase; font-variant:small-caps; font-style:normal }
   dfn { font-weight:bold; font-style:normal }
   code { color:orangered }
   code :link, code :visited { color:inherit }
   hr:not(.top) { display:block; background:none; border:none; padding:0; margin:2em 0; height:auto }
   table { border-collapse:collapse; border-style:hidden hidden none hidden }
   table thead { border-bottom:solid }
   table tbody th:first-child { border-left:solid }
   table td, table th { border-left:solid; border-right:solid; border-bottom:solid thin; vertical-align:top; padding:0.2em }

   .warning { color: red; background: transparent; font-weight: bolder; font-style: italic; }
   .warning p:first-child { margin-top: 0; }
   .warning p:last-child { margin-bottom: 0; }
   .warning:before { font-style: normal; }
   p.warning:before { content: '\26A0 Warning! '; }

   @media print {
     [data-anolis-spec]::after { content:"[" attr(data-anolis-spec) "]"; font-size:.6em; vertical-align:super; text-transform:uppercase }
   }
  </style>
  <link class="publish" href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet">
 </head>
 <body>

<div class="head">

<p><a href="http://www.w3.org/"><img alt="W3C" height="48" src="http://www.w3.org/Icons/w3c_home" width="72"></a></p>

 <h1>Fullscreen</h1>
 <h2 class="no-num no-toc publish" id="w3c-working-draft-03-july-2012">W3C Working Draft 03 July 2012</h2>

 <dl>
  <dt>This Version:</dt>
  <dd class="publish"><a href="http://www.w3.org/TR/2012/WD-fullscreen-20120703/">http://www.w3.org/TR/2012/WD-fullscreen-20120703/</a></dd>

  <dt class="publish">Latest Version:</dt>
  <dd class="publish"><a href="http://www.w3.org/TR/fullscreen/">http://www.w3.org/TR/fullscreen/</a></dd>

  <dt class="publish">Latest Editors Draft:</dt>
  <dd class="publish"><a href="http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html">http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html</a></dd>

  <dt>Version History:</dt>
 <dd><a href="http://dvcs.w3.org/hg/fullscreen/shortlog">http://dvcs.w3.org/hg/fullscreen/shortlog</a></dd>

  <dt>Editors:</dt>
  <dd class="h-card vcard"><a class="u-url url p-name fn" href="http://annevankesteren.nl/" lang="nl">Anne van Kesteren</a>
    (<a class="p-org org h-org h-card" href="http://www.opera.com/">Opera Software ASA</a>)
    &lt;<a class="u-email email " href="mailto:annevk@annevk.nl">annevk@annevk.nl</a>&gt;</dd>

  <dd class="h-card vcard"><a class="u-url url p-fn fn" href="http://tantek.com/" lang="tr">Tantek &Ccedil;elik</a>
    (<a class="p-org org h-org h-card" href="http://www.mozilla.org/">Mozilla Foundation</a>)
    &lt;<a class="u-email email" href="mailto:tantek@cs.stanford.edu">tantek@cs.stanford.edu</a>&gt;</dd>
 </dl>

<!--begin-copyright-->
<p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2012 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.org/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p>
<!--end-copyright-->
</div>
<hr class="top"/>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>
<p>Fullscreen defines the fullscreen API for the web platform.


<div class="sotd">
<h2 class="no-num no-toc" id="status-of-this-document"><span id="sotd">Status of this Document</span></h2>
<p><i>This section describes the status of this document at the time of its
publication. Other documents may supersede this document. A list of current W3C
publications and the latest revision of this technical report can be found in
the <a href="http://www.w3.org/TR/">W3C technical reports index</a> at
http://www.w3.org/TR/.</i>

<p>This is the 03 July 2012 W3C First Public Working Draft of Fullscreen. 

<p>This document was jointly produced by the
<a href="http://www.w3.org/2008/webapps/">Web Applications Working Group</a> and the
<a href="http://www.w3.org/Style/CSS/members">CSS Working Group</a>.
The Web Applications Working Group is part of the
<a href="http://www.w3.org/2006/rwc/Activity">Rich Web Clients Activity</a> and
the CSS Working Group is part of the <a href="http://www.w3.org/Style/">Style Activity</a>. Both
of these Working Groups are part of the the W3C 
<a href="http://www.w3.org/Interaction/">Interaction Domain</a>.

<p>Comments related to the API part of this document should be sent to the
<a href="mailto:public-webapps@w3.org?subject=%5Bfullscreen-api%5D%20">public-webapps</a> mail list
(<a href="http://lists.w3.org/Archives/Public/public-webapps/">archived</a>) 
with a subject header of <samp>[fullscreen]</samp> and 
comments related to the rendering part of this document should be sent to 
the <a href="mailto:www-style@w3.org?subject=%5Bfullscreen-css%5D%20">www-style</a> mail list
(<a href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) 
with a subject header of <samp>[fullscreen]</samp>. Alternatively, 
<a href="https://www.w3.org/Bugs/Public/enter_bug.cgi?product=WebAppsWG&amp;component=Fullscreen">file a bug</a>.

<p>Publication as a Working Draft does not imply endorsement by the W3C
Membership. This is a draft document and may be updated, replaced or
obsoleted by other documents at any time. It is inappropriate to cite this
document as other than work in progress.



<p>​​​​​This specification was produced by the <a href="http://www.w3.org/2008/webapps/">WebApps Working Group</a> (part of the <a href="http://www.w3.org/Graphics/">Graphics Activity</a>) and the <a href="http://www.w3.org/Style/CSS/members">CSS Working Group</a> (part of the <a href="http://www.w3.org/Style/">Style Activity</a>).

</p><p>This document was produced by groups operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>. W3C maintains a <a href="http://www.w3.org/2004/01/pp-impl/42538/status" rel="disclosure">public list of any patent disclosures (WebApps)</a> and a <a href="http://www.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">public list of any patent disclosures (CSS)</a> made in connection with the deliverables of each group; these pages also include instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>.</p>

</div>



<h2 class="no-num no-toc" id="table-of-contents">Table of Contents</h2>

<!--begin-toc-->
<ol class="toc">
 <li><a href="#conformance"><span class="secno">1 </span>Conformance</a></li>
 <li><a href="#terminology"><span class="secno">2 </span>Terminology</a></li>
 <li><a href="#model"><span class="secno">3 </span>Model</a></li>
 <li><a href="#api"><span class="secno">4 </span>API</a></li>
 <li><a href="#ui"><span class="secno">5 </span>UI</a></li>
 <li><a href="#rendering"><span class="secno">6 </span>Rendering</a>
  <ol>
   <li><a href="#new-stacking-layer"><span class="secno">6.1 </span>New stacking layer</a></li>
   <li><a href="#::backdrop-pseudo-element"><span class="secno">6.2 </span><code title="">::backdrop</code> pseudo-element</a></li>
   <li><a href="#:fullscreen-pseudo-class"><span class="secno">6.3 </span><code title="">:fullscreen</code> pseudo-class</a></li>
   <li><a href="#user-agent-level-style-sheet-defaults"><span class="secno">6.4 </span>User-agent level style sheet defaults</a></ol></li>
 <li><a href="#security-and-privacy-considerations"><span class="secno">7 </span>Security and Privacy Considerations</a></li>
 <li><a class="no-num" href="#references">References</a></li>
 <li><a class="no-num" href="#acknowledgments">Acknowledgments</a></ol>
<!--end-toc-->



<h2 id="conformance"><span class="secno">1 </span>Conformance</h2>
<p>All diagrams, examples, and notes in this specification are
non-normative, as are all sections explicitly marked non-normative.
Everything else in this specification is normative.

<p>The key words "MUST", "MUST NOT", "REQUIRED", <!--"SHALL", "SHALL
NOT",--> "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
"OPTIONAL" in the normative parts of this specification are to be
interpreted as described in RFC2119. For readability, these words do
not appear in all uppercase letters in this specification.
<a data-anolis-ref="" href="#refsRFC2119">[RFC2119]</a>



<h2 id="terminology"><span class="secno">2 </span>Terminology</h2>

<p>Most terminology used in this specification is from CSS, DOM, and HTML.
<a data-anolis-ref="" href="#refsCSS">[CSS]</a>
<a data-anolis-ref="" href="#refsDOM">[DOM]</a>
<a data-anolis-ref="" href="#refsHTML5">[HTML5]</a>

<p>The term <dfn id="context-object">context object</dfn> means the object on which the method
or attribute being discussed was called. When the
<a href="#context-object">context object</a> is unambiguous, the term can be omitted.

<p>A <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context">browsing context</a> <var title="">A</var>
is called a <dfn id="descendant-browsing-context">descendant browsing context</dfn> of a
<a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context">browsing context</a> <var title="">B</var> if
and only if <var title="">B</var> is an
<a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#ancestor-browsing-context">ancestor browsing context</a> of
<var title="">A</var>.



<h2 id="model"><span class="secno">3 </span>Model</h2>

<p>The <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/webappapis.html#task-source">task source</a> used by this
specification is the
<a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/webappapis.html#user-interaction-task-source">user interaction task source</a>.

<p>All <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">documents</a>
have an associated <dfn id="fullscreen-enabled-flag">fullscreen enabled flag</dfn> and
<dfn id="fullscreen-element-stack">fullscreen element stack</dfn>. Unless otherwise stated the
<a href="#fullscreen-enabled-flag">fullscreen enabled flag</a> is unset and the
<a href="#fullscreen-element-stack">fullscreen element stack</a> is empty.

<p class="note">HTML defines under what conditions the
<a href="#fullscreen-enabled-flag">fullscreen enabled flag</a> is set.
<a data-anolis-ref="" href="#refsHTML">[HTML]</a>
<!--
  not set for <iframe>, createDocument();
  set for <iframe allowfullscreen>
-->

<p>To <dfn id="concept-fullscreen-add" title="concept-fullscreen-add">add</dfn> an
<var title="">element</var> on a <var title="">document</var>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a>, add it on top of
<var title="">document</var>'s
<a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context">browsing context</a>'s
<a href="#top-layer">top layer</a>, and then add it on top of
<var title="">document</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a>.

<p>To <dfn id="concept-fullscreen-remove" title="concept-fullscreen-remove">remove</dfn> an
<var title="">element</var> from a <var title="">document</var>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a>, remove it from
<var title="">document</var>'s
<a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context">browsing context</a>'s
<a href="#top-layer">top layer</a>, and then remove it from
<var title="">document</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a>.

<p>To <dfn id="concept-fullscreen-empty" title="concept-fullscreen-empty">empty</dfn> a
<var title="">document</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a>, remove
all the <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">elements</a> in
it from <var title="">document</var>'s
<a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context">browsing context</a>'s
<a href="#top-layer">top layer</a>, and then empty <var title="">document</var>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a>.

<hr>

<p>To <dfn id="fully-exit-fullscreen">fully exit fullscreen</dfn> act as if the
<a href="#dom-document-exitfullscreen"><code title="dom-Document-exitFullscreen">exitFullscreen()</code></a> method
was invoked on the
<a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#top-level-browsing-context">top-level browsing context</a>'s
<a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> and
subsequently <a href="#concept-fullscreen-empty" title="concept-fullscreen-empty">empty</a> that
<a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a>.

<p class="note">Since a <code title="">fullscreenchange</code> event will be
dispatched regardless, emptying the <a href="#fullscreen-element-stack">fullscreen element stack</a>
per above is fine.

<p>If an <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a>
at the top of a <a href="#fullscreen-element-stack">fullscreen element stack</a> is removed from a
<a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a>,
<a href="#fully-exit-fullscreen">fully exit fullscreen</a>.
<!-- XXX reference DOM mutation -->


<h2 id="api"><span class="secno">4 </span>API</h2>

<pre class="idl">partial interface <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#element">Element</a> {
  void <a href="#dom-element-requestfullscreen" title="dom-Element-requestFullscreen">requestFullscreen</a>();
};

partial interface <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#document">Document</a> {
  readonly attribute boolean <a href="#dom-document-fullscreenenabled" title="dom-Document-fullscreenEnabled">fullscreenEnabled</a>;
  readonly attribute <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#element">Element</a>? <a href="#dom-document-fullscreenelement" title="dom-Document-fullscreenElement">fullscreenElement</a>;

  void <a href="#dom-document-exitfullscreen" title="dom-Document-exitFullscreen">exitFullscreen</a>();
};</pre>

<dl class="domintro">
 <dt><code><var title="">element</var> . <a href="#dom-element-requestfullscreen" title="dom-Element-requestFullscreen">requestFullscreen</a>()</code>
 <dd>Displays <var title="">element</var> fullscreen.

 <dt><code><var title="">document</var> . <a href="#dom-document-fullscreenenabled" title="dom-Document-fullscreenEnabled">fullscreenEnabled</a></code>
 <dd>Returns true if <var title="">document</var> has the ability to display
 <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">elements</a>
 fullscreen, or false otherwise.

 <dt><code><var title="">document</var> . <a href="#dom-document-fullscreenelement" title="dom-Document-fullscreenElement">fullscreenElement</a></code>
 <dd>Returns the
 <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> that is
 displayed fullscreen, or null if there is no such
 <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a>.

 <dt><code><var title="">document</var> . <a href="#dom-document-exitfullscreen" title="dom-Document-exitFullscreen">exitFullscreen</a>()</code>
 <dd>Stops any
 <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">elements</a> within
 <var title="">document</var> from being displayed fullscreen.
</dl>

<p>The
<dfn id="dom-element-requestfullscreen" title="dom-Element-requestFullscreen"><code>requestFullscreen()</code></dfn>
method must run these steps:

<ol>
 <li>
  <p>If any of the following conditions are true,
  <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/webappapis.html#queue-a-task">queue a task</a> to
  <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
  named <code>fullscreenerror</code> with its
  <code title="dom-Event-bubbles">bubbles</code> attribute set to true on the
  <a href="#context-object">context object</a>'s
  <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>, and then terminate these steps:

  <ul>
   <li><p>The <a href="#context-object">context object</a> is not
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#in-a-document">in a document</a>.

   <li><p>The <a href="#context-object">context object</a>'s
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>, or an
   <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#ancestor-browsing-context">ancestor browsing context</a>'s
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> does
   not have the <a href="#fullscreen-enabled-flag">fullscreen enabled flag</a> set.

   <li><p>The <a href="#context-object">context object</a>'s
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>
   <a href="#fullscreen-element-stack">fullscreen element stack</a> is not empty and its top
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> is not an
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-tree-ancestor" title="concept-tree-ancestor">ancestor</a> of
   the <a href="#context-object">context object</a>.

   <li><p>A <a href="#descendant-browsing-context">descendant browsing context</a>'s
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> has a
   non-empty <a href="#fullscreen-element-stack">fullscreen element stack</a>.

   <li><p>This algorithm is not
   <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#allowed-to-show-a-pop-up">allowed to show a pop-up</a>.

   <li><p>There is a previously-established user preference, security risk,
   or platform limitation.
  </ul>

 <li><p>Return, and run the remaining steps asynchronously.

 <li><p>Optionally, perform some animation.

 <li><p>Let <var title="">doc</var> be <var title="">element</var>'s
 <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>.

 <li><p>Let <var title="">docs</var> be all <var title="">doc</var>'s
 <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#ancestor-browsing-context">ancestor browsing context</a>'s
 <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">documents</a> (if any)
 and <var title="">doc</var>, in order of furthest away from
 <var title="">doc</var> to <var title="">doc</var>.
 <!-- XXX order terminology -->

 <li>
  <p>For each <var title="">document</var> in <var title="">docs</var>, run these
  substeps:

  <ol>
   <li><p>Let <var title="">following document</var> be the
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> after
   <var title="">document</var> in <var title="">docs</var>, or null if there is
   no such document.

   <li><p>If <var title="">following document</var> is null,
   <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/webappapis.html#queue-a-task">queue a task</a> to
   <a href="#concept-fullscreen-add" title="concept-fullscreen-add">add</a>
   <a href="#context-object">context object</a> on
   <var title="">document</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a> and
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
   named <code>fullscreenchange</code> with its
   <code title="dom-Event-bubbles">bubbles</code> attribute set to true on the
   <var title="">document</var>.

   <li><p>Otherwise, if <var title="">document</var>'s
   <a href="#fullscreen-element-stack">fullscreen element stack</a> is either empty or its top
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> is not
   <var title="">following document</var>'s
   <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context-container">browsing context container</a>,
   <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/webappapis.html#queue-a-task">queue a task</a> to
   <a href="#concept-fullscreen-add" title="concept-fullscreen-add">add</a>
   <var title="">following document</var>'s
   <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context-container">browsing context container</a> on
   <var title="">document</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a> and
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
   named <code>fullscreenchange</code> with its
   <code title="dom-Event-bubbles">bubbles</code> attribute set to true on
   <var title="">document</var>.

   <li><p>Otherwise, do nothing for this <var title="">document</var>. It stays
   the same.
  </ol>

 <li><p>Optionally, display a message indicating how the user can exit
 displaying the <a href="#context-object">context object</a> fullscreen.
</ol>

<p>The
<dfn id="dom-document-fullscreenenabled" title="dom-Document-fullscreenEnabled"><code>fullscreenEnabled</code></dfn>
attribute must return true if the <a href="#context-object">context object</a> and all
<a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#ancestor-browsing-context">ancestor browsing context</a>'s
<a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">documents</a> have
their <a href="#fullscreen-enabled-flag">fullscreen enabled flag</a> set, or false otherwise.

<p>The <dfn id="dom-document-fullscreenelement" title="dom-Document-fullscreenElement"><code>fullscreenElement</code></dfn>
attribute must return the top
<a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> of the
<a href="#context-object">context object</a>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a>, or null otherwise.

<p>The
<dfn id="dom-document-exitfullscreen" title="dom-Document-exitFullscreen"><code>exitFullscreen()</code></dfn>
method must run these steps:

<ol>
 <li><p>Let <var title="">doc</var> be the <a href="#context-object">context object</a>.

 <li><p>If <var title="">doc</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a> is
 empty, terminate these steps.

 <li><p>Return, and run the remaining steps asynchronously.

 <li><p>Optionally, perform some animation.

 <li><p>Let <var title="">descendants</var> be all the <var title="">doc</var>'s
 <a data-anolis-spec="html" href="#descendant-browsing-context">descendant browsing context</a>'s
 <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">documents</a> with a
 non-empty <a href="#fullscreen-element-stack">fullscreen element stack</a> (if any), ordered so that
 the child of the <var title="">doc</var> is last and the
 <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a> furthest
 away from the <var title="">doc</var> is first.
 <!-- XXX order terminology -->

 <li><p>For each <var title="">descendant</var> in
 <var title="">descendants</var>,
 <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/webappapis.html#queue-a-task">queue a task</a> to
 <a href="#concept-fullscreen-empty" title="concept-fullscreen-empty">empty</a>
 <var title="">descendant</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a> and
 <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
 named <code>fullscreenchange</code> with its
 <code title="dom-Event-bubbles">bubbles</code> attribute set to true on
 <var title="">descendant</var>.

 <li>
  <p>While <var title="">doc</var> is not null, run these substeps:

  <ol>
   <li>
    <p><a href="#concept-fullscreen-remove" title="concept-fullscreen-remove">Remove</a> the top
    <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> of
    <var title="">doc</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a>.

    <p>If <var title="">doc</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a> is
    non-empty and the
    <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> now at
    the top is either not <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#in-a-document">in a document</a> or
    its
    <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>
    is not <var title="">doc</var>, run these substeps again.

    <p class="note">This is needed because a non-top
    <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> in the
    <a href="#fullscreen-element-stack">fullscreen element stack</a> could have been removed from
    <var title="">doc</var>.

   <li><p><a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/webappapis.html#queue-a-task">Queue a task</a> to
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire" title="concept-event-fire">fire an event</a>
   named <code>fullscreenchange</code> with its
   <code title="dom-Event-bubbles">bubbles</code> attribute set to true on
   <var title="">doc</var>.

   <li><p>If <var title="">doc</var>'s <a href="#fullscreen-element-stack">fullscreen element stack</a> is
   empty and <var title="">doc</var>'s
   <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context">browsing context</a> has a
   <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context-container">browsing context container</a>, set
   <var title="">doc</var> to that
   <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context-container">browsing context container</a>'s
   <a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document" title="concept-node-document">node document</a>.

   <li><p>Otherwise, set <var title="">doc</var> to null.
  </ol>
</ol>



<h2 id="ui"><span class="secno">5 </span>UI</h2>

<p>User agents are encouraged to implement native media fullscreen controls
in terms of
<a href="#dom-element-requestfullscreen"><code title="dom-Element-requestFullscreen">requestFullscreen()</code></a> and
<a href="#dom-document-exitfullscreen"><code title="dom-Document-exitFullscreen">exitFullscreen()</code></a>.

<p>If the end user instructs the user agent to end a fullscreen session
initiated via
<a href="#dom-element-requestfullscreen"><code title="dom-Element-requestFullscreen">requestFullscreen()</code></a>,
<a href="#fully-exit-fullscreen">fully exit fullscreen</a>.



<h2 id="rendering"><span class="secno">6 </span>Rendering</h2>

<p>This section is to be interpreted equivalently to the Rendering section
of HTML. <a data-anolis-ref="" href="#refsHTML">[HTML]</a>


<h3 id="new-stacking-layer"><span class="secno">6.1 </span>New stacking layer</h3>

<!-- CSS is clunky as hell. That's why we patch it until we die. Ideally
though someone smart comes along and writes a better CSS standard. -->

<p>This specification introduces a new stacking layer to the
<a href="http://www.w3.org/TR/CSS21/zindex.html">Elaborate description of Stacking Contexts</a>
of CSS 2.1. It is called the <dfn id="top-layer">top layer</dfn>, comes after step 10 in
the painting order, and is therefore rendered closest to the user within a
viewport. Each <a class="external" data-anolis-spec="html" href="http://www.w3.org/TR/2012/WD-html5-20120329/browsers.html#browsing-context">browsing context</a> has one
associated viewport and therefore also one <a href="#top-layer">top layer</a>.
<a data-anolis-ref="" href="#refsCSS">[CSS]</a>

<p class="note">The terminology used in this and following subsection attempts
to match CSS 2.1 Appendix E.

<p>The <a href="#top-layer">top layer</a> consists of a stack of elements, rendered in
the order they have been added to the stack. The last element added to the
stack is rendered closest to the user.

<p class="note">The <code title="">z-index</code> property has no effect in the
<a href="#top-layer">top layer</a>.

<p>An element in this stack has the following attributes:

<ul>
 <li><p>It generates a new stacking context.

 <li><p>Its parent stacking context is the root stacking context.

 <li><p>Its containing block is the initial containing block.

 <li>
  <p>It is rendered as an atomic unit as if it were a sibling of the root
  element.

  <p class="note">Ancestor elements with overflow, opacity, masks, etc. cannot
  affect it.

 <li><p>It is not rendered if it, or an ancestor, has the
 <code title="">display</code> property set to <code title="">none</code>.

 <li><p>If its specified <code title="">position</code> property is
 <code title="">static</code>, it computes to <code title="">absolute</code>.

 <li><p>Its outline, if any, is to be rendered before step 10 in the
 painting order.

 <li><p>Unless overridden by another specification, its static position for
 <code title="">left</code>, <code title="">right</code>, and
 <code title="">top</code> is zero.
</ul>


<h3 id="::backdrop-pseudo-element"><span class="secno">6.2 </span><code title="">::backdrop</code> pseudo-element</h3>

<p>Each element in the <a href="#top-layer">top layer</a>'s stack has a
<dfn id="css-pe-backdrop" title="css-pe-backdrop"><code>::backdrop</code></dfn> pseudo-element.
This pseudo-element is a box rendered immediately below the element (and
above the element below the element in the stack, if any), within the same
<a href="#top-layer">top layer</a>.

<p class="note">The <code>::backdrop</code> pseudo-element can be used to
create a backdrop that hides the underlying document for an element in the
<a href="#top-layer">top layer</a>'s stack. E.g. for the element that is displayed
fullscreen as described by this specification.

<p>It does not inherit from any element and is not
inherited from. No restrictions are made on what properties apply to this
pseudo-element either.

<!-- That this is not in a more normative prose is because CSS should have
     hooks for this stuff which make it normative. -->


<h3 id=":fullscreen-pseudo-class"><span class="secno">6.3 </span><code title="">:fullscreen</code> pseudo-class</h3>

<p>The <dfn id="css-pc-fullscreen" title="css-pc-fullscreen"><code>:fullscreen</code></dfn>
pseudo-class must match the top
<a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-element" title="concept-element">element</a> of the
<a class="external" data-anolis-spec="dom" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document" title="concept-document">document</a>'s
<a href="#fullscreen-element-stack">fullscreen element stack</a> (if any).


<h3 id="user-agent-level-style-sheet-defaults"><span class="secno">6.4 </span>User-agent level style sheet defaults</h3>
<!-- HTML's "The CSS user agent style sheet and presentational hints"
section uses this term -->

<pre class="css">@namespace "http://www.w3.org/1999/xhtml";

*|*:fullscreen {
  position:fixed;
  top:0; right:0; bottom:0; left:0;
  margin:0;
  box-sizing:border-box;
  width:100%;
  height:100%;
  object-fit:contain;
}

iframe:fullscreen {
  border:none;
}

*|*:fullscreen::backdrop {
  position:fixed;
  top:0; right:0; bottom:0; left:0;
  background:black;
}</pre>



<h2 id="security-and-privacy-considerations"><span class="secno">7 </span>Security and Privacy Considerations</h2>

<p>User agents should ensure, e.g. by means of an overlay, that the end user
is aware something is displayed fullscreen. User agents should provide a
means of exiting fullscreen that always works and advertise this to the
user. This is to prevent a site from spoofing the end user by recreating the
user agent or even operating system environment when fullscreen. See also
the definition of
<a href="#dom-element-requestfullscreen"><code title="dom-Element-requestFullscreen">requestFullscreen()</code></a>.

<p>To prevent embedded content from going fullscreen only embedded content
specifically allowed via the <code>allowfullscreen</code> attribute of the
HTML <code>iframe</code> element will be able to go fullscreen. This
prevents untrusted content from going fullscreen.



<h2 class="no-num" id="references">References</h2>
<div id="anolis-references"><dl><dt id="refsCSS">[CSS]
<dd><cite><a href="http://www.w3.org/TR/CSS2/">CSS</a></cite>, Bert Bos, Tantek &Ccedil;elik, Ian Hickson et al.. W3C.

<dt id="refsDOM">[DOM]
<dd><cite><a href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html">DOM4</a></cite>, Anne van Kesteren, Aryeh Gregor and Ms2ger. W3C.

<dt id="refsHTML">[HTML]
<dd><cite><a href="http://www.whatwg.org/C">HTML</a></cite>, Ian Hickson. WHATWG.

<dt id="refsHTML5">[HTML5]
<dd><cite><a href="http://dev.w3.org/html5/spec/">HTML5</a></cite>, Ian Hickson. W3C.

<dt id="refsRFC2119">[RFC2119]
<dd><cite><a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a></cite>, Scott Bradner. IETF.

</dl></div>



<h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

<p>Many thanks to Robert O'Callahan for designing the initial model and
being awesome.
<!-- https://wiki.mozilla.org/Gecko:FullScreenAPI -->

<p>Thanks to
Chris Pearce,
Darin Fisher,
Edward O'Connor,
<i title="">fantasai</i>,
Glenn Maynard,
Ian Hickson,
Jo&atilde;o Eiras,
Josh Soref,
&Oslash;yvind Stenhaug,
Rafa&lstrok; Ch&lstrok;odnicki,
Rune Lillesveen,
Sigbj&oslash;rn Vik,
Simon Pieters, and
Tab Atkins

for also being awesome.


