<!-- http://www.w3.org/TR/xml-c14n2-testcases/ -->
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <title>Test cases for Canonical XML 2.0</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
     
    
    
    
    
    <style type="text/css">
table
{
border-collapse:collapse;
}
    
table,th,td
{
border:1px solid black;
}
td
{
 vertical-align: top;
 /* width:300px; */
}
pre 
 { 
  width:300px;
  overflow-x: scroll;
 /* 
  white-space: pre-wrap;       
  white-space: -moz-pre-wrap;  
  white-space: -pre-wrap;      
  white-space: -o-pre-wrap; 
  word-wrap: break-word;
 */      
}
</style>
  <style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #ff4500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}
</style><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;   
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;    
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* HIGHLIGHTS */
code.prettyprint {
    color:  inherit;
}

/* this from google-code-prettify */
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</style><link rel="stylesheet" href="http://www.w3.org/StyleSheets/TR/W3C-WG-NOTE"><!--[if lt IE 9]><script src='http://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--></head>
  <body class="h-entry"><div class="head">
  <p>
    
      <a href="http://www.w3.org/"><img width="72" height="48" src="http://www.w3.org/Icons/w3c_home" alt="W3C"></a>
    
  </p>
  <h1 class="title p-name" id="title">Test cases for Canonical XML 2.0</h1>
  
  <h2 id="w3c-working-group-note-18-june-2013"><abbr title="World Wide Web Consortium">W3C</abbr> Working Group Note <time class="dt-published" datetime="2013-06-18">18 June 2013</time></h2>
  <dl>
    
      <dt>This version:</dt>
      <dd><a class="u-url" href="http://www.w3.org/TR/2013/NOTE-xml-c14n2-testcases-20130618/">http://www.w3.org/TR/2013/NOTE-xml-c14n2-testcases-20130618/</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="http://www.w3.org/TR/xml-c14n2-testcases/">http://www.w3.org/TR/xml-c14n2-testcases/</a></dd>
    
    
      <dt>Latest editor's draft:</dt>
      <dd><a href="http://www.w3.org/2008/xmlsec/Drafts/c14n-20/test-cases/">http://www.w3.org/2008/xmlsec/Drafts/c14n-20/test-cases/</a></dd>
    
    
    
    
    
      <dt>Previous version:</dt>
      <dd><a href="http://www.w3.org/TR/2013/NOTE-xml-c14n2-testcases-20130411/">http://www.w3.org/TR/2013/NOTE-xml-c14n2-testcases-20130411/</a></dd>
    
    
    <dt>Editors:</dt>
    <dd class="p-author h-card vcard"><span class="p-name fn">Pratik Datta</span>, <span class="ed_mailto"><a class="u-email email" href="mailto:pratik.datta@oracle.com">pratik.datta@oracle.com</a></span></dd>
<dd class="p-author h-card vcard"><span class="p-name fn">Frederick Hirsch</span>, <span class="ed_mailto"><a class="u-email email" href="mailto:frederick.hirsch@nokia.com">frederick.hirsch@nokia.com</a></span></dd>

    
    
  </dl>
  
  
  
  
    
      <p class="copyright">
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 
        2013
        
        <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> 
        (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved.
        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
        <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.
      </p>
    
  
  <hr>
</div>
<section id="abstract" class="introductory"><h2>Abstract</h2><p>
This document outlines test cases for Canonical XML 2.0 [<cite><a class="bibref" href="#bib-XML-C14N20">XML-C14N20</a></cite>].
</p></section><section id="sotd" class="introductory"><h2>Status of This Document</h2>
  
    
      
        <p>
          <em>This section describes the status of this document at the time of its publication. Other
          documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision
          of this technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports
          index</a> at http://www.w3.org/TR/.</em>
        </p>
        
<p>
This document outlines test cases for Canonical XML 2.0
[<cite><a class="bibref" href="#bib-XML-C14N20">XML-C14N20</a></cite>]. Changes since the previous publication include
a correction to the text in 
 <a href="#sec-Redecl" class="sectionRef sec-ref">section 3.4 Namespace Re-declarations</a>
  (<a href="Overview_diff.html">diff</a>).
</p>

        <p>
          This document was published by the <a href="http://www.w3.org/2008/xmlsec/">XML Security Working Group</a> as a Working Group Note.
          
          
          If you wish to make comments regarding this document, please send them to 
          <a href="mailto:public-xmlsec@w3.org">public-xmlsec@w3.org</a> 
          (<a href="mailto:public-xmlsec-request@w3.org?subject=subscribe">subscribe</a>,
          <a href="http://lists.w3.org/Archives/Public/public-xmlsec/">archives</a>).
          
          
          
          
            All comments are welcome.</p>
          
        
          <p>
            Publication as a Working Group Note does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership.
            This is a draft document and may be updated, replaced or obsoleted by other documents at 
            any time. It is inappropriate to cite this document as other than work in progress.
          </p>
        
        
        <p>
          
            This document was produced by a group operating under the 
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
          
          
          
            
              <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="http://www.w3.org/2004/01/pp-impl/42458/status" rel="disclosure">public list of any patent disclosures</a> 
            
            made in connection with the deliverables of the group; that page also includes instructions for 
            disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the
            information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
            6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
          
          
        </p>
        
      
    
  
</section><section id="toc"><h2 class="introductory">Table of Contents</h2><ul class="toc"><li class="tocline"><a href="#sec-Introduction" class="tocxref"><span class="secno">1. </span>Introduction</a></li><li class="tocline"><a href="#sec-Canonical11" class="tocxref"><span class="secno">2. </span>Examples from Canonical XML 1.0</a><ul class="toc"><li class="tocline"><a href="#sec-Example-OutsideDoc" class="tocxref"><span class="secno">2.1 </span>PIs, Comments, and Outside of Document Element</a></li><li class="tocline"><a href="#sec-Example-WhitespaceInContent" class="tocxref"><span class="secno">2.2 </span>Whitespace in Document Content</a></li><li class="tocline"><a href="#sec-Example-SETags" class="tocxref"><span class="secno">2.3 </span>Start and End Tags</a></li><li class="tocline"><a href="#sec-Example-Chars" class="tocxref"><span class="secno">2.4 </span>Character Modifications and Character References</a></li><li class="tocline"><a href="#sec-Example-Entities" class="tocxref"><span class="secno">2.5 </span>Entity References</a></li><li class="tocline"><a href="#sec-Example-UTF8" class="tocxref"><span class="secno">2.6 </span>UTF-8 Encoding</a></li></ul></li><li class="tocline"><a href="#sec-Namespace" class="tocxref"><span class="secno">3. </span>Dealing with Namespaces</a><ul class="toc"><li class="tocline"><a href="#sec-PushDown" class="tocxref"><span class="secno">3.1 </span>Namespaces declarations are pushed down</a></li><li class="tocline"><a href="#sec-Default" class="tocxref"><span class="secno">3.2 </span>Default namespace declarations</a></li><li class="tocline"><a href="#sec-Sort" class="tocxref"><span class="secno">3.3 </span>Sorting namespace declarations</a></li><li class="tocline"><a href="#sec-Redecl" class="tocxref"><span class="secno">3.4 </span>Namespace Re-declarations</a></li><li class="tocline"><a href="#sec-Superfluous" class="tocxref"><span class="secno">3.5 </span>Superfluous Namespace declarations</a></li><li class="tocline"><a href="#sec-xmlattribs" class="tocxref"><span class="secno">3.6 </span>Special namespaces "xml", "xsi", "xsd"</a></li><li class="tocline"><a href="#sec-PrefixesInContent" class="tocxref"><span class="secno">3.7 </span>Prefixes in Element content</a></li></ul></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">A. </span>References</a><ul class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">A.1 </span>Normative references</a></li></ul></li></ul></section>

 <section id="sec-Introduction">
<!--OddPage--><h2><span class="secno">1. </span>Introduction</h2>
This document has various test cases for Canonical XML 2.0
[<cite><a class="bibref" href="#bib-XML-C14N20">XML-C14N20</a></cite>]. All the test files are available in this directory: <a href="files/">files</a>. 
<br>
The test cases are organized as follows:
<ul>
 <li><b>Input file</b> All the input files are named starting with "in". 
 e.g. <a href="files/inNsPushdown.xml"><code>inNsPushdown.xml</code></a>.</li>
 <li><b>C14N parameter files</b>The C14n parameters files contain 
 a <code>&lt;CanonicalizationMethod&gt;</code> element containing
  canonicalization parameters. 
  <ul>
  <li><a href="files/c14nDefault.xml"><code>c14nDefault.xml</code></a>: Default canonicalization.</li>
  <li><a href="files/c14nComment.xml"><code>c14nComment.xml</code></a>: Canonicalization with comment removal.</li>
  <li><a href="files/c14nPrefix.xml"><code>c14nPrefix.xml</code></a>: Canonicalization with prefix rewriting.</li>
  <li><a href="files/c14nPrefixQname.xml"><code>c14nPrefixQName.xml</code></a>: Canonicalization with prefix rewriting 
    and a Qname aware attribute <code>xsi:type</code>.</li>
  <li><a href="files/c14nQname.xml"><code>c14nQname.xml</code></a>: Canonicalization with 
  a Qname aware attribute <code>xsi:type</code>, but not prefix rewriting.</li>
  <li><a href="files/c14nQnameElem.xml"><code>c14nQnameElem.xml</code></a>: Canonicalization with a 
  Qname aware element <code>&lt;a:bar&gt;</code>, but not prefix rewriting.</li>
  <li><a href="files/c14nQnameXpathElem.xml"><code>c14nQnameXpathElem.xml</code></a>: Canonicalization with a 
  Qname aware element <code>&lt;a:bar&gt;</code>, and Qname aware XPath element 
  <code>&lt;dsig2:IncludedXPath&gt;</code>, but not prefix rewriting.</li>
  <li><a href="files/c14nPrefixQnameXpathElem.xml"><code>c14nPrefixQnameXpathElem.xml</code></a>: Canonicalization with 
  prefix rewriting and a 
  Qname aware element <code>&lt;a:bar&gt;</code>, and Qname aware XPath element <code>&lt;dsig2:IncludedXPath&gt;</code>.</li>
  </ul>
 </li>
 <li><b>Output files</b> Each input file is run with each
 canonicalization parameter file to produce canonicalize 
 output files. These are named "out_" + &lt;input file name&gt; + "_"
 + &lt;c14n parameter file name&gt;,  
 e.g. <a href="files/out_inNsPushdown_c14nDefault.xml"><code>out_inNsPushdown_c14nDefault.xml </code></a>. </li>
</ul> 

In the tables below the file contents are embedded in the table, but you can download the actual file by
clicking on the hyperlink on the table header.
 
</section>

<section id="sec-Canonical11">
<!--OddPage--><h2><span class="secno">2. </span>Examples from Canonical XML 1.0</h2>

The examples in this section assume a non-validating processor,
primarily so that a document type declaration can be used to declare
entities as well as default attributes and attributes of various types
(such as ID and enumerated) without having to declare all attributes
for all elements in the document. As well, one example contains an
element that deliberately violates a validity constraint (because
it is still well-formed).

<section id="sec-Example-OutsideDoc">
<h3><span class="secno">2.1 </span>PIs, Comments, and Outside of Document Element</h3>
<b>Demonstrates:</b><br> 
<ul>
<li>Loss of XML declaration  <code>&lt;?xml version="1.0"?&gt;</code></li>
<li>Loss of DTD <code>&lt;!DOCTYPE doc SYSTEM "doc.dtd"&gt; </code></li>
<li>Normalization of whitespace outside of document element (first
character of both canonical forms is '&lt;'; single line breaks separate
PIs and comments outside of document element)</li>
<li>Loss of whitespace between PITarget and its data</li>
<li>Retention of whitespace inside PI data</li>
<li>Comment removal from uncommented canonical form, including delimiter
for comments outside document element (the last character in both
canonical forms is '&gt;')</li>
</ul>
<table>
<tbody><tr>
 <th><a href="files/inC14N1.xml">Original Data</a></th>
 <th><a href="files/out_inC14N1_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inC14N1_c14nComment.xml">After c14n with Comments</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 1</span></div><pre class="example highlight prettyprint"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pun">?&gt;</span><span class="pln">

</span><span class="pun">&lt;?</span><span class="pln">xml</span><span class="pun">-</span><span class="pln">stylesheet   href</span><span class="pun">=</span><span class="str">"doc.xsl"</span><span class="pln">
   type</span><span class="pun">=</span><span class="str">"text/xsl"</span><span class="pln">   </span><span class="pun">?&gt;</span><span class="pln">

</span><span class="dec">&lt;!DOCTYPE doc SYSTEM "doc.dtd"&gt;</span><span class="pln">

</span><span class="tag">&lt;doc&gt;</span><span class="pln">Hello, world!</span><span class="com">&lt;!-- Comment 1 --&gt;</span><span class="tag">&lt;/doc&gt;</span><span class="pln">

</span><span class="pun">&lt;?</span><span class="pln">pi</span><span class="pun">-</span><span class="pln">without</span><span class="pun">-</span><span class="pln">data     </span><span class="pun">?&gt;</span><span class="pln">

</span><span class="com">&lt;!-- Comment 2 --&gt;</span><span class="pln">

</span><span class="com">&lt;!-- Comment 3 --&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 2</span></div><pre class="example highlight prettyprint"><span class="pun">&lt;?</span><span class="pln">xml</span><span class="pun">-</span><span class="pln">stylesheet href</span><span class="pun">=</span><span class="str">"doc.xsl"</span><span class="pln">
   type</span><span class="pun">=</span><span class="str">"text/xsl"</span><span class="pln">   </span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;doc&gt;</span><span class="pln">Hello, world!</span><span class="tag">&lt;/doc&gt;</span><span class="pln">
</span><span class="pun">&lt;?</span><span class="pln">pi</span><span class="pun">-</span><span class="pln">without</span><span class="pun">-</span><span class="pln">data</span><span class="pun">?&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 3</span></div><pre class="example highlight prettyprint"><span class="pun">&lt;?</span><span class="pln">xml</span><span class="pun">-</span><span class="pln">stylesheet href</span><span class="pun">=</span><span class="str">"doc.xsl"</span><span class="pln">
   type</span><span class="pun">=</span><span class="str">"text/xsl"</span><span class="pln">   </span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;doc&gt;</span><span class="pln">Hello, world!</span><span class="com">&lt;!-- Comment 1 --&gt;</span><span class="tag">&lt;/doc&gt;</span><span class="pln">
</span><span class="pun">&lt;?</span><span class="pln">pi</span><span class="pun">-</span><span class="pln">without</span><span class="pun">-</span><span class="pln">data</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="com">&lt;!-- Comment 2 --&gt;</span><span class="pln">
</span><span class="com">&lt;!-- Comment 3 --&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>

<section id="sec-Example-WhitespaceInContent">
<h3><span class="secno">2.2 </span>Whitespace in Document Content</h3>
<b>"After c14n" Demonstrates:</b><br>
<ul>
<li>Retain all whitespace between consecutive start tags, clean or
dirty</li>
<li>Retain all whitespace between consecutive end tags, clean or dirty</li>
<li>Retain all whitespace between end tag/start tag pair, clean or
dirty</li>
<li>Retain all whitespace in character content, clean or dirty</li>
</ul> 


<p><b>Note:</b> For "After c14n", the input document and canonical
form are identical. Both end with '&gt;' character.</p>

<b>"After c14n with Trim whitespace" Demonstrates:</b><br>
<ul>
<li>Retain white space inside text, i.e. inbetween  <code>A</code> and <code>B</code> but remove
all leading and trailing whitespace </li>
</ul>

<table>
<tbody><tr>
 <th><a href="files/inC14N2.xml">Original Data</a></th>
 <th><a href="files/out_inC14N2_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inC14N2_c14nTrim.xml">After c14n with Trim whitespace</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 4</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc&gt;</span><span class="pln">
   </span><span class="tag">&lt;clean&gt;</span><span class="pln">   </span><span class="tag">&lt;/clean&gt;</span><span class="pln">
   </span><span class="tag">&lt;dirty&gt;</span><span class="pln">   A   B   </span><span class="tag">&lt;/dirty&gt;</span><span class="pln">
   </span><span class="tag">&lt;mixed&gt;</span><span class="pln">
      A
      </span><span class="tag">&lt;clean&gt;</span><span class="pln">   </span><span class="tag">&lt;/clean&gt;</span><span class="pln">
      B
      </span><span class="tag">&lt;dirty&gt;</span><span class="pln">   A   B   </span><span class="tag">&lt;/dirty&gt;</span><span class="pln">
      C
   </span><span class="tag">&lt;/mixed&gt;</span><span class="pln">
</span><span class="tag">&lt;/doc&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 5</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc&gt;</span><span class="pln">
   </span><span class="tag">&lt;clean&gt;</span><span class="pln">   </span><span class="tag">&lt;/clean&gt;</span><span class="pln">
   </span><span class="tag">&lt;dirty&gt;</span><span class="pln">   A   B   </span><span class="tag">&lt;/dirty&gt;</span><span class="pln">
   </span><span class="tag">&lt;mixed&gt;</span><span class="pln">
      A
      </span><span class="tag">&lt;clean&gt;</span><span class="pln">   </span><span class="tag">&lt;/clean&gt;</span><span class="pln">
      B
      </span><span class="tag">&lt;dirty&gt;</span><span class="pln">   A   B   </span><span class="tag">&lt;/dirty&gt;</span><span class="pln">
      C
   </span><span class="tag">&lt;/mixed&gt;</span><span class="pln">
</span><span class="tag">&lt;/doc&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 6</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc&gt;&lt;clean&gt;&lt;/clean&gt;&lt;dirty&gt;</span><span class="pln">A   B</span><span class="tag">&lt;/dirty&gt;&lt;mixed&gt;</span><span class="pln">A</span><span class="tag">&lt;clean&gt;&lt;/clean&gt;</span><span class="pln">B</span><span class="tag">&lt;dirty&gt;</span><span class="pln">A   B</span><span class="tag">&lt;/dirty&gt;</span><span class="pln">C</span><span class="tag">&lt;/mixed&gt;&lt;/doc&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>

<section id="sec-Example-SETags">
<h3><span class="secno">2.3 </span>Start and End Tags</h3>

<b>"After c14n" Demonstrates:</b> 
<ul>
<li>Empty element conversion to start-end tag pair. 
  I.e. <code>&lt;e1   /&gt;</code> becomes <code>&lt;e1&gt;&lt;/e1&gt;</code></li>
<li>Normalization of whitespace in start and end tags.
  I.e.. <code>&lt;e2   &gt;&lt;/e2&gt;</code> becomes <code>&lt;e2&gt;&lt;/e2&gt;</code></li>
<li>Relative order of namespace and attribute axes, 
I.e. in <code>&lt;e5&gt;</code> the namespace declarations precede the attribute declarations.</li>
<li>Lexicographic ordering of namespace and attribute axes</li>
<li>Retention of namespace prefixes from original document</li>
<li>Elimination of superfluous namespace declarations</li>
<li>Addition of default attribute. I.e. <code>&lt;e9 attr="default"&gt;</code>. </li>
</ul> 

<p><b>Note:</b> Some start tags in the canonical form are very
long, but each start tag in this example is entirely on a single line.</p>
 
<p><b>Note:</b> In <code>e5</code>, <code>b:attr</code> precedes 
<code>a:attr</code> because the primary key is namespace URI not namespace
prefix, and <code>attr2</code> precedes <code>b:attr</code> because
the default namespace is not applied to unqualified attributes (so
the namespace URI for <code>attr2</code> is empty).</p> 

<table>
<tbody><tr>
 <th><a href="files/inC14N3.xml">Original Data</a></th>
 <th><a href="files/out_inC14N3_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inC14N3_c14nPrefix.xml">After c14n with PrefixRewrite</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 7</span></div><pre class="example highlight prettyprint"><span class="dec">&lt;!DOCTYPE doc [&lt;!ATTLIST e9 attr CDATA "default"&gt;</span><span class="pln">]&gt;
</span><span class="tag">&lt;doc&gt;</span><span class="pln">
   </span><span class="tag">&lt;e1</span><span class="pln">   </span><span class="tag">/&gt;</span><span class="pln">
   </span><span class="tag">&lt;e2</span><span class="pln">   </span><span class="tag">&gt;&lt;/e2&gt;</span><span class="pln">
   </span><span class="tag">&lt;e3</span><span class="pln">   </span><span class="atn">name</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"elem3"</span><span class="pln">   </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"elem3"</span><span class="pln">   </span><span class="tag">/&gt;</span><span class="pln">
   </span><span class="tag">&lt;e4</span><span class="pln">   </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"elem4"</span><span class="pln">   </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"elem4"</span><span class="pln">   </span><span class="tag">&gt;&lt;/e4&gt;</span><span class="pln">
   </span><span class="tag">&lt;e5</span><span class="pln"> </span><span class="atn">a:attr</span><span class="pun">=</span><span class="atv">"out"</span><span class="pln"> </span><span class="atn">b:attr</span><span class="pun">=</span><span class="atv">"sorted"</span><span class="pln"> </span><span class="atn">attr2</span><span class="pun">=</span><span class="atv">"all"</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">"I'm"</span><span class="pln">
      </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://www.ietf.org"</span><span class="pln">
      </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://www.w3.org"</span><span class="pln">
      </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://example.org"</span><span class="tag">/&gt;</span><span class="pln">
   </span><span class="tag">&lt;e6</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">""</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://www.w3.org"</span><span class="tag">&gt;</span><span class="pln">
      </span><span class="tag">&lt;e7</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.ietf.org"</span><span class="tag">&gt;</span><span class="pln">
         </span><span class="tag">&lt;e8</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">""</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://www.w3.org"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;e9</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">""</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://www.ietf.org"</span><span class="tag">/&gt;</span><span class="pln">
         </span><span class="tag">&lt;/e8&gt;</span><span class="pln">
      </span><span class="tag">&lt;/e7&gt;</span><span class="pln">
   </span><span class="tag">&lt;/e6&gt;</span><span class="pln">
</span><span class="tag">&lt;/doc&gt;</span><span class="pln"> </span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 8</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc&gt;</span><span class="pln">
   </span><span class="tag">&lt;e1&gt;&lt;/e1&gt;</span><span class="pln">
   </span><span class="tag">&lt;e2&gt;&lt;/e2&gt;</span><span class="pln">
   </span><span class="tag">&lt;e3</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"elem3"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"elem3"</span><span class="tag">&gt;&lt;/e3&gt;</span><span class="pln">
   </span><span class="tag">&lt;e4</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"elem4"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"elem4"</span><span class="tag">&gt;&lt;/e4&gt;</span><span class="pln">
   </span><span class="tag">&lt;e5</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://example.org"</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://www.w3.org"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://www.ietf.org"</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">"I'm"</span><span class="pln"> </span><span class="atn">attr2</span><span class="pun">=</span><span class="atv">"all"</span><span class="pln"> </span><span class="atn">b:attr</span><span class="pun">=</span><span class="atv">"sorted"</span><span class="pln"> </span><span class="atn">a:attr</span><span class="pun">=</span><span class="atv">"out"</span><span class="tag">&gt;&lt;/e5&gt;</span><span class="pln">
   </span><span class="tag">&lt;e6&gt;</span><span class="pln">
      </span><span class="tag">&lt;e7</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.ietf.org"</span><span class="tag">&gt;</span><span class="pln">
         </span><span class="tag">&lt;e8</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">""</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;e9</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">"default"</span><span class="tag">&gt;&lt;/e9&gt;</span><span class="pln">
         </span><span class="tag">&lt;/e8&gt;</span><span class="pln">
      </span><span class="tag">&lt;/e7&gt;</span><span class="pln">
   </span><span class="tag">&lt;/e6&gt;</span><span class="pln">
</span><span class="tag">&lt;/doc&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 9</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;n0:doc</span><span class="pln"> </span><span class="atn">xmlns:n0</span><span class="pun">=</span><span class="atv">""</span><span class="tag">&gt;</span><span class="pln">
   </span><span class="tag">&lt;n0:e1&gt;&lt;/n0:e1&gt;</span><span class="pln">
   </span><span class="tag">&lt;n0:e2&gt;&lt;/n0:e2&gt;</span><span class="pln">
   </span><span class="tag">&lt;n0:e3</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"elem3"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"elem3"</span><span class="tag">&gt;&lt;/n0:e3&gt;</span><span class="pln">
   </span><span class="tag">&lt;n0:e4</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"elem4"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"elem4"</span><span class="tag">&gt;&lt;/n0:e4&gt;</span><span class="pln">
   </span><span class="tag">&lt;n1:e5</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://example.org"</span><span class="pln"> </span><span class="atn">xmlns:n2</span><span class="pun">=</span><span class="atv">"http://www.ietf.org"</span><span class="pln"> </span><span class="atn">xmlns:n3</span><span class="pun">=</span><span class="atv">"http://www.w3.org"</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">"I'm"</span><span class="pln"> </span><span class="atn">attr2</span><span class="pun">=</span><span class="atv">"all"</span><span class="pln"> </span><span class="atn">n2:attr</span><span class="pun">=</span><span class="atv">"sorted"</span><span class="pln"> </span><span class="atn">n3:attr</span><span class="pun">=</span><span class="atv">"out"</span><span class="tag">&gt;&lt;/n1:e5&gt;</span><span class="pln">
   </span><span class="tag">&lt;n0:e6&gt;</span><span class="pln">
      </span><span class="tag">&lt;n2:e7</span><span class="pln"> </span><span class="atn">xmlns:n2</span><span class="pun">=</span><span class="atv">"http://www.ietf.org"</span><span class="tag">&gt;</span><span class="pln">
         </span><span class="tag">&lt;n0:e8&gt;</span><span class="pln">
            </span><span class="tag">&lt;n0:e9</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">"default"</span><span class="tag">&gt;&lt;/n0:e9&gt;</span><span class="pln">
         </span><span class="tag">&lt;/n0:e8&gt;</span><span class="pln">
      </span><span class="tag">&lt;/n2:e7&gt;</span><span class="pln">
   </span><span class="tag">&lt;/n0:e6&gt;</span><span class="pln">
</span><span class="tag">&lt;/n0:doc&gt;</span></pre></div></td> 
</tr>
<tr>
 <th></th>
 <th><a href="files/out_inC14N3_c14nTrim.xml">After c14n with Trim whitespace</a></th>
 <th></th>
</tr>
<tr>
<td></td> 
<td><div class="example"><div class="example-title"><span>Example 10</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc&gt;&lt;e1&gt;&lt;/e1&gt;&lt;e2&gt;&lt;/e2&gt;&lt;e3</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"elem3"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"elem3"</span><span class="tag">&gt;&lt;/e3&gt;&lt;e4</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"elem4"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"elem4"</span><span class="tag">&gt;&lt;/e4&gt;&lt;e5</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://example.org"</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://www.w3.org"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://www.ietf.org"</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">"I'm"</span><span class="pln"> </span><span class="atn">attr2</span><span class="pun">=</span><span class="atv">"all"</span><span class="pln"> </span><span class="atn">b:attr</span><span class="pun">=</span><span class="atv">"sorted"</span><span class="pln"> </span><span class="atn">a:attr</span><span class="pun">=</span><span class="atv">"out"</span><span class="tag">&gt;&lt;/e5&gt;&lt;e6&gt;&lt;e7</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.ietf.org"</span><span class="tag">&gt;&lt;e8</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">""</span><span class="tag">&gt;&lt;e9</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">"default"</span><span class="tag">&gt;&lt;/e9&gt;&lt;/e8&gt;&lt;/e7&gt;&lt;/e6&gt;&lt;/doc&gt;</span></pre></div></td> 
<td></td> 
</tr>
</tbody></table>
</section>


<section id="sec-Example-Chars">
<h3><span class="secno">2.4 </span>Character Modifications and Character References</h3>

<b>Demonstrates:</b> 
<ul>
<li>Character reference replacement</li>
<li>Attribute value delimiters set to quotation marks (double quotes)</li>
<li>Attribute value normalization</li>
<li>CDATA section replacement</li>
<li>Encoding of special characters as character references in attribute
values (&amp;amp;, &amp;lt;, &amp;quot;, &amp;#xD;, &amp;#xA;, &amp;#x9;)</li>
<li>Encoding of special characters as character references in text
(&amp;amp;, &amp;lt;, &amp;gt;, &amp;#xD;)</li>
</ul> 

<p><b>Note:</b> The last element, <code>normId</code>, is well-formed
but violates a validity constraint for attributes of type ID. For
testing canonical XML implementations based on validating processors,
remove the line containing this element from the input and canonical
form. In general, XML consumers should be discouraged from using this
feature of XML.</p> <p><b>Note:</b> Whitespace character references
other than &amp;#x20; are not affected by attribute value normalization 
[<cite><a class="bibref" href="#bib-XML10">XML10</a></cite>].</p> 

<p><b>Note:</b> In the canonical form,
the value of the attribute named <code>attr</code> in the element 
<code>norm</code> begins with a space, an apostrophe (single quote), then 
<i>four</i> spaces before the first character reference.</p> 

<p><b>Note:</b> The <code>expr</code> attribute of the second 
<code>compute</code> element contains no line breaks.</p>

<table>
<tbody><tr>
 <th><a href="files/inC14N4.xml">Original Data</a></th>
 <th><a href="files/out_inC14N4_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inC14N4_c14nTrim.xml">After c14n with Trim whitespace</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 11</span></div><pre class="example highlight prettyprint"><span class="dec">&lt;!DOCTYPE doc [
&lt;!ATTLIST normId id ID #IMPLIED&gt;</span><span class="pln">
</span><span class="dec">&lt;!ATTLIST normNames attr NMTOKENS #IMPLIED&gt;</span><span class="pln">
]&gt;
</span><span class="tag">&lt;doc&gt;</span><span class="pln">
   </span><span class="tag">&lt;text&gt;</span><span class="pln">First line
Second line</span><span class="tag">&lt;/text&gt;</span><span class="pln">
   </span><span class="tag">&lt;value&gt;</span><span class="pln">2</span><span class="tag">&lt;/value&gt;</span><span class="pln">
   </span><span class="tag">&lt;compute&gt;</span><span class="pln">&lt;![CDATA[value&gt;"0" &amp;&amp; value&lt;"10" ?"valid":"error"]]&gt;</span><span class="tag">&lt;/compute&gt;</span><span class="pln">
   </span><span class="tag">&lt;compute</span><span class="pln"> </span><span class="atn">expr</span><span class="pun">=</span><span class="atv">'value&gt;</span><span class="pln">"0" &amp;&amp; value&lt;"10" ?"valid":"error"'&gt;valid</span><span class="tag">&lt;/compute&gt;</span><span class="pln">
   </span><span class="tag">&lt;norm</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">' '</span><span class="pln">    
	   </span><span class="atv">' '</span><span class="tag">/&gt;</span><span class="pln">
   </span><span class="tag">&lt;normNames</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">'   A    
	   B   '</span><span class="tag">/&gt;</span><span class="pln">
   </span><span class="tag">&lt;normId</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">' '</span><span class="pln"> 
	 </span><span class="atv">' '</span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/doc&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 12</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc&gt;</span><span class="pln">
   </span><span class="tag">&lt;text&gt;</span><span class="pln">First line
Second line</span><span class="tag">&lt;/text&gt;</span><span class="pln">
   </span><span class="tag">&lt;value&gt;</span><span class="pln">2</span><span class="tag">&lt;/value&gt;</span><span class="pln">
   </span><span class="tag">&lt;compute&gt;</span><span class="pln">value&gt;"0" &amp;&amp; value&lt;"10" ?"valid":"error"</span><span class="tag">&lt;/compute&gt;</span><span class="pln">
   </span><span class="tag">&lt;compute</span><span class="pln"> </span><span class="atn">expr</span><span class="pun">=</span><span class="atv">"value&gt;</span><span class="pln">"0" &amp;&amp; value&lt;"10" ?"valid":"error""&gt;valid</span><span class="tag">&lt;/compute&gt;</span><span class="pln">
   </span><span class="tag">&lt;norm</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">" '    
	   ' "</span><span class="tag">&gt;&lt;/norm&gt;</span><span class="pln">
   </span><span class="tag">&lt;normNames</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">"A 
	 B"</span><span class="tag">&gt;&lt;/normNames&gt;</span><span class="pln">
   </span><span class="tag">&lt;normId</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"' 
	 '"</span><span class="tag">&gt;&lt;/normId&gt;</span><span class="pln">
</span><span class="tag">&lt;/doc&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 13</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc&gt;&lt;text&gt;</span><span class="pln">First line
Second line</span><span class="tag">&lt;/text&gt;&lt;value&gt;</span><span class="pln">2</span><span class="tag">&lt;/value&gt;&lt;compute&gt;</span><span class="pln">value&gt;"0" &amp;&amp; value&lt;"10" ?"valid":"error"</span><span class="tag">&lt;/compute&gt;&lt;compute</span><span class="pln"> </span><span class="atn">expr</span><span class="pun">=</span><span class="atv">"value&gt;</span><span class="pln">"0" &amp;&amp; value&lt;"10" ?"valid":"error""&gt;valid</span><span class="tag">&lt;/compute&gt;&lt;norm</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">" '    
	   ' "</span><span class="tag">&gt;&lt;/norm&gt;&lt;normNames</span><span class="pln"> </span><span class="atn">attr</span><span class="pun">=</span><span class="atv">"A 
	 B"</span><span class="tag">&gt;&lt;/normNames&gt;&lt;normId</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"' 
	 '"</span><span class="tag">&gt;&lt;/normId&gt;&lt;/doc&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>


<section id="sec-Example-Entities">
<h3><span class="secno">2.5 </span>Entity References</h3>

<b>Demonstrates:</b> 
<ul>
<li>Internal parsed entity reference replacement</li>
<li>External parsed entity reference replacement (including whitespace
outside elements and PIs)</li>
<li>External unparsed entity reference</li>
</ul> 

<table>
<tbody><tr>
 <th><a href="files/inC14N5.xml">Original Data</a></th>
 <th><a href="files/out_inC14N5_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inC14N5_c14nTrim.xml">After c14n with Trim whitespace</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 14</span></div><pre class="example highlight prettyprint"><span class="dec">&lt;!DOCTYPE doc [
&lt;!ATTLIST doc attrExtEnt CDATA #IMPLIED&gt;</span><span class="pln">
</span><span class="dec">&lt;!ENTITY ent1 "Hello"&gt;</span><span class="pln">
</span><span class="dec">&lt;!ENTITY ent2 SYSTEM "world.txt"&gt;</span><span class="pln">
</span><span class="dec">&lt;!ENTITY entExt SYSTEM "earth.gif" NDATA gif&gt;</span><span class="pln">
</span><span class="dec">&lt;!NOTATION gif SYSTEM "viewgif.exe"&gt;</span><span class="pln">
]&gt;
</span><span class="tag">&lt;doc</span><span class="pln"> </span><span class="atn">attrExtEnt</span><span class="pun">=</span><span class="atv">"entExt"</span><span class="tag">&gt;</span><span class="pln">
   &amp;ent1;, &amp;ent2;!
</span><span class="tag">&lt;/doc&gt;</span><span class="pln">

</span><span class="com">&lt;!-- Let world.txt contain "world" (excluding the quotes) --&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 15</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc</span><span class="pln"> </span><span class="atn">attrExtEnt</span><span class="pun">=</span><span class="atv">"entExt"</span><span class="tag">&gt;</span><span class="pln">
   Hello, world!
</span><span class="tag">&lt;/doc&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 16</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc</span><span class="pln"> </span><span class="atn">attrExtEnt</span><span class="pun">=</span><span class="atv">"entExt"</span><span class="tag">&gt;</span><span class="pln">Hello, world!</span><span class="tag">&lt;/doc&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>


<section id="sec-Example-UTF8">
<h3><span class="secno">2.6 </span>UTF-8 Encoding</h3>

<b>Demonstrates:</b> 
<ul>
<li>Effect of transcoding from a sample encoding to UTF-8</li>
</ul> 

<p class="Note"><b>Note:</b> The content of the doc element 
are two octets whose hexadecimal values are C2
and A9, which is the UTF-8 encoding of the UCS codepoint for the copyright
sign (©).</p>

<table>
<tbody><tr>
 <th><a href="files/inC14N6.xml">Original Data</a></th>
 <th><a href="files/out_inC14N6_c14nDefault.xml">After c14n</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 17</span></div><pre class="example highlight prettyprint"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"ISO-8859-1"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;doc&gt;</span><span class="pln">©</span><span class="tag">&lt;/doc&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 18</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;doc&gt;</span><span class="pln">©</span><span class="tag">&lt;/doc&gt;</span></pre></div></td> 
</tr>
</tbody></table>

</section>

</section>

<section id="sec-Namespace">
<!--OddPage--><h2><span class="secno">3. </span>Dealing with Namespaces</h2>

<section id="sec-PushDown">
<h3><span class="secno">3.1 </span>Namespaces declarations are pushed down</h3>
In this example there are three prefixes declarations:  "a"  "b" and "c". 
Of these "c" is not visibly utilized at all, so it does not appear in the canonicalized output.
"b" is used but not by the top level "a:foo" element, but by each of its children, so 
canonicalization "pushes down" the declaration to where it is actually utilized. Note the three "b:bar"
elements utilize the "b" prefix in the element name, whereas the last "a:bar" element utilizes that declaration 
not in the element name , but in the "b:att" attribute.
<table>
<tbody><tr>
 <th><a href="files/inNsPushdown.xml">Original Data</a></th>
 <th><a href="files/out_inNsPushdown_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inNsPushdown_c14nPrefix.xml">After c14n with PrefixRewrite</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 19</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;a:foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://a"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="pln"> </span><span class="atn">xmlns:c</span><span class="pun">=</span><span class="atv">"http://c"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;b:bar/&gt;</span><span class="pln">
 </span><span class="tag">&lt;b:bar/&gt;</span><span class="pln">
 </span><span class="tag">&lt;b:bar/&gt;</span><span class="pln">
 </span><span class="tag">&lt;a:bar</span><span class="pln"> </span><span class="atn">b:att1</span><span class="pun">=</span><span class="atv">"val"</span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/a:foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 20</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;a:foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://a"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;b:bar</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="tag">&gt;&lt;/b:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;b:bar</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="tag">&gt;&lt;/b:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;b:bar</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="tag">&gt;&lt;/b:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;a:bar</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="pln"> </span><span class="atn">b:att1</span><span class="pun">=</span><span class="atv">"val"</span><span class="tag">&gt;&lt;/a:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/a:foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 21</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;n0:foo</span><span class="pln"> </span><span class="atn">xmlns:n0</span><span class="pun">=</span><span class="atv">"http://a"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;n1:bar</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="tag">&gt;&lt;/n1:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;n1:bar</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="tag">&gt;&lt;/n1:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;n1:bar</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="tag">&gt;&lt;/n1:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;n0:bar</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="pln"> </span><span class="atn">n1:att1</span><span class="pun">=</span><span class="atv">"val"</span><span class="tag">&gt;&lt;/n0:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/n0:foo&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>


<section id="sec-Default">
<h3><span class="secno">3.2 </span>Default namespace declarations</h3>
In this example there are three prefixes declarations:  "a", "b", and also a default prefix.
Of these "a" is not visibly utilized at all, so it does not appear in the canonicalized output.
The "foo" element uses the default prefix. Note however the "att2" attribute does NOT use the 
default prefix, it is simply in the scope of the "b:bar" element. 
With prefix rewriting both the default prefix and the "b" prefix are rewritten.
<table>
<tbody><tr>
 <th><a href="files/inNsDefault.xml">Original Data</a></th>
 <th><a href="files/out_inNsDefault_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inNsDefault_c14nPrefix.xml">After c14n with PrefixRewrite</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 22</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://a"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;b:bar</span><span class="pln"> </span><span class="atn">b:att1</span><span class="pun">=</span><span class="atv">"val"</span><span class="pln"> </span><span class="atn">att2</span><span class="pun">=</span><span class="atv">"val"</span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 23</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;foo&gt;</span><span class="pln">
 </span><span class="tag">&lt;b:bar</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="pln"> </span><span class="atn">att2</span><span class="pun">=</span><span class="atv">"val"</span><span class="pln"> </span><span class="atn">b:att1</span><span class="pun">=</span><span class="atv">"val"</span><span class="tag">&gt;&lt;/b:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 24</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;n0:foo</span><span class="pln"> </span><span class="atn">xmlns:n0</span><span class="pun">=</span><span class="atv">""</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;n1:bar</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="pln"> </span><span class="atn">att2</span><span class="pun">=</span><span class="atv">"val"</span><span class="pln"> </span><span class="atn">n1:att1</span><span class="pun">=</span><span class="atv">"val"</span><span class="tag">&gt;&lt;/n1:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/n0:foo&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>

<section id="sec-Sort">
<h3><span class="secno">3.3 </span>Sorting namespace declarations</h3>
<p>In this example there are four prefixes declarations:  "a", "b", "c" and "d". 
They map to namespace URIs "http://z3", "http://z2", "http://z1" and "http://z0" respectively.
</p>
<p>
Notice the following things in the default canonicalization ("After
c14n"):
</p>
<ul>
<li>In "a:foo" all the namespace declarations appear before the attribute declarations, even though 
they were mixed up in the original document.</li>
<li>In "a:foo" the attributes are sorted in this order - "c:att3",
  "b:att1", "b:att2".   
This is because attributes are sorted by namespaceURI as primary key
  and localName as secondary key. 
Since "c" is http://z1 and "b" is http://z2, all the "c" attributes
  appear before "b" attributes. Note that within the "b" attributes "att1"
  appears before "att2". </li>  
<li>In "a:foo" all the namespace declarations are sorted by prefixes
  i.e. "a", "b", "c", and  
NOT by namespace URIs.</li>
</ul>

And notice these things in canonicalization with prefix rewriting ("After c14n with PrefixRewrite"):
<ul>
<li>New prefixes are assigned in the order in which they are visibly utilized: 
<ol>
 <li> At first "a:foo" visibly utilizes 
prefixes "a", "b" and "c". These are then sorted by namespace URI, resulting in "c", "b", "a". Then they are 
assigned prefixes "http://z1"-&gt;"n0", "http://z2"-&gt;"n1" and
 "http://z3"-&gt;"n2"</li> 
 <li>After that "c:bar" visibly utilizes prefix "d". This gets assigned prefix "n3" </li>
</ol> 
</li>
<li>In "a:foo" all rewritten prefixes are sorted by prefixes i.e. "n0", "n1", "n2". </li>
</ul>

<table>
<tbody><tr>
 <th><a href="files/inNsSort.xml">Original Data</a></th>
 <th><a href="files/out_inNsSort_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inNsSort_c14nPrefix.xml">After c14n with PrefixRewrite</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 25</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;a:foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://z3"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://z2"</span><span class="pln"> </span><span class="atn">b:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">c:att3</span><span class="pun">=</span><span class="atv">"val3"</span><span class="pln"> </span><span class="atn">b:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="pln"> </span><span class="atn">xmlns:c</span><span class="pun">=</span><span class="atv">"http://z1"</span><span class="pln"> </span><span class="atn">xmlns:d</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;c:bar/&gt;</span><span class="pln">
 </span><span class="tag">&lt;c:bar</span><span class="pln"> </span><span class="atn">d:att3</span><span class="pun">=</span><span class="atv">"val3"</span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/a:foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 26</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;a:foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://z3"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://z2"</span><span class="pln"> </span><span class="atn">xmlns:c</span><span class="pun">=</span><span class="atv">"http://z1"</span><span class="pln"> </span><span class="atn">c:att3</span><span class="pun">=</span><span class="atv">"val3"</span><span class="pln"> </span><span class="atn">b:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">b:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;c:bar&gt;&lt;/c:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;c:bar</span><span class="pln"> </span><span class="atn">xmlns:d</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">d:att3</span><span class="pun">=</span><span class="atv">"val3"</span><span class="tag">&gt;&lt;/c:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/a:foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 27</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;n2:foo</span><span class="pln"> </span><span class="atn">xmlns:n0</span><span class="pun">=</span><span class="atv">"http://z1"</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://z2"</span><span class="pln"> </span><span class="atn">xmlns:n2</span><span class="pun">=</span><span class="atv">"http://z3"</span><span class="pln"> </span><span class="atn">n0:att3</span><span class="pun">=</span><span class="atv">"val3"</span><span class="pln"> </span><span class="atn">n1:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">n1:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;n0:bar&gt;&lt;/n0:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;n0:bar</span><span class="pln"> </span><span class="atn">xmlns:n3</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">n3:att3</span><span class="pun">=</span><span class="atv">"val3"</span><span class="tag">&gt;&lt;/n0:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/n2:foo&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>

<section id="sec-Redecl">
<h3><span class="secno">3.4 </span>Namespace Re-declarations</h3>
<p>
In this example there are three prefixes "a", "b" and the default prefix.
The "foo" element defines them to be "http://z3", "http://z2" and ""
respectively. But the "bar" 
redeclares these prefixes to "http://z2", "http://z3" abd "http://z0"
respectively. 
</p>
<p>
Notice the following things in the default canonicalization ("After c14n"):
</p>
<ul>
<li>The redeclarations of the prefixes by the "bar" element are not
removed by canonicalization, since these declarations are not
superfluous. </li>
</ul>
<p>And notice these things in canonicalization with prefix rewriting ("After c14n with PrefixRewrite"):</p>
<ul>
<li>With prefix rewriting, the new prefixes are never redeclared. Instead
the same prefix gets rewritten to two different values depending on
what namespace it currently declares. For example, for element "foo"
attribute "a:att1" gets rewritten to "n2:att1", whereas for element
"bar" attribute "a:att1" gets rewritten to "n1:att1".  Essentially
with prefix rewriting, the current prefixes are completely ignored,
and canonicalization assigns new prefixes based on namespace values. 
</li>
</ul>

<table>
<tbody><tr>
 <th><a href="files/inNsRedecl.xml">Original Data</a></th>
 <th><a href="files/out_inNsRedecl_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inNsRedecl_c14nPrefix.xml">After c14n with PrefixRewrite</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 28</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://z3"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://z2"</span><span class="pln"> </span><span class="atn">a:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">b:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="tag">&gt;</span><span class="pln"> 
 </span><span class="tag">&lt;bar</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://z2"</span><span class="pln"> </span><span class="atn">a:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">b:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://z3"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 29</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://z3"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://z2"</span><span class="pln"> </span><span class="atn">b:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="pln"> </span><span class="atn">a:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="tag">&gt;</span><span class="pln"> 
 </span><span class="tag">&lt;bar</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://z2"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://z3"</span><span class="pln"> </span><span class="atn">a:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">b:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="tag">&gt;&lt;/bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 30</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;n0:foo</span><span class="pln"> </span><span class="atn">xmlns:n0</span><span class="pun">=</span><span class="atv">""</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://z2"</span><span class="pln"> </span><span class="atn">xmlns:n2</span><span class="pun">=</span><span class="atv">"http://z3"</span><span class="pln"> </span><span class="atn">n1:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="pln"> </span><span class="atn">n2:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="tag">&gt;</span><span class="pln"> 
 </span><span class="tag">&lt;n3:bar</span><span class="pln"> </span><span class="atn">xmlns:n3</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">n1:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">n2:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="tag">&gt;&lt;/n3:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/n0:foo&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>

<section id="sec-Superfluous">
<h3><span class="secno">3.5 </span>Superfluous Namespace declarations</h3>
<p>In this example there are five prefixes "a", "b", "c", "d" and the default prefix and they are
all declared to the same namespace URI "http://z0".  The "a" prefix is defined twice, one in
the "foo" element, and then again in "c:bar" element; obviously the definition of "a" in "c:bar" 
is unnecessary. 
</p>
<p>
Notice the following things in the default canonicalization ("After
c14n"):
</p>
<ul>
<li>It does not attempt to recognize that "a", "b", "c", "d" and default are pointing to the 
same thing.</li>
<li>It removes the extra declaration of "xmlns:a" in the "c:bar" as that is superfluous.</li> 
</ul>

And notice these things in canonicalization with prefix rewriting ("After c14n with PrefixRewrite"):
<ul>
<li>All the file prefixes "a", "b", "c", "d" are rewritten to the same
  prefix - "z0". 
</li></ul>

<table>
<tbody><tr>
 <th><a href="files/inNsSuperfluous.xml">Original Data</a></th>
 <th><a href="files/out_inNsSuperfluous_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inNsSuperfluous_c14nPrefix.xml">After c14n with PrefixRewrite</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 31</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">a:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">b:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="tag">&gt;</span><span class="pln"> 
 </span><span class="tag">&lt;c:bar</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xmlns:c</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">c:att3</span><span class="pun">=</span><span class="atv">"val3"</span><span class="tag">/&gt;</span><span class="pln">
 </span><span class="tag">&lt;d:bar</span><span class="pln"> </span><span class="atn">xmlns:d</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 32</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;foo</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">a:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">b:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="tag">&gt;</span><span class="pln"> 
 </span><span class="tag">&lt;c:bar</span><span class="pln"> </span><span class="atn">xmlns:c</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">c:att3</span><span class="pun">=</span><span class="atv">"val3"</span><span class="tag">&gt;&lt;/c:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;d:bar</span><span class="pln"> </span><span class="atn">xmlns:d</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="tag">&gt;&lt;/d:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 33</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;n0:foo</span><span class="pln"> </span><span class="atn">xmlns:n0</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">n0:att1</span><span class="pun">=</span><span class="atv">"val1"</span><span class="pln"> </span><span class="atn">n0:att2</span><span class="pun">=</span><span class="atv">"val2"</span><span class="tag">&gt;</span><span class="pln"> 
 </span><span class="tag">&lt;n0:bar</span><span class="pln"> </span><span class="atn">n0:att3</span><span class="pun">=</span><span class="atv">"val3"</span><span class="tag">&gt;&lt;/n0:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;n0:bar&gt;&lt;/n0:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/n0:foo&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>

<section id="sec-xmlattribs">
<h3><span class="secno">3.6 </span>Special namespaces "xml", "xsi", "xsd"</h3>
<p>
In this example there are are three special namespace declaration the "xml" namespace used 
in the attribute <code>xml:id="23"</code> and also the "xsi" and "xsd" namespaces used in
<code>xsi:type="xsd:string"</code>.
</p>
<p>
Canonicalization only treats "xml" as a special namespace. It is never rewritten by prefix-rewriting. 
"xsi" and "xsd" are treated as regular namespaces.
</p>
<p>
Notice the following things in the default canonicalization ("After
c14n"):
</p>
<ul>
<li>It does not consider the "xsd" prefix as visibly utilized since it is embedded in the content.
That is why it removes the "xsd" namespace declaration completely.</li>
</ul>

Notice these things in canonicalization with prefix rewriting ("After c14n with PrefixRewrite"):
<ul>
<li>It also removes the "xsd" declaration completely.</li>
<li>It doesn't change the "xml" prefix to anything else, also it doesn't emit the namespace 
declaration for the "xml" prefix.</li>
<li>But it does rewrite the "xsi" prefix to "ns1".</li> 
</ul>

Notice these things in canonicalization with QName awareness ("After c14n with QNameAware"):
<ul>
<li>Look at the <code>CanonicalzationMethod</code> in <a href="files/c14nQname.xml">c14nQname.xml</a>. 
it lists "xsi:type" as a Qualified Attribute in the QNameAware element. </li> 
<li>So now the canonicalization looks into the "xsi:type" for prefixes. It finds the "xsd" element
and considers it visibly utilized, and hence emits the "xsd" namespace declaration.
</li></ul>

Notice these things in canonicalization with QName awareness ("After c14n with QNameAware and PrefixRewrite"):
<ul>
<li>Look at the <code>CanonicalzationMethod</code> in <a href="files/c14nPrefixQname.xml">c14nPrefixQname.xml</a>. 
it lists "xsi:type" as a Qualified Attribute in the QNameAware element. It also PrefixRewite=sequential </li> 
<li>So now "xsd" is considered visibly utilized, and it is rewritten to "n1".  
I.e. <code>xsi:type="xsd:string"</code> changes
  to <code>n2:type="n1:string".</code> 
</li></ul>


<table>
<tbody><tr>
 <th><a href="files/inNsXml.xml">Original Data</a></th>
 <th><a href="files/out_inNsXml_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inNsXml_c14nPrefix.xml">After c14n with
 PrefixRewrite</a></th> 
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 34</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;foo</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xml:id</span><span class="pun">=</span><span class="atv">"23"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;bar</span><span class="pln"> </span><span class="atn">xsi:type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="pln"> </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln"> </span><span class="atn">xmlns:xsd</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema"</span><span class="tag">&gt;</span><span class="pln">data</span><span class="tag">&lt;/bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 35</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;foo</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xml:id</span><span class="pun">=</span><span class="atv">"23"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;bar</span><span class="pln"> </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln"> </span><span class="atn">xsi:type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">data</span><span class="tag">&lt;/bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 36</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;n0:foo</span><span class="pln"> </span><span class="atn">xmlns:n0</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xml:id</span><span class="pun">=</span><span class="atv">"23"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;n0:bar</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln"> </span><span class="atn">n1:type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">data</span><span class="tag">&lt;/n0:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/n0:foo&gt;</span></pre></div></td> 
</tr>
<tr>
 <th></th>
 <th><a href="files/out_inNsXml_c14nQname.xml">After c14n with QNameAware</a></th>
 <th><a href="files/out_inNsXml_c14nPrefixQname.xml">After c14n with QNameAware and PrefixRewrite</a></th>
</tr>
<tr>
<td></td> 
<td><div class="example"><div class="example-title"><span>Example 37</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;foo</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xml:id</span><span class="pun">=</span><span class="atv">"23"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;bar</span><span class="pln"> </span><span class="atn">xmlns:xsd</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema"</span><span class="pln"> </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln"> </span><span class="atn">xsi:type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">data</span><span class="tag">&lt;/bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 38</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;n0:foo</span><span class="pln"> </span><span class="atn">xmlns:n0</span><span class="pun">=</span><span class="atv">"http://z0"</span><span class="pln"> </span><span class="atn">xml:id</span><span class="pun">=</span><span class="atv">"23"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;n0:bar</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema"</span><span class="pln"> </span><span class="atn">xmlns:n2</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln"> </span><span class="atn">n2:type</span><span class="pun">=</span><span class="atv">"n1:string"</span><span class="tag">&gt;</span><span class="pln">data</span><span class="tag">&lt;/n0:bar&gt;</span><span class="pln">
</span><span class="tag">&lt;/n0:foo&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>

<section id="sec-PrefixesInContent">
<h3><span class="secno">3.7 </span>Prefixes in Element content</h3>
<p>
Notice the following things in the default canonicalization ("After
c14n"):
</p>
<ul>
<li>It does not consider the "xsd", "soap-env" and "b" prefixes as visibly utilized since they are embedded in the content.
That is why it removes these namespace declarations completely.</li>
</ul>
<p>
Notice the following things in the default canonicalization ("After c14n with QNameAware &lt;a:bar&gt;"):
</p>
<ul>
<li>It considers the "xsd", as visbily utilized in element, but not "soap-env" and "b" prefixes as visibly utilized
 since they are embedded in the XPath content.</li>
</ul>
<p>
Notice the following things in the default canonicalization ("After c14n with QNameAware &lt;a:bar&gt; and &lt;dsig2:IncludedXPath&gt;"):
</p>
<ul>
<li>All three embedded prefixes  "xsd", "soap-env" and "b" prefixes as considered as visibly utilized.</li>
<li>prefix "c" is not considered visibly utilized since it is inside an XPath sring. Single and double quoted strings
inside an XPath expression are not searched for prefixes. </li>
<li> "child:" is not a prefix, it is an XPath axis, as indicated by the double colon. </li>
</ul>
<p>
Notice the following things in the default canonicalization ("After c14n with QNameAware &lt;a:bar&gt; and &lt;dsig2:IncludedXPath&gt; and PrefixRewrite"):
</p>
<ul>
<li>All three embedded prefixes  "xsd", "soap-env" and "b" prefixes as considered as visibly utilized.
They are rewritten to "n1", "n3" and "n2" respectively. </li>
<li>The text content is modified because of prefix rewriting. </li>
<li>Even though the "xsd" prefix is rewritten to "n1", the 'xsd:string' is left unchanged, as it inside a single quoted string.</li>
</ul>

<table>
<tbody><tr>
 <th><a href="files/inNsContent.xml">Original Data</a></th>
 <th><a href="files/out_inNsContent_c14nDefault.xml">After c14n</a></th>
 <th><a href="files/out_inNsContent_c14nQnameElem.xml">After c14n with QNameAware &lt;a:bar&gt;</a></th>
</tr>
<tr>
<td><div class="example"><div class="example-title"><span>Example 39</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;a:foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://a"</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="pln"> </span><span class="atn">xmlns:child</span><span class="pun">=</span><span class="atv">"http://c"</span><span class="pln"> </span><span class="atn">xmlns:soap-env</span><span class="pun">=</span><span class="atv">"http://schemas.xmlsoap.org/wsdl/soap/"</span><span class="pln"> </span><span class="atn">xmlns:xsd</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;a:bar&gt;</span><span class="pln">xsd:string</span><span class="tag">&lt;/a:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;dsig2:IncludedXPath</span><span class="pln"> </span><span class="atn">xmlns:dsig2</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2010/xmldsig2#"</span><span class="tag">&gt;</span><span class="pln">/soap-env:body/child::b:foo[@att1 != "c:val" and @att2 != 'xsd:string']</span><span class="tag">&lt;/dsig2:IncludedXPath&gt;</span><span class="pln">
</span><span class="tag">&lt;/a:foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 40</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;a:foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://a"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;a:bar&gt;</span><span class="pln">xsd:string</span><span class="tag">&lt;/a:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;dsig2:IncludedXPath</span><span class="pln"> </span><span class="atn">xmlns:dsig2</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2010/xmldsig2#"</span><span class="tag">&gt;</span><span class="pln">/soap-env:body/child::b:foo[@att1 != "c:val" and @att2 != 'xsd:string']</span><span class="tag">&lt;/dsig2:IncludedXPath&gt;</span><span class="pln">
</span><span class="tag">&lt;/a:foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 41</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;a:foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://a"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;a:bar</span><span class="pln"> </span><span class="atn">xmlns:xsd</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema"</span><span class="tag">&gt;</span><span class="pln">xsd:string</span><span class="tag">&lt;/a:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;dsig2:IncludedXPath</span><span class="pln"> </span><span class="atn">xmlns:dsig2</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2010/xmldsig2#"</span><span class="tag">&gt;</span><span class="pln">/soap-env:body/child::b:foo[@att1 != "c:val" and @att2 != 'xsd:string']</span><span class="tag">&lt;/dsig2:IncludedXPath&gt;</span><span class="pln">
</span><span class="tag">&lt;/a:foo&gt;</span></pre></div></td> 
</tr>
<tr>
 <th></th>
 <th><a href="files/out_inNsContent_c14nQnameXpathElem.xml">After c14n with QNameAware &lt;a:bar&gt; and &lt;dsig2:IncludedXPath&gt;</a></th>
 <th><a href="files/out_inNsContent_c14nPrefixQnameXpathElem.xml">After c14n with QNameAware &lt;a:bar&gt; and &lt;dsig2:IncludedXPath&gt; and PrefixRewrite</a></th>
</tr>
<tr>
<td></td> 
<td><div class="example"><div class="example-title"><span>Example 42</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;a:foo</span><span class="pln"> </span><span class="atn">xmlns:a</span><span class="pun">=</span><span class="atv">"http://a"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;a:bar</span><span class="pln"> </span><span class="atn">xmlns:xsd</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema"</span><span class="tag">&gt;</span><span class="pln">xsd:string</span><span class="tag">&lt;/a:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;dsig2:IncludedXPath</span><span class="pln"> </span><span class="atn">xmlns:b</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="pln"> </span><span class="atn">xmlns:dsig2</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2010/xmldsig2#"</span><span class="pln"> </span><span class="atn">xmlns:soap-env</span><span class="pun">=</span><span class="atv">"http://schemas.xmlsoap.org/wsdl/soap/"</span><span class="tag">&gt;</span><span class="pln">/soap-env:body/child::b:foo[@att1 != "c:val" and @att2 != 'xsd:string']</span><span class="tag">&lt;/dsig2:IncludedXPath&gt;</span><span class="pln">
</span><span class="tag">&lt;/a:foo&gt;</span></pre></div></td> 
<td><div class="example"><div class="example-title"><span>Example 43</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;n0:foo</span><span class="pln"> </span><span class="atn">xmlns:n0</span><span class="pun">=</span><span class="atv">"http://a"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;n0:bar</span><span class="pln"> </span><span class="atn">xmlns:n1</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema"</span><span class="tag">&gt;</span><span class="pln">n1:string</span><span class="tag">&lt;/n0:bar&gt;</span><span class="pln">
 </span><span class="tag">&lt;n4:IncludedXPath</span><span class="pln"> </span><span class="atn">xmlns:n2</span><span class="pun">=</span><span class="atv">"http://b"</span><span class="pln"> </span><span class="atn">xmlns:n3</span><span class="pun">=</span><span class="atv">"http://schemas.xmlsoap.org/wsdl/soap/"</span><span class="pln"> </span><span class="atn">xmlns:n4</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2010/xmldsig2#"</span><span class="tag">&gt;</span><span class="pln">/n3:body/child::n2:foo[@att1 != "c:val" and @att2 != 'xsd:string']</span><span class="tag">&lt;/n4:IncludedXPath&gt;</span><span class="pln">
</span><span class="tag">&lt;/n0:foo&gt;</span></pre></div></td> 
</tr>
</tbody></table>
</section>

</section>
  
 
<section id="references" class="appendix"><!--OddPage--><h2><span class="secno">A. </span>References</h2><p>Dated references below are to the latest known or appropriate edition of the referenced work.  The referenced works may be subject to revision, and conformant implementations may follow, and are encouraged to investigate the appropriateness of following, some or all more recent editions or replacements of the works cited. It is in each case implementation-defined which  editions are supported.</p><section id="normative-references"><h3><span class="secno">A.1 </span>Normative references</h3><dl class="bibliography"><dt id="bib-XML-C14N20">[XML-C14N20]</dt><dd>John Boyer; Glen Marcy; Pratik Datta; Frederick Hirsch. <a href="http://www.w3.org/TR/xml-c14n2/"><cite>Canonical XML Version 2.0</cite></a>. 11 April 2013. W3C Working Group Note. URL: <a href="http://www.w3.org/TR/xml-c14n2/">http://www.w3.org/TR/xml-c14n2/</a>
</dd><dt id="bib-XML10">[XML10]</dt><dd>C. M. Sperberg-McQueen et al. <a href="http://www.w3.org/TR/xml/"><cite>Extensible Markup Language (XML) 1.0 (Fifth Edition)</cite></a>. 26 November 2008. W3C Recommendation. URL: <a href="http://www.w3.org/TR/xml/">http://www.w3.org/TR/xml/</a>
</dd></dl></section></section></body></html>
