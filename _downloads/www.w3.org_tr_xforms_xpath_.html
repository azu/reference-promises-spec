<!-- http://www.w3.org/TR/xforms-xpath/ -->
<!DOCTYPE html  PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'  'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>XForms 2.0: XPath expression module</title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
  <style type="text/css">
   .editsection { display: none; }
</style>
<link href="tr.css" rel="stylesheet" type="text/css" />
<link href="xforms.css" rel="stylesheet" type="text/css" />
<link href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet" type="text/css" />

  
</head>
<body>

<div class="head">
<a href="http://www.w3.org/"><img alt="W3C" height="48" src="http://www.w3.org/Icons/w3c_home" width="72" /></a><h1 id="title" style="clear:both"><span id="short-title">XForms 2.0: XPath expression module</span></h1>

<h2 id="W3C-doctype">W3C Working Draft 7 August 2012</h2>

<dl>
<dt>This version:</dt>
<dd><a href="http://www.w3.org/TR/2012/WD-xforms-xpath-20120807/" id="this-version-url">http://www.w3.org/TR/2012/WD-xforms-xpath-20120807/</a></dd>

<dt>Latest version:</dt>
<dd><a href="http://www.w3.org/TR/xforms-xpath/">http://www.w3.org/TR/xforms-xpath/</a></dd>
</dl>

<dl><dt>Editors:</dt><dd>Nick Van den Bleeken, Inventive Designers</dd>
<dd>John M. Boyer, IBM</dd>
</dl>

<p>This document is also available in these non-normative formats: <a href="Overview-diff.html">diff-marked HTML</a>.</p>





<p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> &copy; 2012 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>&reg;</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p>

</div>
<hr />
<h2><a id="abstract" name="abstract">Abstract</a></h2>

<div>
<div>This module defines how XPath could be used for addressing instance data nodes in binding expressions, to express constraints, and to specify calculations in XForms. This module is based on XPath 2.0, but an XPath 1.0 backwards compatibility mode is provided to ensure that nearly all XPath 1.0 expressions continue to deliver the same result with XPath 2.0.
<p>This module also defines the XForms Function Library which contains additional functions that are useful for creating forms.
</p>
</div>
</div>

<h2 class="no-toc no-num">
<a id="w3c_status" name="w3c_status">Status of this Document</a>
</h2>
    
<h4 class="no-toc no-num" id="may-be">May Be Superseded</h4>
    
<p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current W3C publications and the latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/">W3C technical reports index</a> at http://www.w3.org/TR/.</em></p>

    

<!-- no eventStatusExtra -->

<!-- no statusExtra -->

<div></div>



           <h4 class="no-toc no-num" id="status-first-public">First
           Public Working Draft</h4>

            <div>
 
 <p>This document is intended to encourage discussion and should not
be considered complete. Within the document there are Editorial
notes. These notes reflect areas that need particular attention.
Feedback on these areas is particularly appreciated.</p> 
</div>



<h4 class="no-toc no-num" id="please">Please Comment By 9 October 2012</h4><p>The <a href="http://www.w3.org/MarkUp/Forms/">Forms Working Group</a> seeks
    public feedback on this First Public Working Draft.  Please send your
    comments to <a class="mailto" href="mailto:www-forms-editor@w3.org" shape="rect">www-forms-editor@w3.org</a> (<a class="http" href="http://lists.w3.org/Archives/Public/www-forms-editor/" shape="rect">public archive</a>).  If possible, please offer
    specific changes to the text that would address your
    concern.  You may also wish to check the <a href="http://www.w3.org/MarkUp/Forms/wiki/XPath_Expressions_Module">Wiki
    Version</a> of this document and see if the relevant text has already 
    been updated.</p>
    
<h4 class="no-toc no-num" id="no-endorsement">No Endorsement</h4>
    
<p><em>Publication as a Working Draft does not imply endorsement by the W3C Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.</em></p>


<h4 class="no-toc no-num" id="patents">Patents</h4>
    
<p><em>This document was produced by a group operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>. W3C maintains a <a href="http://www.w3.org/2004/01/pp-impl/32219/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure"> section 6 of the W3C Patent Policy</a>.</em></p>

<hr title="Separator After Status Section" />


<div class="body"><div class="div1">
<table class="toc" id="toc" summary="Contents"><tbody><tr><td><div id="toctitle"><h2>Table of Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#About_the_XForms_2.0:_XPath_expression_module"><span class="tocnumber">1</span> <span class="toctext">About the XForms 2.0: XPath expression module</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction"><span class="tocnumber">1.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#Reading_the_Specification"><span class="tocnumber">1.2</span> <span class="toctext">Reading the Specification</span></a></li>
<li class="toclevel-2"><a href="#How_the_Specification_is_Organized"><span class="tocnumber">1.3</span> <span class="toctext">How the Specification is Organized</span></a></li>
<li class="toclevel-2"><a href="#Documentation_Conventions"><span class="tocnumber">1.4</span> <span class="toctext">Documentation Conventions</span></a></li>
<li class="toclevel-2"><a href="#Examples"><span class="tocnumber">1.5</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#The_xpath-version_attribute"><span class="tocnumber">2</span> <span class="toctext">The xpath-version attribute</span></a></li>
<li class="toclevel-1"><a href="#XPath_Expressions_in_XForms"><span class="tocnumber">3</span> <span class="toctext">XPath Expressions in XForms</span></a>
<ul>
<li class="toclevel-2"><a href="#Datatypes"><span class="tocnumber">3.1</span> <span class="toctext">Datatypes</span></a></li>
<li class="toclevel-2"><a href="#Evaluation_Context"><span class="tocnumber">3.2</span> <span class="toctext">Evaluation Context</span></a>
<ul>
<li class="toclevel-3"><a href="#Initializing_the_Static_Context"><span class="tocnumber">3.2.1</span> <span class="toctext">Initializing the Static Context</span></a></li>
<li class="toclevel-3"><a href="#Initializing_the_Dynamic_Context"><span class="tocnumber">3.2.2</span> <span class="toctext">Initializing the Dynamic Context</span></a>
<ul>
<li class="toclevel-4"><a href="#Other_components_of_the_XPath_Dynamic_Context"><span class="tocnumber">3.2.2.1</span> <span class="toctext">Other components of the XPath Dynamic Context</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Item_type_conversions"><span class="tocnumber">3.3</span> <span class="toctext">Item type conversions</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#The_XForms_Function_Library"><span class="tocnumber">4</span> <span class="toctext">The XForms Function Library</span></a>
<ul>
<li class="toclevel-2"><a href="#Boolean_Functions"><span class="tocnumber">4.1</span> <span class="toctext">Boolean Functions</span></a>
<ul>
<li class="toclevel-3"><a href="#The_boolean-from-string.28.29_Function"><span class="tocnumber">4.1.1</span> <span class="toctext">The boolean-from-string() Function</span></a></li>
<li class="toclevel-3"><a href="#The_is-card-number.28.29_Function"><span class="tocnumber">4.1.2</span> <span class="toctext">The is-card-number() Function</span></a></li>
<li class="toclevel-3"><a href="#The_valid.28.29_Function"><span class="tocnumber">4.1.3</span> <span class="toctext">The valid() Function</span></a></li>
<li class="toclevel-3"><a href="#The_matches.28.29_Function"><span class="tocnumber">4.1.4</span> <span class="toctext">The matches() Function</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Number_Functions"><span class="tocnumber">4.2</span> <span class="toctext">Number Functions</span></a>
<ul>
<li class="toclevel-3"><a href="#The_avg.28.29_Function"><span class="tocnumber">4.2.1</span> <span class="toctext">The avg() Function</span></a></li>
<li class="toclevel-3"><a href="#The_min.28.29_Function"><span class="tocnumber">4.2.2</span> <span class="toctext">The min() Function</span></a></li>
<li class="toclevel-3"><a href="#The_max.28.29_Function"><span class="tocnumber">4.2.3</span> <span class="toctext">The max() Function</span></a></li>
<li class="toclevel-3"><a href="#The_count-non-empty.28.29_Function"><span class="tocnumber">4.2.4</span> <span class="toctext">The count-non-empty() Function</span></a></li>
<li class="toclevel-3"><a href="#The_index.28.29_Function"><span class="tocnumber">4.2.5</span> <span class="toctext">The index() Function</span></a></li>
<li class="toclevel-3"><a href="#The_power.28.29_Function"><span class="tocnumber">4.2.6</span> <span class="toctext">The power() Function</span></a></li>
<li class="toclevel-3"><a href="#The_random.28.29_Function"><span class="tocnumber">4.2.7</span> <span class="toctext">The random() Function</span></a></li>
<li class="toclevel-3"><a href="#The_compare.28.29_Function"><span class="tocnumber">4.2.8</span> <span class="toctext">The compare() Function</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#String_Functions"><span class="tocnumber">4.3</span> <span class="toctext">String Functions</span></a>
<ul>
<li class="toclevel-3"><a href="#The_case.28.29_Function"><span class="tocnumber">4.3.1</span> <span class="toctext">The case() Function</span></a></li>
<li class="toclevel-3"><a href="#The_property.28.29_Function"><span class="tocnumber">4.3.2</span> <span class="toctext">The property() Function</span></a></li>
<li class="toclevel-3"><a href="#The_digest.28.29_Function"><span class="tocnumber">4.3.3</span> <span class="toctext">The digest() Function</span></a></li>
<li class="toclevel-3"><a href="#The_hmac.28.29_Function"><span class="tocnumber">4.3.4</span> <span class="toctext">The hmac() Function</span></a></li>
<li class="toclevel-3"><a href="#The_replace.28.29_Function"><span class="tocnumber">4.3.5</span> <span class="toctext">The replace() Function</span></a></li>
<li class="toclevel-3"><a href="#The_serialize.28.29_Function"><span class="tocnumber">4.3.6</span> <span class="toctext">The serialize() Function</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Date_and_Time_Functions"><span class="tocnumber">4.4</span> <span class="toctext">Date and Time Functions</span></a>
<ul>
<li class="toclevel-3"><a href="#The_local-date.28.29_Function"><span class="tocnumber">4.4.1</span> <span class="toctext">The local-date() Function</span></a></li>
<li class="toclevel-3"><a href="#The_local-dateTime.28.29_Function"><span class="tocnumber">4.4.2</span> <span class="toctext">The local-dateTime() Function</span></a></li>
<li class="toclevel-3"><a href="#The_now.28.29_Function"><span class="tocnumber">4.4.3</span> <span class="toctext">The now() Function</span></a></li>
<li class="toclevel-3"><a href="#The_days-from-date.28.29_Function"><span class="tocnumber">4.4.4</span> <span class="toctext">The days-from-date() Function</span></a></li>
<li class="toclevel-3"><a href="#The_days-to-date.28.29_Function"><span class="tocnumber">4.4.5</span> <span class="toctext">The days-to-date() Function</span></a></li>
<li class="toclevel-3"><a href="#The_seconds-from-dateTime.28.29_Function"><span class="tocnumber">4.4.6</span> <span class="toctext">The seconds-from-dateTime() Function</span></a></li>
<li class="toclevel-3"><a href="#The_seconds-to-dateTime.28.29_Function"><span class="tocnumber">4.4.7</span> <span class="toctext">The seconds-to-dateTime() Function</span></a></li>
<li class="toclevel-3"><a href="#The_adjust-dateTime-to-timezone.28.29_Function"><span class="tocnumber">4.4.8</span> <span class="toctext">The adjust-dateTime-to-timezone() Function</span></a></li>
<li class="toclevel-3"><a href="#The_seconds.28.29_Function"><span class="tocnumber">4.4.9</span> <span class="toctext">The seconds() Function</span></a></li>
<li class="toclevel-3"><a href="#The_months.28.29_Function"><span class="tocnumber">4.4.10</span> <span class="toctext">The months() Function</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Node-set_Functions"><span class="tocnumber">4.5</span> <span class="toctext">Node-set Functions</span></a>
<ul>
<li class="toclevel-3"><a href="#The_instance.28.29_Function"><span class="tocnumber">4.5.1</span> <span class="toctext">The instance() Function</span></a></li>
<li class="toclevel-3"><a href="#The_current.28.29_Function"><span class="tocnumber">4.5.2</span> <span class="toctext">The current() Function</span></a></li>
<li class="toclevel-3"><a href="#The_id.28.29_Function"><span class="tocnumber">4.5.3</span> <span class="toctext">The id() Function</span></a></li>
<li class="toclevel-3"><a href="#The_context.28.29_Function"><span class="tocnumber">4.5.4</span> <span class="toctext">The context() Function</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Node_Creation_Functions"><span class="tocnumber">4.6</span> <span class="toctext">Node Creation Functions</span></a>
<ul>
<li class="toclevel-3"><a href="#The_element.28.29_Function"><span class="tocnumber">4.6.1</span> <span class="toctext">The element() Function</span></a></li>
<li class="toclevel-3"><a href="#The_attribute.28.29_Function"><span class="tocnumber">4.6.2</span> <span class="toctext">The attribute() Function</span></a></li>
<li class="toclevel-3"><a href="#The_parse.28.29_Function"><span class="tocnumber">4.6.3</span> <span class="toctext">The parse() Function</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Object_Functions"><span class="tocnumber">4.7</span> <span class="toctext">Object Functions</span></a>
<ul>
<li class="toclevel-3"><a href="#The_choose.28.29_Function"><span class="tocnumber">4.7.1</span> <span class="toctext">The choose() Function</span></a></li>
<li class="toclevel-3"><a href="#The_event.28.29_Function"><span class="tocnumber">4.7.2</span> <span class="toctext">The event() Function</span></a></li>
<li class="toclevel-3"><a href="#The_eval.28.29_Function"><span class="tocnumber">4.7.3</span> <span class="toctext">The eval() Function</span></a></li>
<li class="toclevel-3"><a href="#The_eval-in-context.28.29_Function"><span class="tocnumber">4.7.4</span> <span class="toctext">The eval-in-context() Function</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Extension_Functions"><span class="tocnumber">4.8</span> <span class="toctext">Extension Functions</span></a></li>
<li class="toclevel-2"><a href="#References_and_Dependencies"><span class="tocnumber">4.9</span> <span class="toctext">References and Dependencies</span></a>
<ul>
<li class="toclevel-3"><a href="#Reference_Selection"><span class="tocnumber">4.9.1</span> <span class="toctext">Reference Selection</span></a></li>
<li class="toclevel-3"><a href="#Additional_dependencies_for_the_computational_dependency_data_structure"><span class="tocnumber">4.9.2</span> <span class="toctext">Additional dependencies for the computational dependency data structure</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Error_Indications"><span class="tocnumber">4.10</span> <span class="toctext">Error Indications</span></a>
<ul>
<li class="toclevel-3"><a href="#The_xforms-xpath-version-exception_Event"><span class="tocnumber">4.10.1</span> <span class="toctext">The xforms-xpath-version-exception Event</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Reserved_Namespaces"><span class="tocnumber">5</span> <span class="toctext">Reserved Namespaces</span></a></li>
<li class="toclevel-1"><a href="#Glossary_Of_Terms"><span class="tocnumber">6</span> <span class="toctext">Glossary Of Terms</span></a></li>
<li class="toclevel-1"><a href="#References"><span class="tocnumber">7</span> <span class="toctext">References</span></a>
<ul>
<li class="toclevel-2"><a href="#Normative_References"><span class="tocnumber">7.1</span> <span class="toctext">Normative References</span></a></li>
<li class="toclevel-2"><a href="#Informative_References"><span class="tocnumber">7.2</span> <span class="toctext">Informative References</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Acknowledgements_.28Non-Normative.29"><span class="tocnumber">8</span> <span class="toctext">Acknowledgements (Non-Normative)</span></a></li>
<li class="toclevel-1"><a href="#Production_Notes_.28Non-Normative.29"><span class="tocnumber">9</span> <span class="toctext">Production Notes (Non-Normative)</span></a></li>
</ul>
</td></tr></tbody></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a id="About_the_XForms_2.0:_XPath_expression_module" name="About_the_XForms_2.0:_XPath_expression_module"></a><h2> <span class="mw-headline">1  About the XForms 2.0: XPath expression module </span></h2>
<div class="div2">
<a id="Introduction" name="Introduction"></a><h3> <span class="mw-headline">1.1  Introduction </span></h3>
<p>This document is a module designed to add support for XPath as an expression language in XForms. XPath 2.0 is an expression language to address the nodes of <a href="#ref-xml-1.0" title=""> [XML 1.0]</a> or <a href="#ref-xml-1.1" title=""> [XML 1.1]</a> trees defined by W3C. It includes over 100 built-in functions, including operations on node-sets, strings, numbers, booleans, dates, and durations.
</p><p>Besides defining how XPath can be used as an expression language in XForms this document also defines the XForms Function Library. The XForms Function Library contains additional functions that are useful for creating forms.
</p>
</div><div class="div2">
<a id="Reading_the_Specification" name="Reading_the_Specification"></a><h3> <span class="mw-headline">1.2  <span id="intro-reading">Reading the Specification</span> </span></h3>
<p>This specification has been written with various types of readers in mind&acirc;&euro;&rdquo;in particular XForms authors and XForms implementors. Implementors, however, should find all they need to add XPath 2.0 support to their XForms Processors. The specification begins with a general presentation of how XPath 2.0 expressions will be used in XForms before specifying the technical details of how to integrate XPath 2.0 in XForms. Finally it defines the XForms Function Library.
</p><p>The specification has been written with various modes of presentation in mind. In case of a discrepancy, the online electronic version is considered the authoritative version of the document.
</p><p>With regard to implementing behaviors defined for XForms content herein, this document uses the terms <b>must</b>, <b>must not</b>, <b>required</b>, <b>shall</b>, <b>shall not</b>, <b>recommended</b>, <b>should</b>, <b>should not</b>, <b>may</b>, and <b>optional</b> in accord with <a href="#ref-rfc-2119" title=""> [RFC 2119]</a>. Generally, the elements, attributes, functions and behaviors of XForms content defined in this specification are required to implement unless explicitly specified otherwise. The term <b>author-optional</b>, when applied to a content item such as an element, attribute, or function parameter, indicates to form authors that they may omit the content item and obtain the default behavior. The term author-optional is orthogonal to the conformance status (required, recommended, or optional) of the content item.
</p>
</div><div class="div2">
<a id="How_the_Specification_is_Organized" name="How_the_Specification_is_Organized"></a><h3> <span class="mw-headline">1.3  How the Specification is Organized </span></h3>
<p>The specification is organized into the following chapters:
</p>
<dl><dt> Chapters 1
</dt><dd> An introduction to XPath as an expression language in XForms. The introduction and example usages of XPath expressions in XForms.
</dd><dt> Chapter 2
</dt><dd> Definition of the <b>xpath-version</b> attribute.
</dd><dt> Chapter 3
</dt><dd> Contains all the information on how XPath is integrated into XForms. This section is mostly targeted at XForms implementors.
</dd><dt> Chapter 4
</dt><dd> Defines the XForms Function library which defines additional functions that are useful for creating forms.
</dd></dl>
</div><div class="div2">
<a id="Documentation_Conventions" name="Documentation_Conventions"></a><h3> <span class="mw-headline">1.4  Documentation Conventions </span></h3>
<p>Throughout this document, the following namespace prefixes and corresponding namespace identifiers are used:
</p>
<blockquote>

<b>xforms:</b> The XForms namespace, e.g. <code><a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a></code> (see <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#structure-namespace" title="XForms 2.0">Namespace for XForms</a><sup><small>XF</small></sup>)<br /><b>xf:</b> The XForms namespace, e.g. <code><a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a></code> (see <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#structure-namespace" title="XForms 2.0">Namespace for XForms</a><sup><small>XF</small></sup>)<br /><b>html:</b> An XHTML namespace, e.g. <code><a class="external free" href="http://www.w3.org/1999/xhtml" rel="nofollow" title="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</a></code> (see <a href="#ref-xhtml-1.0" title=""> [XHTML 1.0]</a>)<br /><b>xs:</b> The XML Schema namespace <code><a class="external free" href="http://www.w3.org/2001/XMLSchema" rel="nofollow" title="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a></code> (see <a href="#ref-xschema-1" title=""> [XML Schema part 1]</a>)<br /><b>xsd:</b> The XML Schema namespace <code><a class="external free" href="http://www.w3.org/2001/XMLSchema" rel="nofollow" title="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a></code> (see <a href="#ref-xschema-2" title=""> [XML Schema part 2]</a>)<br /><b>xsi:</b> The XML Schema for instances namespace <code><a class="external free" href="http://www.w3.org/2001/XMLSchema-instance" rel="nofollow" title="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a></code> (see <a href="#ref-xschema-1" title=""> [XML Schema part 1]</a>)<br /><b>ev:</b> The XML Events namespace <code><a class="external free" href="http://www.w3.org/2001/xml-events" rel="nofollow" title="http://www.w3.org/2001/xml-events">http://www.w3.org/2001/xml-events</a></code> (see <a href="#ref-xml-events" title=""> [XML Events]</a>)<br /><b>fn:</b> The XPath function namespace <code><a class="external free" href="http://www.w3.org/2005/xpath-functions" rel="nofollow" title="http://www.w3.org/2005/xpath-functions">http://www.w3.org/2005/xpath-functions</a></code> (see <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a>)<br /><b>my:</b> Any user defined namespace

</blockquote>
<p>This is only a convention; any namespace prefix may be used in practice.
</p><p>The following typographical conventions are used to present technical material in this document.
</p><p>Official terms are defined in the following manner: [Definition: You can find most <b>terms</b> in chapter <a href="#terms" title=""> <b>6 Glossary Of Terms</b></a>]. Links to <b>term</b>s may be specially highlighted where necessary.
</p><p>The XML representations of various elements within XForms are presented using the syntax for Abstract Modules in XHTML Modularization <a href="#ref-xhtml-mod" title=""> [XHTML Modularization]</a>.
</p><p>Examples are set off typographically:
</p>
<div class="exampleOuter"><div class="exampleHead">Example item</div><div class="exampleInner">
<pre>Example Item
</pre>
</div></div>
<p>References to external documents appear as follows: <a href="#ref-example" title=""> [Sample Reference]</a> with links to the references section of this document.
</p>
<dl><dt> Sample Reference
</dt><dd> <cite id="ref-example">Reference</cite> - linked to from above.
</dd></dl>
<p>The following typesetting convention is used for additional commentary:
</p>
<div class="note">
<p><b>Note:</b>
</p><p>A gentle explanation to readers.
</p>
</div>
<table border="1" summary="Editorial note: Editorial Note Name">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Editorial Note Name</b>
</td><td align="right" valign="top" width="50%">
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> Editorial commentary, not intended for final publication.
</td></tr></tbody></table>
<div class="issue">
<p><b>Issue (sample-implementation-issue):</b>
</p><p><b>Issue-Name</b>
</p><p>A specific issue for which input from implementors is requested, for example as part of the Candidate Recommendation phase.
</p><p><b>Resolution:</b>
</p><p>None recorded.
</p>
</div></div><div class="div2">
<a id="Examples" name="Examples"></a><h3> <span class="mw-headline">1.5  Examples </span></h3>
<p>The following example binds an input control to an instance data node:
</p>
<div class="exampleOuter"><div class="exampleHead">Input control bound to an instance data node</div><div class="exampleInner">
<pre>&lt;input ref="order/shipTo/street" class="streetAddress"&gt;
  &lt;label&gt;Street&lt;/label&gt;
  &lt;hint&gt;Please enter the number and street name&lt;/hint&gt;
&lt;/input&gt;
</pre>
</div></div>
<p>The following example outputs the total value of an order by calculating the sum of the price of all line totals in the order. The line total is calculated by multiplying the item price with number of items ordered:
</p>
<div class="exampleOuter"><div class="exampleHead">XPath expression in output control</div><div class="exampleInner">
<pre>I charged you &lt;output value="sum(for $i in order/order-item return $i/@price * $i/@qty)"/&gt;
</pre>
</div></div></div></div><div class="div1">
<a id="The_xpath-version_attribute" name="The_xpath-version_attribute"></a><h2> <span class="mw-headline">2  <span id="xpath-version-attribute">The <code>xpath-version</code> attribute</span> </span></h2>
<p>This module adds the <code>xpath-version</code> attribute to the XForms <code>model</code> element. The <code>xpath-version</code> attribute is used to switch on or off XPath 1.0 backwards compatibility mode. XPath 1.0 backwards compatibility mode ensures that nearly all XPath 1.0 expressions continue to deliver the same result with XPath 2.0.
</p>
<dl><dt> xpath-version
</dt><dd> Author-optional attribute used by the XForms processor to determine the XPath version that will be used to evaluate XPath expressions. The supported values are 1.0 and 2.0.For the default model the default value is&nbsp;:
<ul><li> 1.0 if the XForms conformance level is 1.0 or 1.1 (see <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#The_model_Element" title="XForms 2.0">The model element</a><sup><small>XF</small></sup> for more information about the XForms conformance level)
</li><li> 2.0 for all other XForms conformance levels. For all non-default models the default value is the xpath-version of the default model. When an XForms processor doesn't supports the requested XPath version or any non-default model has a version setting that is incompatible with the XPath version selected by the XForms Processor, the XForms Processor must terminate processing after dispatching the event <a href="#evt-xpathVersionException" title=""> xpath-version-exception</a> to the default <code>model</code>.
</li></ul>
</dd></dl>
<p>If XPath 1.0 compatibility mode is requested, an XForms processor may use either an XPath 1.0 implementation <a href="#ref-xpath-1.0" title=""> [XPath 1.0]</a> or an XPath 2.0 implementation in XPath 1.0 compatibility mode <a href="#ref-xpath-2.0" title=""> [XPath 2.0]</a>. Some expressions can't be executed with an XPath 1.0 engine and some functions defined in <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a> may be missing if an XPath 1.0 engine is used. If the XPath 1.0 engine can't evaluate the expression an <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-computeException" title="XForms 2.0">xforms-compute-exception</a><sup><small>XF</small></sup> or an <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-bindingException" title="XForms 2.0">xforms-binding-exception</a><sup><small>XF</small></sup> will be dispatched.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>XPath 1.0 only supports atomic values and node sets, and does not support sequences.
</p><p>If an XPath 1.0 engine is used, the function signature components that accept or return:
</p>
<ul><li> A sequences atomic values are to be interpreted as accepting or returning a single atomic value
</li><li> A sequence of items, nodes or elements are to be interpreted as accepting or returning a node-set
</li></ul>
</div></div><div class="div1">
<a id="XPath_Expressions_in_XForms" name="XPath_Expressions_in_XForms"></a><h2> <span class="mw-headline">3  XPath Expressions in XForms </span></h2>
<p>This module uses XPath to address <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#def-instance-data-node" title="XForms 2.0">instance data node</a><sup><small>XF</small></sup>s in binding expressions, to express constraints, and to specify calculations. XPath expressions in XForms are based on <a href="#ref-xpath-2.0" title=""> [XPath 2.0]</a>. At the time of evaluation, an XPath expression must be syntactically correct. In addition, the namespaces the expression references must be in scope and the functions and variables it references must be defined. If any of these conditions is not satisfied, or a dynamic error or a type error occurs during evaluation, an exception (<a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-computeException" title="XForms 2.0">xforms-compute-exception</a><sup><small>XF</small></sup>) is raised, except for binding expressions, which produce a different exception (<a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-bindingException" title="XForms 2.0">xforms-binding-exception</a><sup><small>XF</small></sup>).
</p><p>If an <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-computeException" title="XForms 2.0">xforms-compute-exception</a><sup><small>XF</small></sup> or an <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-bindingException" title="XForms 2.0">xforms-binding-exception</a><sup><small>XF</small></sup> is raised the following extra context information is made available to the event:
</p>
<table border="1" summary="Additional event context information for xforms-compute-exception and xforms-binding-exception">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> xpath-error
</td><td colspan="1" rowspan="1"> xs:QName
</td><td colspan="1" rowspan="1"> Xpath error that caused the error.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xpath-error-description
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> Description of the xpath error.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> xpath-error-object
</td><td colspan="1" rowspan="1"> item()*
</td><td colspan="1" rowspan="1"> XPath diagnostic value if available, otherwise the empty sequence.
</td></tr></tbody></table>
<div class="div2">
<a id="Datatypes" name="Datatypes"></a><h3> <span class="mw-headline">3.1  Datatypes </span></h3>
<p>This module will use the datatypes defined in the XPath specification as their datatypes. The data types are used only in <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#def-binding-expression" title="XForms 2.0">binding expression</a><sup><small>XF</small></sup>s and <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#def-computed-expression" title="XForms 2.0">computed expression</a><sup><small>XF</small></sup>s.
</p>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Nick Van den Bleeken">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Nick Van den Bleeken</b>
</td><td align="right" valign="top" width="50%"> 2011-08-30
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> We are considering to provide the type information provided by schema's attached to the XForms model and the type MIPs to the XPath data model. Erik is going to check if this is possible (during form filling the data isn't valid according to the type -&gt; anyAtomicType in this case?)
</td></tr></tbody></table>
</div><div class="div2">
<a id="Evaluation_Context" name="Evaluation_Context"></a><h3> <span class="mw-headline">3.2  Evaluation Context </span></h3>
<p>This module extends the <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#Evaluation_Context" title="XForms 2.0">evaluation context</a><sup><small>XF</small></sup>, with all the additional properties that are defined in the XPath <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-expression-context" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-expression-context">expression context</a><sup><small>XP</small></sup>. The expression context has two parts, the <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-static-context" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-static-context">static context</a><sup><small>XP</small></sup>, and the <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-dynamic-context" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-dynamic-context">dynamic context</a><sup><small>XP</small></sup>. The components that make up the expression context are defined in the XPath specification (see <a class="external text" href="http://www.w3.org/TR/xpath20/#context" rel="nofollow" title="http://www.w3.org/TR/xpath20/#context">Section 2.1 Expression Context</a><sup><small>XP</small></sup>). This section describes the way in which these components are initialized when an XPath expression is contained within a Form. The term containing element means in these sections the element within the form that is the parent of the attribute whose value contains the XPath expression in question.
</p><p>The following two sections describe:
</p>
<ul><li> <a href="#expr-static-context" title="">Initializing the Static Context</a>
</li><li> <a href="#expr-dynamic-context" title="">Initializing the Dynamic Context</a>
</li></ul>
<div class="div3">
<a id="Initializing_the_Static_Context" name="Initializing_the_Static_Context"></a><h4> <span class="mw-headline">3.2.1  <span id="expr-static-context">Initializing the Static Context</span> </span></h4>
<p>The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-static-context" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-static-context">static context</a><sup><small>XP</small></sup> of an XPath expression appearing in a form is initialized as follows.
</p>
<ul><li> <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-xpath-compat-mode" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-xpath-compat-mode">XPath 1.0 compatibility mode</a><sup><small>XP</small></sup> is set to true if and only if the indicated XPath version on the model is 1.0 or the XForms conformance level is 1.0 or 1.1.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-static-namespaces" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-static-namespaces">statically known namespaces</a><sup><small>XP</small></sup> are the namespace declarations that are in scope for the containing element.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-def-elemtype-ns" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-def-elemtype-ns">default element/type namespace</a><sup><small>XP</small></sup> is the null namespace.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-def-fn-ns" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-def-fn-ns">default function namespace</a><sup><small>XP</small></sup> is the standard function namespace, defined in <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a>. This means that it is not necessary to declare this namespace in the form, nor is it necessary to use the prefix fn (or any other prefix) in calls to the core XPath functions.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-issd" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-issd">in-scope schema definitions</a><sup><small>XP</small></sup> for the XPath expression are as specified in 5 Datatypes.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-in-scope-variables" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-in-scope-variables">in-scope variables</a><sup><small>XP</small></sup>  are defined by the variable binding elements that are in scope for the containing element (see <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#structure-var-element" title="XForms 2.0">The var element</a>).
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-function-signature" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-function-signature">function signatures</a><sup><small>XP</small></sup> are the core functions defined in <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a>, the constructor functions for all the atomic types in the <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-issd" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-issd">in-scope schema definitions</a><sup><small>XP</small></sup>, the additional functions defined in this specification, the custom functions defined in the Form, plus any extension functions bound using implementation-defined mechanisms.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-static-collations" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-static-collations">statically known collations</a><sup><small>XP</small></sup> are implementation-defined. However, the set of in-scope collations must always include the Unicode codepoint collation, defined in <a class="external text" href="http://www.w3.org/TR/xpath-functions/#string-compare" rel="nofollow" title="http://www.w3.org/TR/xpath-functions/#string-compare">7.3 Equality and Comparison of Strings</a><sup><small>FO</small></sup>.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-def-collation" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-def-collation">default collation</a><sup><small>XP</small></sup> is Unicode code point collation.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-base-uri" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-base-uri">base URI</a><sup><small>XP</small></sup> is the base URI of the containing element. The concept of the base URI of a node is defined in <a class="external text" href="http://www.w3.org/TR/xpath-datamodel/#dm-base-uri" rel="nofollow" title="http://www.w3.org/TR/xpath-datamodel/#dm-base-uri">Section 5.2 base-uri Accessor</a><sup><small>DM</small></sup>
</li></ul>
</div><div class="div3">
<a id="Initializing_the_Dynamic_Context" name="Initializing_the_Dynamic_Context"></a><h4> <span class="mw-headline">3.2.2  <span id="expr-dynamic-context">Initializing the Dynamic Context</span> </span></h4>
<p>For convenience, the dynamic context is described in two parts: the focus, which represents the place in the instance document that is currently being referenced, and a collection of additional context variables.
</p><p>A number of functions specified in <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a> are defined to be <a class="external text" href="http://www.w3.org/TR/xpath-functions/#stable" rel="nofollow" title="http://www.w3.org/TR/xpath-functions/#stable">stable</a><sup><small>FO</small></sup>, meaning that if they are called twice during the same <a class="external text" href="http://www.w3.org/TR/xpath-functions/#execution-scope" rel="nofollow" title="http://www.w3.org/TR/xpath-functions/#execution-scope">execution scope</a><sup><small>FO</small></sup>, with the same arguments, then they return the same results (see <a class="external text" href="http://www.w3.org/TR/xpath-functions/#terminology" rel="nofollow" title="http://www.w3.org/TR/xpath-functions/#terminology">"Section 1.7 Terminology</a><sup><small>FO</small></sup>). In XForms, the [TODO] defines the execution scope. This means, for example, that if the function <a class="external text" href="http://www.w3.org/TR/xpath-functions/#func-current-dateTime" rel="nofollow" title="http://www.w3.org/TR/xpath-functions/#func-current-dateTime">current-dateTime</a><sup><small>FO</small></sup> is called repeatedly during a transformation, it produces the same result each time. By implication, the components of the dynamic context on which these functions depend are also stable for [TODO]. Specifically, the following components defined in the section <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-dynamic-context" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-dynamic-context">Dynamic Context</a><sup><small>XP</small></sup> must be stable: function implementations, current dateTime, implicit timezone, available documents, available collections, and default collection. The values of global variables are also stable for the execution of the form. The focus is not stable.
</p>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Nick Van den Bleeken">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Nick Van den Bleeken</b>
</td><td align="right" valign="top" width="50%"> 2011-02-02
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> We need to decide how we will define the 'stable' execution scope, currently we are thinking to go for between refreshes. We only need to think about what this means when you use those functions in binds (when are the binding, calculates, constraints updated), but this isn't a new problem.
</td></tr></tbody></table>
<div class="div4">
<a id="Other_components_of_the_XPath_Dynamic_Context" name="Other_components_of_the_XPath_Dynamic_Context"></a><h5> <span class="mw-headline">3.2.2.1  Other components of the XPath Dynamic Context </span></h5>
<p>The Core XForms specification explained how the focus for an XPath expression appearing in a Form is initialized. This section explains how the other components of the <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-dynamic-context" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-dynamic-context">dynamic context</a><sup><small>XP</small></sup> of an XPath expression are initialized.
</p>
<ul><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-variable-values" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-variable-values">dynamic variables</a><sup><small>XP</small></sup> are the current values of the in-scope variable binding elements.
</li><li> The current date and time represents an implementation-dependent point in time during processing of an expression.
</li><li> The implicit <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-timezone" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-timezone">timezone</a><sup><small>XP</small></sup> is implementation-defined.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-known-docs" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-known-docs">available documents</a><sup><small>XP</small></sup>, and the available <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-known-collections" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-known-collections">collections</a><sup><small>XP</small></sup> are implementation-defined.
</li><li> The <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-default-collection" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-default-collection">default collection</a><sup><small>XP</small></sup> is implementation-defined. This allows options such as setting the default collection to be an empty sequence, or to be undefined.
</li></ul>
</div></div></div><div class="div2">
<a id="Item_type_conversions" name="Item_type_conversions"></a><h3> <span class="mw-headline">3.3  Item type conversions </span></h3>
<p>When the result of an expression needs to be converted to a build in atomic type we will use the XPath constructor functions to do the converion:
</p>
<ul><li> If the expected type is <code>xs:string</code> or <code>xs:string?</code>, then the argument is converted to a string as if by a call to the <code>fn:string</code> function
</li><li> If the expected type is <code>xs:boolean</code> or <code>xs:boolean?</code>, then the argument is converted to a boolean as if by a call to the <code>fn:boolean</code> function
</li></ul>
</div></div><div class="div1">
<a id="The_XForms_Function_Library" name="The_XForms_Function_Library"></a><h2> <span class="mw-headline">4  <span id="expr-lib">The XForms Function Library</span> </span></h2>
<p>The XForms Function Library defines additional functions that are useful for creating forms. The functions will be made available in the <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#structure-namespace" title="XForms 2.0">XForms namespace</a><sup><small>XF</small></sup>. When the XPath version on the model is 1.0 or omitted the functions will be made also available in the <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-def-fn-ns" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-def-fn-ns">default function namespace</a><sup><small>XP</small></sup>. Additionally all functions defined as built-in function and the operators in <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a> are also available in XForms.
</p><p>For backwards compatibility an implementation may make these additional functions also available in the <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-def-fn-ns" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-def-fn-ns">default function namespace</a><sup><small>XP</small></sup> when the XPath version on the model is not 1.0. When the additional function is also available in <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a>, an implementation should not override that function in the <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-def-fn-ns" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-def-fn-ns">default function namespace</a><sup><small>XP</small></sup> (e.g.: when xpath version on the model is 2.0 invoking replace() will invoke the replace function defined in <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a>).
</p>
<div class="note"><div class="prefix"><b>Note:</b></div><p>In future XForms versions adding the XForms Functions to the <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-def-fn-ns" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-def-fn-ns">default function namespace</a><sup><small>XP</small></sup> may be deprecated.</p></div>
<p>The following sections define additional required functions for use within XForms&nbsp;: <a href="#expr-lib-bool" title="">Boolean Functions</a>, <a href="#expr-lib-num" title="">Number Functions</a>, <a href="#expr-lib-string" title="">String Functions</a>, <a href="#expr-lib-date" title="">Date and Time Functions</a>, <a href="#expr-lib-nodeset" title="">Node-set Functions</a> , and <a href="#expr-lib-object" title="">Object Functions</a>.
</p><p>The function library provided by an XForms processor may also contain other extension functions as described in <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#Extension_Functions" title="XForms 2.0">Extension Functions</a><sup><small>XF</small></sup>.
</p><p>If an error occurs in an XPath function, then an <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-computeException" title="XForms 2.0">xforms-compute-exception</a><sup><small>XF</small></sup> or <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-bindingException" title="XForms 2.0">xforms-bind-exception</a><sup><small>XF</small></sup> occurs.
</p>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Nick Van den Bleeken">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Nick Van den Bleeken</b>
</td><td align="right" valign="top" width="50%"> 2011-02-02
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> We need to add support for recovering from dynamic errors in XPath expressions (e.g.: try/catch in XSLT 3.0 <a class="external free" href="http://www.w3.org/TR/xslt-21/#try-catch" rel="nofollow" title="http://www.w3.org/TR/xslt-21/#try-catch">http://www.w3.org/TR/xslt-21/#try-catch</a>)
</td></tr></tbody></table>
<p><br />
</p>
<div class="div2">
<a id="Boolean_Functions" name="Boolean_Functions"></a><h3> <span class="mw-headline">4.1  <span id="expr-lib-bool">Boolean Functions</span> </span></h3>
<div class="div3">
<a id="The_boolean-from-string.28.29_Function" name="The_boolean-from-string.28.29_Function"></a><h4> <span class="mw-headline">4.1.1  <span id="fn-boolean-from-string">The boolean-from-string() Function</span> </span></h4>
<p><code class="function">xf:boolean-from-string</code>(<code class="arg">$value</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:boolean</code>
</p><p>Function <code>boolean-from-string</code> returns <code>true</code> if the required parameter matches "true" or "1" using case-insensitive comparison. Otherwise <code>false</code> is returned. This function is useful when referencing a Schema <code>xsd:boolean</code> datatype in an XPath expression.
</p>
</div>
<div class="div3">
<a id="The_is-card-number.28.29_Function" name="The_is-card-number.28.29_Function"></a><h4> <span class="mw-headline">4.1.2  <span id="fn-is-card-number">The is-card-number() Function</span> </span></h4>
<p><code class="function">xf:is-card-number</code>(<code class="arg">$card-nr</code><code class="as"> as </code><code class="type">xs:string?</code>)<code class="as"> as </code><code class="return-type">xs:boolean</code>
</p><p>If the string parameter conforms to the pattern restriction of the <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#dt-card-number" title="XForms 2.0">xforms:card-number</a><sup><small>XF</small></sup> datatype, then this function applies the <code>Luhn</code> algorithm described in <a href="#ref-luhn" title=""> [Luhn Patent]</a> and returns true if the number satisfies the formula. Otherwise, false is returned. If the parameter is omitted, it defaults to the string-value of the current context item.
</p><p>Examples (see also <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#dt-card-number" title="XForms 2.0">xforms:card-number</a><sup><small>XF</small></sup>):
</p>
<div class="exampleOuter"><div class="exampleInner">
<pre>xf:is-card-number(.)
</pre>
</div>
<p>returns <code>true</code> if and only if the string-value of the context item is a string of zero or more digits and satisfies the formula.
</p>
<div class="exampleInner">
<pre>xf:is-card-number('4111111111111111')
</pre>
</div>
<p>returns <code>true</code>. Other examples of string constants that will return <code>true</code> are&nbsp;: <code>5431111111111111</code>, <code>341111111111111</code> and <code>6011601160116611</code>.
</p>
<div class="exampleInner">
<pre>xf:is-card-number('123')
</pre>
</div>
<p>returns <code>false</code>.
</p>
</div>
</div>
<div class="div3">
<a id="The_valid.28.29_Function" name="The_valid.28.29_Function"></a><h4> <span class="mw-headline">4.1.3  <span id="fn-valid">The valid() Function</span> </span></h4>
<p><code class="function">xf:valid() as xs:boolean</code>
</p><p><code class="function">xf:valid($node as node()*) as xs:boolean</code>
</p><p><code class="function">xf:valid($node as node()*, $relevant as xs:boolean) as xs:boolean</code>
</p><p>The <code>valid()</code> function returns the validity of nodes of instance data.
</p><p>The function acts as if first selecting nodes in this sequence:
</p>
<ol><li> Selected nodes initially consist of each node referred to the <code>$node</code> parameter, if present, or the expression's context node, if absent.
</li><li> Selected nodes and all nodes (including attribute nodes) for which the selected nodes are an ancestor are also selected.
</li><li> If the <code>$relevant</code> attribute is omitted or set to <code>true()</code>, selected nodes which are non-relevant are deselected. The relevance information of an individual node is obtained by looking at the node's relevant property computed as per <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-recalculate" title="XForms 2.0">The xforms-recalculate Event</a><sup><small>XF</small></sup>.
</li></ol>
<p>If there are no resulting selected nodes, the function returns <code>true()</code>.
</p><p>Otherwise the function computes the logical AND of the validity of all the selected nodes. The validity information of an individual node is obtained by looking at the node validity computed as per <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#evt-revalidate" title="XForms 2.0">The xforms-revalidate Event</a><sup><small>XF</small></sup>.
</p><p>If the function is used in a <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#def-model-binding-expression" title="XForms 2.0">model binding expression</a><sup><small>XF</small></sup> the XForms Processor should terminate processing after dispatching the event <code>xforms-binding-exception</code> to the model. If the function is used in a <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#def-computed-expression" title="XForms 2.0">computed expression</a><sup><small>XF</small></sup> the XForms Processor should terminate processing after dispatching the event <code>xforms-compute-exception</code> to the model.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The validity of a node might appear to be out of date by the time the <code>valid()</code> function is used if changes have been made to instance data between the time <code>xforms-recalculate</code> and/or <code>xforms-revalidate</code> processing occur and the time the function is called. This function must therefore used with caution. Examples of safe use include:
</p>
<ul><li> In binding expressions, value expressions, and itemset expressions on form controls.
</li><li> In action handlers responding to events dispatched to form controls, provided instance data has not changed since the time the default action for <code>xforms-refresh</code> has started.
</li></ul>
<p>Similarly, the reason for discouraging the use of the <code>valid()</code> function within binds is that it can easily return unexpected results. For example <code>relevant="valid(../value)"</code> will usually fail to produce the expected result as the <code>relevant</code> property is computed before revalidation happens.
</p>
</div>
<div class="exampleOuter">
<div class="exampleInner">
<pre>&lt;model&gt;
  &lt;instance&gt;
    &lt;data xmlns=""&gt;
      &lt;node1/&gt;
      &lt;node2/&gt;
    &lt;/data&gt;
  &lt;/instance&gt;
  &lt;bind ref="*" type="xs:integer"/&gt;
&lt;/model&gt;
&lt;repeat ref="*[not(valid())]"&gt;
  &lt;output value="."&gt;
    &lt;label&gt;Invalid value:&lt;/label&gt;
  &lt;/output&gt;
&lt;/repeat&gt;
</pre>
</div>
<p>The <code>repeat</code> above generates an <code>output</code> to show the value of each data node that is not valid according to XForms model validation processing.
</p>
</div>
</div>
<div class="div3">
<a id="The_matches.28.29_Function" name="The_matches.28.29_Function"></a><h4> <span class="mw-headline">4.1.4  <span id="fn-matches">The matches() Function</span> </span></h4>
<p><code class="function">xf:matches</code>(<code class="arg">$input</code><code class="as"> as </code><code class="type">xs:string?</code>, <code class="arg">$pattern</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:boolean</code>
</p><p><code class="function">xf:matches</code>(<code class="arg">$input</code><code class="as"> as </code><code class="type">xs:string?</code>, <code class="arg">$pattern</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$flags</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:boolean</code>
</p><p>The function returns <code>true</code> if $input matches the regular expression supplied as $pattern as influenced by the value of $flags. The function behavioral details, regular expression pattern syntax and flags are defined by XPath 2.0. This function from XPath 2.0 is included in the XForms function library for authoring ease and for XPath 1.0 expression compatibility.
</p><p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:matches("abracadabra", "bra")
</pre>
</div>
<p>returns <code>true</code>.
</p>
<div class="exampleInner">
<pre>xf:matches('(123) 456-7890', '^\(?(\d{3})\)? [-. ]?(\d{3}) [-. ]?(\d{4})$')
</pre>
</div>
<p>returns <code>true</code>.
</p>
<div class="exampleInner">
<pre>&lt;model&gt;
  &lt;xf:instance xmlns=""&gt;
    &lt;data&gt;
      &lt;phone&gt;abc&lt;/phone&gt;
    &lt;/data&gt;
  &lt;/xf:instance&gt;
  &lt;bind ref="phone" constraint="xf:matches(., '^\(?(\d{3})\)? [-. ]?(\d{3}) [-. ]?(\d{4})$')"/&gt;
&lt;/model&gt;
</pre>
</div>
<p>The function returns <code>false</code> to the <code>constraint</code>.
</p>
</div>
</div>
</div>
<div class="div2">
<a id="Number_Functions" name="Number_Functions"></a><h3> <span class="mw-headline">4.2  <span id="expr-lib-num">Number Functions</span></span></h3>
<div class="div3">
<a id="The_avg.28.29_Function" name="The_avg.28.29_Function"></a><h4> <span class="mw-headline">4.2.1  <span id="fn-avg">The avg() Function</span> </span></h4>
<p><code class="function">xf:avg</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:anyAtomicType*</code>)<code class="as"> as </code><code class="return-type">xs:integer</code>
</p><p>Function <code>avg</code> returns the arithmetic average of the result of converting the string-values of each item in the argument sequence to a number. The sum is computed with <code>sum()</code>, and divided with <code>div</code> by the value computed with <code>count()</code>. If the parameter is an empty sequence, or if any of the nodes evaluate to <code>NaN</code>, the return value is <code>NaN</code>.
</p>
</div>
<div class="div3">
<a id="The_min.28.29_Function" name="The_min.28.29_Function"></a><h4> <span class="mw-headline">4.2.2  <span id="fn-min">The min() Function</span> </span></h4>
<p><code class="function">xf:min</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:anyAtomicType*</code>)<code class="as"> as </code><code class="return-type">xs:integer</code>
</p><p>Function <code>min</code> returns the minimum value of the result of converting the string-values of each item in the sequence argument to a number. "Minimum" is determined with the <code>&lt;</code> operator. If the parameter is an empty sequence, or if any of the nodes evaluate to <code>NaN</code>, the return value is <code>NaN</code>.
</p>
</div>
<div class="div3">
<a id="The_max.28.29_Function" name="The_max.28.29_Function"></a><h4> <span class="mw-headline">4.2.3  <span id="fn-max">The max() Function</span> </span></h4>
<p><code class="function">xf:max</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:anyAtomicType*</code>)<code class="as"> as </code><code class="return-type">xs:integer</code>
</p><p>Function <code>max</code> returns the maximum value of the result of converting the string-values of each item in the sequence argument to a number. "Maximum" is determined with the <code>&lt;</code> operator. If the parameter is an empty sequence, or if any of the nodes evaluate to <code>NaN</code>, the return value is <code>NaN</code>.
</p>
</div>
<div class="div3">
<a id="The_count-non-empty.28.29_Function" name="The_count-non-empty.28.29_Function"></a><h4> <span class="mw-headline">4.2.4  <span id="fn-count-non-empty">The count-non-empty() Function</span> </span></h4>
<p><code class="function">xf:count-non-empty</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">node()*</code>)<code class="as"> as </code><code class="return-type">xs:integer</code>
</p><p>Function <code>count-non-empty</code> returns the number of non-empty nodes in the first argument. A node is considered non-empty if it is convertible into a string with a greater-than zero length.
</p>
</div>
<div class="div3">
<a id="The_index.28.29_Function" name="The_index.28.29_Function"></a><h4> <span class="mw-headline">4.2.5  <span id="fn-index">The index() Function</span> </span></h4>
<p><code class="function">xf:index</code>(<code class="arg">$repeat-id</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:integer</code>
</p><p>Function <code>index</code> takes a string argument that is the <code>IDREF</code> of a <code>repeat</code> and returns the current 1-based position of the repeat index for the identified <code>repeat</code>&acirc;&euro;&rdquo;see <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#ui-repeat" title="XForms 2.0">The repeat Element</a><sup><small>XF</small></sup> for details on <code>repeat</code> and its associated repeat index. If the specified argument does not identify a <code>repeat</code>, the function returns <code>NaN</code>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The IDREF obtained from the function parameter may not uniquely identify the desired <code>repeat</code> if the <code>repeat</code> element bearing the matching ID resides in a repeating construct such as element <code>repeat</code>. The general method described in <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#idref-resolve" title="XForms 2.0">Resolving ID References in XForms</a><sup><small>XF</small></sup> is used to determine the desired run-time repeat object.
</p>
</div>
<p>The function <code>index</code> introduces additional dependencies for the computational dependency data structure, see <a href="#additional-references" title=""> Additional dependencies for the computational dependency data structure</a> for details.
</p>
<div class="exampleOuter"><div class="exampleHead">index</div>
<div class="exampleInner">
<pre>&lt;trigger&gt;
  &lt;label&gt;Add to Shopping Cart&lt;/label&gt;
  &lt;insert ev:event="DOMActivate" position="after"
          nodeset="items/item" at="xf:index('cartUI')"/&gt;
&lt;/trigger&gt;
</pre>
</div>
<p>When activated, this trigger inserts a new <code>item</code> element as the successor of the <code>item</code> element indicated by the <code>index()</code> function.
</p>
</div>
</div>
<div class="div3">
<a id="The_power.28.29_Function" name="The_power.28.29_Function"></a><h4> <span class="mw-headline">4.2.6  <span id="fn-power">The power() Function</span> </span></h4>
<p><code class="function">xf:power</code>(<code class="arg">$base</code><code class="as"> as </code><code class="type">numeric</code>, <code class="arg">$exponent</code><code class="as"> as </code><code class="type">numeric</code>)<code class="as"> as </code><code class="return-type">xs:integer</code>
</p><p>Raises the first argument to the power of the second argument, returning the result. If the calculation does not result in a real number, then <code>NaN</code> is returned.
</p><p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:power(2, 3)
</pre>
</div>
<p>returns <code>8</code>
</p>
<div class="exampleInner">
<pre>xf:power(-1, 0.5)
</pre>
</div>
<p>returns <code>NaN</code>.
</p>
<div class="exampleInner">
<pre>if (prin&gt;0 and dur&gt;0 and rate&gt;0) then prin*rate/(1-xf:power(1+rate, -dur)) else 0
</pre>
</div>
<p>returns a compounded interest payment value given a non-zero principal (<code>prin</code>), duration (<code>dur</code>) and periodic interest rate (<code>rate</code>).
</p>
</div>
</div>
<div class="div3">
<a id="The_random.28.29_Function" name="The_random.28.29_Function"></a><h4> <span class="mw-headline">4.2.7  <span id="fn-random">The random() Function</span> </span></h4>
<p><code class="function">xf:random</code>(<code class="arg">$seed</code><code class="as"> as </code><code class="type">xs:boolean?</code>)<code class="as"> as </code><code class="return-type">numeric</code>
</p><p>This function generates and returns a uniformly distributed random or pseudorandom number in the range from 0.0 up to but excluding 1.0. This function accepts an author-optional boolean parameter that is <code>false</code> by default. If <code>true</code>, the random number generator for this function is first seeded with a source of randomness before generating the return value. A typical implementation may seed the random number generator with the current system time in milliseconds when <code>random(true)</code> is invoked, and it may apply a linear congruential formula to generate return values on successive invocations of the function.
</p><p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:random()
</pre>
</div>
<p>could return <code>0.14159265358979</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_compare.28.29_Function" name="The_compare.28.29_Function"></a><h4> <span class="mw-headline">4.2.8  <span id="fn-compare">The compare() Function</span> </span></h4>
<p><code class="function">xf:compare</code>(<code class="arg">$arg1</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$arg2</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:integer</code>
</p><p>This function returns -1, 0, or 1, depending on whether the value of the first argument is respectively less than, equal to, or greater than the value of second argument based on lexicographic comparison using Unicode code point values <a href="#ref-unicode-collation" title=""> [Unicode Collation Algorithm]</a>.
</p><p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:compare('apple', 'orange')
</pre>
</div>
<p>returns <code>-1</code>
</p>
</div>
</div>
</div>
<div class="div2">
<a id="String_Functions" name="String_Functions"></a><h3> <span class="mw-headline">4.3  <span id="expr-lib-string">String Functions</span> </span></h3>
<div class="div3">
<a id="The_case.28.29_Function" name="The_case.28.29_Function"></a><h4> <span class="mw-headline">4.3.1  <span id="fn-case">The case() Function</span> </span></h4>
<p><code class="function">xf:case</code>(<code class="arg">$switch-id</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:string?</code>
</p><p>Function <code>case</code> takes a string argument that is the <code>IDREF</code> of a switch and returns the <code>ID</code> of the selected case for the identified <code>switch</code>&acirc;&euro;&rdquo;see <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#ui-switch" title="XForms 2.0">The switch Element</a><sup><small>XF</small></sup> for details on <code>switch</code>.
</p><p>The empty sequence is returned, if the specified argument does not identify a <code>switch</code>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>The IDREF obtained from the function parameter may not uniquely identify the desired <code>switch</code> if the <code>switch</code> element bearing the matching ID resides in a repeating construct such as element <code>repeat</code>. The general method described in <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#idref-resolve" title="XForms 2.0">Resolving ID References in XForms</a><sup><small>XF</small></sup> is used to determine the desired run-time repeat object.
</p>
</div>
<p>The function <code>case</code> introduces additional dependencies for the computational dependency data structure, see <a href="#additional-references" title="">Additional dependencies for the computational dependency data structure</a> for details.
</p>
</div>
<div class="div3">
<a id="The_property.28.29_Function" name="The_property.28.29_Function"></a><h4> <span class="mw-headline">4.3.2  <span id="fn-property">The property() Function</span> </span></h4>
<p><code class="function">xf:property</code>(<code class="arg">$property-name</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:string?</code>
</p><p>This function accepts a string identifying a property name. If the property name is not recognized, empty sequence is returned. The property definitions for this function are as follows:
</p>
<table border="1" summary="Property function parameters and return values">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Return Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> <code>version</code>
</td><td colspan="1" rowspan="1"> <code>1.1</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>conformance-level</code>
</td><td colspan="1" rowspan="1"> <code>full</code>, <code>basic</code> or a string beginning with <code>full</code> or <code>basic</code>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p>Any other <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>
</p>
</td><td colspan="1" rowspan="1">
<p>Reserved. Their use results in an exception (see <a href="#expr-lib" title=""> <b>4 The XForms Function Library</b></a> for the exception type)
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#def-QNameButNotNCName" title=""> QNameButNotNCName</a>
</p>
</td><td colspan="1" rowspan="1"> An implementation-specific property value, such as a locale or timezone for the user agent. If the implementation does not support the property, then empty string is returned.
</td></tr></tbody></table>
<p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:property('version')
</pre>
</div>
<p>returns <code>1.1</code>
</p>
<div class="exampleInner">
<pre>xf:property('conformance-level')
</pre>
</div>
<p>may return <code>full</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_digest.28.29_Function" name="The_digest.28.29_Function"></a><h4> <span class="mw-headline">4.3.3  <span id="fn-digest">The digest() Function</span> </span></h4>
<p><code class="function">xf:digest</code>(<code class="arg">$data</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$algo</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$encoding</code><code class="as"> as </code><code class="type">xs:string?</code>)<code class="as"> as </code><code class="return-type">xs:string</code>
</p><p>This function accepts a string of data, a string indicating a cryptographic hashing algorithm, and an author-optional string indicating an encoding method. The data string is serialized as UTF-8, the hash value is then computed using the indicated hash algorithm, and the hash value is then encoded by the indicated method, and the result is returned by the function. The following table presents the keywords for the second string parameter and the corresponding hash algorithms:
</p>
<table border="1" summary="Hash algorithms for the digest() function">
<tbody><tr>
<th colspan="1" rowspan="1"> Keywords
</th><th colspan="1" rowspan="1"> Hash Algorithm
</th><th colspan="1" rowspan="1"> Status
</th></tr>
<tr>
<td colspan="1" rowspan="1"> <code>MD5</code>
</td><td colspan="1" rowspan="1">
<p>The MD5 hash algorithm defined in <a href="#ref-md5" title=""> [MD5]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>SHA-1</code>
</td><td colspan="1" rowspan="1">
<p>The SHA-1 hash algorithm defined in <a href="#ref-sha2" title=""> [SHA2]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>SHA-256</code>
</td><td colspan="1" rowspan="1">
<p>The SHA-256 hash algorithm defined in <a href="#ref-sha2" title=""> [SHA2]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>SHA-384</code>
</td><td colspan="1" rowspan="1">
<p>The SHA-384 hash algorithm defined in <a href="#ref-sha2" title=""> [SHA2]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Optional</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>SHA-512</code>
</td><td colspan="1" rowspan="1">
<p>The SHA-512 hash algorithm defined in <a href="#ref-sha2" title=""> [SHA2]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Optional</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p>Any other <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>
</p>
</td><td colspan="1" rowspan="1">
<p>Reserved. Their use results in an exception (see <a href="#expr-lib" title=""> <b>4 The XForms Function Library</b></a> for the exception type)
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#def-QNameButNotNCName" title=""> QNameButNotNCName</a>
</p>
</td><td colspan="1" rowspan="1">
<p>An implementation-specific hash algorithm is used. If the implementation does not support the indicated hash algorithm, then an exception occurs (see <a href="#expr-lib" title=""> <b>4 The XForms Function Library</b></a> for the exception type).
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr></tbody></table>
<p>This recommendation defines the values <code>hex</code> and <code>base64</code> for the third string parameter that indicates the encoding method. If the parameter is missing, then the default is <code>base64</code>. The <code>hex</code> and <code>base64</code> encoding methods of this function correspond to the encodings defined in <a href="#ref-xschema-2" title=""> [XML Schema part 2]</a> for the datatypes <code>hexBinary</code> and <code>base64Binary</code>, respectively. For the hexadecimal encoding, the digits 'a' through 'f' are encoded with lower case letters. Any other string value given for the encoding method results in an exception (see <a href="#expr-lib" title=""> <b>4 The XForms Function Library</b></a> for the exception type).
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:digest('abc', 'SHA-1', 'hex')
</pre>
</div>
<p>returns <code>a9993e364706816aba3e25717850c26c9cd0d89d</code>.
</p>
<div class="exampleInner">
<pre>xf:digest('abc', 'MD5', 'hex')
</pre>
</div>
<p>returns <code>900150983cd24fb0d6963f7d28e17f72</code>.
</p>
<div class="exampleInner">
<pre>xf:digest('abc', 'SHA-256', 'hex')
</pre>
</div>
<p>returns <code>ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_hmac.28.29_Function" name="The_hmac.28.29_Function"></a><h4> <span class="mw-headline">4.3.4  <span id="fn-hmac">The hmac() Function</span> </span></h4>
<p><code class="function">xf:hmac</code>(<code class="arg">$secret</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$data</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$algo</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$encoding</code><code class="as"> as </code><code class="type">xs:string?</code>)<code class="as"> as </code><code class="return-type">xs:string</code>
</p><p>This function accepts a string for a key or shared secret, a string of data, a string indicating a cryptographic hashing algorithm, and an author-optional string indicating an encoding method. The key and data strings are serialized as UTF-8, and they are subjected to the HMAC algorithm defined in <a href="#ref-hmac" title=""> [HMAC]</a> and parameterized by the the hash algorithm indicated by the third parameter. The result is encoded with the method indicated by the fourth parameter, and the result is returned by the function.
</p><p>The following table presents the keywords for the third string parameter and the corresponding hash algorithms:
</p>
<table border="1" summary="Hash algorithms for the hmac() function">
<tbody><tr>
<th colspan="1" rowspan="1"> Keywords
</th><th colspan="1" rowspan="1"> Hash Algorithm
</th><th colspan="1" rowspan="1"> Status
</th></tr>
<tr>
<td colspan="1" rowspan="1"> <code>MD5</code>
</td><td colspan="1" rowspan="1">
<p>The MD5 hash algorithm defined in <a href="#ref-md5" title=""> [MD5]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>SHA-1</code>
</td><td colspan="1" rowspan="1">
<p>The SHA-1 hash algorithm defined in <a href="#ref-sha2" title=""> [SHA2]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>SHA-256</code>
</td><td colspan="1" rowspan="1">
<p>The SHA-256 hash algorithm defined in <a href="#ref-sha2" title=""> [SHA2]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>SHA-384</code>
</td><td colspan="1" rowspan="1">
<p>The SHA-384 hash algorithm defined in <a href="#ref-sha2" title=""> [SHA2]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Optional</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>SHA-512</code>
</td><td colspan="1" rowspan="1">
<p>The SHA-512 hash algorithm defined in <a href="#ref-sha2" title=""> [SHA2]</a>
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Optional</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p>Any other <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>
</p>
</td><td colspan="1" rowspan="1">
<p>Reserved. Their use results in an exception (see <a href="#expr-lib" title=""> <b>4 The XForms Function Library</b></a> for the exception type)
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#def-QNameButNotNCName" title=""> QNameButNotNCName</a>
</p>
</td><td colspan="1" rowspan="1">
<p>An implementation-specific hash algorithm is used. If the implementation does not support the indicated hash algorithm, then an exception occurs (see <a href="#expr-lib" title=""> <b>4 The XForms Function Library</b></a> for the exception type).
</p>
</td><td colspan="1" rowspan="1">
<p><a href="#intro-reading" title=""> Required</a>
</p>
</td></tr></tbody></table>
<p>This recommendation defines the values <code>hex</code> and <code>base64</code> for the fourth string parameter that indicates the encoding method. If the parameter is missing, then the default is <code>base64</code>. The <code>hex</code> and <code>base64</code> encoding methods of this function correspond to the encodings defined in <a href="#ref-xschema-2" title=""> [XML Schema part 2]</a> for the datatypes <code>hexBinary</code> and <code>base64Binary</code>, respectively. For the hexadecimal encoding, the digits 'a' through 'f' are encoded with lower case letters. Any other string value given for the encoding method results in an exception (see <a href="#expr-lib" title=""> <b>4 The XForms Function Library</b></a> for the exception type).
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:hmac('Jefe', 'what do ya want for nothing?', 'SHA-1', 'hex')
</pre>
</div>
<p>returns <code>effcdf6ae5eb2fa2d27416d5f184df9c259a7c79</code>
</p>
<div class="exampleInner">
<pre>xf:hmac('Jefe', 'what do ya want for nothing?', 'MD5', 'hex')
</pre>
</div>
<p>returns <code>750c783e6ab0b503eaa86e310a5db738</code>
</p>
<div class="exampleInner">
<pre>xf:hmac('Jefe', 'what do ya want for nothing?', 'SHA-256', 'hex')
</pre>
</div>
<p>returns <code>5bdcc146bf60754e6a042426089575c75a003f089d2739839dec58b964ec3843</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_replace.28.29_Function" name="The_replace.28.29_Function"></a><h4> <span class="mw-headline">4.3.5  <span id="fn-replace">The replace() Function</span> </span></h4>
<p><code class="function">xf:replace</code>(<code class="arg">$input</code><code class="as"> as </code><code class="type">xs:string?</code>, <code class="arg">$pattern</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$replacement</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:string</code>
</p><p><code class="function">xf:replace</code>(<code class="arg">$input</code><code class="as"> as </code><code class="type">xs:string?</code>, <code class="arg">$pattern</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$replacement</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$flags</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:string</code>
</p><p>The function returns the <code>xs:string</code> that is obtained by replacing each non-overlapping substring of $input that matches the given $pattern (as influenced by the value of $flags) with an occurrence of the $replacement string.  The function behavioral details, regular expression pattern syntax, replacement string syntax and flags are defined by XPath 2.0. This function from XPath 2.0 is included in the XForms function library for authoring ease and for XPath 1.0 expression compatibility.
</p><p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:replace("abcd", "(ab)|(a)", "[1=$1][2=$2]")
</pre>
</div>
<pre>returns <code>[1=ab][2=]cd</code>.
</pre>
<div class="exampleInner">
<pre>xf:replace('1234567890', '^\(?(\d{3})\)? [-. ]?(\d{3}) [-. ]?(\d{4})$', '($1) $2-$3')
</pre>
</div>
<p>returns <code>(123) 456-7890</code>.
</p>
<div class="exampleInner">
<pre>&lt;model&gt;
  &lt;xf:instance xmlns=""&gt;
    &lt;data&gt;
      &lt;phone&gt;&lt;/phone&gt;
    &lt;/data&gt;
  &lt;/xf:instance&gt;
  &lt;bind ref="phone" constraint="xf:matches(., '^\(?(\d{3})\)? [-. ]?(\d{3}) [-. ]?(\d{4})$')"/&gt;
&lt;/model&gt;
&lt;input ref="phone"&gt;
   &lt;label&gt;Enter phone number:&lt;/label&gt;
   &lt;setvalue ev:event="xforms-value-changed" ref="."
             value="xf:replace(., '^\(?(\d{3})\)? [-. ]?(\d{3}) [-. ]?(\d{4})$', '($1) $2-$3')"/&gt;
&lt;/input&gt;
</pre>
</div>
<p>If the user enters an input of <code>1234567890</code>, the <code>setvalue</code> uses the function to change the content of the <code>phone</code> element to <code>(123) 456-7890</code>.
</p>
</div>
</div>
<div class="div3">
<a id="The_serialize.28.29_Function" name="The_serialize.28.29_Function"></a><h4> <span class="mw-headline">4.3.6  <span id="fn-serialize">The serialize() Function</span> </span></h4>
<p><code class="function">xf:serialize</code>(<code class="arg">$element</code><code class="as"> as </code><code class="type">element()?</code>)<code class="as"> as </code><code class="return-type">xs:string</code>
</p><p><code class="function">xf:serialize</code>(<code class="arg">$element</code><code class="as"> as </code><code class="type">element()?</code>, <code class="arg">$format</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:string</code>
</p><p>The function returns a string containing the serialization of the XML tree rooted by the given $element. If $element is empty, then the empty string is returned. If no $format is specified, then the default is the <code>xml</code> serializer with no relevance pruning nor validation.
</p><p>The $format is a space-separated list of QNames intended to allow namespace qualified custom extensions as well as NCName values that control various features of serialization such as whether relevance pruning is performed, whether an XML declaration is emitted, and various other options of serialization that are synonymous with XForms submission serialization and the XSLT output element. 
</p>
<table border="1" summary="The $format specifiers of the xf:serialize() function">
<tbody><tr>
<th colspan="1" rowspan="1"> Token
</th><th colspan="1" rowspan="1"> Meaning
</th></tr>
<tr>
<td colspan="1" rowspan="1"> <code>xml</code>
</td><td colspan="1" rowspan="1"> Use the XML 1.0 serializer defined by XForms submission, which is the default if no serializer is specified.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>json</code>
</td><td colspan="1" rowspan="1"> Use the JSON data serializer defined by XForms submission
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>relevant</code>
</td><td colspan="1" rowspan="1"> Serialize relevant nodes only.
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>validate</code>
</td><td colspan="1" rowspan="1"> If the data to be serialized is not valid, return the empty string. Otherwise, return the serialization according to the other $format tokens.
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p>Any other <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>
</p>
</td><td colspan="1" rowspan="1">
<p>Reserved. Their use results in an exception (see <a href="#expr-lib" title=""> <b>4 The XForms Function Library</b></a> for the exception type)
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#def-QNameButNotNCName" title=""> QNameButNotNCName</a>
</p>
</td><td colspan="1" rowspan="1"> An implementation-specific serializer or serialization qualifier. A QNameButNotNCName is assumed to provide a serializer only if none of the NCName serializers are specified. If the implementation does not support the serializer, then the empty string is returned.
</td></tr></tbody></table>
<p><br />
</p>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Alternative XML serialization behaviors">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Alternative XML serialization behaviors</b>
</td><td align="right" valign="top" width="50%"> 2012-04-17
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> The working group is considering how to specify alternative XML serialization behaviors, such as various options of XForms submissions that are synonymous to the XSLT output element.
</td></tr></tbody></table>
<p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre> &lt;model&gt;
    &lt;xf:instance xmlns=""&gt;
       &lt;data&gt;
          &lt;node&gt;abc&lt;/node&gt;
          &lt;text&gt;&amp;lt;node&amp;gt;abc&amp;lt;/node&amp;gt;&lt;/text&gt; 
       &lt;/data&gt;
    &lt;/xf:instance&gt;
    &lt;bind ref="text" calculate="xf:serialize(../node)"/&gt;
 &lt;/model&gt;
</pre>
</div>
<p>The function returns a string containing the serialization of element <code>node</code>, which is placed into the content of the element <code>text</code> by the <code>calculate</code>.
</p>
</div>
<p><br />
</p>
</div>
</div>
<div class="div2">
<a id="Date_and_Time_Functions" name="Date_and_Time_Functions"></a><h3> <span class="mw-headline">4.4  <span id="expr-lib-date">Date and Time Functions</span> </span></h3>
<div class="note">
<p><b>Note:</b>
</p><p>The following XML Schema datatypes do not have specific functions for manipulation within XForms expressions: <code>xsd:gYearMonth</code>, <code>xsd:gYear</code>, <code>xsd:gMonthDay</code>, <code>xsd:gDay</code>, <code>xsd:gMonth</code>. Extension functions (<a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#Extension_Functions" title="XForms 2.0">Extension Functions</a><sup><small>XF</small></sup>) may be used to perform needed operations on these datatypes.
</p>
</div>
<div class="div3">
<a id="The_local-date.28.29_Function" name="The_local-date.28.29_Function"></a><h4> <span class="mw-headline">4.4.1  <span id="fn-local-date">The local-date() Function</span> </span></h4>
<p><code class="function">xf:local-date</code>()<code class="as"> as </code><code class="return-type">xs:date</code>
</p><p>This function returns a lexical <code>xsd:date</code> obtained as if by the following rules: the result of <code>now()</code> is converted to a local date based on the user agent time zone information. If no time zone information is available, then the date portion of the result of <code>now()</code> is returned.
</p><p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:local-date()
</pre>
</div>
<p>could return <code>2006-10-13-07:00</code>
</p>
<div class="exampleInner">
<pre>xf:substring(local-date(), 1, 10)
</pre>
</div>
<p>could return <code>2006-10-13</code>
</p>
<div class="exampleInner">
<pre>xf:days-to-date(days-from-date(local-date()) + 31)
</pre>
</div>
<p>returns a date that is 31 days from today. For example, if <code>local-date()</code> returns <code>2006-10-13-07:00</code>, then the result is <code>2006-11-13</code>.
</p>
</div>
</div>
<div class="div3">
<a id="The_local-dateTime.28.29_Function" name="The_local-dateTime.28.29_Function"></a><h4> <span class="mw-headline">4.4.2  <span id="fn-local-dateTime">The local-dateTime() Function</span> </span></h4>
<p><code class="function">xf:local-dateTime</code>()<code class="as"> as </code><code class="return-type">xs:dateTime</code>
</p><p>This function returns a lexical <code>xsd:dateTime</code> obtained as if by the following rules: the result of <code>now()</code> is converted to a local dateTime based on the user agent time zone information. If no time zone information is available, then the result of <code>now()</code> is returned.
</p><p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:local-dateTime()
</pre>
</div>
<p>could return <code>2006-10-13T16:04:17-07:00</code>
</p>
<div class="exampleInner">
<pre>xf:adjust-dateTime-to-timezone(seconds-to-dateTime(seconds-from-dateTime(local-dateTime()) + 7200))
</pre>
</div>
<p>Adds two hours (7200 seconds) to the local date and time, returning the result in the local time zone. For example, if <code>local-dateTime()</code> returns <code>2007-10-02T14:26:43-07:00</code>, then the above expression returns <code>2007-10-02T16:26:43-07:00</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_now.28.29_Function" name="The_now.28.29_Function"></a><h4> <span class="mw-headline">4.4.3  <span id="fn-now">The now() Function</span> </span></h4>
<p><code class="function">xf:now</code>()<code class="as"> as </code><code class="return-type">xs:string</code>
</p><p>The <code>now</code> function returns the current UTC date and time as a string value in the canonical XML Schema <code>xsd:dateTime</code> format. If time zone information is available, it is used to convert the date and time to UTC. If no time zone information is available, then the date and time are assumed to be in UTC.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Attaching a calculation of "<code>now()</code>" to an instance data node would not result in a stream of continuous recalculations of the XForms Model.
</p>
</div>
<p>Examples: 
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:now()
</pre>
</div>
<p>returns <code>2006-10-14T01:04:17Z</code> if <code>local-dateTime()</code> returns <code>2006-10-13T18:04:17-07:00</code>
</p>
<div class="exampleInner">
<pre>xf:seconds-to-dateTime(seconds-from-dateTime(now()) + 7200)
</pre>
</div>
<p>Computes two hours from now, returning the result in UTC time. For example, if <code>now()</code> returns <code>2007-10-02T21:26:43Z</code>, then the above expression returns <code>2007-10-02T23:26:43Z</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_days-from-date.28.29_Function" name="The_days-from-date.28.29_Function"></a><h4> <span class="mw-headline">4.4.4  <span id="fn-days-from-date">The days-from-date() Function</span> </span></h4>
<p><code class="function">xf:days-from-date</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:integer</code>
</p><p>This function returns a whole number of days, according to the following rules:
</p><p>If the string parameter represents a legal lexical <code>xsd:date</code> or <code>xsd:dateTime</code>, the return value is equal to the number of days difference between the specified date or dateTime (normalized to UTC) and <code>1970-01-01</code>. Hour, minute, and second components are ignored after normalization. Any other input parameter causes a return value of <code>NaN</code>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>If an <code>xsd:date</code> is given as the parameter, the timezone is ignored if provided because there is no way to normalize to the date in the UTC timezone without both the time and timezone.
</p>
</div>
<p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:days-from-date("2002-01-01")
</pre>
</div>
<p>returns <code>11688</code>
</p>
<div class="exampleInner">
<pre>xf:days-from-date("2002-01-01-07:00")
</pre>
</div>
<p>returns <code>11688</code>
</p>
<div class="exampleInner">
<pre>xf:days-from-date("1969-12-31")
</pre>
</div>
<p>returns <code>-1</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_days-to-date.28.29_Function" name="The_days-to-date.28.29_Function"></a><h4> <span class="mw-headline">4.4.5  <span id="fn-days-to-date">The days-to-date() Function</span> </span></h4>
<p><code class="function">xf:days-to-date</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">numeric</code>)<code class="as"> as </code><code class="return-type">xs:date</code>
</p><p>This function returns an <code>xsd:date</code> that corresponds to the number of days passed as the parameter according to the following rules:
</p><p>The number parameter is rounded to the nearest whole number, and the result is interpreted as the difference between the desired date and <code>1970-01-01</code>. An input parameter value of <code>NaN</code> results in output of the empty string.
</p><p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:days-to-date(11688)
</pre>
</div>
<p>returns <code>2002-01-01</code>
</p>
<div class="exampleInner">
<pre>xf:days-to-date(-1)
</pre>
</div>
<p>returns <code>1969-12-31</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_seconds-from-dateTime.28.29_Function" name="The_seconds-from-dateTime.28.29_Function"></a><h4> <span class="mw-headline">4.4.6  <span id="fn-seconds-from-dateTime">The seconds-from-dateTime() Function</span> </span></h4>
<p><code class="function">xf:seconds-from-dateTime</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:decimal</code>
</p><p>This function returns a possibly fractional number of seconds, according to the following rules:
</p><p>If the string parameter represents a legal lexical <code>xsd:dateTime</code>, the return value is equal to the number of seconds difference between the specified dateTime (normalized to UTC) and <code>1970-01-01T00:00:00Z</code>. If no time zone is specified, UTC is used. Any other input string parameter causes a return value of <code>NaN</code>. This function does not support leap seconds.
</p><p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:seconds-from-dateTime('1970-01-01T00:00:00Z')
</pre>
</div>
<p>returns <code>0</code>
</p>
<div class="exampleInner">
<pre>xf:seconds-from-dateTime('1970-01-01T00:00:00-08:00')
</pre>
</div>
<p>returns <code>28800</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_seconds-to-dateTime.28.29_Function" name="The_seconds-to-dateTime.28.29_Function"></a><h4> <span class="mw-headline">4.4.7  <span id="fn-seconds-to-dateTime">The seconds-to-dateTime() Function</span> </span></h4>
<p><code class="function">xf:seconds-to-dateTime</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">numeric</code>)<code class="as"> as </code><code class="return-type">xs:xsd:dateTime</code>
</p><p>This function returns an <code>xsd:dateTime</code> that corresponds to the number of seconds passed as the parameter according to the following rules:
</p><p>The number parameter is rounded to the nearest whole number, and the result is interpreted as the difference between the desired UTC dateTime and <code>1970-01-01T00:00:00Z</code>. An input parameter value of <code>NaN</code> results in output of the empty string. This function does not support leap seconds.
</p><p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:seconds-to-dateTime(0)
</pre>
</div>
<p>returns <code>1970-01-01T00:00:00Z</code>
</p>
<div class="exampleInner">
<pre>xf:seconds-from-dateTime(28800)
</pre>
</div>
<p>returns <code>1970-01-01T08:00:00Z</code>
</p>
<div class="exampleInner">
<pre>xf:seconds-to-dateTime(seconds-from-dateTime(now()) + 7200)
</pre>
</div>
<p>Computes two hours from now, returning the result in UTC time. For example, if <code>now()</code> returns <code>2007-10-02T21:26:43Z</code>, then the above expression returns <code>2007-10-02T23:26:43Z</code>
</p>
<div class="exampleInner">
<pre>xf:adjust-dateTime-to-timezone(seconds-to-dateTime(seconds-from-dateTime(now()) + 7200))
</pre>
</div>
<p>Computes two hours from now, returning the result in the local time zone. For example, if <code>now()</code> returns <code>2007-10-02T21:26:43Z</code> and the local date and time is <code>2007-10-02T14:26:43-07:00</code>, then the above expression returns <code>2007-10-02T16:26:43-07:00</code>
</p>
</div>
</div>
<div class="div3">
<a id="The_adjust-dateTime-to-timezone.28.29_Function" name="The_adjust-dateTime-to-timezone.28.29_Function"></a><h4> <span class="mw-headline">4.4.8  <span id="fn-adjust-dateTime-to-timezone">The adjust-dateTime-to-timezone() Function</span> </span></h4>
<p><code class="function">xf:adjust-dateTime-to-timezone</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:dateTime</code>
</p><p>This function adjusts a legal lexical <code>xsd:dateTime</code> received as the parameter to the local time zone for the user of the implementation, and returns the result. The application of daylight savings time is dependent on whether daylight savings time is in effect for the local time zone at the given date and time. "Local" or untimezoned times are presumed to be the time in the local time zone. If the implementation does not have access to time zone information, UTC is used. The result is empty string if the string argument is the empty sequence or not a legal lexical <code>xsd:dateTime</code>.
</p><p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:adjust-dateTime-to-timezone('2007-10-07T02:22:00')
</pre>
</div>
<p>returns <code>2007-10-07T02:22:00-07:00</code> in the Pacific time zone since daylight savings time applies to the date <code>2007-10-02</code> in the Pacific time zone.
</p>
<div class="exampleInner">
<pre>xf:adjust-dateTime-to-timezone('2007-10-02T21:26:43Z')
</pre>
</div>
<p>returns <code>2007-10-02T14:26:43-07:00</code> in the Pacific time zone since daylight savings time applies to the date <code>2007-10-02</code> in the Pacific time zone.
</p>
<div class="exampleInner">
<pre>xf:adjust-dateTime-to-timezone(seconds-to-dateTime(seconds-from-dateTime(now()) + 7200))
</pre>
</div>
<p>Computes two hours from now, returning the result in the local time zone. For example, if <code>now()</code> returns <code>2007-10-02T21:26:43Z</code> and the local date and time is <code>2007-10-02T14:26:43-07:00</code> in the Pacific time zone, then the above expression returns <code>2007-10-02T16:26:43-07:00</code>
</p>
<div class="exampleInner">
<pre>xf:adjust-dateTime-to-timezone(seconds-to-dateTime(seconds-from-dateTime('2007-10-02T14:26:43-07:00') + 61*86400))
</pre>
</div>
<p>Returns <code>2007-12-02T13:26:43-08:00</code>, which is the date and time two months (61 days) from the date <code>2007-10-02T14:26:43-07:00</code> in the Pacific timezone, adjusting the result for the fact that daylight savings time no longer applies to the resultant date in the Pacific timezone. Note that the hour component is <code>13</code>, not <code>14</code> and the timezone offset is <code>-08:00</code>, not <code>-07:00</code>.
</p>
</div>
</div>
<div class="div3">
<a id="The_seconds.28.29_Function" name="The_seconds.28.29_Function"></a><h4> <span class="mw-headline">4.4.9  <span id="fn-seconds">The seconds() Function</span> </span></h4>
<p><code class="function">xf:seconds</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:decimal</code>
</p><p>This function returns a possibly fractional number of seconds, according to the following rules:
</p><p>If the string parameter represents a legal lexical <code>xsd:duration</code>, the return value is equal to the number specified in the seconds component plus 60 * the number specified in the minutes component, plus 60 * 60 * the number specified in the hours component, plus 60 * 60 * 24 * the number specified in the days component. The sign of the result will match the sign of the duration. Year and month components, if present, are ignored. Any other input parameter causes a return value of <code>NaN</code>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Even though this function is defined based on a lexical <code>xsd:duration</code>, it is intended for use only with derived-from-<code>xsd:duration</code> datatypes, specifically <code>xforms:dayTimeDuration</code>.
</p>
</div>
<p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:seconds("P3DT10H30M1.5S")
</pre>
</div>
<p>returns <code>297001.5</code> (3 days, 10 hours, 30 minutes, and 1.5 seconds)
</p>
<div class="exampleInner">
<pre>xf:seconds("P1Y2M")
</pre>
</div>
<p>returns <code>0</code> because the year and month parts of the duration are ignored and the remaining portions are unspecified and default to 0
</p>
<div class="exampleInner">
<pre>xf:seconds("3")
</pre>
</div>
<p>returns <code>NaN</code> because the parameter is not a lexically valid duration
</p>
</div>
</div>
<div class="div3">
<a id="The_months.28.29_Function" name="The_months.28.29_Function"></a><h4> <span class="mw-headline">4.4.10  <span id="fn-months">The months() Function</span> </span></h4>
<p><code class="function">xf:months</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">xs:integer</code>
</p><p>This function returns a whole number of months, according to the following rules:
</p><p>If the string parameter represents a legal lexical <code>xsd:duration</code>, the return value is equal to the number specified in the months component plus 12 * the number specified in the years component. The sign of the result will match the sign of the duration. Day, hour, minute, and second components, if present, are ignored. Any other input parameter causes a return value of <code>NaN</code>.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>Even though this function is defined based on a lexical <code>xsd:duration</code>, it is intended for use only with derived-from-<code>xsd:duration</code> datatypes, specifically <code>xforms:yearMonthDuration</code>.
</p>
</div>
<p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:months("P1Y2M")
</pre>
</div>
<p>returns <code>14</code> (1 year and 2 months)
</p>
<div class="exampleInner">
<pre>xf:months("-P19M")
</pre>
</div>
<p>returns <code>-19</code> because the duration is negative and expresses 0 years and 19 months
</p>
</div>
</div>
</div>
<div class="div2">
<a id="Node-set_Functions" name="Node-set_Functions"></a><h3> <span class="mw-headline">4.5  <span id="expr-lib-nodeset">Node-set Functions</span> </span></h3>
<div class="div3">
<a id="The_instance.28.29_Function" name="The_instance.28.29_Function"></a><h4> <span class="mw-headline">4.5.1  <span id="fn-instance">The instance() Function</span> </span></h4>
<p><code class="function">xf:instance</code>(<code class="arg">$id</code><code class="as"> as </code><code class="type">xs:string?</code>)<code class="as"> as </code><code class="return-type">element()?</code>
</p><p>An XForms Model can contain more than one instance. This function allows access to instance data, within the same XForms Model, but outside the instance data containing the context node.
</p><p>If the argument is omitted or is equal to the empty string, then the root element node (also called the document element node) is returned for the default instance of the current model. The current model, is the model that contains the node of the nearest inscope evaluation context that is a node (starting from the evaluation context of the the node containing the XPath expression that invokes this function).
</p><p>Otherwise, the argument is converted to a string as if by a call to the <code>string</code> function. This string is treated as an IDREF, which is matched against <code>instance</code> elements in the containing document. If a match is located, and the matching instance data is associated with the same XForms Model as the current model, this function returns the root element node (also called the document element node) of the referenced instance data. In all other cases, an empty sequence is returned.
</p><p>Example:
</p><p>For instance data corresponding to this XML:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>&lt;xforms:instance xmlns="" id="orderform"&gt;
  &lt;orderForm&gt;
    &lt;shipTo&gt;
      &lt;firstName&gt;John&lt;/firstName&gt;
    &lt;/shipTo&gt;
  &lt;/orderForm&gt;
&lt;/xforms:instance&gt;
</pre>
</div>
</div>
<p>The following expression selects the <code>firstName</code> node. Note that the <code>instance</code> function returns an element node, effectively replacing the leftmost location step from the path:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>ref="xf:instance('orderform')/shipTo/firstName"
</pre>
</div>
</div>
</div>
<div class="div3">
<a id="The_current.28.29_Function" name="The_current.28.29_Function"></a><h4> <span class="mw-headline">4.5.2  <span id="fn-current">The current() Function</span> </span></h4>
<p><code class="function">xf:current</code>()<code class="as"> as </code><code class="return-type">item()</code>
</p><p>Returns the <a class="external text" href="http://www.w3.org/TR/xpath20/#dt-context-item" rel="nofollow" title="http://www.w3.org/TR/xpath20/#dt-context-item">context item</a><sup><small>XP</small></sup> used to initialize the evaluation of the containing XPath expression.
</p><p>Examples:
</p>
<div class="exampleOuter">
<p>For the following instance data:
</p>
<div class="exampleInner">
<pre>&lt;xforms:instance xmlns=""&gt;
   &lt;converter&gt;
      &lt;amount&gt;100&lt;/amount&gt;
      &lt;currency&gt;jpy&lt;/currency&gt;
      &lt;convertedAmount&gt;&lt;/convertedAmount&gt;
   &lt;/converter&gt;
&lt;/xforms:instance&gt;

&lt;xforms:instance xmlns="" id="convTable"&gt;
   &lt;convTable date="20040212" currency="cdn"&gt;
      &lt;rate currency="eur"&gt;0.59376&lt;/rate&gt;
      &lt;rate currency="mxn"&gt;8.37597&lt;/rate&gt;
      &lt;rate currency="jpy"&gt;80.23451&lt;/rate&gt;
      &lt;rate currency="usd"&gt;0.76138&lt;/rate&gt;
   &lt;/convTable&gt;
&lt;/xforms:instance&gt;
</pre>
</div>
<p>and the following value calculation bind:
</p>
<div class="exampleInner">
<pre>&lt;bind nodeset="convertedAmount"
      calculate="../amount *
                 xf:instance('convTable')/rate[@currency=xf:current()/../currency]"/&gt;
</pre>
</div>
<p>the content value of <code>/converter/convertedAmount</code> is the product of <code>/converter/amount</code> and the conversion table rate given by the <code>rate</code> element whose <code>currency</code> attribute value matches the content of <code>/converter/currency</code>.
</p>
</div>
<div class="exampleOuter">
<p>For the following instance data:
</p>
<div class="exampleInner">
<pre>&lt;xforms:instance xmlns="" id="i1"&gt;
   &lt;months&gt;
      &lt;mon&gt;01&lt;/mon&gt;
      &lt;mon&gt;02&lt;/mon&gt;
      &lt;mon&gt;03&lt;/mon&gt;
   &lt;/months&gt;
&lt;/xforms:instance&gt;
&lt;xforms:instance xmlns="" id="i2"&gt;
   &lt;months&gt;
      &lt;month code="01"&gt;Jan&lt;/month&gt;
      &lt;month code="02"&gt;Feb&lt;/month&gt;
      &lt;month code="03"&gt;Mar&lt;/month&gt;
   &lt;/months&gt;
&lt;/xforms:instance&gt;
</pre>
</div>
<p>and the following repeat structure:
</p>
<div class="exampleInner">
<pre>&lt;repeat nodeset="mon"&gt;
   &lt;output value="xf:instance('i2')/month[@code = xf:current()]/&gt;
&lt;/repeat&gt;

</pre>
</div>
<p>the output should contain <code>Jan Feb Mar</code>.
</p>
</div>
</div>
<div class="div3">
<a id="The_id.28.29_Function" name="The_id.28.29_Function"></a><h4> <span class="mw-headline">4.5.3  <span id="fn-id">The id() Function</span> </span></h4>
<p><code class="function">xf:id</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:string*</code>, <code class="arg">$node</code><code class="as"> as </code><code class="type">node()*?</code>)<code class="as"> as </code><code class="return-type">element()*</code>
</p><p><code class="function">xf:id</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">node()*</code>, <code class="arg">$node</code><code class="as"> as </code><code class="type">node()*?</code>)<code class="as"> as </code><code class="return-type">element()*</code>
</p><p>The first parameter provides one or more IDREFs. This may be in the form of a string containing a space-separated list of IDREFs or a sequence of nodes, each node of which contains an IDREF. The second parameter provides nodes in one or more instance data documents to be searched. If the second parameter is not given or is empty, then the instance data document to be searched is the one containing the context node of the function call (if the context item isn't a node and second parameter isn't provided or is the empty sequence an error is raised). For each node in the second parameter (or its default), the set of element nodes are collected with IDs that match the IDREFs from the first parameter. The result of this function is a sequence of elements, in document order with duplicates eliminated, containing the union of the collected element nodes from each string. An element node can be assigned an ID by means of an <code>xml:id</code> attribute or an attribute that is assigned the type ID by a DTD or xsd:ID or any type derived from xsd:ID by an XML schema, or the <code>type</code> model item property.
</p><p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:id('X Y', instance('Z'))
</pre>
</div>
<p>Returns nodes identified by X or Y from the instance data document associated with the root element of the <code>instance</code> identified by Z.
</p>
</div>
<div class="note">
<p><b>Note:</b>
</p><p>This function is depricated because it behaves the same as the fn:id() function defined in <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a> and we recomend using fn:id().
</p>
</div>
<div class="note">
<p><b>Note:</b>
</p><p>When an ID is assigned to a attribute by asigning any type derived from xsd:ID by an XML schema, or the <code>type</code> model item property that inform the ID type information is provided to the XPath data model. And consequently the is-id accessor will return <code>true</code>.
</p>
</div>
</div>
<div class="div3">
<a id="The_context.28.29_Function" name="The_context.28.29_Function"></a><h4> <span class="mw-headline">4.5.4  <span id="fn-context">The context() Function</span> </span></h4>
<p><code class="function">xf:context</code>($id as xs:string?)<code class="as"> as </code><code class="return-type">item()</code>
</p><p>This function returns the in-scope evaluation context item of an ancestor element of the node containing the XPath expression that invokes this function. The ancestor element is determined using the <code>id</code> parameter, taking into account <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#idref-resolve" title="XForms 2.0">Resolving ID References in XForms</a><sup><small>XF</small></sup>. When the <code>id</code> parameter is omitted, the nearest ancestor element is used for determining the in-scopre evaluation context item to return. The ancestor element may have been created dynamically as part of the run-time expansion of repeated content as described in Section <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#idref-resolve" title="XForms 2.0">Resolving ID References in XForms</a><sup><small>XF</small></sup>.
</p><p>It is an error to specify a non existing id or an id of an element that isn't an ancestor.
</p>
<div class="note"><div class="prefix"><b>Note:</b></div><p>If the resolved element isn't a binding element, see <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#Evaluation_Context" title="XForms 2.0">Evaluation Context</a><sup><small>XF</small></sup> for obtaining the evaluation context for non binding elements.</p></div> 
<p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>&lt;setvalue ref="x" value="xf:context()/y"/&gt;
</pre>
</div>
<p>This action sets node <code>x</code> to the value of node <code>y</code>, where both nodes are children of the in-scope evaluation context node for the <code>setvalue</code> element.
</p>
</div>
<div class="note"><div class="prefix"><b>Note:</b></div><p>An intended use of this function is in conjunction with the <code>repeat</code> element (Section <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#ui-repeat" title="XForms 2.0">The repeat Element</a><sup><small>XF</small></sup> and the <code>setvalue</code> action element (Section <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#action-setvalue" title="XForms 2.0">The setvalue Element</a><sup><small>XF</small></sup>). The intent is to provide form authors with a means of expressing a <code>value</code> attribute that is relative to the repeat context node when the Single Node Binding result is not.</p></div>
</div>
</div>
<div class="div2">
<a id="Node_Creation_Functions" name="Node_Creation_Functions"></a><h3> <span class="mw-headline">4.6  <span id="expr-lib-node-creation-functions">Node Creation Functions</span></span></h3>
<div class="div3">
<a id="The_element.28.29_Function" name="The_element.28.29_Function"></a><h4> <span class="mw-headline">4.6.1  <span id="fn-element">The element() Function</span> </span></h4>
<p><code class="function">xf:element</code>(<code class="arg">$qname</code><code class="as"> as </code><code class="type">xs:anyAtomicType</code>, <code class="arg">$content</code><code class="as"> as </code><code class="type">item()*</code>)<code class="as"> as </code><code class="return-type">element()</code>
</p><p>This function returns a new XML element with the qualified name provided. If the qualified name is not of type xs:QName the namespace of the element is resolved using the in-scope namespaces (the in-scope default namespace is used for qualified names that are unprefixed). The content argument is a sequence of items specifying attributes and content for the new element.
</p><p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:element('value')
</pre>
</div>
<p>Returns an empty element called "value" (in serialized form the result is &lt;value/&gt;).
</p>
<div class="exampleInner">
<pre>xf:element('value', (xf:attribute('id', 'my-value'), 'John'))
</pre>
</div>
<p>Returns an element called "value" with an attribute "id" and text content "John" (in serialized form the result is &lt;value id="my-value"&gt;John&lt;/value&gt;).
</p>
<div class="exampleInner">
<pre>xf:element('value', ('John', xf:attribute('id', 'my-value')))
</pre>
</div>
<p>This example illustrates that the attributes may be specified after the content of the element. The result is the same as the previous example (an element called "value" with an attribute "id" and text content "John").
</p>
</div>
</div>
<div class="div3">
<a id="The_attribute.28.29_Function" name="The_attribute.28.29_Function"></a><h4> <span class="mw-headline">4.6.2  <span id="fn-attribute">The attribute() Function</span> </span></h4>
<p><code class="function">xf:attribute</code>(<code class="arg">$qname</code><code class="as"> as </code><code class="type">xs:anyAtomicType</code>, <code class="arg">$value</code><code class="as"> as </code><code class="type">xs:anyAtomicType?</code>)<code class="as"> as </code><code class="return-type">attribute()</code>
</p><p>This function returns a new XML attribute with the qualified name provided as first argument. If the qualified name is not of type xs:QName the namespace of the element is resolved using the in-scope namespaces (the in-scope default namespace is used for qualified names that are unprefixed). The second argument is an optional value for the attribute with the empty string as default.
</p><p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:attribute('id', 'first-name')
</pre>
</div>
<p>Returns an attribute called "id" with a value of "first-name".
</p>
</div>
</div>
<p><br />
</p>
<div class="div3">
<a id="The_parse.28.29_Function" name="The_parse.28.29_Function"></a><h4> <span class="mw-headline">4.6.3  <span id="fn-parse">The parse() Function</span> </span></h4>
<p><code class="function">xf:parse</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">element()?</code>
</p><p><code class="function">xf:parse</code>(<code class="arg">$arg</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$format</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">element()?</code>
</p><p>This function takes as input a document represented as a string in $arg, and returns the XML document element node for the parsed document. The default if the $format is not specified, the XML 1.0 parsing is used. If $arg is the empty sequence or is not well-formed according to the $format parsing rules, the function returns the empty sequence.  
</p><p>The $format is a space-separated list of QNames intended to control various features of parsing, such as the grammar and grammatic variations, as well as allowing namespace qualified custom extensions.
</p>
<table border="1" summary="The $format specifiers of the xf:parse() function">
<tbody><tr>
<th colspan="1" rowspan="1"> Token
</th><th colspan="1" rowspan="1"> Meaning
</th></tr>
<tr>
<td colspan="1" rowspan="1"> <code>xml</code>
</td><td colspan="1" rowspan="1"> Parse input as XML 1.0
</td></tr>
<tr>
<td colspan="1" rowspan="1"> <code>json</code>
</td><td colspan="1" rowspan="1"> Parse input as JSON data
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p>Any other <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>
</p>
</td><td colspan="1" rowspan="1">
<p>Reserved. Their use results in an exception (see <a href="#expr-lib" title=""> <b>4 The XForms Function Library</b></a> for the exception type)
</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p><a href="#def-QNameButNotNCName" title=""> QNameButNotNCName</a>
</p>
</td><td colspan="1" rowspan="1"> An implementation-specific parser. If the implementation does not support the parser, then the empty sequence is returned.
</td></tr></tbody></table>
<table border="1" style="background-color: yellow; border-collapse: collapse; border-width: 1px; margin: .5em" summary="Editorial note: Alternative XML parsing behaviors">
<tbody><tr>
<td align="left" valign="top" width="50%"> <b>Editorial note: Alternative XML parsing behaviors</b>
</td><td align="right" valign="top" width="50%"> 2012-04-17
</td></tr>
<tr>
<td align="left" colspan="2" valign="top"> The working group is considering how to specify alternative XML parsing behaviors, such as DTD and/or schema validation and application of a base URI for external entity reference resolution.
</td></tr></tbody></table>
<p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre> &lt;insert context="container/node" nodeset="elem" at="last()" position="after"
         origin="xf:parse('&amp;lt;elem&amp;gt; &amp;lt;a/&amp;gt; &amp;lt;b/&amp;gt; &amp;lt;/elem&amp;gt;')"/&gt;
</pre>
</div>
<p>The function returns the document element node named <code>elem</code>, which is then used as the insert origin, i.e. the source node of the copy operation.
</p>
</div>
<p><b>Note:</b>
</p><p>An important use case for this function is to convert unparsed data received by a form, such as from a submission, into parsed data.
</p>
</div>
</div>
<div class="div2">
<a id="Object_Functions" name="Object_Functions"></a><h3> <span class="mw-headline">4.7  <span id="expr-lib-object">Object Functions</span> </span></h3>
<div class="div3">
<a id="The_choose.28.29_Function" name="The_choose.28.29_Function"></a><h4> <span class="mw-headline">4.7.1  <span id="fn-choose">The choose() Function</span> </span></h4>
<p><code class="function">xf:choose</code>(<code class="arg">$condition</code><code class="as"> as </code><code class="type">xs:boolean</code>, <code class="arg">$choice-true</code><code class="as"> as </code><code class="type">item()*</code>, <code class="arg">$choice-false</code><code class="as"> as </code><code class="type">item()*</code>)<code class="as"> as </code><code class="return-type">item()*</code>
</p><p>This function provides a conditional test that chooses an object to return based on the boolean parameter. If the boolean parameter is true, then the first object is returned, otherwise the second object is returned. Each of the object parameters can be of any XPath datatype as described in Section <a href="#Datatypes" title="">Datatypes</a>, and this function does no type conversion of the parameter it chooses to return.
</p>
<div class="note">
<p><b>Note:</b>
</p><p>All parameters of an XPath function are evaluated, so the parameter that is not returned by this function is still evaluated, and its result is discarded by this function.
</p>
</div>
<p>Example:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:choose(count(x) &gt; 0, x, y)
</pre>
</div>
<p>Returns the node-set of matching <code>x</code> if it is non-empty and the node-set matching <code>y</code> otherwise.
</p>
<div class="exampleInner">
<pre>xf:choose(@x, @x, 0)
</pre>
</div>
<p>If the context node of the function contains attribute <code>x</code>, then the nodeset containing that attribute is returned. Otherwise, the number <code>0</code> is returned.
</p>
</div>
</div>
<div class="div3">
<a id="The_event.28.29_Function" name="The_event.28.29_Function"></a><h4> <span class="mw-headline">4.7.2  <span id="fn-event">The event() Function</span> </span></h4>
<p><code class="function">xf:event</code>(<code class="arg">$property-name</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">item()*</code>
</p><p>Function <code>event</code> returns context specific information determined by the <i>string</i> argument. The returned context information is an XPath object whose type and content depends upon the requested property. Each event describes what properties can be accessed by this function and the type and value that will be returned as the result.
</p><p>The event context properties available on each event are:
</p>
<table border="1" summary="Event context properties">
<tbody><tr>
<th width="120pt"> Property
</th><th> Type
</th><th> Value
</th></tr>
<tr>
<td> type
</td><td> xs:string
</td><td> The name of the event.
</td></tr>
<tr>
<td> bubbles
</td><td> xs:boolean
</td><td> Indicates whether or not an event is a bubbling event. If the event can bubble the value is true, else the value is false.
</td></tr>
<tr>
<td> cancelable
</td><td> xs:boolean
</td><td> Indicates whether or not an event can have its default action prevented. If the default action can be prevented the value is true, else the value is false.
</td></tr>
<tr>
<td> targetid
</td><td> xs:string?
</td><td> The id of the target to which the event was originally dispatched.  If the target does not have an id an empty sequence is returned.
</td></tr>
<tr>
<td> current-targetid
</td><td> xs:string?
</td><td> The id of the target whose EventListeners are currently being processed.  If that target does not have an id an empty sequence is returned.
</td></tr>
<tr>
<td> event-phase
</td><td> xs:string
</td><td> The current event phase: capture, target, or bubbling (When the event arrives at the target, the value is 'target'. Values capture and bubbling are as described in XML events)
</td></tr>
<tr>
<td> time-stamp
</td><td> xs:integer?
</td><td> The time (in milliseconds relative to the epoch) at which the event was created. Due to the fact that some systems may not provide this information the value of timeStamp may be not available for all events. When not available, an empty sequence will be returned. Examples of epoch time are the time of the system start or 0:0:0 UTC 1st January 1970.
</td></tr></tbody></table>
<p>The event-specific context properties for each event type are provided in the sections that describe the events.
</p><p>This function is intended for use in the XPath expressions of XForms actions. If invoked for any other XPath expression, such as a binding expression or model item property expression, this function returns the empty string. If this function is invoked from an XPath expression for an XForms action, then event context information is used from the most recently dispatched event whose action handler contains the XForms action.
</p><p>Some properties defined for an event may be unavailable if certain prerequisite conditions were not met prior to the event being dispatched. Implementations may also add custom properties. If the event context information does not contain the property indicated by the <i>string</i> argument, then an empty node-set is returned.
</p><p>Examples:
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>xf:event('inserted-nodes')
</pre>
</div>
<p>If called from an <code>xforms-insert</code> event handler, a nodeset is returned containing the instance data node or nodes inserted.
</p>
</div>
</div>
<div class="div3">
<a id="The_eval.28.29_Function" name="The_eval.28.29_Function"></a><h4> <span class="mw-headline">4.7.3  <span id="fn-eval">The eval() Function</span> </span></h4>
<p><code class="function">xf:eval</code>(<code class="arg">$expression</code><code class="as"> as </code><code class="type">xs:string</code>)<code class="as"> as </code><code class="return-type">item()*</code>
</p><p>The function returns the result of evaluating the $expression in the context of the <code>eval()</code> function call. The expression containing the <code>eval()</code> function invocation references the XPath nodes referenced by the $expression, which introduces additional dependencies for the containing expression.
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>&lt;model&gt;
   &lt;instance xmlns=""&gt;
      &lt;data&gt;
         &lt;A&gt;3&lt;/A&gt;
         &lt;B&gt;4&lt;/B&gt;
         &lt;C value="power(../A * ../A + ../B * ../B, 0.5)"&gt;5&lt;/C&gt;
      &lt;/data&gt;
   &lt;/instance&gt;
   &lt;bind nodeset="descendant::*[@value]" calculate="xf:eval(@value)"/&gt;
&lt;/model&gt;</pre>
</div>
<p>The model above responds to changes of data elements <code>A</code> and <code>B</code> by recalculating the value of <code>C</code>. For example, if <code>A</code> and <code>B</code> are changed to <code>5</code> and <code>12</code>, then element <code>C</code> would be recalculated to the value <code>13</code>.  The model below is the same except that the expression in the value attribute is simplified due to the context change performed before the <code>eval()</code> function invocation.
</p>
<div class="exampleInner">
<pre>&lt;model&gt;
   &lt;instance xmlns=""&gt;
      &lt;data&gt;
         &lt;A&gt;3&lt;/A&gt;
         &lt;B&gt;4&lt;/B&gt;
         &lt;C value="power(A * A + B * B, 0.5)"&gt;5&lt;/C&gt;
      &lt;/data&gt;
   &lt;/instance&gt;
   &lt;bind nodeset="descendant::*[@value]" calculate="../xf:eval(current()/@value)"/&gt;
&lt;/model&gt;</pre>
</div>
</div>
</div>
<div class="div3">
<a id="The_eval-in-context.28.29_Function" name="The_eval-in-context.28.29_Function"></a><h4> <span class="mw-headline">4.7.4  <span id="fn-eval-in-context">The eval-in-context() Function</span> </span></h4>
<p><code class="function">xf:eval-in-context</code>(<code class="arg">$expression</code><code class="as"> as </code><code class="type">xs:string</code>, <code class="arg">$context</code><code class="as"> as </code><code class="type">node()*</code>)<code class="as"> as </code><code class="return-type">item()*</code>
</p><p>The function returns the result of evaluating the $expression in the $context.  The expression containing the <code>eval()</code> function invocation references the XPath nodes referenced by the $expression, which introduces additional dependencies for the containing expression.  In XPath 2.0, the <code>eval()</code> function can be invoked later in an expression, after setting the desired context, so this function is included for ease of authoring and XPath 1.0 expression compatibility.
</p>
<div class="exampleOuter">
<div class="exampleInner">
<pre>&lt;model&gt;
   &lt;instance xmlns=""&gt;
      &lt;data&gt;
         &lt;A&gt;3&lt;/A&gt;
         &lt;B&gt;4&lt;/B&gt;
         &lt;C value="power(A * A + B * B, 0.5)"&gt;5&lt;/C&gt;
      &lt;/data&gt;
   &lt;/instance&gt;
   &lt;bind nodeset="descendant::*[@value]" calculate="xf:eval-in-context(@value, ..)"/&gt;
&lt;/model&gt;</pre>
</div>
<p>The model above responds to changes of data elements <code>A</code> and <code>B</code> by recalculating the value of <code>C</code>. For example, if <code>A</code> and <code>B</code> are changed to <code>5</code> and <code>12</code>, then element <code>C</code> would be recalculated to the value <code>13</code>.  The expression in the value attribute is simplified, relative to a normal calculate expression, due to the context change provided by the second parameter.
</p>
</div>
<p><br />
</p>
</div>
</div>
<div class="div2">
<a id="Extension_Functions" name="Extension_Functions"></a><h3> <span class="mw-headline">4.8  Extension Functions</span></h3>
<p>See <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#Extension_Functions" title="XForms 2.0">Extension Functions</a><sup><small>XF</small></sup> in XForms core.
</p>
</div>
<a id="References_and_Dependencies" name="References_and_Dependencies"></a><h3> <span class="mw-headline">4.9  <span id="references-and-dependencies">References and Dependencies</span> </span></h3>
<div class="div3">
<a id="Reference_Selection" name="Reference_Selection"></a><h4> <span class="mw-headline">4.9.1  <span id="reference-selection">Reference Selection</span> </span></h4>
<p>An XPath node is referenced by an expression if it is selected. A node is selected by matching an XPath NodeTest or by being returned by a function call. For examples, a node can match a name test, a wildcard test, a node type test, or it can be returned by or used as a parameter to a function, or it can appear in a filter expression (where all of the prior examples recursively apply).
</p><p>The expression parameters of <a href="#fn-eval" title="">the eval() function</a> and <a href="#fn-eval-in-context" title="">the eval-in-context() function</a>) make references to XPath nodes and therefore introduce additional dependencies.
</p>
</div>
<div class="div3">
<a id="Additional_dependencies_for_the_computational_dependency_data_structure" name="Additional_dependencies_for_the_computational_dependency_data_structure"></a><h4> <span class="mw-headline">4.9.2  <span id="additional-references">Additional dependencies for the computational dependency data structure</span> </span></h4>
<p>The <code>index</code> (<a href="#fn-index" title="">The index() Function</a>) and <code>case</code> (<a href="#fn-case" title="">The case() Function</a>) functions introduce additional dependencies for the computational dependency data structure. Beside the normal dependencies introduced by their arguments, these functions also need addtional dependencies to ensure that automatic recalculation happens when respectively the repeat index or selected case changes.
</p><p>Implementation must behave as if each occurrence of a <code>repeat</code> is associated with an implicitly managed instance data node containing the repeat index. If a <code>repeat</code> identified as <code>R1</code> contains a <code>repeat</code> identified as <code>R2</code>, then a repeat index instance node is managed for each occurrence of <code>R2</code> that is generated by <code>R1</code>. An invocation of the function <code>index()</code> in an expression is considered to reference the repeat index instance node corresponding to the repeat index value that it returns. The same strategy should by used for the function <code>case()</code> (each occurrence of a switch is associated with an implicitly managed instance data node containing the ID of the selected case). An invocation of the function <code>case()</code> in an expression is considered to reference the switch instance node corresponding to the <code>ID</code> of the selected case that it returns. Note that if a <code>switch</code> is embedded in a <code>repeat</code> a seperate instance node (to track the ID of the selected case of the switch) should be created for every iteration in the repeat.
</p>
</div>
</div>
<div class="div2">
<a id="Error_Indications" name="Error_Indications"></a><h3> <span class="mw-headline">4.10  Error Indications</span></h3>
<p>Error indications happen as a result of unusual conditions in the XForms Processor. Some of these are "fatal" errors, which halt processing, and bear the suffix "exception". Others are simply for notification, and bear the suffix "error". For all events in this section, it is permissible for the XForms Processor to perform some kind of default handling, for example logging error messages to a file.
</p>
<div class="div3">
<a id="The_xforms-xpath-version-exception_Event" name="The_xforms-xpath-version-exception_Event"></a><h4> <span class="mw-headline">4.10.1  <span id="evt-xpathVersionException">The xforms-xpath-version-exception Event</span> </span></h4>
<p>Dispatched as an indication of failure of the XPath version checks defined in the description of the <code>xpath-version</code> attribute in Section <a href="#xpath-version-attribute" title=""> <b>2 The xpath-version attribute</b></a>.
</p><p>Target: the default <code>model</code>
</p><p>Bubbles: Yes
</p><p>Cancelable: No
</p><p>Context Info:
</p>
<table border="1" summary="Event context properties for xforms-version-exception event">
<tbody><tr>
<th colspan="1" rowspan="1"> Property
</th><th colspan="1" rowspan="1"> Type
</th><th colspan="1" rowspan="1"> Value
</th></tr>
<tr>
<td colspan="1" rowspan="1"> error-information
</td><td colspan="1" rowspan="1"> string
</td><td colspan="1" rowspan="1"> An implementation-specific error string
</td></tr></tbody></table>
<p>Default Action: Fatal error (halts processing).
</p>
<div class="note">
<p><b>Note:</b>
</p><p>This exception occurs early in processing. XForms processors are not expected to product XForms user interface elements nor even execute XForms action handlers (such as a <code>message</code> action) in response to this event. This exception is dispatched for the benefit of implementation-specific processing code that may be monitoring the behavior of an XForms processor.
</p>
</div></div></div></div><div class="div1">
<a id="Reserved_Namespaces" name="Reserved_Namespaces"></a><h2> <span class="mw-headline">5  Reserved Namespaces</span></h2>
<p>[Definition: Definition: The XForms namespace, together with certain other namespaces recognized by an XForms processor, are classified as reserved namespaces and must be used only as specified in this and related specifications.] The reserved namespaces are those listed below. 
</p>
<ul><li> [Definition: The <b>XForms namespace</b>, described in <a href="http://www.w3.org/TR/2012/WD-xforms20-20120807/#structure-namespace" title="XForms 2.0">Namespace for XForms</a><sup><small>XP</small></sup>, is reserved.]
</li><li> [Definition: The <b>xforms function namespace</b> <code><a class="external free" href="http://www.w3.org/2002/xforms" rel="nofollow" title="http://www.w3.org/2002/xforms">http://www.w3.org/2002/xforms</a></code> is used for xforms extension functions defined in this specification.]
</li><li> [Definition: The <b>standard function namespace</b> <code><a class="external free" href="http://www.w3.org/2005/xpath-functions" rel="nofollow" title="http://www.w3.org/2005/xpath-functions">http://www.w3.org/2005/xpath-functions</a></code> is used for functions in the function library defined in <a href="#ref-xpath-functions" title=""> [Functions and Operators]</a>.]
</li></ul>
</div><div class="div1">
<a id="Glossary_Of_Terms" name="Glossary_Of_Terms"></a><h2> <span class="mw-headline">6  <span id="terms">Glossary Of Terms</span> </span></h2>
<dl><dt> Binding expression
</dt><dd> [Definition: An <a href="#ref-xpath-2.0" title=""> [XPath 2.0]</a> expression used in a binding.]
</dd><dt> QNameButNotNCName
</dt><dd> [Definition: A <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-QName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-QName">QName</a> that is not an <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>. In 2006, the W3C named this a <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-PrefixedName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-PrefixedName">PrefixedName</a>. ]
</dd><dt> XPath 1.0 compatibility mode
</dt><dd> [Definition: The term XPath 1.0 compatibility mode is defined in <a class="external text" href="http://www.w3.org/TR/xpath20/#static_context" rel="nofollow" title="http://www.w3.org/TR/xpath20/#static_context">Section 2.1.1 Static Context</a><sup><small>XP</small></sup>. This is a setting in the static context of an XPath expression; it has two values, <code>true</code> and <code>false</code>. When the value is set to true, the semantics of function calls and certain other operations are adjusted to give a greater degree of backwards compatibility between XPath 2.0 and XPath 1.0.]
</dd></dl>
</div><div class="div1">
<a id="References" name="References"></a><h2> <span class="mw-headline">7 References</span></h2>
<div class="div2">
<a id="Normative_References" name="Normative_References"></a><h3> <span class="mw-headline">7.1 Normative References</span></h3>
<dl><dt> HMAC
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2104.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2104.txt"><cite id="ref-hmac">RFC 2104 - HMAC: Keyed-Hashing for Message Authentication</cite></a>, H. Krawczyk, M. Bellare, R. Canetti, 1997. Available at <a class="external free" href="http://www.ietf.org/rfc/rfc2104.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2104.txt">http://www.ietf.org/rfc/rfc2104.txt</a>
</dd><dt> <a class="external" href="http://tools.ietf.org/html/rfc2119" title="http://tools.ietf.org/html/rfc2119">RFC 2119</a>
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc2119.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2119.txt"><cite id="ref-rfc-2119">RFC 2119: Key words for use in RFCs to Indicate Requirement Levels</cite></a>, S. Bradner, 1997. Available at <a class="external free" href="http://www.ietf.org/rfc/rfc2119.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>.
</dd><dt> SHA2
</dt><dd> <a class="external text" href="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf" rel="nofollow" title="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf"><cite id="ref-sha2">SECURE HASH STANDARD. FIPS PUB 180-2</cite></a>, August 2002. Available at <a class="external free" href="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf" rel="nofollow" title="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf">http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf</a>
</dd><dt> XML Events
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2003/REC-xml-events-20031014/" rel="nofollow" title="http://www.w3.org/TR/2003/REC-xml-events-20031014/"><cite id="ref-xml-events">XML Events - An events syntax for XML</cite></a>, Steven Pemberton, T. V. Raman, Shane P. McCarron, 2003. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2003/REC-xml-events-20031014/" rel="nofollow" title="http://www.w3.org/TR/2003/REC-xml-events-20031014/">http://www.w3.org/TR/2003/REC-xml-events-20031014/</a>.
</dd><dt> XHTML 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2002/REC-xhtml1-20020801/" rel="nofollow" title="http://www.w3.org/TR/2002/REC-xhtml1-20020801/"><cite id="ref-xhtml-1.0">XHTML 1.0: The Extensible HyperText Markup Language - A Reformulation of HTML 4 in XML 1.0</cite></a>, Steven Pemberton, et al., 2002. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2002/REC-xhtml1-20020801/" rel="nofollow" title="http://www.w3.org/TR/2002/REC-xhtml1-20020801/">http://www.w3.org/TR/2002/REC-xhtml1-20020801/</a>.
</dd><dt> XHTML Modularization
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008" rel="nofollow" title="http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008"><cite id="ref-xhtml-mod">XHTML Modularization 1.1</cite></a>, D. Austin, S. Peruvemba, S. McCarron, M. Ishikawa, M. Birbeck, 2008. W3C Recommendation available at <a class="external free" href="http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008" rel="nofollow" title="http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008">http://www.w3.org/TR/2008/REC-xhtml-modularization-20081008</a>.
</dd><dt> XPath 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/1999/REC-xpath-19991116/" rel="nofollow" title="http://www.w3.org/TR/1999/REC-xpath-19991116/"><cite id="ref-xpath-1.0">XML Path Language (XPath) Version 1.0</cite></a>, James Clark, Steve DeRose, 1999. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/1999/REC-xpath-19991116/" rel="nofollow" title="http://www.w3.org/TR/1999/REC-xpath-19991116/">http://www.w3.org/TR/1999/REC-xpath-19991116/</a>.
</dd><dt> XPath 2.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2007/REC-xpath20-20070123/" rel="nofollow" title="http://www.w3.org/TR/2007/REC-xpath20-20070123/"><cite id="ref-xpath-2.0">XML Path Language (XPath) 2.0</cite></a>, Anders Berglund, Scott Boag, Don Chamberlin, Mary F. Fern&aacute;ndez, Michael Kay, Jonathan Robie, and J&eacute;r&ocirc;me Sim&eacute;on, 2007. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2007/REC-xpath20-20070123/" rel="nofollow" title="http://www.w3.org/TR/2007/REC-xpath20-20070123/">http://www.w3.org/TR/2007/REC-xpath20-20070123/</a>.
</dd><dt> Functions and Operators
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2007/REC-xpath-functions-20070123/" rel="nofollow" title="http://www.w3.org/TR/2007/REC-xpath-functions-20070123/"><cite id="ref-xpath-functions">XQuery 1.0 and XPath 2.0 Functions and Operators</cite></a>, Ashok Malhotra, Jim Melton, and Norman Walsh, Editors. World Wide Web Consortium, 23 Jan 2007.
</dd><dt> Luhn Patent
</dt><dd> <cite id="ref-luhn">Computer for Verifying Numbers</cite>, H. P. Luhn, U.S. Patent 2,950,048, 1960.
</dd><dt> MD5
</dt><dd> <a class="external text" href="http://www.ietf.org/rfc/rfc1321.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc1321.txt"><cite id="ref-md5">RFC 1321: The MD5 Message-Digest Algorithm</cite></a>, R. Rivest, 1992. Available at <a class="external free" href="http://www.ietf.org/rfc/rfc1321.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc1321.txt">http://www.ietf.org/rfc/rfc1321.txt</a>
</dd><dt> XML 1.0
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2008/REC-xml-20081126/" rel="nofollow" title="http://www.w3.org/TR/2008/REC-xml-20081126/"><cite id="ref-xml-1.0">XML 1.0</cite></a>, Extensible Markup Language (XML) 1.0 (Fourth Edition), Tim Bray, Jean Paoli, C. M. Sperberg-McQueen, Eve Maler, 2008. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2008/REC-xml-20081126/" rel="nofollow" title="http://www.w3.org/TR/2008/REC-xml-20081126/">http://www.w3.org/TR/2008/REC-xml-20081126/</a>.
</dd><dt> XML 1.1
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2006/REC-xml11-20060816/" rel="nofollow" title="http://www.w3.org/TR/2006/REC-xml11-20060816/"><cite id="ref-xml-1.1">XML 1.1</cite></a>, Extensible Markup Language (XML) 1.1 (Second Edition), Tim Bray, Jean Paoli, C. M. Sperberg-McQueen, Eve Maler, Fran&ccedil;ois Yergeau, John Cowan, 2006. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2006/REC-xml11-20060816/" rel="nofollow" title="http://www.w3.org/TR/2006/REC-xml11-20060816/">http://www.w3.org/TR/2006/REC-xml11-20060816/</a>.
</dd><dt> XML Schema part 1
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/"><cite id="ref-xschema-1">XML Schema Part 1: Structures</cite></a>, Henry S. Thompson, David Beech, Murray Maloney, Noah Mendelsohn, 2004. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/</a>.
</dd><dt> XML Schema part 2
</dt><dd> <a class="external text" href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/"><cite id="ref-xschema-2">XML Schema Part 2: Datatypes</cite></a>, Paul V. Biron, Ashok Malhotra, 2004. W3C Recommendation available at: <a class="external free" href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/" rel="nofollow" title="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/</a>.
</dd><dt> Unicode Collation Algorithm
</dt><dd> <a class="external text" href="http://www.unicode.org/unicode/reports/tr10/" rel="nofollow" title="http://www.unicode.org/unicode/reports/tr10/"><cite id="ref-unicode-collation">Unicode Technical Standard #10, Unicode Collation Algorithm</cite></a>, Available at: <a class="external free" href="http://www.unicode.org/unicode/reports/tr10/" rel="nofollow" title="http://www.unicode.org/unicode/reports/tr10/">http://www.unicode.org/unicode/reports/tr10/</a>.
</dd><dt> <span id="def-QNameButNotNCName">QNameButNotNCName</span>
</dt><dd> [Definition: A <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-QName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-QName">QName</a> that is not an <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-NCName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>. In 2006, the W3C named this a <a class="external text" href="http://www.w3.org/TR/REC-xml-names/#NT-PrefixedName" rel="nofollow" title="http://www.w3.org/TR/REC-xml-names/#NT-PrefixedName">PrefixedName</a>. ]
</dd></dl>
</div><div class="div2">
<a id="Informative_References" name="Informative_References"></a><h3> <span class="mw-headline">7.2 Informative References</span></h3>
<dl><dt> EXSLT
</dt><dd> <a class="external text" href="http://www.exslt.org" rel="nofollow" title="http://www.exslt.org"><cite>EXSLT Web site</cite></a>. Available at <a class="external free" href="http://www.exslt.org" rel="nofollow" title="http://www.exslt.org">http://www.exslt.org</a>.
</dd></dl>
</div></div><div class="div1">
<p><br />
</p>
<a id="Acknowledgements_.28Non-Normative.29" name="Acknowledgements_.28Non-Normative.29"></a><h2> <span class="mw-headline">8 Acknowledgements (Non-Normative)</span></h2>
<p>This document was produced with the participation of Forms Working Group participants, including:
</p>
<ul><li> John M. Boyer, IBM (Editor, Chair until March 2010)
</li><li> Erik Bruchez, Orbeon
</li><li> Kurt Cagle, Invited expert
</li><li> Alain Couthures, Invited expert
</li><li> Philip Fennell, MarkLogic
</li><li> Leigh L. Klotz, Jr., Xerox Corporation (Editor until March 2012, Co-chair until March 2012)
</li><li> Ulrich Nicolas Liss&Atilde;&copy;, DreamLab
</li><li> Dan McCreary, Invited expert
</li><li> Steven Pemberton, CWI (Chair)
</li><li> T.V. Raman, Google
</li><li> Sebastian Schnitzenbaumer
</li><li> Nick Van den Bleeken, Inventive Designers n.v. (Editor)
</li><li> Alessandro Vernet, Orbeon
</li><li> Charles Wiecha, IBM
</li></ul>
<a id="Production_Notes_.28Non-Normative.29" name="Production_Notes_.28Non-Normative.29"></a><h2> <span class="mw-headline">9  Production Notes (Non-Normative)</span></h2>
<p>This document was encoded in the XMLspec DTD v2.6. The XML sources were transformed using diffspec and xmlspec stylesheets, version 2.6. The XML Schema portion of the Appendix was rendered into HTML with the <a class="external text" href="http://www.informatik.hu-berlin.de/~obecker/XSLT/" rel="nofollow" title="http://www.informatik.hu-berlin.de/~obecker/XSLT/">xmlverbatim XSLT</a> stylesheet (used with permission). The primary tool used for editing was XMLSpy. The XML was transformed using the XSLT processor in Java 6. The editor(s) use the W3C CVS repository and the W3C IRC server for collaborative authoring.
</p>
</div>


</body>
</html>